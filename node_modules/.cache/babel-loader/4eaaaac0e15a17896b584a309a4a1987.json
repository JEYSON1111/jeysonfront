{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\components\\upload\\upload.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\components\\upload\\upload.vue","mtime":1712682815207},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\babel.config.js","mtime":1712682813877},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\.babelrc","mtime":1712682813750},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/laragon/www/PRY_NEW_JEYSON/LOCAL/plataformaprolipa_vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport Vue from 'vue';\nimport axios from 'axios';\nimport vue2Dropzone from 'vue2-dropzone';\nimport 'vue2-dropzone/dist/vue2Dropzone.min.css';\nexport default {\n  components: {\n    vueDropzone: vue2Dropzone\n  },\n  props: {\n    id: Number,\n    name: String\n  },\n  data: function data() {\n    return {\n      file: [],\n      dropzoneOptions: {\n        url: this.$data_url + 'api/setContenido',\n        dictDefaultMessage: \"<i class='fa fa-cloud-upload'></i> Click o arrastra un archivo aquí.\",\n        chunking: true,\n        thumbnailWidth: 150,\n        maxFilesize: 200.5,\n        addRemoveLinks: true,\n        headers: {\n          \"My-Awesome-Header\": \"header value\"\n        },\n        init: function init() {\n          this.on(\"success\", function (file, responseText) {\n            localStorage.setItem('imagenContenido', responseText.url);\n          });\n        }\n      },\n      errors: [],\n      arch: {},\n      idplanificacion: '',\n      usuario: []\n    };\n  },\n  mounted: function mounted() {\n    this.usuario = JSON.parse(localStorage.getItem(\"usuario\"));\n    if (this.name) {\n      console.log(this.name);\n      this.arch.nombre = this.name;\n      this.arch.file_ext = '.doc';\n    }\n    if (this.id) {\n      console.log(this.id);\n      this.idplanificacion = this.id;\n    }\n  },\n  computed: {\n    get_ext_img: function get_ext_img() {\n      return function (ext) {\n        if (ext === 'doc') return require('@/assets/images/file-icons/doc.png');else if (ext === 'jpg') return require('@/assets/images/file-icons/jpg.png');else if (ext === 'xls') return require('@/assets/images/file-icons/xls.png');else if (ext === 'pdf') return require('@/assets/images/file-icons/pdf.png');else return require('@/assets/images/file-icons/doc.png');\n      };\n    }\n  },\n  methods: {\n    successUpload: function successUpload() {\n      this.$vs.notify({\n        color: 'success',\n        title: 'Upload Success',\n        text: 'Lorem ipsum dolor sit amet, consectetur'\n      });\n    },\n    onUploadProgress: function onUploadProgress(uploadEvent) {\n      var pocentaje = Math.round(uploadEvent.loaded / uploadEvent.total * 100);\n      console.log(pocentaje);\n    },\n    quitarArchivo: function () {\n      var _quitarArchivo = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var me;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              me = this;\n              this.arch = {};\n              me.eliminarArchivo();\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function quitarArchivo() {\n        return _quitarArchivo.apply(this, arguments);\n      }\n      return quitarArchivo;\n    }(),\n    eliminarArchivo: function () {\n      var _eliminarArchivo = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var me, formData;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              me = this;\n              formData = new FormData();\n              formData.append('imagenContenido', localStorage.imagenContenido);\n              formData.append('imagenPlanificacion', localStorage.imagenPlanificacion);\n              formData.append('idplanificacion', localStorage.idplanificacion);\n              axios.post(this.$data_url + 'api/eliminarPlanificacion', formData, this.onUploadProgress).then(function (response) {\n                me.idplanificacion = \"\";\n              }).catch(function (error) {\n                me.$vs.loading.close();\n              });\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function eliminarArchivo() {\n        return _eliminarArchivo.apply(this, arguments);\n      }\n      return eliminarArchivo;\n    }(),\n    guardar: function () {\n      var _guardar = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(file) {\n        var me, formData;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              me = this;\n              me.$vs.loading({\n                color: '#046AE7'\n              });\n              formData = new FormData();\n              formData.append('archivo', file);\n              formData.append('usuario', me.usuario.idusuario);\n              if (me.idplanificacion) {\n                formData.append('idplanificacion', me.idplanificacion);\n              }\n              axios.post(this.$data_url + 'api/setPlanificacion', formData, this.onUploadProgress).then(function (response) {\n                me.arch = response.data;\n                localStorage.setItem('idplanificacion', response.data.idplanificacion);\n                localStorage.setItem('imagenPlanificacion', response.data.url);\n                localStorage.setItem('nombrePlanificacion', response.data.nombre);\n                me.idplanificacion = response.data.idplanificacion;\n                me.$refs.dropzone.removeAllFiles();\n                me.$vs.loading.close();\n                me.setButton = false;\n                me.$emit('file', response.data);\n              }).catch(function (error) {\n                me.$vs.loading.close();\n              });\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function guardar(_x) {\n        return _guardar.apply(this, arguments);\n      }\n      return guardar;\n    }()\n  }\n};",{"version":3,"names":["Vue","axios","vue2Dropzone","components","vueDropzone","props","id","Number","name","String","data","file","dropzoneOptions","url","$data_url","dictDefaultMessage","chunking","thumbnailWidth","maxFilesize","addRemoveLinks","headers","init","on","responseText","localStorage","setItem","errors","arch","idplanificacion","usuario","mounted","JSON","parse","getItem","console","log","nombre","file_ext","computed","get_ext_img","ext","require","methods","successUpload","$vs","notify","color","title","text","onUploadProgress","uploadEvent","pocentaje","Math","round","loaded","total","quitarArchivo","_quitarArchivo","_asyncToGenerator","regeneratorRuntime","mark","_callee","me","wrap","_callee$","_context","prev","next","eliminarArchivo","stop","apply","arguments","_eliminarArchivo","_callee2","formData","_callee2$","_context2","FormData","append","imagenContenido","imagenPlanificacion","post","then","response","catch","error","loading","close","guardar","_guardar","_callee3","_callee3$","_context3","idusuario","$refs","dropzone","removeAllFiles","setButton","$emit","_x"],"sources":["src/components/upload/upload.vue"],"sourcesContent":["<template>\r\n<div>\r\n    <div class=\"m-4 w-full\">\r\n        <template v-if=\"!arch.nombre\">\r\n            <vue-dropzone class=\"vx-card\" ref=\"dropzone\" id=\"drop1\" @vdropzone-complete=\"guardar\" :options=\"dropzoneOptions\"></vue-dropzone>\r\n        </template>\r\n        <img v-if=\"arch.nombre\" :src=\"get_ext_img(arch.file_ext)\" :alt=\"arch.nombre\" style=\"witch:70px\" class=\"mt-4\">\r\n        <p>\r\n            {{arch.nombre}}\r\n        </p>\r\n        <vs-button v-if=\"arch.nombre\" @click=\"quitarArchivo()\" size=\"small\">Cambiar archivo</vs-button>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport vue2Dropzone from 'vue2-dropzone'\r\nimport 'vue2-dropzone/dist/vue2Dropzone.min.css'\r\nexport default {\r\n    components: {\r\n        vueDropzone: vue2Dropzone,\r\n    },\r\n    props:{\r\n        id:Number,\r\n        name:String,\r\n    },\r\n    data() {\r\n        return {\r\n            file: [],\r\n            dropzoneOptions: {\r\n                url: this.$data_url + 'api/setContenido',\r\n                dictDefaultMessage: \"<i class='fa fa-cloud-upload'></i> Click o arrastra un archivo aquí.\",\r\n                chunking: true,\r\n                thumbnailWidth: 150,\r\n                maxFilesize: 200.5,\r\n                addRemoveLinks: true,\r\n                headers: {\r\n                    \"My-Awesome-Header\": \"header value\"\r\n                },\r\n                init: function() {\r\n                    this.on(\"success\", function(file, responseText) {\r\n                        localStorage.setItem('imagenContenido',responseText.url)\r\n                    });\r\n                },\r\n            },\r\n            errors: [],\r\n            arch: {},\r\n            idplanificacion:'',\r\n            usuario:[],\r\n        }\r\n    },\r\n    mounted() {\r\n        this.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n        if(this.name){\r\n            console.log(this.name)\r\n            this.arch.nombre = this.name\r\n            this.arch.file_ext = '.doc'\r\n        }\r\n        if(this.id){\r\n            console.log(this.id)\r\n            this.idplanificacion = this.id\r\n        }\r\n    },\r\n    computed: {\r\n        get_ext_img() {\r\n            return (ext) => {\r\n                if (ext === 'doc') return require('@/assets/images/file-icons/doc.png')\r\n                else if (ext === 'jpg') return require('@/assets/images/file-icons/jpg.png')\r\n                else if (ext === 'xls') return require('@/assets/images/file-icons/xls.png')\r\n                else if (ext === 'pdf') return require('@/assets/images/file-icons/pdf.png')\r\n                else return require('@/assets/images/file-icons/doc.png')\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        successUpload() {\r\n            this.$vs.notify({\r\n                color: 'success',\r\n                title: 'Upload Success',\r\n                text: 'Lorem ipsum dolor sit amet, consectetur'\r\n            })\r\n        },\r\n        onUploadProgress: uploadEvent => {\r\n            var pocentaje = Math.round(uploadEvent.loaded / uploadEvent.total * 100);\r\n            console.log(pocentaje)\r\n        },\r\n        async quitarArchivo() {\r\n            let me = this;\r\n            this.arch = {}\r\n            me.eliminarArchivo()\r\n        },\r\n\r\n        async eliminarArchivo() {\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('imagenContenido', localStorage.imagenContenido);\r\n            formData.append('imagenPlanificacion', localStorage.imagenPlanificacion);\r\n            formData.append('idplanificacion',localStorage.idplanificacion)\r\n            axios.post(this.$data_url + 'api/eliminarPlanificacion', formData, this.onUploadProgress)\r\n                .then(function (response) {\r\n                   me.idplanificacion = \"\"\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n\r\n        async guardar(file) {\r\n            let me = this\r\n            me.$vs.loading({\r\n                color: '#046AE7'\r\n            })\r\n            let formData = new FormData();\r\n            formData.append('archivo', file);\r\n            formData.append('usuario',me.usuario.idusuario)\r\n            if(me.idplanificacion){\r\n                formData.append('idplanificacion', me.idplanificacion);\r\n            }\r\n            axios.post(this.$data_url + 'api/setPlanificacion', formData, this.onUploadProgress)\r\n                .then(function (response) {\r\n                    me.arch = response.data;\r\n                    localStorage.setItem('idplanificacion',response.data.idplanificacion)\r\n                    localStorage.setItem('imagenPlanificacion',response.data.url)\r\n                    localStorage.setItem('nombrePlanificacion',response.data.nombre)\r\n                    me.idplanificacion = response.data.idplanificacion;\r\n                    me.$refs.dropzone.removeAllFiles();\r\n                    me.$vs.loading.close();\r\n                    me.setButton = false;\r\n                    me.$emit('file',response.data)\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-new-data-sidebar {\r\n    ::v-deep .vs-sidebar--background {\r\n        z-index: 52010;\r\n    }\r\n\r\n    ::v-deep .vs-sidebar {\r\n        z-index: 52010;\r\n        width: 60%;\r\n        max-width: 60%;\r\n\r\n        .img-upload {\r\n            margin-top: 2rem;\r\n\r\n            .con-img-upload {\r\n                padding: 0;\r\n            }\r\n\r\n            .con-input-upload {\r\n                width: 100%;\r\n                margin: 0;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.scroll-area--data-list-add-new {\r\n    // height: calc(var(--vh, 1vh) * 100 - 4.3rem);\r\n    height: calc(var(--vh, 1vh) * 100 - 16px - 45px - 82px);\r\n\r\n    &:not(.ps) {\r\n        overflow-y: auto;\r\n    }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}