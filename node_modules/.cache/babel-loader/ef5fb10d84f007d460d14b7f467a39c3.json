{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\capacitaciones\\components\\CapacitadoresComponents.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\capacitaciones\\components\\CapacitadoresComponents.vue","mtime":1712682815577},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\babel.config.js","mtime":1712682813877},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\.babelrc","mtime":1712682813750},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _toConsumableArray from \"C:/laragon/www/PRY_NEW_JEYSON/LOCAL/plataformaprolipa_vue/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es6.number.constructor\";\nexport default {\n  components: {},\n  props: {\n    capacitacionId: {\n      type: Number,\n      default: 0\n    },\n    currentCapacitadores: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    date: {\n      type: String,\n      default: ''\n    },\n    horaInicio: {\n      type: String,\n      default: ''\n    },\n    horaFin: {\n      type: String,\n      default: ''\n    },\n    handleEdit: {\n      type: Function,\n      default: function _default() {}\n    }\n  },\n  data: function data() {\n    return {\n      isLoading: true,\n      capacitadores: [],\n      selectedCapacitadores: []\n    };\n  },\n  created: function created() {\n    this.getCapacitadores();\n  },\n  methods: {\n    getCapacitadores: function getCapacitadores() {\n      var _this = this;\n      var me = this;\n      me.$http.get(\"\".concat(me.$server_url, \"capacitadores/disponibles?fecha=\").concat(me.date, \"&hora_inicio=\").concat(me.horaInicio, \"&hora_fin=\").concat(me.horaFin)).then(function (res) {\n        var _me$capacitadores;\n        (_me$capacitadores = me.capacitadores).push.apply(_me$capacitadores, _toConsumableArray(res.data));\n      }).catch(function (err) {\n        me.$vs.notify({\n          title: 'Error',\n          text: err.message,\n          color: 'danger'\n        });\n      }).finally(function () {\n        _this.isLoading = false;\n      });\n    },\n    updateSelection: function updateSelection(item, isChecked) {\n      if (this.selectedCapacitadores.includes(item)) {\n        var index = this.selectedCapacitadores.indexOf(item);\n        this.selectedCapacitadores.splice(index, 1);\n      } else {\n        this.selectedCapacitadores.push(item);\n      }\n    },\n    updateCapacitacion: function updateCapacitacion() {\n      var me = this;\n      // check if already has capacitadores\n      if (me.selectedCapacitadores.length == 0) {\n        me.$vs.notify({\n          title: 'Warning',\n          text: 'Debe seleccionar al menos un capacitador',\n          color: 'warning'\n        });\n        return;\n      }\n      console.log(me.currentCapacitadores);\n      if (me.currentCapacitadores.length > 0) {\n        this.$vs.dialog({\n          type: 'confirm',\n          color: 'danger',\n          title: \"Confirmar\",\n          text: \"\\xC9sta capacitacion ya tiene capacitadores asignados, \\xBFdesea reemplazarlos?.\\n          Si desea editar/ agregar capacitadores, presione \\\"Cancelar\\\" y luego \\\"Abrir formulario\\\"\",\n          accept: this.updateCapacitacionRequest\n        });\n      } else {\n        me.updateCapacitacionRequest();\n      }\n    },\n    updateCapacitacionRequest: function updateCapacitacionRequest() {\n      var me = this;\n      me.$http.post(\"\".concat(me.$server_url, \"capacitaciones/\").concat(me.capacitacionId, \"/capacitadores\"), {\n        capacitadores: me.selectedCapacitadores\n      }).then(function (res) {\n        me.$vs.notify({\n          title: 'Éxito',\n          text: 'Capacitadores actualizados',\n          color: 'success'\n        });\n        // Emit event to update capacitadores in parent component\n        me.$emit('update-capacitadores');\n      }).catch(function (err) {\n        me.$vs.notify({\n          title: 'Error',\n          text: err.message,\n          color: 'danger'\n        });\n      });\n    }\n  },\n  emits: ['update-capacitadores', 'edit-capacitacion']\n};",{"version":3,"names":["components","props","capacitacionId","type","Number","default","currentCapacitadores","Array","_default","date","String","horaInicio","horaFin","handleEdit","Function","data","isLoading","capacitadores","selectedCapacitadores","created","getCapacitadores","methods","_this","me","$http","get","concat","$server_url","then","res","_me$capacitadores","push","apply","_toConsumableArray","catch","err","$vs","notify","title","text","message","color","finally","updateSelection","item","isChecked","includes","index","indexOf","splice","updateCapacitacion","length","console","log","dialog","accept","updateCapacitacionRequest","post","$emit","emits"],"sources":["src/views/capacitaciones/components/CapacitadoresComponents.vue"],"sourcesContent":["<script>\r\nexport default {\r\n  components: {\r\n  },\r\n  props: {\r\n    capacitacionId: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    currentCapacitadores: {\r\n      type: Array,\r\n      default: () => ([]),\r\n    },\r\n    date: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    horaInicio: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    horaFin: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    handleEdit: {\r\n      type: Function,\r\n      default: () => { },\r\n    },\r\n  },\r\n  data: () => ({\r\n    isLoading: true,\r\n    capacitadores: [],\r\n    selectedCapacitadores: [],\r\n  }),\r\n  created() {\r\n    this.getCapacitadores();\r\n  },\r\n  methods: {\r\n    getCapacitadores() {\r\n      const me = this;\r\n      me.$http.get(`${me.$server_url}capacitadores/disponibles?fecha=${me.date}&hora_inicio=${me.horaInicio}&hora_fin=${me.horaFin}`).then((res) => {\r\n        me.capacitadores.push(...res.data);\r\n      }).catch((err) => {\r\n        me.$vs.notify({\r\n          title: 'Error',\r\n          text: err.message,\r\n          color: 'danger',\r\n        });\r\n      }).finally(() => {\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    updateSelection(item, isChecked) {\r\n      if (this.selectedCapacitadores.includes(item)) {\r\n        const index = this.selectedCapacitadores.indexOf(item);\r\n        this.selectedCapacitadores.splice(index, 1);\r\n      } else {\r\n        this.selectedCapacitadores.push(item);\r\n      }\r\n    },\r\n    updateCapacitacion() {\r\n      const me = this;\r\n      // check if already has capacitadores\r\n      if (me.selectedCapacitadores.length == 0) {\r\n        me.$vs.notify({\r\n          title: 'Warning',\r\n          text: 'Debe seleccionar al menos un capacitador',\r\n          color: 'warning',\r\n        });\r\n        return;\r\n      }\r\n\r\n      console.log(me.currentCapacitadores)\r\n\r\n      if (me.currentCapacitadores.length > 0) {\r\n        this.$vs.dialog({\r\n          type: 'confirm',\r\n          color: 'danger',\r\n          title: `Confirmar`,\r\n          text: `Ésta capacitacion ya tiene capacitadores asignados, ¿desea reemplazarlos?.\r\n          Si desea editar/ agregar capacitadores, presione \"Cancelar\" y luego \"Abrir formulario\"`,\r\n          accept: this.updateCapacitacionRequest\r\n        })\r\n      } else {\r\n        me.updateCapacitacionRequest();\r\n      }\r\n\r\n\r\n    },\r\n    updateCapacitacionRequest() {\r\n      const me = this;\r\n      me.$http.post(`${me.$server_url}capacitaciones/${me.capacitacionId}/capacitadores`, {\r\n        capacitadores: me.selectedCapacitadores,\r\n      }).then((res) => {\r\n        me.$vs.notify({\r\n          title: 'Éxito',\r\n          text: 'Capacitadores actualizados',\r\n          color: 'success',\r\n        });\r\n        // Emit event to update capacitadores in parent component\r\n        me.$emit('update-capacitadores');\r\n      }).catch((err) => {\r\n        me.$vs.notify({\r\n          title: 'Error',\r\n          text: err.message,\r\n          color: 'danger',\r\n        });\r\n      });\r\n    }\r\n  },\r\n  emits: ['update-capacitadores', 'edit-capacitacion'],\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex flex-col items-end\">\r\n    <div class=\"w-full grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n      <div v-if=\"isLoading\" class=\"\">Cargando...</div>\r\n      <div v-if=\"capacitadores.length > 0\" class=\"w-full flex items-center\" v-for=\"(item, index) in capacitadores\"\r\n        :key=\"index\">\r\n        <vs-checkbox :label=\"item.idusuario\" :val=\"item.idusuario\" @change=\"updateSelection(item.idusuario, $event)\" />\r\n        <span class=\"text-bold\">\r\n          {{ item.nombres }} {{ item.apellidos }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <div class=\"w-full flex justify-end space-x-2\">\r\n      <vs-button color=\"dark\" type=\"border\" @click=\"handleEdit(capacitacionId)\">\r\n        Abrir formulario\r\n      </vs-button>\r\n      <vs-button v-if=\"!isLoading\" @click=\"updateCapacitacion\">\r\n        Guardar\r\n      </vs-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"mappings":"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","ignoreList":[]}]}