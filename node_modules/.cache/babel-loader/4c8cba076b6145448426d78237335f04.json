{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\alcance\\form_libros.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\alcance\\form_libros.vue","mtime":1712682816244},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\babel.config.js","mtime":1712682813877},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\.babelrc","mtime":1712682813750},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/laragon/www/PRY_NEW_JEYSON/LOCAL/plataformaprolipa_vue/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport flatPickr from 'vue-flatpickr-component';\nimport 'flatpickr/dist/flatpickr.css';\nimport { FormWizard, TabContent } from 'vue-form-wizard';\nimport 'vue-form-wizard/dist/vue-form-wizard.min.css';\nimport vSelect from 'vue-select';\nimport axios from 'axios';\nexport default {\n  components: {\n    FormWizard: FormWizard,\n    TabContent: TabContent,\n    flatPickr: flatPickr,\n    'v-select': vSelect\n  },\n  data: function data() {\n    return {\n      tmpPedido: [],\n      usuario: [],\n      series: [],\n      series_plan_lector: [],\n      tipo_form: 'textos',\n      id_periodo: '',\n      id_pedido: '',\n      total_usd: 0,\n      total_unidades: 0,\n      total_unidades_guias: 0,\n      porcentaje_descuento: 0,\n      porcentaje_descuento_series_basicas: 0,\n      //variables para observacion y anticipo\n      disableAsesor: false,\n      pedido: {\n        id_pedido: 0,\n        periodo: '',\n        tipo_venta: '',\n        fecha_envio: '',\n        fecha_entrega: '',\n        institucion: '',\n        asesor: '',\n        descuento: '',\n        anticipo: '',\n        ifanticipo: 0,\n        observacion: '',\n        ruc: '',\n        direccionInstitucion: '',\n        nivel: '',\n        tipo_descripcion: '',\n        telefonoInstitucion: '',\n        id_periodo: ''\n      },\n      //fin variables para  observacion y anticipo\n      suma_bruta_series_b: 0,\n      arregloSeriesBasicas: [],\n      pendienteLiquidar: 0,\n      anticipo_aprobado: 0,\n      contrato_generado: '',\n      multiplicacionPConfigurado: 0,\n      RestaAutorizada: 0,\n      resultadoComisionAsesor: 0,\n      estado_alcance: 0\n      //variables de series basicas\n    };\n  },\n  props: {\n    selectifanticipo: {\n      type: Boolean,\n      default: false\n    },\n    anticipoAprobado: {\n      type: Number,\n      default: 0\n    },\n    Arrayalcance: {\n      type: Array,\n      default: {}\n    },\n    sendPedido: {\n      type: Object,\n      default: '',\n      required: true\n    }\n  },\n  mounted: function mounted() {\n    var me = this;\n    this.id_periodo = me.sendPedido.id_periodo;\n    this.id_pedido = me.Arrayalcance.id_pedido;\n    this.usuario = JSON.parse(localStorage.getItem('usuario'));\n    this.usuario_id = this.usuario.idusuario;\n    me.estado_alcance = me.Arrayalcance.estado_alcance;\n    this.getSeries();\n    this.getAreasBasicas();\n    this.getLibrosPlanLector();\n    if (this.usuario.id_group == 11) {\n      this.disableAsesor = false;\n    } else {\n      this.disableAsesor = true;\n    }\n  },\n  watch: {\n    selectifanticipo: function selectifanticipo(results) {\n      var me = this;\n      me.sumarAreasBasicas();\n    },\n    anticipoAprobado: function anticipoAprobado(results) {\n      var me = this;\n      me.sumarAreasBasicas();\n    },\n    deuda: function deuda(results) {\n      var me = this;\n      me.sumarAreasBasicas();\n    }\n  },\n  methods: {\n    getSeries: function getSeries() {\n      var me = this;\n      this.$http.get(this.$server_url + 'series_formato_periodo/' + me.id_periodo).then(function (res) {\n        me.series = res.data;\n        me.getLibrosPlanLector();\n      });\n    },\n    getAreasBasicas: function getAreasBasicas() {\n      var me = this;\n      this.$http.get(this.$server_url + 'getSeriesBasicas/' + me.id_periodo).then(function (res) {\n        me.arregloSeriesBasicas = res.data.filter(function (p) {\n          return p.serie_basica == 1;\n        });\n      });\n    },\n    getLibrosPlanLector: function getLibrosPlanLector() {\n      var me = this;\n      this.$http.get(this.$server_url + 'get_pvp_planes_periodo/' + me.id_periodo).then(function (res) {\n        me.series_plan_lector = res.data;\n        me.get_val_pedido();\n      });\n    },\n    get_val_pedido: function get_val_pedido() {\n      var me = this;\n      if (!me.id_pedido) {\n        return;\n      }\n      this.$http.get(this.$server_url + 'get_val_pedido_alcance/' + me.id_pedido + '/' + me.Arrayalcance.id).then(function (res) {\n        me.tmpPedido = res.data[0];\n        me.porcentaje_descuento = res.data[0].descuento;\n        me.porcentaje_descuento_series_basicas = res.data[0].porcentaje_descuento;\n        me.contrato_generado = res.data[0].contrato_generado;\n        $.each(res.data, function (key, value) {\n          try {\n            // console.log(value.id_serie+'_'+value.id_area+'_'+value.tipo_val + ' == ' + value.valor)\n            document.getElementById(value.id_serie + '_' + value.id_area + '_' + value.tipo_val).value = value.valor;\n          } catch (error) {}\n        });\n        me.activar_tipo();\n        var array_series = [];\n        array_series = me.groupArrayOfObjects(res.data, \"id_serie\");\n        me.total_usd = 0;\n        me.total_unidades = 0;\n        me.total_unidades_guias = 0;\n        $.each(array_series, function (key, value) {\n          var array_areas_serie = [];\n          array_areas_serie = me.groupArrayOfObjects(value, \"id_area\");\n          var total_serie = 0;\n          var total_libros = 0;\n          var total_guias = 0;\n          var val_pvp_area = 0;\n          $.each(array_areas_serie, function (key_1, value_1) {\n            // recorre las areas de cada serie\n            var sum_celdas_area = 0;\n            $.each(value_1, function (key_2, value_2) {\n              // recorre las celdas de cada area; tipo_val = posicion celda\n              // console.log('value_2.tipo_val: '+value_2.tipo_val+' value_2.valo: '+value_2.valor)\n              if (parseInt(value_2.tipo_val) % 2 != 0) {\n                //sumar solo cantidades de textos\n                total_libros += value_2.valor;\n                sum_celdas_area += value_2.valor;\n              }\n              if (parseInt(value_2.tipo_val) % 2 == 0) {\n                //sumar solo cantidades de las guias\n                total_guias += value_2.valor;\n              }\n            });\n            //valor de pvp de area\n            val_pvp_area = document.getElementById(value[0].id_serie + '_' + value_1[0].id_area + '_' + 20).value; //obtiene el pvp de cada area\n            // console.log('sum_celdas_area*val_pvp_area = '+sum_celdas_area+' * '+val_pvp_area)\n            total_serie += sum_celdas_area * val_pvp_area;\n          });\n          document.getElementById('total_textos_serie_' + value[0].id_serie).value = total_libros;\n          document.getElementById('total_textos_serie2_' + value[0].id_serie).value = total_guias;\n          document.getElementById('total_usd_serie_' + value[0].id_serie).value = total_serie;\n          me.total_usd = me.total_usd + parseFloat(total_serie);\n          me.total_unidades = me.total_unidades + parseInt(total_libros);\n          me.total_unidades_guias = me.total_unidades_guias + parseInt(total_guias);\n          //me.guardarTotalPedido()\n        });\n        me.sumarAreasBasicas();\n      }).catch(function (err) {});\n    },\n    sumarAreasBasicas: function sumarAreasBasicas() {\n      var me = this;\n      var resultado = 0;\n      me.arregloSeriesBasicas.forEach(function (element) {\n        var valor = '';\n        if (document.getElementById('total_usd_serie_' + element.id_serie)) {\n          valor = parseFloat(document.getElementById('total_usd_serie_' + element.id_serie).value);\n          if (!isNaN(valor)) {\n            resultado += valor;\n          }\n        }\n      });\n      me.suma_bruta_series_b = resultado;\n      me.multiplicacionPConfigurado = (me.suma_bruta_series_b * this.porcentaje_descuento_series_basicas / 100).toFixed(2);\n      me.RestaAutorizada = me.suma_bruta_series_b - me.multiplicacionPConfigurado;\n      me.resultadoComisionAsesor = (me.RestaAutorizada * me.porcentaje_descuento / 100).toFixed(2);\n      if (me.selectifanticipo) {\n        //suma de series basica\n        //se mutltiplica * el porcentaje de configuracion\n        //se resta el valor sumas basica - la multiplicacion del porcentaje\n        //se multiplica el resultado de ese valor x la comision del asesor\n        //se multiplica el resultado de la comision del asesor * 0.50\n        var anticipoSugerido50 = (me.resultadoComisionAsesor * 50 / 100).toFixed(2);\n        me.pedido.anticipo = anticipoSugerido50;\n        me.pendienteLiquidar = me.resultadoComisionAsesor - Math.abs(me.anticipoAprobado);\n      } else {\n        me.pedido.anticipo = 0;\n        me.pendienteLiquidar = me.resultadoComisionAsesor - Math.abs(me.anticipoAprobado);\n      }\n      var datos = {\n        anticipo: me.pedido.anticipo,\n        liquidar: me.pendienteLiquidar\n      };\n      me.$emit('changePedido', datos);\n      if (me.estado_alcance == 0) {\n        me.guardarTotalPedido();\n      }\n    },\n    guardar_valor: function () {\n      var _guardar_valor = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id, serie, index, libro) {\n        var me, valor, formData;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              me = this;\n              if (!(document.getElementById(serie + '_' + id + '_' + index).value == '')) {\n                _context.next = 3;\n                break;\n              }\n              return _context.abrupt(\"return\");\n            case 3:\n              valor = document.getElementById(serie + '_' + id + '_' + index).value;\n              if (valor == 0) {\n                document.getElementById(serie + '_' + id + '_' + index).value = '';\n              }\n              me.$vs.loading();\n              formData = new FormData();\n              formData.append('id_pedido', me.id_pedido);\n              formData.append('valor', document.getElementById(serie + '_' + id + '_' + index).value);\n              formData.append('tipo_val', index);\n              formData.append('id_serie', serie);\n              formData.append('id_area', id);\n              formData.append('alcance', me.Arrayalcance.id);\n              if (libro == '-1') {\n                formData.append('plan_lector', id);\n                formData.append('libro', '0');\n              } else {\n                formData.append('plan_lector', '0');\n                formData.append('libro', libro);\n              }\n              _context.next = 16;\n              return this.$http.post(this.$server_url + 'save_val_pedido_alcance', formData).then(function (res) {\n                me.$vs.loading.close();\n                if (res.data.status == 0) {\n                  me.$vs.notify({\n                    text: res.data.message,\n                    color: 'danger',\n                    iconPack: 'feather',\n                    icon: 'icon-check',\n                    time: 8000\n                  });\n                  me.getSeries();\n                  return;\n                }\n                if (res.data.status == 2) {\n                  me.getSeries();\n                }\n                me.$vs.notify({\n                  text: 'Guardado correctamente',\n                  color: 'success',\n                  iconPack: 'feather',\n                  icon: 'icon-check'\n                });\n                me.get_val_pedido();\n              });\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function guardar_valor(_x, _x2, _x3, _x4) {\n        return _guardar_valor.apply(this, arguments);\n      }\n      return guardar_valor;\n    }(),\n    guardarTotalPedido: function () {\n      var _guardarTotalPedido = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var me, total_usd_format, formData;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              me = this;\n              total_usd_format = me.total_usd.toFixed(2);\n              formData = new FormData();\n              formData.append('id', me.Arrayalcance.id);\n              formData.append('id_periodo', me.id_periodo);\n              formData.append('id_pedido', me.id_pedido);\n              formData.append('venta_bruta', total_usd_format);\n              formData.append('total_unidades', me.total_unidades);\n              formData.append('pendiente_liquidar', me.pendienteLiquidar);\n              this.$http.post(this.$server_url + 'guardarValorAlcance', formData).then(function (res) {\n                if (res.data.status == 0) {\n                  me.$vs.notify({\n                    text: res.data.message,\n                    color: 'warning',\n                    iconPack: 'feather',\n                    icon: 'icon-alert-triangle'\n                  });\n                  return;\n                }\n                // me.$vs.notify({\n                //   text: res.data,\n                //   color: 'primary',\n                //   iconPack: 'feather',\n                //   icon: 'icon-alert-triangle'\n                // })\n              }).catch(function (error) {});\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function guardarTotalPedido() {\n        return _guardarTotalPedido.apply(this, arguments);\n      }\n      return guardarTotalPedido;\n    }(),\n    groupArrayOfObjects: function groupArrayOfObjects(list, key) {\n      return list.reduce(function (rv, x) {\n        (rv[x[key]] = rv[x[key]] || []).push(x);\n        return rv;\n      }, {});\n    },\n    activar_tipo: function activar_tipo() {\n      if (this.tipo_form == 'textos') {\n        $('.t_texto').css('display', 'block');\n        $('.t_guia').css('display', 'none');\n      } else {\n        $('.t_guia').css('display', 'block');\n        $('.t_texto').css('display', 'none');\n      }\n    }\n  }\n};",{"version":3,"names":["flatPickr","FormWizard","TabContent","vSelect","axios","components","data","tmpPedido","usuario","series","series_plan_lector","tipo_form","id_periodo","id_pedido","total_usd","total_unidades","total_unidades_guias","porcentaje_descuento","porcentaje_descuento_series_basicas","disableAsesor","pedido","periodo","tipo_venta","fecha_envio","fecha_entrega","institucion","asesor","descuento","anticipo","ifanticipo","observacion","ruc","direccionInstitucion","nivel","tipo_descripcion","telefonoInstitucion","suma_bruta_series_b","arregloSeriesBasicas","pendienteLiquidar","anticipo_aprobado","contrato_generado","multiplicacionPConfigurado","RestaAutorizada","resultadoComisionAsesor","estado_alcance","props","selectifanticipo","type","Boolean","default","anticipoAprobado","Number","Arrayalcance","Array","sendPedido","Object","required","mounted","me","JSON","parse","localStorage","getItem","usuario_id","idusuario","getSeries","getAreasBasicas","getLibrosPlanLector","id_group","watch","results","sumarAreasBasicas","deuda","methods","$http","get","$server_url","then","res","filter","p","serie_basica","get_val_pedido","id","$","each","key","value","document","getElementById","id_serie","id_area","tipo_val","valor","error","activar_tipo","array_series","groupArrayOfObjects","array_areas_serie","total_serie","total_libros","total_guias","val_pvp_area","key_1","value_1","sum_celdas_area","key_2","value_2","parseInt","parseFloat","catch","err","resultado","forEach","element","isNaN","toFixed","anticipoSugerido50","Math","abs","datos","liquidar","$emit","guardarTotalPedido","guardar_valor","_guardar_valor","_asyncToGenerator","regeneratorRuntime","mark","_callee","serie","index","libro","formData","wrap","_callee$","_context","prev","next","abrupt","$vs","loading","FormData","append","post","close","status","notify","text","message","color","iconPack","icon","time","stop","_x","_x2","_x3","_x4","apply","arguments","_guardarTotalPedido","_callee2","total_usd_format","_callee2$","_context2","list","reduce","rv","x","push","css"],"sources":["src/views/pedidos/alcance/form_libros.vue"],"sourcesContent":["<template>\r\n<div>\r\n  <div class=\"w-full flex flex-wrap gap-10 items-center text-xl justify-end\">\r\n    <vs-radio color=\"warning\" v-model=\"tipo_form\" vs-value=\"textos\" vs-name=\"tipo_textos\" @input=\"activar_tipo()\">Textos</vs-radio>\r\n    <!-- <vs-radio color=\"warning\" v-model=\"tipo_form\" vs-value=\"guias\" vs-name=\"tipo_guias\" @input=\"activar_tipo()\">Guías</vs-radio> -->\r\n  </div>\r\n  <vs-collapse>\r\n    <vs-collapse-item :key=\"index\" v-for=\"(item, index) in series\">\r\n      <div slot=\"header\" class=\"text-center\"> <b>{{item.nombre_serie.toUpperCase()}}</b> </div>\r\n      <div class=\"w-full\" style=\"overflow-x:auto;\">\r\n        <table class=\"table_pedidos\">\r\n            <tr class=\"text-center\">\r\n              <td rowspan=\"3\" style=\"width: 200px;\"><b>Áreas</b></td>\r\n              <td colspan=\"20\"><b>Niveles</b></td>\r\n              <td rowspan=\"3\" style=\"width: 70px;\" v-if=\"tipo_form == 'textos'\"><b>PVP</b></td>\r\n            </tr>\r\n            <tr class=\"text-center\">\r\n              <td colspan=\"2\"><b>1</b></td> <td colspan=\"2\"><b>2</b></td> <td colspan=\"2\"><b>3</b></td> <td colspan=\"2\"><b>4</b></td> <td colspan=\"2\"><b>5</b></td> <td colspan=\"2\"><b>6</b></td> <td colspan=\"2\"><b>7</b></td> <td colspan=\"2\"><b>8</b></td> <td colspan=\"2\"><b>9</b></td> <td colspan=\"2\"><b>10</b></td>\r\n            </tr>\r\n            <tr class=\"text-center\">\r\n              <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td>\r\n            </tr>\r\n            <tr class=\"text-center\" align=\"center\" :key=\"indextr\" v-for=\"(tr, indextr) in item.areas\">\r\n              <td style=\"background-color: #046AE7;color:white;\"> <b>{{tr.nombrearea}}</b> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n1 == '' || tr.n1 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+0\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 0,1)\"  :hidden=\"!tr.n1\"  :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n1 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n1 == '' || tr.n1 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+1\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 1,1)\"         :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n1 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n2 == '' || tr.n2 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+2\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 2,2)\"   :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n2 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n2 == '' || tr.n2 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+3\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 3,2)\"         :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n2 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n3 == '' || tr.n3 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+4\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 4,3)\"   :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n3 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n3 == '' || tr.n3 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+5\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 5,3)\"         :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n3 : true\" /></td>\r\n              <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n4 == '' || tr.n4 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+6\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 6,4)\"   :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n4 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n4 == '' || tr.n4 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+7\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 7,4)\"         :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n4 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n5 == '' || tr.n5 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+8\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 8,5)\"   :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n5 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n5 == '' || tr.n5 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+9\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 9,5)\"         :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n5 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n6 == '' || tr.n6 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+10\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 10,6)\" :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n6 : true\"/> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n6 == '' || tr.n6 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+11\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 11,6)\"       :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n6 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n7 == '' || tr.n7 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+12\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 12,7)\" :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n7 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n7 == '' || tr.n7 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+13\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 13,7)\"       :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n7 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n8 == '' || tr.n8 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+14\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 14,8)\" :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n8 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n8 == '' || tr.n8 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+15\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 15,8)\"       :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n8 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n9 == '' || tr.n9 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+16\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 16,9)\" :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n9 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n9 == '' || tr.n9 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+17\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 17,9)\"       :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n9 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n10 == '' || tr.n10 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+18\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 18,10)\"  :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n10 : true\" /> </td>\r\n              <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n10 == '' || tr.n10 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+19\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 19,10)\" :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? !tr.n10 : true\" /> </td>\r\n              <td><input class=\"input_pvp_tabla input_pvp\" v-show=\"tipo_form == 'textos'\" readonly type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+20\" :value=\"tr.pvp\" /> </td>\r\n            </tr>\r\n            <tr class=\"text-center\">\r\n              <td> <b style=\"font-size: 12px;\">{{tipo_form == 'textos' ? 'TOTAL TEXTOS' :'TOTAL GUIAS'}}</b> </td>\r\n              <td colspan=\"7\" v-show=\"tipo_form == 'textos'\" class=\"input_totales\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_textos_serie_'+item.id_serie\" type=\"number\" /> </td>\r\n              <td colspan=\"7\" v-show=\"tipo_form == 'guias'\" class=\"input_totales\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_textos_serie2_'+item.id_serie\" type=\"number\" /> </td>\r\n              <td colspan=\"6\" style=\"font-size: 12px;\" v-show=\"tipo_form == 'textos'\"> <b>TOTAL USD</b> </td>\r\n              <td colspan=\"8\" class=\"input_totales\" v-show=\"tipo_form == 'textos'\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_usd_serie_'+item.id_serie\" type=\"number\" /> </td>\r\n            </tr>\r\n        </table>\r\n      </div>\r\n    </vs-collapse-item>\r\n    <vs-collapse-item>\r\n      <div slot=\"header\" class=\"text-center\"> <b>PLAN LECTOR</b> </div>\r\n      <div class=\"w-full\" style=\"overflow-x:auto;\">\r\n        <table class=\"table_pedidos\">\r\n          <tr class=\"text-center\">\r\n            <td><b>LIBRO</b></td>\r\n            <td><b>GUÍA</b></td>\r\n            <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td>\r\n            <td style=\"width: 100px;\">&nbsp;<b>PVP</b>&nbsp;&nbsp;</td>\r\n          </tr>\r\n          <tr class=\"text-center\" align=\"center\" :key=\"index\" v-for=\"(item, index) in series_plan_lector\">\r\n              <td style=\"background-color: #046AE7;color: white;\"> <b>{{item.nombrelibro}}</b> </td>\r\n              <td> <input class=\"input_pvp_tabla t_guia\" type=\"number\" :id=\"6+'_'+item.id_libro+'_'+0\" @blur=\"guardar_valor(item.id_libro, 6, 0,-1)\"    :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? false:true\"/> </td>\r\n              <td> <input class=\"input_pvp_tabla t_texto\" type=\"number\" :id=\"6+'_'+item.id_libro+'_'+1\" @blur=\"guardar_valor(item.id_libro, 6, 1,-1)\"   :disabled=\"usuario.id_group==11 && (estado_alcance == 0) ? false:true\" /> </td>\r\n              <td> <input class=\"input_pvp_tabla input_pvp\" readonly type=\"number\" :value=\"item.pvp\" :id=\"6+'_'+item.id_libro+'_'+20\" /> </td>\r\n          </tr>\r\n          <tr class=\"text-center\">\r\n            <td> <b style=\"font-size: 12px;\">{{tipo_form == 'textos' ? 'TOTAL TEXTOS' :'TOTAL GUIAS'}}</b> </td>\r\n            <td colspan=\"2\" v-show=\"tipo_form == 'textos'\" style=\"font-size: 12px;\"> <b>TOTAL USD</b> </td>\r\n          </tr>\r\n          <tr class=\"text-center\">\r\n            <td colspan=\"2\" v-show=\"tipo_form == 'textos'\"  class=\"input_totales\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_textos_serie_'+6\" type=\"number\" /> </td>\r\n            <td colspan=\"2\" v-show=\"tipo_form == 'guias'\"  class=\"input_totales\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_textos_serie2_'+6\" type=\"number\" /> </td>\r\n            <td colspan=\"2\" v-show=\"tipo_form == 'textos'\" class=\"input_totales\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_usd_serie_'+6\" type=\"number\" /> </td>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n    </vs-collapse-item>\r\n  </vs-collapse>\r\n  <div class=\"w-full text-right\">\r\n    <b>\r\n      CANTIDAD DE UNIDADES DE LIBROS TOTAL : <div style=\"width: 120px; display: inline-block;\">{{total_unidades}} </div><br>\r\n      VENTA BRUTA : <div style=\"width: 120px; display: inline-block;\">{{total_usd.toFixed(2)}} </div><br>\r\n      <!-- {{porcentaje_descuento}}% COMISION: <div style=\"width: 120px; display: inline-block;\">{{((total_usd*porcentaje_descuento)/100).toFixed(2) }} </div><br> -->\r\n      <!-- TOTAL : <div style=\"width: 120px; display: inline-block;\">{{(total_usd - ((total_usd*porcentaje_descuento)/100)).toFixed(2)}} </div> -->\r\n      VENTA BRUTA SERIES BÁSICAS : <div style=\"width: 120px; display: inline-block;\">{{ suma_bruta_series_b.toFixed(2) }} </div><br>\r\n      MULTIPLICACION PORCENTAJE CONFG : <div style=\"width: 120px; display: inline-block;\">{{ multiplicacionPConfigurado }} </div><br>\r\n      CALCULO AUTORIZADO : <div style=\"width: 120px; display: inline-block;\">{{ RestaAutorizada.toFixed(2) }} </div><br>\r\n      {{porcentaje_descuento}}% COMISION CALCULO AUTORIZADO: <div style=\"width: 120px; display: inline-block;\">{{ resultadoComisionAsesor }} </div><br>\r\n      ANTICIPO <div style=\"width: 120px; display: inline-block;\">{{ Math.abs(anticipoAprobado)  }} </div><br>\r\n      PENDIENTE POR LIQUIDAR  <div style=\"width: 120px; display: inline-block;\">{{ pendienteLiquidar.toFixed(2) }} </div><br>\r\n    </b>\r\n  </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport flatPickr from 'vue-flatpickr-component';\r\nimport 'flatpickr/dist/flatpickr.css';\r\nimport {FormWizard, TabContent} from 'vue-form-wizard'\r\nimport 'vue-form-wizard/dist/vue-form-wizard.min.css'\r\nimport vSelect from 'vue-select';\r\nimport axios from 'axios'\r\nexport default {\r\n    components:{\r\n      FormWizard,\r\n      TabContent,\r\n      flatPickr,\r\n      'v-select': vSelect,\r\n    },\r\n    data: () => ({\r\n      tmpPedido:[],\r\n      usuario: [],\r\n      series: [],\r\n      series_plan_lector: [],\r\n      tipo_form: 'textos',\r\n      id_periodo: '',\r\n      id_pedido: '',\r\n      total_usd: 0,\r\n      total_unidades: 0,\r\n      total_unidades_guias:0,\r\n      porcentaje_descuento: 0,\r\n      porcentaje_descuento_series_basicas:0,\r\n      //variables para observacion y anticipo\r\n      disableAsesor:false,\r\n      pedido:{\r\n        id_pedido: 0, periodo: '', tipo_venta: '', fecha_envio: '', fecha_entrega: '', institucion: '', asesor: '', descuento: '', anticipo: '',ifanticipo:0,observacion:'', ruc:'', direccionInstitucion:'', nivel:'',tipo_descripcion:'', telefonoInstitucion:'',id_periodo:''\r\n      },\r\n      //fin variables para  observacion y anticipo\r\n      suma_bruta_series_b:0,\r\n      arregloSeriesBasicas:[],\r\n      pendienteLiquidar:0,\r\n      anticipo_aprobado:0,\r\n      contrato_generado:'',\r\n      multiplicacionPConfigurado:0,\r\n      RestaAutorizada:0,\r\n      resultadoComisionAsesor:0,\r\n      estado_alcance:0,\r\n      //variables de series basicas\r\n    }),\r\n    props:{\r\n      selectifanticipo:{\r\n        type:Boolean,\r\n        default:false\r\n      },\r\n      anticipoAprobado:{\r\n        type:Number,\r\n        default:0,\r\n      },\r\n      Arrayalcance:{\r\n        type:Array,\r\n        default:{},\r\n      },\r\n      sendPedido:{\r\n        type:Object,\r\n        default:'',\r\n        required:true\r\n      },\r\n    },\r\n    mounted() {\r\n      let me = this\r\n      this.id_periodo = me.sendPedido.id_periodo\r\n      this.id_pedido  = me.Arrayalcance.id_pedido\r\n      this.usuario = JSON.parse(localStorage.getItem('usuario'))\r\n      this.usuario_id = this.usuario.idusuario\r\n      me.estado_alcance = me.Arrayalcance.estado_alcance\r\n      this.getSeries()\r\n      this.getAreasBasicas()\r\n      this.getLibrosPlanLector()\r\n      if(this.usuario.id_group == 11){\r\n        this.disableAsesor = false\r\n      }else{\r\n        this.disableAsesor = true\r\n      }\r\n    },\r\n    watch:{\r\n      selectifanticipo(results){\r\n        let me = this;\r\n        me.sumarAreasBasicas()\r\n      },\r\n      anticipoAprobado(results){\r\n        let me = this;\r\n        me.sumarAreasBasicas()\r\n      },\r\n      deuda(results){\r\n        let me = this;\r\n        me.sumarAreasBasicas()\r\n      }\r\n    },\r\n    methods: {\r\n      getSeries(){\r\n        let me = this\r\n        this.$http.get(this.$server_url+'series_formato_periodo/'+me.id_periodo)\r\n        .then(res => {\r\n          me.series = res.data\r\n          me.getLibrosPlanLector()\r\n        })\r\n      },\r\n      getAreasBasicas(){\r\n        let me = this;\r\n        this.$http.get(this.$server_url+'getSeriesBasicas/'+me.id_periodo)\r\n        .then(res => {\r\n          me.arregloSeriesBasicas = res.data.filter(p => p.serie_basica == 1)\r\n        })\r\n      },\r\n      getLibrosPlanLector(){\r\n        let me = this\r\n        this.$http.get(this.$server_url+'get_pvp_planes_periodo/'+me.id_periodo)\r\n        .then(res => {\r\n            me.series_plan_lector = res.data\r\n            me.get_val_pedido()\r\n        })\r\n      },\r\n      get_val_pedido(){\r\n        let me = this\r\n        if(!me.id_pedido){\r\n          return\r\n        }\r\n        this.$http.get(this.$server_url+'get_val_pedido_alcance/'+me.id_pedido+'/'+me.Arrayalcance.id)\r\n        .then(res => {\r\n          me.tmpPedido = res.data[0]\r\n          me.porcentaje_descuento                = res.data[0].descuento\r\n          me.porcentaje_descuento_series_basicas = res.data[0].porcentaje_descuento\r\n          me.contrato_generado                   = res.data[0].contrato_generado\r\n          $.each(res.data,function(key, value){\r\n            try {\r\n              // console.log(value.id_serie+'_'+value.id_area+'_'+value.tipo_val + ' == ' + value.valor)\r\n              document.getElementById(value.id_serie+'_'+value.id_area+'_'+value.tipo_val).value = value.valor\r\n            } catch (error) {\r\n            }\r\n          });\r\n          me.activar_tipo()\r\n          let array_series = []\r\n          array_series = me.groupArrayOfObjects(res.data, \"id_serie\")\r\n          me.total_usd = 0\r\n          me.total_unidades = 0\r\n          me.total_unidades_guias = 0\r\n          $.each(array_series,function(key, value){\r\n            let array_areas_serie = []\r\n            array_areas_serie = me.groupArrayOfObjects(value, \"id_area\")\r\n            let total_serie = 0;\r\n            let total_libros = 0;\r\n            let total_guias  = 0;\r\n            var val_pvp_area = 0\r\n            $.each(array_areas_serie,function(key_1, value_1){ // recorre las areas de cada serie\r\n              let sum_celdas_area = 0;\r\n              $.each(value_1,function(key_2, value_2){ // recorre las celdas de cada area; tipo_val = posicion celda\r\n                // console.log('value_2.tipo_val: '+value_2.tipo_val+' value_2.valo: '+value_2.valor)\r\n                if( parseInt(value_2.tipo_val) % 2 != 0 ){ //sumar solo cantidades de textos\r\n                  total_libros += value_2.valor\r\n                  sum_celdas_area += value_2.valor\r\n                }\r\n                if( parseInt(value_2.tipo_val) % 2 == 0 ){ //sumar solo cantidades de las guias\r\n                  total_guias += value_2.valor\r\n                }\r\n              });\r\n              //valor de pvp de area\r\n              val_pvp_area = document.getElementById(value[0].id_serie+'_'+value_1[0].id_area+'_'+20).value //obtiene el pvp de cada area\r\n              // console.log('sum_celdas_area*val_pvp_area = '+sum_celdas_area+' * '+val_pvp_area)\r\n              total_serie += (sum_celdas_area*val_pvp_area)\r\n            });\r\n            document.getElementById('total_textos_serie_'+value[0].id_serie).value = total_libros\r\n            document.getElementById('total_textos_serie2_'+value[0].id_serie).value = total_guias\r\n            document.getElementById('total_usd_serie_'+value[0].id_serie).value = total_serie\r\n            me.total_usd = me.total_usd + parseFloat(total_serie);\r\n            me.total_unidades = me.total_unidades + parseInt(total_libros);\r\n            me.total_unidades_guias = me.total_unidades_guias + parseInt(total_guias)\r\n            //me.guardarTotalPedido()\r\n          });\r\n          me.sumarAreasBasicas()\r\n        })\r\n        .catch(err => {\r\n        })\r\n      },\r\n      sumarAreasBasicas(){\r\n        let me = this;\r\n        var resultado = 0\r\n        me.arregloSeriesBasicas.forEach(element => {\r\n          var valor = ''\r\n          if(document.getElementById('total_usd_serie_'+element.id_serie)){\r\n            valor = parseFloat(document.getElementById('total_usd_serie_'+element.id_serie).value)\r\n            if (!isNaN(valor)) {\r\n              resultado += valor;\r\n            }\r\n          }\r\n        }); \r\n        me.suma_bruta_series_b            = resultado\r\n        me.multiplicacionPConfigurado     =  ((me.suma_bruta_series_b*this.porcentaje_descuento_series_basicas)/100).toFixed(2)\r\n        me.RestaAutorizada                =  (( me.suma_bruta_series_b ) - ( me.multiplicacionPConfigurado ))\r\n        me.resultadoComisionAsesor         =  ((me.RestaAutorizada*me.porcentaje_descuento)/100).toFixed(2)\r\n        if(me.selectifanticipo){\r\n          //suma de series basica\r\n          //se mutltiplica * el porcentaje de configuracion\r\n          //se resta el valor sumas basica - la multiplicacion del porcentaje\r\n          //se multiplica el resultado de ese valor x la comision del asesor\r\n          //se multiplica el resultado de la comision del asesor * 0.50\r\n          let anticipoSugerido50            =  ((me.resultadoComisionAsesor*50)/100).toFixed(2)\r\n          me.pedido.anticipo                = anticipoSugerido50\r\n          me.pendienteLiquidar              = me.resultadoComisionAsesor - Math.abs(me.anticipoAprobado)\r\n        }else{\r\n          me.pedido.anticipo = 0\r\n          me.pendienteLiquidar              = me.resultadoComisionAsesor - Math.abs(me.anticipoAprobado)\r\n        }\r\n        let datos = {\r\n          anticipo:me.pedido.anticipo,\r\n          liquidar:me.pendienteLiquidar\r\n        }\r\n        me.$emit('changePedido',datos)\r\n        if(me.estado_alcance == 0){\r\n            me.guardarTotalPedido()\r\n        }\r\n      },\r\n      async guardar_valor(id, serie, index,libro){\r\n        let me = this\r\n        if( document.getElementById(serie+'_'+id+'_'+index).value == '' ){ // no guardar cuando no se digita algo\r\n          return;\r\n        }\r\n        let valor = document.getElementById(serie+'_'+id+'_'+index).value\r\n        if(valor == 0){\r\n          document.getElementById(serie+'_'+id+'_'+index).value = ''\r\n        }\r\n        me.$vs.loading();\r\n        let formData = new FormData();\r\n          formData.append('id_pedido', me.id_pedido);\r\n          formData.append('valor', document.getElementById(serie+'_'+id+'_'+index).value);\r\n          formData.append('tipo_val', index);\r\n          formData.append('id_serie', serie);\r\n          formData.append('id_area', id);\r\n          formData.append('alcance',me.Arrayalcance.id)\r\n          if(libro == '-1') {\r\n            formData.append('plan_lector',id)\r\n            formData.append('libro','0')\r\n          }else{\r\n            formData.append('plan_lector','0')\r\n            formData.append('libro',libro)\r\n          }\r\n        await this.$http.post(this.$server_url+'save_val_pedido_alcance', formData)\r\n        .then(res => {\r\n            me.$vs.loading.close();\r\n            if(res.data.status == 0){\r\n              me.$vs.notify({ text: res.data.message, color: 'danger', iconPack: 'feather', icon: 'icon-check', time:8000 })\r\n              me.getSeries()\r\n              return\r\n            }\r\n            if(res.data.status == 2){\r\n              me.getSeries()\r\n            }\r\n            me.$vs.notify({ text: 'Guardado correctamente', color: 'success', iconPack: 'feather', icon: 'icon-check' })\r\n            me.get_val_pedido()\r\n        })\r\n\r\n      },\r\n      async guardarTotalPedido(){\r\n        let me = this\r\n        let total_usd_format = me.total_usd.toFixed(2)\r\n        let formData = new FormData();\r\n        formData.append('id',                 me.Arrayalcance.id)\r\n        formData.append('id_periodo',         me.id_periodo);\r\n        formData.append('id_pedido',          me.id_pedido);\r\n        formData.append('venta_bruta',        total_usd_format);\r\n        formData.append('total_unidades',     me.total_unidades);\r\n        formData.append('pendiente_liquidar', me.pendienteLiquidar);\r\n        this.$http.post(this.$server_url+'guardarValorAlcance', formData)\r\n        .then(function (res) {\r\n          if(res.data.status == 0){\r\n            me.$vs.notify({\r\n              text: res.data.message,\r\n              color: 'warning',\r\n              iconPack: 'feather',\r\n              icon: 'icon-alert-triangle'\r\n            })\r\n            return\r\n          }\r\n          // me.$vs.notify({\r\n          //   text: res.data,\r\n          //   color: 'primary',\r\n          //   iconPack: 'feather',\r\n          //   icon: 'icon-alert-triangle'\r\n          // })\r\n        })\r\n        .catch(function (error) {})\r\n      },\r\n      groupArrayOfObjects(list, key) {\r\n          return list.reduce(function(rv, x) {\r\n              (rv[x[key]] = rv[x[key]] || []).push(x);\r\n              return rv;\r\n          }, {});\r\n      },\r\n      activar_tipo(){\r\n        if( this.tipo_form == 'textos' ){\r\n          $('.t_texto').css('display', 'block');\r\n          $('.t_guia').css('display', 'none');\r\n        }else{\r\n          $('.t_guia').css('display', 'block');\r\n          $('.t_texto').css('display', 'none');\r\n        }\r\n        \r\n      }\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n.label_inputs{\r\n  font-size: 12px;\r\n  color: rgb(143, 143, 143);\r\n  margin-top: 4px;\r\n  padding-left: 4px;\r\n}\r\n\r\ninput[type=number].input_pvp_tabla::-webkit-inner-spin-button,\r\ninput[type=number].input_pvp_tabla::-webkit-outer-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n    }\r\ninput[type=number].input_pvp_tabla { -moz-appearance:textfield; }\r\n\r\ninput[type=number].input_pvp_tabla {\r\n  width: 100%;\r\n  height: 100%;\r\n  border: none;\r\n  font-size: 18px !important;\r\n  text-align: center;\r\n  color: rgb(60, 108, 192);\r\n  padding: 0% !important;\r\n}\r\n\r\ntable.table_pedidos tr:hover {\r\n  background-color: #CCF7EF;\r\n  border: 2px solid rgb(118, 255, 177);\r\n  color: black!important;\r\n}\r\n\r\ninput[type=number].input_pvp_tabla:hover {\r\n  background-color: #CCF7EF;\r\n  color: black!important;\r\n}\r\n\r\ntable.table_pedidos td{\r\n  border: 1px solid rgb(227, 227, 227);\r\n  height: 25px;\r\n}\r\ntable.table_pedidos th {\r\n  border: 1px solid rgb(227, 227, 227);\r\n  height: 25px;\r\n}\r\n\r\ntable.table_pedidos {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.input_totales{\r\n  background-color:#31B10C;\r\n  color: white !important;\r\n  font-weight: bold;\r\n}\r\n.input_pvp{\r\n  background-color: #046AE7;\r\n  color: #fff!important;\r\n  border-radius: 0%;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.test{\r\n  color:white!important;\r\n  background-color: #6B97F5;\r\n}\r\n.test:hover,.guiaEstilo:hover{\r\n  color:black;\r\n}\r\n.guiaEstilo{\r\n  /* color:white!important;\r\n  background-color: #E2B832; */\r\n}\r\n\r\n.test2{\r\n  background-color: #C4D333;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}