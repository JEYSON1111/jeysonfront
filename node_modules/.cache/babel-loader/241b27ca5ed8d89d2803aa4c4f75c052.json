{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\contratos.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\contratos.vue","mtime":1712682816618},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\babel.config.js","mtime":1712682813877},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\.babelrc","mtime":1712682813750},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport moment from 'moment';\nimport vSelect from 'vue-select';\nexport default {\n  data: function data() {\n    return {\n      asesorarreglo: [],\n      cedula: '',\n      contratosarreglo: [],\n      //para la edicion\n      popupEditInstitucion: false,\n      asesor: {\n        institucion: '',\n        cedula_asesor: '',\n        contrato: ''\n      },\n      instituciones: []\n    };\n  },\n  components: {\n    'v-select': vSelect\n  },\n  methods: {\n    obtenerContratos: function obtenerContratos() {\n      var _this = this;\n      var me = this;\n      var formData = new FormData();\n      formData.append('cedula', this.cedula);\n      me.$vs.loading();\n      this.$http.post(this.$server_url + 'temporadas/asesor/contratos', formData).then(function (res) {\n        console.log(res);\n        _this.contratosarreglo = res.data;\n        me.$vs.loading.close();\n        me.$vs.notify({\n          text: 'Listando contratos',\n          color: 'success',\n          iconPack: 'feather',\n          icon: 'icon-check'\n        });\n      });\n    },\n    //para realizar la edicion\n    //para guardar las areas\n    guardarInstitucion: function guardarInstitucion() {\n      var me = this;\n      if (me.asesor.institucion.id === undefined) {\n        me.$vs.notify({\n          text: 'Seleccione una Institucion',\n          color: 'warning',\n          iconPack: 'feather',\n          icon: 'icon-check'\n        });\n        return;\n      }\n      var formData = new FormData();\n      formData.append('idInstitucion', me.asesor.institucion.id);\n      formData.append('cedula_asesor', me.asesor.cedula_asesor);\n      formData.append('nombre_institucion', me.asesor.institucion.label);\n      formData.append('nombre_ciudad', me.asesor.institucion.nombre_ciudad);\n      formData.append('contrato', me.asesor.contrato);\n      this.$http.post(this.$server_url + 'asesor-institucion', formData).then(function (res) {\n        me.$vs.notify({\n          text: res.data,\n          color: 'primary',\n          iconPack: 'feather',\n          icon: 'icon-alert-triangle'\n        });\n        me.obtenerContratos();\n        me.popupEditInstitucion = false, limpiar();\n      }).catch(function (error) {});\n    },\n    limpiar: function limpiar() {\n      var me = this;\n      me.asesor.institucion = \"\";\n    },\n    //para abrir el popup de edicion\n    openModalEditar: function openModalEditar() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var me = this;\n      me.popupEditInstitucion = true;\n\n      //llenar la data en los campos\n      me.asesor.contrato = data.contrato;\n      me.asesor.cedula_asesor = data.cedula_asesor;\n      //  me.area.nombrearea = data.nombrearea;\n      me.asesor.institucion = {\n        id: data.idInstitucion,\n        label: data.temporal_institucion\n      };\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n    var transformaraParse = JSON.parse(localStorage.getItem('usuario'));\n    this.asesorarreglo = transformaraParse;\n    this.cedula = this.asesorarreglo.cedula;\n    //traer las instituciones\n    this.$http.get(this.$server_url + 'institucionesResportes').then(function (res) {\n      _this2.instituciones = res.data;\n    });\n  },\n  mounted: function mounted() {\n    this.obtenerContratos();\n  }\n};",{"version":3,"names":["axios","moment","vSelect","data","asesorarreglo","cedula","contratosarreglo","popupEditInstitucion","asesor","institucion","cedula_asesor","contrato","instituciones","components","methods","obtenerContratos","_this","me","formData","FormData","append","$vs","loading","$http","post","$server_url","then","res","console","log","close","notify","text","color","iconPack","icon","guardarInstitucion","id","undefined","label","nombre_ciudad","limpiar","catch","error","openModalEditar","arguments","length","idInstitucion","temporal_institucion","created","_this2","transformaraParse","JSON","parse","localStorage","getItem","get","mounted"],"sources":["src/views/temporadas/contratos.vue"],"sourcesContent":["<template>\r\n<div>\r\n    \r\n\r\n  <!--Tabla para listar los contratos del asesor-->\r\n  <div>\r\n    <vs-table max-items=\"5\" search pagination :data=\"contratosarreglo\">\r\n      <template slot=\"header\">\r\n        <h3>\r\n          Listado de sus contratos\r\n        </h3>\r\n      </template>\r\n      <template slot=\"thead\">\r\n        <vs-th>\r\n          contrato\r\n        </vs-th>\r\n        <vs-th>\r\n          AÃ±o\r\n        </vs-th>\r\n        <vs-th>\r\n          Ciudad\r\n        </vs-th>\r\n        <vs-th>\r\n          Temporada\r\n        </vs-th>\r\n        <vs-th>\r\n          Profesor\r\n        </vs-th>\r\n\r\n        <vs-th>\r\n          Asesor\r\n        </vs-th>\r\n\r\n        <vs-th>\r\n          Institucion\r\n        </vs-th>\r\n\r\n        \r\n        <vs-th>\r\n          Accion\r\n        </vs-th>\r\n\r\n      </template>\r\n\r\n      <template slot-scope=\"{data}\">\r\n        <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\" >\r\n        \r\n          <vs-td :data=\"data[indextr].contrato\">\r\n            {{data[indextr].contrato}}\r\n          </vs-td>\r\n\r\n          <vs-td :data=\"data[indextr].year\">\r\n            {{data[indextr].year}}\r\n          </vs-td>\r\n\r\n          <vs-td :data=\"data[indextr].ciudad\">\r\n            {{data[indextr].ciudad}}\r\n          </vs-td>\r\n\r\n          <vs-td :data=\"data[indextr].temporada\">\r\n            {{data[indextr].temporada}}\r\n          </vs-td>\r\n\r\n         <vs-td :data=\"data[indextr].temporal_nombre_docente\">\r\n            {{data[indextr].temporal_nombre_docente}}\r\n          </vs-td>\r\n\r\n          <vs-td :data=\"data[indextr].nombre_asesor\">\r\n            {{data[indextr].nombre_asesor}}\r\n          </vs-td>\r\n\r\n          <vs-td :data=\"data[indextr].temporal_institucion\">\r\n            {{data[indextr].temporal_institucion}}\r\n          </vs-td>\r\n\r\n          <vs-td>\r\n              <vx-tooltip style=\"display: inline-block;\" text=\"Editar Institucion\" position=\"top\" color=\"primary\">\r\n                <vs-button class=\"modal-default-button\" color=\"success\" @click=\"update=true;openModalEditar(data[indextr])\" type=\"filled\" icon-pack=\"feather\" icon=\"icon-edit\"> </vs-button>\r\n              </vx-tooltip> &nbsp;\r\n\r\n          </vs-td>\r\n        </vs-tr>\r\n      </template>\r\n    </vs-table>\r\n  </div>  \r\n    <!-- Modal Editar-->\r\n      <div class=\"demo-alignment\">\r\n            <vs-popup classContent=\"popup-example\" title=\"Editar Institucion\" :active.sync=\"popupEditInstitucion\">\r\n        \r\n                Institucion:\r\n              \r\n                <v-select :options=\"instituciones\" :reduce=\"instituciones => instituciones\" label=\"label\" class=\"w-full\" v-model=\"asesor.institucion\" />\r\n                 <br><br>       \r\n                <vs-button color=\"success\" class=\"w-full mb-3\" @click=\"guardarInstitucion()\" type=\"gradient\" >Actualizar</vs-button>\r\n            </vs-popup>\r\n       </div>\r\n</div>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport moment from 'moment'\r\nimport vSelect from 'vue-select'\r\n\r\nexport default ({\r\n    data() {\r\n        return{\r\n            asesorarreglo:[],\r\n            cedula:'',\r\n            contratosarreglo:[],\r\n            //para la edicion\r\n            popupEditInstitucion:false,\r\n            \r\n            asesor:{\r\n              institucion:'',\r\n              cedula_asesor:'',\r\n              contrato:'',\r\n            \r\n            },\r\n            instituciones:[],\r\n\r\n        }\r\n        \r\n    },\r\n    components: {\r\n        'v-select': vSelect,\r\n            \r\n    },\r\n    methods:{\r\n        obtenerContratos(){\r\n        let me = this;\r\n        let formData = new FormData();\r\n\r\n        formData.append('cedula',this.cedula);\r\n    \r\n       \r\n        \r\n             \r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'temporadas/asesor/contratos', formData)\r\n            .then(res => {\r\n\r\n             console.log(res)\r\n\r\n         \r\n            this.contratosarreglo = res.data;\r\n          \r\n            me.$vs.loading.close()\r\n            me.$vs.notify({\r\n            text:'Listando contratos',\r\n            color:'success',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n        })  \r\n        },\r\n        //para realizar la edicion\r\n         //para guardar las areas\r\n\r\n         guardarInstitucion(){\r\n        \r\n            let me = this;\r\n\r\n            if( me.asesor.institucion.id === undefined ){\r\n                  me.$vs.notify({\r\n                      text:'Seleccione una Institucion',\r\n                      color:'warning',\r\n                      iconPack: 'feather',\r\n                      icon:'icon-check'})\r\n                  return;\r\n              }\r\n\r\n            let formData = new FormData();\r\n         \r\n                formData.append('idInstitucion', me.asesor.institucion.id);\r\n                formData.append('cedula_asesor', me.asesor.cedula_asesor);\r\n                formData.append('nombre_institucion', me.asesor.institucion.label);\r\n                formData.append('nombre_ciudad', me.asesor.institucion.nombre_ciudad);\r\n                formData.append('contrato', me.asesor.contrato);\r\n            this.$http.post(this.$server_url+'asesor-institucion', formData)\r\n                .then(function (res) {\r\n                    me.$vs.notify({\r\n                        text: res.data,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    me.obtenerContratos()\r\n                    \r\n                    me.popupEditInstitucion=false,\r\n                 \r\n                    limpiar();\r\n                  \r\n                })\r\n                .catch(function (error) {})\r\n\r\n           \r\n\r\n        },\r\n        limpiar(){\r\n          let me = this;\r\n          me.asesor.institucion = \"\";\r\n\r\n        },\r\n        //para abrir el popup de edicion\r\n       \r\n        openModalEditar(data={}){\r\n            let me = this;\r\n           \r\n            me.popupEditInstitucion = true;\r\n            \r\n            //llenar la data en los campos\r\n            me.asesor.contrato = data.contrato;\r\n            me.asesor.cedula_asesor = data.cedula_asesor;\r\n            //  me.area.nombrearea = data.nombrearea;\r\n             me.asesor.institucion = {id:data.idInstitucion, label:data.temporal_institucion};\r\n \r\n        },\r\n    },\r\n\r\n    created() {\r\n       let transformaraParse = JSON.parse(localStorage.getItem('usuario')); \r\n       this.asesorarreglo = transformaraParse;\r\n       this.cedula = this.asesorarreglo.cedula;\r\n      //traer las instituciones\r\n      this.$http.get(this.$server_url+'institucionesResportes').then(res => {\r\n            this.instituciones = res.data;\r\n        })\r\n    },\r\n\r\n    mounted() {\r\n      \r\n    \r\n \r\n   this.obtenerContratos();\r\n\r\n   \t\r\n}\r\n})\r\n</script>\r\n"],"mappings":"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","ignoreList":[]}]}