{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\components\\Pedidos\\Configuracion\\Convenios\\ScreenConvenio.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\components\\Pedidos\\Configuracion\\Convenios\\ScreenConvenio.vue","mtime":1712682816562},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\babel.config.js","mtime":1712682813877},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\.babelrc","mtime":1712682813750},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"C:/laragon/www/PRY_NEW_JEYSON/LOCAL/plataformaprolipa_vue/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { mapState, mapActions } from 'vuex';\nimport PedidosRepository from \"../../../../../../repositories/PedidosRepository\";\nvar ListadoConveniosVue = function ListadoConveniosVue() {\n  return import(\"./ListadoConvenios.vue\");\n};\nvar DatosConveniosVue = function DatosConveniosVue() {\n  return import(\"./DatosConvenios\");\n};\nvar CrearContratoConvenioVue = function CrearContratoConvenioVue() {\n  return import(\"./CrearContratoConvenio\");\n};\nvar CrearConvenioVue = function CrearConvenioVue() {\n  return import(\"./CrearConvenio.vue\");\n};\nexport default {\n  components: {\n    ListadoConveniosVue: ListadoConveniosVue,\n    DatosConveniosVue: DatosConveniosVue,\n    CrearContratoConvenioVue: CrearContratoConvenioVue,\n    CrearConvenioVue: CrearConvenioVue\n  },\n  data: function data() {\n    return {\n      usuario: [],\n      id_pedido: 0,\n      arrayInformation: [],\n      arrayAgreements: [],\n      arrayContracts: [],\n      sendPedido: '',\n      setAnticipoGlobal: 0,\n      aniosDivider: 0,\n      valuesAgreements: 0,\n      showSuggested: false,\n      idConvenio: 0,\n      popupAddAgreement: false,\n      //variables for contract\n      popupAddContract: false,\n      idConvenioHijo: 0,\n      agreementSonObject: '',\n      //end variables for contract\n      open: false,\n      datosInstitucion: ''\n    };\n  },\n  computed: _objectSpread({}, mapState(['pedidoId', 'userRoot', 'groupFacturador', 'ObjectPedido'])),\n  created: function created() {\n    var me = this;\n    me.usuario = JSON.parse(localStorage.getItem(\"usuario\"));\n  },\n  mounted: function mounted() {\n    var me = this;\n    me.id_pedido = me.ObjectPedido.id_pedido;\n    me.sendPedido = me.ObjectPedido;\n    me.datosInstitucion = me.ObjectPedido;\n    me.getDatosConvenio();\n    me.getContratos();\n  },\n  methods: {\n    getPedido: function getPedido() {\n      var me = this;\n      me.sendPedido = [];\n      PedidosRepository.getPedidoXID(me.id_pedido).then(function (r) {\n        me.sendPedido = r.data[0];\n      });\n    },\n    changeRecharge: function changeRecharge(e, tr) {\n      var me = this;\n      me.arrayAgreements = [];\n      //cancel\n      if (e == 0) {\n        me.popupAddContract = true;\n      }\n      if (e == 1) {\n        me.getPedido();\n        me.getDatosConvenio();\n        var datos = {\n          \"tipo\": 8\n        };\n        me.$emit('recharge', datos);\n      }\n      //crud\n      if (e == 2) {\n        me.popupAddContract = true;\n        me.idConvenioHijo = tr.doc_codigo;\n        me.agreementSonObject = tr;\n      }\n      //resete values\n      if (e == 3) {\n        me.getPedido();\n        me.getDatosConvenio();\n        me.setValuesAgreements(0);\n        var _datos = {\n          \"tipo\": 8\n        };\n        me.$emit('recharge', _datos);\n      }\n    },\n    getContratos: function getContratos() {\n      var me = this;\n      me.arrayContracts = [];\n      var _me$ObjectPedido = me.ObjectPedido,\n        id_institucion = _me$ObjectPedido.id_institucion,\n        id_periodo = _me$ObjectPedido.id_periodo;\n      this.$http.get(this.$server_url + \"convenio?allContratoXInstitucion=yes&institucion_id=\".concat(id_institucion)).then(function (res) {\n        me.arrayContracts = res.data;\n      }).catch(function (error) {\n        console.log(error + ' error');\n      });\n    },\n    getDatosConvenio: function getDatosConvenio() {\n      var me = this;\n      me.arrayAgreements = [];\n      me.arrayInformation = [];\n      me.aniosDivider = 0;\n      me.valuesAgreements = 0;\n      me.showSuggested = false;\n      me.popupAddContract = false;\n      me.popupAddAgreement = false;\n      me.tooContracts = false;\n      var _me$datosInstitucion = me.datosInstitucion,\n        id_institucion = _me$datosInstitucion.id_institucion,\n        id_periodo = _me$datosInstitucion.id_periodo;\n      me.$vs.loading();\n      this.$http.get(this.$server_url + \"convenio?AllConvenios=yes&institucion_id=\".concat(id_institucion)).then(function (res) {\n        me.$vs.loading.close();\n        var datos = res.data;\n        console.log(\"eee\", datos);\n        if (datos.length > 0) {\n          me.arrayInformation = datos.filter(function (p) {\n            return p.periodo_id == id_periodo || p.id == me.sendPedido.pedidos_convenios_id;\n          });\n          if (me.arrayInformation.length > 0) {\n            me.open = false;\n            console.log(\"coincide\");\n            // me.arrayInformation   = datos\n            me.setAnticipoGlobal = me.arrayInformation[0].anticipo_global;\n            me.aniosDivider = me.arrayInformation[0].convenio_anios;\n            me.idConvenio = me.arrayInformation[0].id;\n            if (me.aniosDivider > 0) {\n              me.setIdConvenioToHijos();\n              me.getConvenios(res.data[0].id);\n            }\n          } else {\n            me.open = true;\n            console.log(\"no coincide\");\n          }\n        } else {\n          me.open = true;\n        }\n      }).catch(function (error) {\n        me.$vs.loading.close();\n        me.$vs.notify({\n          text: 'Error al cargar los datos',\n          color: 'danger',\n          iconPack: 'feather',\n          icon: 'icon-check'\n        });\n        console.log(error + ' error');\n      });\n    },\n    setIdConvenioToHijos: function setIdConvenioToHijos() {\n      var me = this;\n      var _me$datosInstitucion2 = me.datosInstitucion,\n        id_institucion = _me$datosInstitucion2.id_institucion,\n        id_periodo = _me$datosInstitucion2.id_periodo;\n      this.$http.get(this.$server_url + \"convenio?setIdConvenioToHijos=yes&institucion_id=\".concat(id_institucion, \"&periodo_id=\").concat(id_periodo, \"&idConvenio=\").concat(me.idConvenio)).then(function (res) {}).catch(function (error) {\n        console.log(error + ' error');\n      });\n    },\n    getConvenios: function getConvenios() {\n      var me = this;\n      me.arrayAgreements = [];\n      me.$vs.loading();\n      this.$http.get(this.$server_url + \"convenio?getConveniosXId=yes&id=\".concat(me.idConvenio)).then(function (res) {\n        me.$vs.loading.close();\n        var datos = res.data;\n        if (datos.length > 0) {\n          me.arrayAgreements = datos;\n          //VALOR TOTAL CONTRATOS\n          me.arrayAgreements.map(function (p) {\n            me.valuesAgreements = parseFloat(me.valuesAgreements) + parseFloat(p.doc_valor);\n          });\n        }\n      }).catch(function (error) {\n        me.$vs.loading.close();\n        console.log(error + ' error');\n      });\n    },\n    intentAddContrato: function intentAddContrato() {\n      var me = this;\n      if (me.arrayAgreements.length >= me.aniosDivider) {\n        me.$vs.notify({\n          text: \"Ya no puedes crear m\\xE1s contratos por que el convenio es solo \".concat(me.aniosDivider, \" a\\xF1os\"),\n          color: 'warning',\n          iconPack: 'feather',\n          icon: 'icon-check'\n        });\n        return;\n      }\n      me.idConvenioHijo = 0;\n      me.popupAddContract = true;\n    },\n    setValuesAgreements: function setValuesAgreements(type) {\n      //type => 0 => actualizar valores a 0 => 1 mostrar valores sugeridos\n      var me = this;\n      var count = 1;\n      me.arrayAgreements.map(function (p, index) {\n        //update a 0\n        if (type == 0) {\n          p.valueSuggested = 0;\n        }\n        //values suggested\n        else {\n          if (count == me.aniosDivider) {\n            p.valueSuggested = parseFloat(me.arrayInformation[0].anticipo_global / me.arrayInformation[0].convenio_anios);\n          } else {\n            p.valueSuggested = me.redondearHaciaArriba(parseFloat(me.arrayInformation[0].anticipo_global / me.arrayInformation[0].convenio_anios));\n          }\n        }\n        count++;\n      });\n      //update values suggested\n      if (type == 0) {\n        me.updateValuesSuggested();\n      }\n    },\n    updateValuesSuggested: function updateValuesSuggested() {\n      var me = this;\n      var formData = new FormData();\n      formData.append('updateValuesSuggested', 'yes');\n      formData.append('data_contratos', JSON.stringify(me.arrayAgreements));\n      formData.append('user_created', me.usuario.idusuario);\n      formData.append('idConvenio', me.idConvenio);\n      this.$http.post(this.$server_url + 'convenio', formData).then(function (res) {\n        if (res.data.status == 0) {\n          me.$vs.notify({\n            text: res.data.message,\n            color: 'danger',\n            iconPack: 'feather',\n            icon: 'icon-check'\n          });\n          return;\n        }\n        me.showSuggested = false;\n        me.getDatosConvenio();\n        me.$vs.notify({\n          text: 'Se guardo con éxito',\n          color: 'success',\n          iconPack: 'feather',\n          icon: 'icon-check'\n        });\n      }).catch(function (e) {\n        // me.$vs.loading.close()\n      });\n    },\n    redondearHaciaArriba: function redondearHaciaArriba(numero) {\n      if (numero == 0 || numero == undefined || numero == null) {\n        return 0;\n      }\n      return Math.ceil(numero);\n    }\n  }\n};",{"version":3,"names":["mapState","mapActions","PedidosRepository","ListadoConveniosVue","DatosConveniosVue","CrearContratoConvenioVue","CrearConvenioVue","components","data","usuario","id_pedido","arrayInformation","arrayAgreements","arrayContracts","sendPedido","setAnticipoGlobal","aniosDivider","valuesAgreements","showSuggested","idConvenio","popupAddAgreement","popupAddContract","idConvenioHijo","agreementSonObject","open","datosInstitucion","computed","_objectSpread","created","me","JSON","parse","localStorage","getItem","mounted","ObjectPedido","getDatosConvenio","getContratos","methods","getPedido","getPedidoXID","then","r","changeRecharge","e","tr","datos","$emit","doc_codigo","setValuesAgreements","_me$ObjectPedido","id_institucion","id_periodo","$http","get","$server_url","concat","res","catch","error","console","log","tooContracts","_me$datosInstitucion","$vs","loading","close","length","filter","p","periodo_id","id","pedidos_convenios_id","anticipo_global","convenio_anios","setIdConvenioToHijos","getConvenios","notify","text","color","iconPack","icon","_me$datosInstitucion2","map","parseFloat","doc_valor","intentAddContrato","type","count","index","valueSuggested","redondearHaciaArriba","updateValuesSuggested","formData","FormData","append","stringify","idusuario","post","status","message","numero","undefined","Math","ceil"],"sources":["src/views/temporadas/components/Pedidos/Configuracion/Convenios/ScreenConvenio.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <vx-card title=\"Datos Convenio\">\r\n      <vs-alert color=\"danger\" v-if=\"(arrayAgreements.length > aniosDivider) && arrayInformation.length > 0\"><p class=\"text-center font-bold\">Error: Hay contratos {{ arrayAgreements.length }} y {{ aniosDivider}} años de convenio</p></vs-alert>\r\n      <vs-button v-if=\"arrayInformation.length == 0 && popupAddAgreement == false && open == true\" @click=\"popupAddAgreement = true;\" color=\"primary\" type=\"border\">Crear Convenio</vs-button>\r\n      <vs-button v-if=\"arrayInformation.length == 0 && popupAddAgreement\"          @click=\"popupAddAgreement = false;\" color=\"primary\" type=\"border\">◄ Regresar</vs-button>\r\n      <!--CREAR CONVENIO-->\r\n      <CrearConvenioVue  v-if=\"popupAddAgreement\" :ObjectPedido=\"sendPedido\" :usuario=\"usuario\" :datosInstitucion=\"datosInstitucion\"  :groupFacturador=\"groupFacturador\" @changeRecharge=\"changeRecharge\"/>\r\n      <!--LISTADO INFORMACION CONVENIO-->\r\n      <DatosConveniosVue v-else :idConvenio=\"idConvenio\" :sendPedido=\"sendPedido\" :arrayInformation=\"arrayInformation\" :userRoot=\"userRoot\" :groupFacturador=\"groupFacturador\"  @changeRecharge=\"changeRecharge\" :usuario=\"usuario\"/>\r\n    </vx-card>\r\n    <!--LISTADO DE CONTRATOS DEL CONVENIO-->\r\n    <vx-card :title=\"'Contratos del Convenio #'+idConvenio \" class=\"mt-3\" v-if=\"arrayInformation.length > 0\">\r\n      <div class=\"vx-row ml-1\">\r\n        <p> <vs-chip>CONVENIO GLOBAL:           <b class=\"ml-1\">              {{ setAnticipoGlobal | filterDecimal }}</b></vs-chip></p>\r\n        <p> <vs-chip>TOTAL CONTRATOS:           <b class=\"ml-1\">              {{ valuesAgreements  | filterDecimal }}</b></vs-chip></p>\r\n        <p> <vs-chip>VALOR CONVENIO DISPONIBLE: <b class=\"ml-1 text-success\"> {{ (setAnticipoGlobal - valuesAgreements) | filterDecimal }}</b></vs-chip></p>\r\n      </div>\r\n      <!--LISTADO DE CONTRATOS-->\r\n      <div v-if=\"popupAddContract == false\">\r\n        <div class=\"flex mt-5 justify-center\" >\r\n          <div class=\"flex\" v-if=\"!showSuggested && groupFacturador\">\r\n            <vs-button class=\"p-2\" v-if=\"arrayAgreements.length > 0\" @click=\"intentAddContrato()\" color=\"primary\" type=\"border\" icon-pack=\"feather\" icon=\"icon-plus\">Agregar contrato</vs-button>\r\n            <vs-button v-if=\"arrayAgreements.length > 0\" @click=\"showSuggested = true;setValuesAgreements(1)\" color=\"#3CA7E5\" class=\"ml-3 p-2\" type=\"filled\" icon-pack=\"feather\" icon=\"icon-eye\">Mostrar valores sugeridos</vs-button>\r\n          </div>\r\n        </div>\r\n        <ListadoConveniosVue  :idConvenio=\"idConvenio\" :arrayAgreements=\"arrayAgreements\" :groupFacturador=\"groupFacturador\" @changeRecharge=\"changeRecharge\" :showSuggested=\"showSuggested\" :setAnticipoGlobal=\"setAnticipoGlobal\" :usuario=\"usuario\"  :datosInstitucion=\"datosInstitucion\" class=\"mt-5\"/>\r\n        <div v-if=\"showSuggested\">\r\n          <div class=\"flex justify-center mt-5\">\r\n            <vs-button class=\"mr-3 mb-2\" icon=\"check\" @click=\"updateValuesSuggested()\">Aplicar valores sugeridos</vs-button>\r\n            <vs-button color=\"warning\" type=\"border\" icon-pack=\"feather\" icon=\"icon-x\" class=\"mb-2\" @click=\"showSuggested = false;\">Cancelar</vs-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!--MODALES-->\r\n      <!--MODAL PARA CREAR-->\r\n      <div v-if=\"popupAddContract\" class=\"mt-5\">\r\n        <CrearContratoConvenioVue @changeRecharge=\"getDatosConvenio\" :idConvenio=\"idConvenio\" :idConvenioHijo=\"idConvenioHijo\" :agreementSonObject=\"agreementSonObject\" :arrayContracts=\"arrayContracts\" :arrayInformation=\"arrayInformation\" :usuario=\"usuario\"/>\r\n      </div>\r\n    </vx-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n    mapState,\r\n    mapActions\r\n} from 'vuex'\r\nimport PedidosRepository from '../../../../../../repositories/PedidosRepository'\r\nconst ListadoConveniosVue           = () => import('./ListadoConvenios.vue')\r\nconst DatosConveniosVue             = () => import('./DatosConvenios')\r\nconst CrearContratoConvenioVue      = () => import('./CrearContratoConvenio')\r\nconst CrearConvenioVue              = () => import('./CrearConvenio.vue')\r\nexport default {\r\n  components:{\r\n    ListadoConveniosVue,\r\n    DatosConveniosVue,\r\n    CrearContratoConvenioVue,\r\n    CrearConvenioVue,\r\n  },\r\n  data() {\r\n    return{\r\n      usuario:[],\r\n      id_pedido:0,\r\n      arrayInformation:[],\r\n      arrayAgreements:[],\r\n      arrayContracts:[],\r\n      sendPedido:'',\r\n      setAnticipoGlobal:0,\r\n      aniosDivider:0,\r\n      valuesAgreements:0,\r\n      showSuggested:false,\r\n      idConvenio:0,\r\n      popupAddAgreement:false,\r\n      //variables for contract\r\n      popupAddContract:false,\r\n      idConvenioHijo:0,\r\n      agreementSonObject:'',\r\n      //end variables for contract\r\n      open:false,\r\n      datosInstitucion:'',\r\n    }\r\n  },\r\n  computed:{\r\n      ...mapState(['pedidoId','userRoot','groupFacturador','ObjectPedido']),\r\n  },\r\n  created(){\r\n    let me = this;\r\n    me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n  },\r\n  mounted(){\r\n    let me = this\r\n    me.id_pedido          = me.ObjectPedido.id_pedido\r\n    me.sendPedido         = me.ObjectPedido\r\n    me.datosInstitucion   = me.ObjectPedido\r\n    me.getDatosConvenio()\r\n    me.getContratos()\r\n  },\r\n  methods:{\r\n    getPedido(){\r\n      let me = this\r\n      me.sendPedido = []\r\n      PedidosRepository.getPedidoXID(me.id_pedido).then(r => { me.sendPedido = r.data[0]; })\r\n    },\r\n    changeRecharge(e,tr){\r\n      let me = this\r\n      me.arrayAgreements = []\r\n      //cancel\r\n      if(e == 0){ me.popupAddContract = true; }\r\n      if(e == 1){\r\n        me.getPedido()\r\n        me.getDatosConvenio()\r\n        let datos = {\r\n          \"tipo\"                            :8,\r\n        }\r\n        me.$emit('recharge',datos)\r\n      }\r\n      //crud\r\n      if(e == 2){\r\n        me.popupAddContract   = true\r\n        me.idConvenioHijo     = tr.doc_codigo\r\n        me.agreementSonObject = tr\r\n      }\r\n      //resete values\r\n      if(e == 3) {\r\n        me.getPedido()\r\n        me.getDatosConvenio()\r\n        me.setValuesAgreements(0)\r\n          let datos = {\r\n          \"tipo\"                            :8,\r\n        }\r\n        me.$emit('recharge',datos)\r\n      }\r\n    },\r\n    getContratos(){\r\n      let me = this;\r\n      me.arrayContracts                  = []\r\n      const { id_institucion,id_periodo  }  = me.ObjectPedido\r\n      this.$http.get(this.$server_url+`convenio?allContratoXInstitucion=yes&institucion_id=${id_institucion}`)\r\n        .then(function (res) {\r\n          me.arrayContracts = res.data\r\n      })\r\n      .catch(function (error) {\r\n          console.log(error + ' error');\r\n      })\r\n    },\r\n    getDatosConvenio() {\r\n      let me = this;\r\n      me.arrayAgreements                   = []\r\n      me.arrayInformation                  = []\r\n      me.aniosDivider                      = 0\r\n      me.valuesAgreements                  = 0\r\n      me.showSuggested                     = false\r\n      me.popupAddContract                  = false\r\n      me.popupAddAgreement                 = false\r\n      me.tooContracts                      = false\r\n      const { id_institucion,id_periodo  }  = me.datosInstitucion\r\n      me.$vs.loading()\r\n      this.$http.get(this.$server_url+`convenio?AllConvenios=yes&institucion_id=${id_institucion}`)\r\n        .then(function (res) {\r\n          me.$vs.loading.close()\r\n          let datos = res.data\r\n          console.log(\"eee\",datos)\r\n          if(datos.length > 0){\r\n            me.arrayInformation   = datos.filter(p => p.periodo_id == id_periodo || p.id == me.sendPedido.pedidos_convenios_id)\r\n            if(me.arrayInformation.length > 0){\r\n              me.open = false;\r\n              console.log(\"coincide\")\r\n              // me.arrayInformation   = datos\r\n              me.setAnticipoGlobal  = me.arrayInformation[0].anticipo_global\r\n              me.aniosDivider       = me.arrayInformation[0].convenio_anios\r\n              me.idConvenio         = me.arrayInformation[0].id\r\n              if(me.aniosDivider > 0){\r\n                me.setIdConvenioToHijos()\r\n                me.getConvenios(res.data[0].id)\r\n              }\r\n            }else{\r\n              me.open = true;\r\n              console.log(\"no coincide\")\r\n            }\r\n          }else{\r\n            me.open = true;\r\n          }\r\n      })\r\n      .catch(function (error) {\r\n        me.$vs.loading.close()\r\n        me.$vs.notify({\r\n        text:'Error al cargar los datos',\r\n        color:'danger',\r\n        iconPack: 'feather',\r\n        icon:'icon-check'})\r\n        console.log(error + ' error');\r\n      })\r\n    },\r\n    setIdConvenioToHijos(){\r\n      let me = this;\r\n      const { id_institucion,id_periodo  }  = me.datosInstitucion\r\n      this.$http.get(this.$server_url+`convenio?setIdConvenioToHijos=yes&institucion_id=${id_institucion}&periodo_id=${id_periodo}&idConvenio=${me.idConvenio}`)\r\n        .then(function (res) {\r\n      })\r\n      .catch(function (error) {\r\n          console.log(error + ' error');\r\n      })\r\n    },\r\n    getConvenios(){\r\n      let me = this;\r\n      me.arrayAgreements                  = []\r\n      me.$vs.loading()\r\n      this.$http.get(this.$server_url+`convenio?getConveniosXId=yes&id=${me.idConvenio}`)\r\n        .then(function (res) {\r\n          me.$vs.loading.close()\r\n          let datos = res.data\r\n          if(datos.length > 0){\r\n            me.arrayAgreements    = datos\r\n            //VALOR TOTAL CONTRATOS\r\n            me.arrayAgreements.map(p => {\r\n              me.valuesAgreements = parseFloat(me.valuesAgreements) + parseFloat(p.doc_valor)\r\n            })\r\n          }\r\n      })\r\n      .catch(function (error) {\r\n        me.$vs.loading.close()\r\n        console.log(error + ' error');\r\n      })\r\n    },\r\n    intentAddContrato(){\r\n      let me = this;\r\n      if(me.arrayAgreements.length >= me.aniosDivider){\r\n        me.$vs.notify({\r\n        text:`Ya no puedes crear más contratos por que el convenio es solo ${ me.aniosDivider } años`,\r\n        color:'warning',\r\n        iconPack: 'feather',\r\n        icon:'icon-check'})\r\n        return\r\n      }\r\n      me.idConvenioHijo   = 0;\r\n      me.popupAddContract = true;\r\n    },\r\n    setValuesAgreements(type){\r\n      //type => 0 => actualizar valores a 0 => 1 mostrar valores sugeridos\r\n      let   me = this\r\n      let  count  = 1\r\n      me.arrayAgreements.map((p,index) => {\r\n        //update a 0\r\n        if(type == 0){\r\n          p.valueSuggested = 0\r\n        }\r\n        //values suggested\r\n        else{\r\n          if(count == me.aniosDivider){\r\n            p.valueSuggested = parseFloat(me.arrayInformation[0].anticipo_global / me.arrayInformation[0].convenio_anios)\r\n          }else{\r\n            p.valueSuggested = me.redondearHaciaArriba(parseFloat(me.arrayInformation[0].anticipo_global / me.arrayInformation[0].convenio_anios))\r\n          }\r\n        }\r\n        count++\r\n      })\r\n      //update values suggested\r\n      if(type == 0){ me.updateValuesSuggested() }\r\n    },\r\n    updateValuesSuggested(){\r\n      let me = this;\r\n      let formData = new FormData();\r\n      formData.append('updateValuesSuggested',  'yes')\r\n      formData.append('data_contratos',         JSON.stringify(me.arrayAgreements))\r\n      formData.append('user_created',           me.usuario.idusuario);\r\n      formData.append('idConvenio',             me.idConvenio)\r\n      this.$http.post(this.$server_url+'convenio', formData)\r\n      .then(res => {\r\n        if(res.data.status == 0){\r\n          me.$vs.notify({\r\n          text:res.data.message,\r\n          color:'danger',\r\n          iconPack: 'feather',\r\n          icon:'icon-check'})\r\n          return\r\n        }\r\n        me.showSuggested = false\r\n        me.getDatosConvenio()\r\n        me.$vs.notify({\r\n          text:'Se guardo con éxito',\r\n          color:'success',\r\n          iconPack: 'feather',\r\n          icon:'icon-check'})\r\n      })\r\n      .catch((e)=>{\r\n        // me.$vs.loading.close()\r\n      })\r\n    },\r\n    redondearHaciaArriba(numero) {\r\n      if(numero == 0 || numero == undefined || numero == null){ return 0 }\r\n      return Math.ceil(numero);\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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","ignoreList":[]}]}