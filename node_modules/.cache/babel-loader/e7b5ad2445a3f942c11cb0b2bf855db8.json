{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\materialapoyo\\components\\material_unidades.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\materialapoyo\\components\\material_unidades.vue","mtime":1712682816151},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\babel.config.js","mtime":1712682813877},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\.babelrc","mtime":1712682813750},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport vSelect from 'vue-select';\nexport default {\n  data: function data() {\n    return {\n      infounidades: [],\n      infoarchivosid: 0,\n      //para obtener el id del libro\n      infolibro: 0,\n      //para traer las unidades\n      arregloTraeUnidades: [],\n      //para el modal\n      popupActivo2: false,\n      id: 0,\n      material: {\n        unidad: ''\n      }\n    };\n  },\n  components: {\n    'v-select': vSelect\n  },\n  methods: {\n    //para el listado de materiales unidades\n    list: function list() {\n      var _this = this;\n      var me = this;\n      me.$vs.loading();\n      this.$http.get(this.$server_url + \"materialunidades/\" + this.infoarchivosid).then(function (res) {\n        _this.infounidades = res.data;\n        me.$vs.loading.close();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //para abrir el modal y editar        \n    openModal: function openModal() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.filtrarUnidades();\n      this.popupActivo2 = true;\n      this.id = data.id;\n      this.material.unidad = {\n        id_unidad_libro: data.id_unidad,\n        unidad: data.unidad\n      };\n      // this.libro.nombre_serie = {id_serie:data.id_serie, pnombres:data.pnombres};\n    },\n    editar: function editar() {\n      var me = this;\n      var formData = new FormData();\n      formData.append('id', me.id);\n      formData.append('id_unidad', me.material.unidad.id_unidad_libro);\n      me.$vs.loading();\n      this.$http.post(this.$server_url + 'materialunidadeseditar', formData).then(function (res) {\n        me.list();\n        me.popupActivo2 = false;\n        me.$vs.loading.close();\n        me.$vs.notify({\n          text: 'Unidad actualizada exitosamente',\n          color: 'success',\n          iconPack: 'feather',\n          icon: 'icon-check'\n        });\n      });\n    },\n    //filtro para filtrar unidad por libro\n    filtrarUnidades: function filtrarUnidades() {\n      var me = this;\n      me.$vs.loading();\n      var formData = new FormData();\n      formData.append('idlibro', me.infolibro);\n      this.$http.post(this.$server_url + 'traerunidades', formData).then(function (res) {\n        me.arregloTraeUnidades = res.data;\n        me.$vs.loading.close();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //para eliminar la unidad\n    eliminarUnidad: function eliminarUnidad(id, id_material, id_unidad) {\n      var me = this;\n      var formData = new FormData();\n      formData.append('id', id);\n      formData.append('id_material', id_material);\n      formData.append('id_unidad', id_unidad);\n      me.$vs.loading();\n      this.$http.post(this.$server_url + 'materialunidadeseliminar', formData).then(function (res) {\n        // me.$router.go(0)\n\n        if (res.data.status == \"0\") {\n          me.$vs.notify({\n            text: 'No se puede eliminar unidades que tienen temas elimine los temas de esta unidad',\n            color: 'danger',\n            iconPack: 'feather',\n            icon: 'icon-check'\n          });\n          me.$vs.loading.close();\n        }\n        if (res.data.status == \"1\") {\n          me.$vs.notify({\n            text: 'Se elimino correctamente',\n            color: 'success',\n            iconPack: 'feather',\n            icon: 'icon-check'\n          });\n          me.$vs.loading.close();\n          me.list();\n          // window.location.reload();\n        }\n      });\n    }\n  },\n  created: function created() {\n    var transformaraParse = JSON.parse(localStorage.getItem('infoarchivosid'));\n    //llenar el arreglo  de archivos \n    this.infoarchivosid = transformaraParse;\n    //para obtener el id del libro\n    var transformaraParse2 = JSON.parse(localStorage.getItem('infoarchivolibro'));\n    this.infolibro = transformaraParse2;\n    this.list();\n    //listado de unidades para el select\n  }\n};",{"version":3,"names":["axios","vSelect","data","infounidades","infoarchivosid","infolibro","arregloTraeUnidades","popupActivo2","id","material","unidad","components","methods","list","_this","me","$vs","loading","$http","get","$server_url","then","res","close","catch","error","console","log","openModal","arguments","length","undefined","filtrarUnidades","id_unidad_libro","id_unidad","editar","formData","FormData","append","post","notify","text","color","iconPack","icon","eliminarUnidad","id_material","status","created","transformaraParse","JSON","parse","localStorage","getItem","transformaraParse2"],"sources":["src/views/materialapoyo/components/material_unidades.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      \r\n    <!--- MODAL PARA Editar -->\r\n    <div class=\"centerx\">\r\n      \r\n      <vs-popup classContent=\"popup-example\"  title=\"Editar Unidad\" :active.sync=\"popupActivo2\">\r\n     \r\n      <div class=\"grupo\">\r\n          <div class=\"vx-col w-full mt-5\">\r\n           \r\n              Seleccione  unidad: \r\n              <v-select  :options=\"arregloTraeUnidades\" :reduce=\"arregloTraeUnidades => arregloTraeUnidades\" label=\"unidad\" class=\"w-full\" v-model=\"material.unidad\" />\r\n          </div>\r\n      </div>\r\n      \r\n        <br>\r\n\r\n      {{id}}\r\n        <br>\r\n        <vs-button @click=\"editar();\" color=\"primary\" type=\"filled\">Guardar Cambios</vs-button>\r\n    \r\n      </vs-popup>\r\n    </div>\r\n    <!--FIn del Modal para editar unidades-->\r\n        <vs-table max-items=\"3\" search pagination :data=\"infounidades\">\r\n          <template slot=\"header\">\r\n            <h3>\r\n            Unidades\r\n            </h3>\r\n          </template>\r\n\r\n          <template slot=\"thead\">\r\n            <vs-th>\r\n              Libro\r\n            </vs-th>\r\n          \r\n            <vs-th>\r\n              unidad\r\n            </vs-th>\r\n        \r\n                \r\n            <vs-th colspan=\"2\">\r\n              Accion\r\n            </vs-th>\r\n          </template>\r\n\r\n\r\n\r\n\r\n          <template slot-scope=\"{data}\">\r\n            <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\" >\r\n              <vs-td :data=\"data[indextr].nombrelibro\">\r\n                {{data[indextr].nombrelibro}}\r\n              </vs-td>\r\n              <vs-td :data=\"data[indextr].unidad\">\r\n                {{data[indextr].unidad}}\r\n              </vs-td>\r\n              <vs-td>\r\n                \r\n                <vs-button color=\"primary\" type=\"border\" @click=\"openModal(data[indextr]);\" icon=\"edit\">\r\n                </vs-button>\r\n              </vs-td>\r\n              <vs-td>\r\n          \r\n                <vs-button color=\"danger\" type=\"border\" icon=\"delete\" @click = \"eliminarUnidad(data[indextr].id ,data[indextr].id_material,data[indextr].id_unidad)\">\r\n                  <!-- id_material -->\r\n                </vs-button>\r\n              </vs-td>\r\n\r\n          \r\n\r\n            </vs-tr>\r\n          </template>\r\n        </vs-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nexport default {\r\n    data(){\r\n        return{\r\n            infounidades:[],\r\n            infoarchivosid:0,\r\n            //para obtener el id del libro\r\n            infolibro:0,\r\n            //para traer las unidades\r\n            arregloTraeUnidades:[],\r\n            //para el modal\r\n            popupActivo2:false,\r\n            id:0,\r\n            material:{\r\n              unidad:''\r\n            }\r\n        }\r\n    },\r\n    \r\n    components: {\r\n        'v-select': vSelect,\r\n                \r\n        },\r\n    methods:{\r\n        //para el listado de materiales unidades\r\n         list(){\r\n                let me = this;\r\n                me.$vs.loading() \r\n                this.$http.get(this.$server_url+`materialunidades/`+this.infoarchivosid).then(res => {\r\n                 this.infounidades = res.data;\r\n\r\n                 me.$vs.loading.close();       \r\n                  \r\n                })\r\n                .catch(function (error) {\r\n                \tconsole.log(error)\r\n                })\r\n  \r\n       \r\n        },\r\n\r\n      //para abrir el modal y editar        \r\n        openModal(data={}){\r\n            this.filtrarUnidades();\r\n            this.popupActivo2 = true;\r\n           \r\n            this.id  = data.id;\r\n            this.material.unidad = {id_unidad_libro:data.id_unidad, unidad:data.unidad};\r\n            // this.libro.nombre_serie = {id_serie:data.id_serie, pnombres:data.pnombres};\r\n         \r\n        \r\n        },\r\n      editar(){\r\n          let me = this;\r\n          let formData = new FormData();\r\n          formData.append('id', me.id);\r\n          formData.append('id_unidad', me.material.unidad.id_unidad_libro);\r\n            \r\n          me.$vs.loading()\r\n          this.$http.post(this.$server_url+'materialunidadeseditar', formData)\r\n          .then(res => {\r\n              \r\n              me.list();\r\n              me.popupActivo2 = false\r\n              me.$vs.loading.close()\r\n              me.$vs.notify({\r\n              text:'Unidad actualizada exitosamente',\r\n              color:'success',\r\n              iconPack: 'feather',\r\n              icon:'icon-check'})\r\n          })\r\n      },\r\n      //filtro para filtrar unidad por libro\r\n        filtrarUnidades(){\r\n               let me = this;\r\n               \r\n                \r\n                me.$vs.loading()\r\n                const formData = new FormData();\r\n                    formData.append('idlibro', me.infolibro);\r\n                   \r\n\r\n                this.$http.post(this.$server_url+'traerunidades', formData).then(res => {\r\n                    me.arregloTraeUnidades = res.data;\r\n              \r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                })  \r\n          },\r\n\r\n        //para eliminar la unidad\r\n        eliminarUnidad(id,id_material,id_unidad){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('id', id);\r\n            formData.append('id_material', id_material);\r\n            formData.append('id_unidad', id_unidad);\r\n\r\n            \r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'materialunidadeseliminar', formData)\r\n                .then(res => {\r\n                    // me.$router.go(0)\r\n                 \r\n                    if(res.data.status ==\"0\"){\r\n                      me.$vs.notify({\r\n                      text: 'No se puede eliminar unidades que tienen temas elimine los temas de esta unidad',\r\n                      color: 'danger',\r\n                      iconPack: 'feather',\r\n                      icon: 'icon-check'\r\n                    })\r\n                    me.$vs.loading.close()\r\n                    \r\n\r\n                  }\r\n\r\n                   if(res.data.status ==\"1\"){\r\n                      me.$vs.notify({\r\n                      text: 'Se elimino correctamente',\r\n                      color: 'success',\r\n                      iconPack: 'feather',\r\n                      icon: 'icon-check'\r\n                    })\r\n                   \r\n                    me.$vs.loading.close()\r\n                    me.list();\r\n                    // window.location.reload();\r\n\r\n                  }\r\n                })\r\n        }\r\n    },\r\n     created() {\r\n \r\n   \r\n   \r\n    let transformaraParse = JSON.parse(localStorage.getItem('infoarchivosid')); \r\n    //llenar el arreglo  de archivos \r\n    this.infoarchivosid = transformaraParse;\r\n    //para obtener el id del libro\r\n    let transformaraParse2 = JSON.parse(localStorage.getItem('infoarchivolibro')); \r\n    this.infolibro = transformaraParse2;\r\n    this.list();\r\n    //listado de unidades para el select\r\n   \r\n\r\n    },\r\n    \r\n}\r\n</script>"],"mappings":"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","ignoreList":[]}]}