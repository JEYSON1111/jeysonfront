{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\components\\pedidosDetalle.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\components\\pedidosDetalle.vue","mtime":1712682816617},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\babel.config.js","mtime":1712682813877},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\.babelrc","mtime":1712682813750},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport flatPickr from 'vue-flatpickr-component';\nimport 'flatpickr/dist/flatpickr.css';\nimport { FormWizard, TabContent } from 'vue-form-wizard';\nimport 'vue-form-wizard/dist/vue-form-wizard.min.css';\nimport vSelect from 'vue-select';\nimport registrar_beneficiariosVue from \"../../pedidos/registrar_beneficiarios.vue\";\nexport default {\n  components: {\n    FormWizard: FormWizard,\n    TabContent: TabContent,\n    flatPickr: flatPickr,\n    'v-select': vSelect,\n    registrar_beneficiariosVue: registrar_beneficiariosVue\n  },\n  data: function data() {\n    return {\n      confirmacion: false,\n      usuario: [],\n      arregloLibros: [],\n      mensaje: ''\n    };\n  },\n  props: {\n    id_pedido: {\n      type: Number,\n      default: 0\n    },\n    id_periodo: {\n      type: Number,\n      default: 0\n    },\n    pedido: {\n      type: Object,\n      default: {}\n    },\n    onlyVer: {\n      type: Number,\n      default: 1\n    }\n  },\n  created: function created() {\n    var me = this;\n    me.usuario = JSON.parse(localStorage.getItem(\"usuario\"));\n  },\n  mounted: function mounted() {\n    var me = this;\n    me.getLibros();\n    me.mensaje = 'Se entrego correctamente el pedido #' + me.pedido.id_pedido + ' de ' + me.pedido.nombreInstitucion;\n  },\n  methods: {\n    getLibros: function getLibros() {\n      var me = this;\n      me.arregloLibros = [];\n      this.$http.get(this.$server_url + 'get_val_pedidoInfoTodo/' + me.id_pedido).then(function (res) {\n        var datos = res.data;\n        if (datos.length > 0) {\n          var datos2 = datos.filter(function (p) {\n            return p.valor > 0;\n          });\n          //setear ARRAY\n          var preSetear = [];\n          datos2.forEach(function (element) {\n            var cal = new Object();\n            cal.idlibro = element.idlibro;\n            cal.nombrelibro = element.nombrelibro;\n            cal.valor = element.valor;\n            cal.precio = element.precio;\n            preSetear.push(cal);\n          });\n          //Generate unique array\n          var preTemplate = [];\n          datos2.forEach(function (element) {\n            var cal = new Object();\n            cal.idlibro = element.idlibro;\n            cal.nombrelibro = element.nombrelibro;\n            cal.precio = element.precio;\n            preTemplate.push(cal);\n          });\n          //CLEAR REPEAT\n          //quitar duplicados\n          var hash = {};\n          var preArrayUnico = [];\n          var resultado = preTemplate.filter(function (o) {\n            return hash[o.nombrelibro] ? false : hash[o.nombrelibro] = true;\n          });\n          preArrayUnico = resultado;\n          //////\n          //SUMAR VALORES PEDIDO + ALCANCES\n          var sumarValores = preSetear.reduce(function (acc, valor) {\n            if (acc[valor.idlibro]) {\n              acc[valor.idlibro] += valor.valor;\n            } else {\n              acc[valor.idlibro] = valor.valor;\n            }\n            return acc;\n          }, {});\n          //PASAR AL AREGLO UNICO LOS VALORES SUMADOS POR  LIBRO\n          var result = preArrayUnico.map(function (obj) {\n            obj[\"valor\"] = sumarValores[obj.idlibro];\n            return obj;\n          });\n          me.arregloLibros = result;\n        }\n      });\n    },\n    entregarPedido: function entregarPedido() {\n      var _this = this;\n      var me = this;\n      var formData = new FormData();\n      formData.append('estado', '2');\n      formData.append('entregaPedidoBodega', 'yes');\n      formData.append('id_pedido', me.id_pedido);\n      me.$vs.loading();\n      this.$http.post(this.$server_url + 'entregarPedido', formData).then(function (res) {\n        me.$vs.notify({\n          text: me.mensaje,\n          color: 'primary',\n          time: 8000,\n          iconPack: 'feather',\n          icon: 'icon-alert-triangle'\n        });\n        _this.$emit('changeRecarge', true);\n      }).catch(function (err) {\n        console.log(err);\n        me.$vs.loading.close();\n      });\n    }\n  }\n};",{"version":3,"names":["flatPickr","FormWizard","TabContent","vSelect","registrar_beneficiariosVue","components","data","confirmacion","usuario","arregloLibros","mensaje","props","id_pedido","type","Number","default","id_periodo","pedido","Object","onlyVer","created","me","JSON","parse","localStorage","getItem","mounted","getLibros","nombreInstitucion","methods","$http","get","$server_url","then","res","datos","length","datos2","filter","p","valor","preSetear","forEach","element","cal","idlibro","nombrelibro","precio","push","preTemplate","hash","preArrayUnico","resultado","o","sumarValores","reduce","acc","result","map","obj","entregarPedido","_this","formData","FormData","append","$vs","loading","post","notify","text","color","time","iconPack","icon","$emit","catch","err","console","log","close"],"sources":["src/views/temporadas/components/pedidosDetalle.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <div v-if=\"confirmacion\">\r\n        <p class=\"bg-warning text-white p-2\">!Estas seguro de entregar el pedido?</p>\r\n        <div class=\"flex mt-4\">\r\n          <vs-button color=\"success\" @click=\"entregarPedido();confirmacion=false;\" type=\"filled\">Si, entregar pedido</vs-button>\r\n          <vs-button color=\"primary\" class=\"ml-2\" @click=\"confirmacion = false;\" type=\"border\">Cancelar</vs-button>\r\n        </div>\r\n      </div>\r\n      <div v-else>\r\n      <vs-table max-items=\"20\" search pagination :data=\"arregloLibros\">\r\n          <template slot=\"header\">\r\n            <span>Cantidad: {{arregloLibros.length}}</span>\r\n          </template>\r\n          <template slot=\"thead\">\r\n              <vs-th>Libro</vs-th>\r\n              <vs-th>Cant. unidades</vs-th>\r\n              <vs-th>Precio unitario</vs-th>\r\n          </template>\r\n          <template slot-scope=\"{data}\">\r\n              <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                  <vs-td>\r\n                    {{data[indextr].nombrelibro}}<br>\r\n                  </vs-td>\r\n                  <vs-td>\r\n                      {{data[indextr].valor}}<br>\r\n                  </vs-td>\r\n                  <vs-td>\r\n                    {{tr.precio}}\r\n                  </vs-td>\r\n              </vs-tr>\r\n          </template>\r\n      </vs-table>\r\n      <vs-list style=\"margin-top: -40px;\">\r\n        <vs-list-header icon=\"supervisor_account\" title=\"Datos\"></vs-list-header>\r\n        <vs-list-item icon=\"check\" title=\"Tipo de venta\">\r\n          <vs-chip color=\"primary\"><span class=\"font-bold ml-2\"> {{pedido.tipo_venta_descr.toUpperCase()}}</span></vs-chip>\r\n        </vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"InstituciÃ³n\" :subtitle=\"pedido.nombreInstitucion\">\r\n          <small>Periodo: {{pedido.periodoescolar}}</small>\r\n        </vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"Asesor\" :subtitle=\"pedido.responsable\"></vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"Fecha de envio\" :subtitle=\"pedido.fecha_envio.substring(0,10)\"></vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"Fecha de entrega\" :subtitle=\"pedido.fecha_entrega.substring(0,10)\"></vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"Total venta\" :subtitle=\"pedido.total_venta\"></vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"Total de unidades\" :subtitle=\"pedido.total_unidades\"></vs-list-item>\r\n      </vs-list>\r\n        <div class=\"vx-row\">\r\n          <div class=\"w-full p-2 bg-gray-400 text-center\" v-if=\"pedido.estado_entrega == 0\">\r\n            <vs-button color=\"success\" icon=\"save\" class=\"w-full\" v-if=\"usuario.id_group == 27 && (onlyVer == 0)\"  @click=\"confirmacion = true;\" type=\"gradient\">Entregar pedido</vs-button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </template>\r\n    <script>\r\n    import flatPickr from 'vue-flatpickr-component';\r\n    import 'flatpickr/dist/flatpickr.css';\r\n    import {FormWizard, TabContent} from 'vue-form-wizard'\r\n    import 'vue-form-wizard/dist/vue-form-wizard.min.css'\r\n    import vSelect from 'vue-select';\r\n    import registrar_beneficiariosVue from '../../pedidos/registrar_beneficiarios.vue';\r\n    export default {\r\n        components:{\r\n          FormWizard,\r\n          TabContent,\r\n          flatPickr,\r\n          'v-select': vSelect,\r\n          registrar_beneficiariosVue,\r\n        },\r\n        data: () => ({\r\n          confirmacion:false,\r\n          usuario:[],\r\n          arregloLibros:[],\r\n          mensaje:'',\r\n        }),\r\n        props:{\r\n          id_pedido:{\r\n            type:Number,\r\n            default:0\r\n          },\r\n          id_periodo:{\r\n            type:Number,\r\n            default:0\r\n          },\r\n          pedido:{\r\n            type:Object,\r\n            default:{}\r\n          },\r\n          onlyVer:{\r\n            type:Number,\r\n            default:1,\r\n          }\r\n        },\r\n        created(){\r\n          let me = this;\r\n          me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n        },\r\n        mounted() {\r\n          let me = this;\r\n          me.getLibros()\r\n          me.mensaje = 'Se entrego correctamente el pedido #'+me.pedido.id_pedido+' de '+me.pedido.nombreInstitucion\r\n        },\r\n        methods: {\r\n          getLibros(){\r\n            let me = this\r\n            me.arregloLibros = []\r\n            this.$http.get(this.$server_url+'get_val_pedidoInfoTodo/'+me.id_pedido)\r\n            .then(res => {\r\n              let datos = res.data\r\n              if(datos.length > 0){\r\n                let datos2 = datos.filter(p => p.valor > 0)\r\n                //setear ARRAY\r\n                let preSetear = []\r\n                datos2.forEach(element => {\r\n                  var cal = new Object();\r\n                  cal.idlibro     = element.idlibro\r\n                  cal.nombrelibro = element.nombrelibro\r\n                  cal.valor       = element.valor\r\n                  cal.precio      = element.precio\r\n                  preSetear.push(cal)\r\n                });\r\n                //Generate unique array\r\n                var preTemplate = []\r\n                datos2.forEach(element => {\r\n                  var cal = new Object();\r\n                  cal.idlibro     = element.idlibro\r\n                  cal.nombrelibro = element.nombrelibro\r\n                  cal.precio      = element.precio\r\n                  preTemplate.push(cal)\r\n                });\r\n                //CLEAR REPEAT\r\n                //quitar duplicados\r\n                let hash = {};\r\n                var preArrayUnico = []\r\n                let resultado = preTemplate.filter(o => hash[o.nombrelibro] ? false : hash[o.nombrelibro] = true);\r\n                preArrayUnico  = resultado\r\n                //////\r\n                //SUMAR VALORES PEDIDO + ALCANCES\r\n                const sumarValores = preSetear.reduce((acc,valor) =>{\r\n                  if(acc[valor.idlibro]){\r\n                    acc[valor.idlibro] += valor.valor\r\n                  }else{\r\n                    acc[valor.idlibro] = valor.valor\r\n                  }\r\n                  return acc\r\n                },{})\r\n                //PASAR AL AREGLO UNICO LOS VALORES SUMADOS POR  LIBRO\r\n                const result = preArrayUnico.map((obj) => {\r\n                    obj[\"valor\"] = sumarValores[obj.idlibro];\r\n                    return obj;\r\n                });\r\n                me.arregloLibros = result\r\n              }\r\n            })\r\n          },\r\n          entregarPedido(){\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('estado',               '2')\r\n            formData.append('entregaPedidoBodega',  'yes')\r\n            formData.append('id_pedido',            me.id_pedido);\r\n            me.$vs.loading();\r\n            this.$http.post(this.$server_url+'entregarPedido', formData)\r\n            .then(res => {\r\n              me.$vs.notify({\r\n                text: me.mensaje,\r\n                color: 'primary',\r\n                time:8000,\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n              })\r\n              this.$emit('changeRecarge',true)\r\n            })\r\n            .catch(err => {\r\n              console.log(err)\r\n                me.$vs.loading.close();\r\n            })\r\n          },\r\n        },\r\n    }\r\n    </script>\r\n\r\n    <style>\r\n    .label_inputs{\r\n      font-size: 12px;\r\n      color: rgb(143, 143, 143);\r\n      margin-top: 4px;\r\n      padding-left: 4px;\r\n    }\r\n    </style>\r\n"],"mappings":"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","ignoreList":[]}]}