{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\fichas\\new.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\fichas\\new.vue","mtime":1712682815927},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\babel.config.js","mtime":1712682813877},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\.babelrc","mtime":1712682813750},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport axios from 'axios';\nimport vSelect from 'vue-select';\nexport default {\n  components: {\n    'v-select': vSelect\n  },\n  data: function data() {\n    return {\n      btn_icon: '',\n      btn_color: '',\n      btn_txt: '',\n      mensaje: '',\n      asignaturas: [],\n      asignaturaSelect: '',\n      unidades: [{\n        \"id\": 1,\n        \"nombre_unidad\": 'Unidad 1'\n      }, {\n        \"id\": 2,\n        \"nombre_unidad\": 'Unidad 2'\n      }, {\n        \"id\": 3,\n        \"nombre_unidad\": 'Unidad 3'\n      }, {\n        \"id\": 4,\n        \"nombre_unidad\": 'Unidad 4'\n      }, {\n        \"id\": 5,\n        \"nombre_unidad\": 'Unidad 5'\n      }, {\n        \"id\": 6,\n        \"nombre_unidad\": 'Unidad 6'\n      }, {\n        \"id\": 7,\n        \"nombre_unidad\": 'Unidad 7'\n      }, {\n        \"id\": 8,\n        \"nombre_unidad\": 'Unidad 8'\n      }],\n      unidadesSelect: {},\n      modalAdd: false,\n      listaDatos: [],\n      datos: {},\n      titulo: '',\n      //variables de files\n      attachmentArray: []\n      //fin variables de files\n    };\n  },\n  mounted: function mounted() {\n    var me = this;\n    me.getAsignaturas();\n    me.f_agregar(me.ficha);\n  },\n  props: {\n    ficha: {\n      type: Object,\n      default: {}\n    }\n  },\n  methods: {\n    getFiles: function getFiles() {\n      var me = this;\n      this.$http.get(this.$server_url + 'fichas/' + me.ficha.id).then(function (res) {\n        var datos = res.data.files;\n        if (me.datos.length == 0) {\n          me.attachmentArray = [];\n          return;\n        }\n        datos.forEach(function (element) {\n          var cal = new Object();\n          cal.id = element.id;\n          cal.ficha_id = element.ficha_id;\n          cal.name = element.archivo;\n          cal.url = element.url;\n          var tipo = \"\";\n          if (element.ext == \"PNG\" || element.ext == \"png\" || element.ext == \"JPEG\" || element.ext == \"jpeg\" || element.ext == \"JPG\" || element.ext == \"jpg\") {\n            tipo = \"img\";\n          } else {\n            tipo = \"other\";\n          }\n          cal.tipo = tipo;\n          cal.local = 1;\n          me.attachmentArray.push(cal);\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    getAsignaturas: function getAsignaturas() {\n      var me = this;\n      this.$http.get(this.$server_url + 'asignaturasActi').then(function (res) {\n        me.asignaturas = res.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    f_agregar: function f_agregar() {\n      var me = this;\n      var item = me.ficha;\n      me.datos = {\n        'id': 0,\n        'titulo': '',\n        'tipo': 0,\n        'estado': 1\n      };\n      me.btn_icon = 'save';\n      me.btn_color = 'success';\n      me.btn_txt = 'Agregar';\n      me.titulo = 'Agregar ficha';\n      me.mensaje = 'Ficha registrada correctamente';\n      if (item.id != undefined) {\n        me.getFiles();\n        me.btn_icon = 'edit';\n        me.btn_color = 'warning';\n        me.btn_txt = 'Editar';\n        me.titulo = 'Editar ficha';\n        me.datos = {\n          'id': item.id,\n          'titulo': item.titulo,\n          'tipo': item.tipo,\n          'estado': item.estado\n        };\n        me.asignaturaSelect = item.id_asignatura;\n        me.unidadesSelect = me.unidades[item.id_unidad - 1].id;\n        me.mensaje = 'Ficha editada correctamente';\n      }\n    },\n    f_guardar: function f_guardar() {\n      var me = this;\n      if (me.attachmentArray.length == 0) {\n        me.$vs.notify({\n          text: \"Suba un archivo al menos\",\n          color: 'warning',\n          iconPack: 'feather',\n          icon: 'icon-alert-triangle'\n        });\n        return;\n      }\n      var msj;\n      if (me.datos.titulo == '') {\n        msj = 'Ingrese el titulo de la ficha';\n        me.f_notificaciones(msj, 'danger', 'icon-alert-triangle');\n        return;\n      }\n      if (me.asignaturaSelect == null) {\n        msj = 'Seleccione la asignatura';\n        me.f_notificaciones(msj, 'danger', 'icon-alert-triangle');\n        return;\n      }\n      if (me.unidadesSelect == null) {\n        msj = 'Seleccione la unidad';\n        me.f_notificaciones(msj, 'danger', 'icon-alert-triangle');\n        return;\n      }\n      var formData = new FormData();\n      //files\n      //enviar solo los files locales\n      //local 0 = local; 1 => de la base \n      var arrayOnlyLocal = me.attachmentArray.filter(function (p) {\n        return p.local == 0;\n      });\n      if (arrayOnlyLocal.length == 0) {\n        formData.append('noSendFiles', 'yes');\n      } else {\n        var imgsEnviar = [];\n        //setear only files\n        arrayOnlyLocal.forEach(function (element) {\n          imgsEnviar.push(element.file);\n        });\n        for (var i = 0; i < arrayOnlyLocal.length; i++) {\n          formData.append('archivos[]', imgsEnviar[i]);\n        }\n      }\n      formData.append('id', me.datos.id);\n      formData.append('titulo', me.datos.titulo);\n      formData.append('tipo', me.datos.tipo);\n      formData.append('estado', me.datos.estado);\n      formData.append('id_asignatura', me.asignaturaSelect);\n      formData.append('id_unidad', me.unidadesSelect);\n      formData.append('periodo_id', localStorage.periodo_id);\n      var config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n      me.$vs.loading();\n      axios.post(this.$data_url + 'api/saveFichas', formData, config)\n      // this.$http.post(this.$server_url + 'fichas', me.datos)\n      .then(function (result) {\n        me.$vs.loading.close();\n        // console.log('ficha save', result.data);\n        me.f_notificaciones(me.mensaje, 'success', 'icon-alert-triangle');\n        me.$emit('recharge', true);\n      }).catch(function (err) {\n        me.$vs.loading.close();\n        console.log(err);\n        var msj = 'Error al registrar la ficha';\n        me.f_notificaciones(msj, 'danger', 'icon-alert-triangle');\n      });\n    },\n    f_notificaciones: function f_notificaciones(msj, color, icono) {\n      var me = this;\n      me.$vs.notify({\n        text: msj,\n        color: color,\n        iconPack: 'feather',\n        icon: icono\n      });\n      return;\n    },\n    //METODOS FILES\n    mostrarImg: function mostrarImg(e) {\n      var me = this;\n      // var archivo = document.getElementById(\"file1\").files[0];\n      var selectedFiles = e.target.files;\n      for (var i = 0; i < selectedFiles.length; i++) {\n        // this.attachmentArray.push(selectedFiles[i]);\n        var archivo = selectedFiles[i];\n        me.setFile(archivo);\n      }\n    },\n    setFile: function setFile(archivo) {\n      var me = this;\n      var tipo = \"\";\n      if (archivo.type == \"image/png\" || archivo.type == \"image/gif\" || archivo.type == \"image/jpeg\" || archivo.type == \"image/jpg\") {\n        tipo = \"img\";\n      } else {\n        tipo = \"other\";\n      }\n      var reader = new FileReader();\n      if (me) {\n        reader.readAsDataURL(archivo);\n        reader.onloadend = function () {\n          var cal = new Object();\n          cal.file = archivo;\n          cal.img = reader.result;\n          cal.tipo = tipo;\n          cal.name = archivo.name;\n          //local 0 ; 1 de la base\n          cal.local = 0;\n          me.attachmentArray.push(cal);\n        };\n      }\n      return me.attachmentArray;\n    },\n    removeItemFromArr: function removeItemFromArr(arr, item) {\n      var me = this;\n      var i = arr.indexOf(item);\n      arr.splice(i, 1);\n      if (item.local == 1) {\n        me.deleteOnlyFile(item.id);\n      }\n    },\n    deleteOnlyFile: function deleteOnlyFile(id) {\n      var me = this;\n      axios.get(this.$data_url + 'api/deleteFileFicha/' + id).then(function (res) {}).catch(function (error) {\n        console.log(error);\n      });\n    } //FIN METODOS FILES\n  }\n};",{"version":3,"names":["axios","vSelect","components","data","btn_icon","btn_color","btn_txt","mensaje","asignaturas","asignaturaSelect","unidades","unidadesSelect","modalAdd","listaDatos","datos","titulo","attachmentArray","mounted","me","getAsignaturas","f_agregar","ficha","props","type","Object","default","methods","getFiles","$http","get","$server_url","id","then","res","files","length","forEach","element","cal","ficha_id","name","archivo","url","tipo","ext","local","push","catch","error","console","log","item","undefined","estado","id_asignatura","id_unidad","f_guardar","$vs","notify","text","color","iconPack","icon","msj","f_notificaciones","formData","FormData","arrayOnlyLocal","filter","p","append","imgsEnviar","file","i","localStorage","periodo_id","config","headers","loading","post","$data_url","result","close","$emit","err","icono","mostrarImg","e","selectedFiles","target","setFile","reader","FileReader","readAsDataURL","onloadend","img","removeItemFromArr","arr","indexOf","splice","deleteOnlyFile"],"sources":["src/views/fichas/new.vue"],"sourcesContent":["<template>\r\n    <div class=\"mt-2\">\r\n        <div class=\"vx-row mt-2\">\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Asignatura: </div>\r\n                <v-select class=\"mb-4 w-full\" v-model=\"asignaturaSelect\" :options=\"asignaturas\" label=\"nombreasignatura\" :reduce=\"asignaturas => asignaturas.idasignatura\" />\r\n                <!-- {{ asignaturaSelect }} -->\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Unidad: </div>\r\n                <v-select class=\"mb-4 w-full\" v-model=\"unidadesSelect\" :options=\"unidades\" label=\"nombre_unidad\" :reduce=\"unidades => unidades.id\" />\r\n                <!-- {{ unidadesSelect }} -->\r\n            </div>\r\n            <div class=\"vx-col w-full\" align=\"left\">\r\n                <vs-input type=\"text\" class=\"inputx w-full mb-6\" v-model=\"datos.titulo\" maxlength=\"200\" label=\"Nombre de la ficha\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <small>Tipo de ficha</small> <br />\r\n                <form>\r\n                    <vs-radio class=\"m-3\" v-model=\"datos.tipo\" vs-value=\"0\">Sin Guia</vs-radio>\r\n                    <vs-radio class=\"m-3\" v-model=\"datos.tipo\" vs-value=\"1\">Con Guia</vs-radio>\r\n                </form>\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <small>Estado</small> <br />\r\n                <form>\r\n                    <vs-radio class=\"m-3\" v-model=\"datos.estado\" vs-value=\"1\">Activo</vs-radio>\r\n                    <vs-radio class=\"m-3\" v-model=\"datos.estado\" vs-value=\"0\">Inactivo</vs-radio>\r\n                </form>\r\n            </div>\r\n            <vs-divider>Archivos</vs-divider>\r\n            <div style=\"margin-top: -5px;\">\r\n                <p class=\"font-bold letra\">Seleccione los archivos (Máximo 20 MB):</p>\r\n                <br>\r\n                <p>\r\n                    <input type=\"file\" name=\"file1\" id=\"file1\" multiple class=\"inputfile\" style=\"display: none;\" v-on:change=\"mostrarImg\">\r\n                    <label for=\"file1\" class=\"farchivo\">\r\n                        <ion-icon name=\"download-outline\" style=\"position: relative;top:3px;font-size: 15px;\"></ion-icon> <span class=\"ml-1\" style=\"font-size: 12px;\">Buscar Archivo</span>\r\n                    </label>\r\n                </p>\r\n            </div>\r\n            <br>\r\n        </div>\r\n        <br>\r\n        <div class=\"row mt-1\">\r\n            <div class=\"flex\">\r\n                <div class=\"flex\" v-for=\"(tr,key) in attachmentArray\" :key=\"key\"> \r\n                    <div class=\"flex ml-2\" style=\"flex-direction: column;\">\r\n                        <!--BASE-->\r\n                        <div v-if=\"tr.local == 1\">\r\n                            <img id=\"img1\" v-if=\"tr.tipo == 'img'\" width=\"100\" class=\"img-responsive mb-2 ml-1\" :src=\"$data_url+'archivos/fichas/'+tr.url\" style=\"border-radius: 5px;max-height: 60px;\">\r\n                            <img v-if=\"tr.tipo == 'other'\" style=\"max-height: 60px;width: 50px;\"  src=\"@/assets/images/file-icons/doc.png\"/>\r\n                            <small class=\"mt-1\">{{ tr.name }}</small>\r\n                        </div>\r\n                        <!--LOCAL-->\r\n                        <div v-else>\r\n                            <img id=\"img1\" v-if=\"tr.tipo == 'img'\" width=\"100\" class=\"img-responsive mb-2 ml-1\" v-bind:src=\"tr.img\" style=\"border-radius: 5px;max-height: 60px;\">\r\n                            <img v-else style=\"max-height: 60px;width: 50px;\"  src=\"@/assets/images/file-icons/doc.png\"/>\r\n                            <small class=\"mt-1\">{{ tr.name }}</small>\r\n                        </div>\r\n                    </div>\r\n                    <vs-button radius type=\"line\"  @click=\"removeItemFromArr(attachmentArray,tr)\" class=\"ml-2 mt-4\" color=\"danger\" icon=\"delete\"></vs-button>\r\n                </div>\r\n            </div> \r\n        </div>\r\n        <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full mt-5\" align=\"left\">\r\n            <vs-button :icon=\"btn_icon\" :color=\"btn_color\" @click=\"f_guardar()\">{{ btn_txt }} Ficha</vs-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select';\r\nexport default {\r\n    components: {\r\n        'v-select': vSelect,\r\n    },\r\n    data() {\r\n        return {\r\n            btn_icon: '',\r\n            btn_color: '',\r\n            btn_txt: '',\r\n            mensaje: '',\r\n            asignaturas: [],\r\n            asignaturaSelect: '',\r\n            unidades: [{\r\n                \"id\": 1,\r\n                \"nombre_unidad\": 'Unidad 1'\r\n            }, {\r\n                \"id\": 2,\r\n                \"nombre_unidad\": 'Unidad 2'\r\n            }, {\r\n                \"id\": 3,\r\n                \"nombre_unidad\": 'Unidad 3'\r\n            }, {\r\n                \"id\": 4,\r\n                \"nombre_unidad\": 'Unidad 4'\r\n            }, {\r\n                \"id\": 5,\r\n                \"nombre_unidad\": 'Unidad 5'\r\n            }, {\r\n                \"id\": 6,\r\n                \"nombre_unidad\": 'Unidad 6'\r\n            }, {\r\n                \"id\": 7,\r\n                \"nombre_unidad\": 'Unidad 7'\r\n            }, {\r\n                \"id\": 8,\r\n                \"nombre_unidad\": 'Unidad 8'\r\n            }],\r\n            unidadesSelect: {},\r\n            modalAdd: false,\r\n            listaDatos: [],\r\n            datos: {},\r\n            titulo: '',\r\n            //variables de files\r\n            attachmentArray:[],\r\n            //fin variables de files\r\n        }\r\n    },\r\n    mounted() {\r\n        let me = this;\r\n        me.getAsignaturas();\r\n        me.f_agregar(me.ficha)\r\n    },\r\n    props:{\r\n        ficha:{\r\n            type:Object,\r\n            default:{}\r\n        },\r\n    },\r\n    methods: {\r\n        getFiles(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url + 'fichas/'+me.ficha.id)\r\n                .then(res => {\r\n                    let datos = res.data.files\r\n                    if(me.datos.length == 0){\r\n                        me.attachmentArray = []\r\n                        return \r\n                    }\r\n                    datos.forEach(element => {\r\n                        var cal = new Object();\r\n                        cal.id          = element.id\r\n                        cal.ficha_id    = element.ficha_id\r\n                        cal.name        = element.archivo\r\n                        cal.url         = element.url\r\n                        let tipo = \"\"\r\n                        if(element.ext == \"PNG\" || element.ext == \"png\" || element.ext == \"JPEG\" || element.ext == \"jpeg\" || element.ext == \"JPG\" || element.ext == \"jpg\"){\r\n                            tipo = \"img\"\r\n                        } \r\n                        else{\r\n                            tipo = \"other\"\r\n                        }\r\n                        cal.tipo        = tipo\r\n                        cal.local       = 1\r\n                        me.attachmentArray.push(cal)\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                })\r\n        },\r\n        getAsignaturas() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url + 'asignaturasActi')\r\n                .then(res => {\r\n                    me.asignaturas = res.data;\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                })\r\n        },\r\n        f_agregar() {\r\n            let me = this;\r\n            let item = me.ficha\r\n            me.datos = {\r\n                'id': 0,\r\n                'titulo': '',\r\n                'tipo': 0,\r\n                'estado': 1,\r\n            }\r\n            me.btn_icon = 'save';\r\n            me.btn_color = 'success';\r\n            me.btn_txt = 'Agregar';\r\n            me.titulo = 'Agregar ficha';\r\n            me.mensaje = 'Ficha registrada correctamente';\r\n            if (item.id != undefined) {\r\n                me.getFiles()\r\n                me.btn_icon = 'edit';\r\n                me.btn_color = 'warning';\r\n                me.btn_txt = 'Editar';\r\n                me.titulo = 'Editar ficha';\r\n                me.datos = {\r\n                    'id': item.id,\r\n                    'titulo': item.titulo,\r\n                    'tipo': item.tipo,\r\n                    'estado': item.estado,\r\n                }\r\n                me.asignaturaSelect = item.id_asignatura;\r\n                me.unidadesSelect = me.unidades[item.id_unidad-1].id;\r\n                me.mensaje = 'Ficha editada correctamente';\r\n            }\r\n        },\r\n        f_guardar() {\r\n            let me = this;\r\n            if(me.attachmentArray.length == 0){\r\n              me.$vs.notify({\r\n                text: \"Suba un archivo al menos\",\r\n                color: 'warning',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n              })\r\n              return\r\n            }\r\n            let msj;\r\n            if (me.datos.titulo == '') {\r\n                msj = 'Ingrese el titulo de la ficha';\r\n                me.f_notificaciones(msj, 'danger', 'icon-alert-triangle')\r\n                return\r\n            }\r\n            if (me.asignaturaSelect == null) {\r\n                msj = 'Seleccione la asignatura';\r\n                me.f_notificaciones(msj, 'danger', 'icon-alert-triangle')\r\n                return\r\n            }\r\n            if (me.unidadesSelect == null) {\r\n                msj = 'Seleccione la unidad';\r\n                me.f_notificaciones(msj, 'danger', 'icon-alert-triangle')\r\n                return\r\n            }\r\n            let formData = new FormData();\r\n            //files\r\n            //enviar solo los files locales\r\n            //local 0 = local; 1 => de la base \r\n            let arrayOnlyLocal = me.attachmentArray.filter(p => p.local == 0)\r\n            if(arrayOnlyLocal.length == 0){\r\n                formData.append('noSendFiles',   'yes');\r\n            }else{\r\n                let imgsEnviar = []\r\n                //setear only files\r\n                arrayOnlyLocal.forEach(element => {\r\n                    imgsEnviar.push(element.file)\r\n                });\r\n                for(let i=0; i<arrayOnlyLocal.length;i++){\r\n                    formData.append('archivos[]',   imgsEnviar[i]);\r\n                }  \r\n            }\r\n            formData.append('id',               me.datos.id)\r\n            formData.append('titulo',           me.datos.titulo)\r\n            formData.append('tipo',             me.datos.tipo)\r\n            formData.append('estado',           me.datos.estado)\r\n            formData.append('id_asignatura',    me.asignaturaSelect)\r\n            formData.append('id_unidad',        me.unidadesSelect)\r\n            formData.append('periodo_id',       localStorage.periodo_id)\r\n            const config = { headers: { 'Content-Type': 'multipart/form-data' } };\r\n            me.$vs.loading();\r\n            axios.post(this.$data_url + 'api/saveFichas', formData, config)\r\n            // this.$http.post(this.$server_url + 'fichas', me.datos)\r\n                .then((result) => {\r\n                    me.$vs.loading.close();\r\n                    // console.log('ficha save', result.data);\r\n                    me.f_notificaciones(me.mensaje, 'success', 'icon-alert-triangle');\r\n                    me.$emit('recharge',true)\r\n                })\r\n                .catch((err) => {\r\n                    me.$vs.loading.close();\r\n                    console.log(err)\r\n                    let msj = 'Error al registrar la ficha';\r\n                    me.f_notificaciones(msj, 'danger', 'icon-alert-triangle')\r\n                })\r\n        },\r\n        f_notificaciones(msj, color, icono) {\r\n            let me = this;\r\n            me.$vs.notify({\r\n                text: msj,\r\n                color: color,\r\n                iconPack: 'feather',\r\n                icon: icono\r\n            })\r\n            return;\r\n        },\r\n        //METODOS FILES\r\n        mostrarImg(e){\r\n            let me = this;\r\n           // var archivo = document.getElementById(\"file1\").files[0];\r\n            let selectedFiles = e.target.files;\r\n            for(let i=0;i<selectedFiles.length;i++){\r\n                // this.attachmentArray.push(selectedFiles[i]);\r\n                let archivo = selectedFiles[i]\r\n                me.setFile(archivo)\r\n            }\r\n        },\r\n        setFile(archivo){\r\n            let me = this;\r\n            let tipo =\"\"\r\n            if(archivo.type == \"image/png\" || archivo.type == \"image/gif\" || archivo.type == \"image/jpeg\" || archivo.type == \"image/jpg\"){\r\n               tipo = \"img\"\r\n            } \r\n            else{\r\n               tipo = \"other\"\r\n            }\r\n            var reader = new FileReader();\r\n            if (me) {\r\n                    reader.readAsDataURL(archivo );\r\n                    reader.onloadend = function () {\r\n                        var cal      = new Object();\r\n                        cal.file     = archivo\r\n                        cal.img      = reader.result\r\n                        cal.tipo     = tipo\r\n                        cal.name     = archivo.name\r\n                        //local 0 ; 1 de la base\r\n                        cal.local    = 0\r\n                        me.attachmentArray.push(cal)\r\n                    } \r\n                }\r\n            return me.attachmentArray\r\n        },\r\n        removeItemFromArr (arr, item) {\r\n            let me = this;\r\n            const i = arr.indexOf(item)\r\n            arr.splice(i, 1)\r\n            if(item.local == 1){\r\n                me.deleteOnlyFile(item.id)\r\n            }\r\n        },\r\n        deleteOnlyFile(id){\r\n            let me = this;\r\n            axios.get(this.$data_url + 'api/deleteFileFicha/'+id)\r\n            .then(res => {\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n        }\r\n        //FIN METODOS FILES\r\n    },\r\n}\r\n</script>\r\n<style scoped>\r\n.farchivo{\r\n    margin-top: 50px!important;\r\n    cursor: pointer; \r\n    /* color: gray; */\r\n     width: 200px; \r\n    font-size: 11px;\r\n    line-height: 80%;\r\n    transition: 0.5s ease all;\r\n    padding: 10px 10px;\r\n    background-color: DodgerBlue;\r\n    border: none;\r\n    color: white;\r\n    border-radius: 5px;\r\n    margin-left: 10px;\r\n}\r\n.farchivo:hover{\r\n    background-color: #7C7B89;\r\n    color:white;\r\n    border-radius: 5px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}