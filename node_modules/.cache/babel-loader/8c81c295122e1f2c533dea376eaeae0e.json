{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\juegos\\form_rompecabezas.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\juegos\\form_rompecabezas.vue","mtime":1712682816076},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\babel.config.js","mtime":1712682813877},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\.babelrc","mtime":1712682813750},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport axios from 'axios';\nimport vSelect from 'vue-select';\nimport $ from 'jquery';\nVue.use(axios);\nexport default {\n  data: function data() {\n    return {\n      usuario: [],\n      juegos: {},\n      id_juego: '',\n      titulo: '',\n      img_portada: '',\n      src_imagen_juego: '',\n      img_old: '',\n      modal_juego: false,\n      tipo_juego: 'ROMPECABEZAS',\n      id_rompecabezas: ''\n    };\n  },\n  components: {\n    'v-select': vSelect\n  },\n  created: function created() {\n    var me = this;\n    me.usuario = JSON.parse(localStorage.getItem('usuario'));\n    me.id_juego = localStorage.getItem('id_rompecabezas');\n  },\n  mounted: function mounted() {\n    this.get_img_rompecabezas();\n  },\n  methods: {\n    get_img_rompecabezas: function get_img_rompecabezas() {\n      var me = this;\n      axios.get(me.$server_url + 'get_img_rompecabezas/' + me.id_juego).then(function (res) {\n        me.juegos = res.data;\n        me.$vs.loading.close();\n      });\n    },\n    mostrarImg: function mostrarImg(file, img) {\n      var me = this;\n      me.src_imagen_juego = ' ';\n      var archivo = document.getElementById(\"file\" + file).files[0];\n      if (archivo.type != 'image/png' && archivo.type != 'image/jpeg') {\n        me.$vs.notify({\n          text: 'Formato no permitido',\n          color: 'warning',\n          iconPack: 'feather',\n          icon: 'icon-alert-triangle'\n        });\n        me.modal_juego = false;\n        window.$(\"#file\" + file).val('');\n        return;\n      }\n      var reader = new FileReader();\n      reader.readAsDataURL(archivo);\n      reader.onload = function (e) {\n        var image = new Image();\n        image.src = e.target.result;\n        image.onload = function () {\n          var height = this.height;\n          var width = this.width;\n          if (height != 600 || width != 600) {\n            me.src_imagen_juego = '';\n            window.$(\"#file\" + file).val('');\n            me.$vs.notify({\n              text: 'Tamaño de imagen no permitido, la medida recomendada es 600x600',\n              color: 'warning',\n              iconPack: 'feather',\n              icon: 'icon-alert-triangle'\n            });\n            return;\n          }\n        };\n\n        // mostrar imagen\n        var reader = new FileReader();\n        if (me) {\n          reader.readAsDataURL(archivo);\n          reader.onloadend = function () {\n            document.getElementById(\"img\" + img).src = reader.result;\n          };\n        }\n      };\n    },\n    guardarJuego: function guardarJuego() {\n      var me = this;\n      if (me.titulo == '' || me.src_imagen_juego == '') {\n        me.$vs.notify({\n          text: 'Debe completar todos los campos antes de continuar',\n          color: 'warning',\n          iconPack: 'feather',\n          icon: 'icon-alert-triangle'\n        });\n        return;\n      }\n      var fileImgPreg;\n      fileImgPreg = document.getElementById(\"file1\").files[0];\n      if (fileImgPreg === undefined) {\n        fileImgPreg = me.imagen;\n      }\n      me.$vs.loading();\n      var formData = new FormData();\n      formData.append('id', me.id_rompecabezas);\n      formData.append('img_portada', fileImgPreg);\n      formData.append('img_old', me.img_old);\n      formData.append('titulo', me.titulo);\n      formData.append('id_juego', me.id_juego);\n      axios.post(this.$data_url + 'api/save_rompecabezas', formData).then(function (res) {\n        me.$vs.loading.close();\n        console.log('*************');\n        console.log(res.data);\n        console.log('*************');\n        me.$vs.notify({\n          text: 'Guardado correctamente',\n          color: 'success',\n          iconPack: 'feather',\n          icon: 'icon-check'\n        });\n        me.get_img_rompecabezas();\n      }).catch(function (error) {\n        console.log('*********************');\n        console.log(error);\n        console.log('*********************');\n        me.$vs.loading.close();\n      });\n    },\n    ver_form_juego: function ver_form_juego(item) {\n      var me = this;\n      me.id_rompecabezas = item.id_contenido_juego;\n      me.img_old = item.imagen;\n      me.titulo = item.descripcion;\n      me.src_imagen_juego = item.imagen;\n      me.modal_juego = true;\n    },\n    openConfirm: function openConfirm() {\n      this.$vs.dialog({\n        type: 'confirm',\n        color: 'danger',\n        title: \"Confirmar\",\n        text: '¿Está seguro de eliminar este rompecabezas?',\n        accept: this.acceptEliminar\n      });\n    },\n    acceptEliminar: function acceptEliminar() {\n      var _this = this;\n      var me = this;\n      axios.get(this.$data_url + 'api/delete_rompecabezas/' + me.id_rompecabezas).then(function (res) {\n        me.$vs.loading.close();\n        _this.$vs.notify({\n          color: 'danger',\n          title: 'Rompecabezas eliminado',\n          text: 'Ya no estará disponible.'\n        });\n        me.get_img_rompecabezas();\n      });\n    }\n  }\n};",{"version":3,"names":["Vue","axios","vSelect","$","use","data","usuario","juegos","id_juego","titulo","img_portada","src_imagen_juego","img_old","modal_juego","tipo_juego","id_rompecabezas","components","created","me","JSON","parse","localStorage","getItem","mounted","get_img_rompecabezas","methods","get","$server_url","then","res","$vs","loading","close","mostrarImg","file","img","archivo","document","getElementById","files","type","notify","text","color","iconPack","icon","window","val","reader","FileReader","readAsDataURL","onload","e","image","Image","src","target","result","height","width","onloadend","guardarJuego","fileImgPreg","undefined","imagen","formData","FormData","append","post","$data_url","console","log","catch","error","ver_form_juego","item","id_contenido_juego","descripcion","openConfirm","dialog","title","accept","acceptEliminar","_this"],"sources":["src/views/juegos/form_rompecabezas.vue"],"sourcesContent":["<template>\r\n<div>\r\n\r\n  <vs-prompt @cancel=\"modal_juego=false;\" @accept=\"guardarJuego()\" @close=\"modal_juego=false;\" :active.sync=\"modal_juego\" color=\"primary\" title=\"Juego\" acceptText=\"Aceptar\" cancelText=\"Cancelar\">\r\n      <div class=\"w-full\">\r\n        <div style=\"border: 1px solid #d5d5d5; border-radius: 10px; padding: 5px 5px 5px 5px;\" align=\"center\" class=\"mb-2\">\r\n            <input type=\"file\" name=\"file1\" id=\"file1\" class=\"inputfile\" style=\"display: none;\" v-on:change=\"mostrarImg(1,1)\" accept=\"image/*\">\r\n            <label for=\"file1\" style=\"margin-bottom: -10px; cursor: pointer; color: gray; width: 100%; font-size: 11px; line-height: 80%;\">\r\n                Click aquí para subir una imagen <b>600x600</b>\r\n            </label>\r\n            <img v-if=\"src_imagen_juego != ''\" id=\"img1\" class=\"mb-2\" v-bind:src=\"$data_url + 'archivos/images/imagenes_juegos/rompecabezas/' + src_imagen_juego\" style=\"border-radius: 5px; width: 100%;\">\r\n        </div>\r\n\r\n        <vs-input label=\"Título juego\" v-model=\"titulo\" class=\"w-full\" />\r\n\r\n      </div>\r\n  </vs-prompt>\r\n\r\n\r\n  <div class=\"w-full mb-2\" align=\"left\">\r\n    <vs-button size=\"small\" class=\"px-4 py-3 text-sm\" color=\"black\" @click=\"id_rompecabezas=''; src_imagen_juego=''; titulo=''; img_old=''; modal_juego=true;\">Agregar imagen</vs-button>\r\n  </div>\r\n\r\n  <div class=\"vx-row\">\r\n      <div class=\"vx-col w-1/2 md:w-1/3 sm:1/2 xl:w-1/4 mt-3\" v-for=\"(item,$index) in juegos\" :key=\"$index\">\r\n          <vx-card class=\"text-center\">\r\n              <div slot=\"no-body\">\r\n                  <img class=\"responsive card-img-top\" v-bind:src=\"$data_url + 'archivos/images/imagenes_juegos/rompecabezas/' + item.imagen\">\r\n              </div>\r\n              <p class=\"font-bold\"> {{item.descripcion}} </p>\r\n              <div class=\"w-3/3 ml-auto mt-3\">\r\n                  <vs-button color=\"primary\" class=\"p-2 m-1\" type=\"border\" icon-pack=\"feather\" @click=\"ver_form_juego(item)\" icon=\"icon-edit\" style=\"display: inline-block; width: 100px;\"></vs-button>\r\n                  <vs-button color=\"danger\" class=\"p-2 m-1\" type=\"border\" icon-pack=\"feather\" @click=\"id_rompecabezas=item.id_contenido_juego;  openConfirm()\" icon=\"icon-trash\" style=\"display: inline-block; width: 100px;\"></vs-button>\r\n              </div>\r\n          </vx-card>\r\n      </div>\r\n  </div>\r\n\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\n    import Vue from 'vue'\r\n    import axios from 'axios'\r\n    import vSelect from 'vue-select'\r\n    import $ from 'jquery'\r\n    Vue.use(axios)\r\n    export default {\r\n        data(){\r\n            return {\r\n                usuario: [],\r\n                juegos: {},\r\n                id_juego: '',\r\n                titulo: '',\r\n                img_portada: '',\r\n                src_imagen_juego: '',\r\n                img_old: '',\r\n                modal_juego: false,\r\n                tipo_juego: 'ROMPECABEZAS',\r\n                id_rompecabezas: '',\r\n            }\r\n        },\r\n        components: {\r\n                'v-select': vSelect,\r\n        },\r\n        created(){\r\n            let me = this\r\n            me.usuario = JSON.parse(localStorage.getItem('usuario'))\r\n            me.id_juego = localStorage.getItem('id_rompecabezas')\r\n\r\n        },\r\n        mounted() {\r\n          this.get_img_rompecabezas()\r\n        },\r\n        methods: {\r\n            get_img_rompecabezas(){\r\n                let me = this\r\n                axios.get(me.$server_url+'get_img_rompecabezas/'+me.id_juego)\r\n                .then(res => {\r\n                    me.juegos = res.data;\r\n                    me.$vs.loading.close()\r\n                })\r\n            },\r\n            mostrarImg(file, img){\r\n                let me = this;\r\n                me.src_imagen_juego = ' ';\r\n                var archivo = document.getElementById(\"file\"+file).files[0];\r\n                if( archivo.type != 'image/png' && archivo.type != 'image/jpeg' ){\r\n                   me.$vs.notify({ text:'Formato no permitido', color:'warning', iconPack: 'feather', icon:'icon-alert-triangle'})\r\n                   me.modal_juego = false\r\n                   window.$(\"#file\"+file).val('')\r\n                   return\r\n                }\r\n\r\n                var reader = new FileReader();\r\n                reader.readAsDataURL(archivo);\r\n                reader.onload = function (e) {\r\n                    var image = new Image();\r\n                    image.src = e.target.result;\r\n                    image.onload = function () {\r\n                        var height = this.height;\r\n                        var width = this.width;\r\n                        if (height != 600 || width != 600) {\r\n                            me.src_imagen_juego = ''\r\n                            window.$(\"#file\"+file).val('')\r\n                            me.$vs.notify({ text:'Tamaño de imagen no permitido, la medida recomendada es 600x600', color:'warning', iconPack: 'feather', icon:'icon-alert-triangle'})\r\n                            return\r\n                        }\r\n                    };\r\n\r\n                    // mostrar imagen\r\n                    var reader = new FileReader();\r\n                    if (me) {\r\n                        reader.readAsDataURL(archivo );\r\n                        reader.onloadend = function () {\r\n                            document.getElementById(\"img\"+img).src = reader.result;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            guardarJuego(){\r\n                let me = this;\r\n\r\n                if( me.titulo == '' || me.src_imagen_juego == '' ){\r\n                    me.$vs.notify({ text:'Debe completar todos los campos antes de continuar', color:'warning', iconPack: 'feather', icon:'icon-alert-triangle'})\r\n                    return\r\n                }\r\n\r\n                let fileImgPreg;\r\n                fileImgPreg = document.getElementById(\"file1\").files[0];\r\n                if(fileImgPreg === undefined ){\r\n                    fileImgPreg = me.imagen;\r\n                }\r\n\r\n                me.$vs.loading()\r\n                const formData = new FormData();\r\n                    formData.append('id', me.id_rompecabezas);\r\n                    formData.append('img_portada', fileImgPreg);\r\n                    formData.append('img_old', me.img_old);\r\n                    formData.append('titulo', me.titulo);\r\n                    formData.append('id_juego', me.id_juego);\r\n\r\n                axios.post(this.$data_url+'api/save_rompecabezas', formData)\r\n                .then(res => {\r\n                  me.$vs.loading.close()\r\n                      console.log('*************')\r\n                      console.log(res.data)\r\n                      console.log('*************')\r\n                      me.$vs.notify({ text:'Guardado correctamente', color:'success', iconPack: 'feather', icon:'icon-check'})\r\n                      me.get_img_rompecabezas()\r\n                })\r\n                .catch(function (error) {\r\n                  console.log('*********************')\r\n                  console.log(error)\r\n                  console.log('*********************')\r\n                  me.$vs.loading.close()\r\n                })\r\n            },\r\n            ver_form_juego(item){\r\n              let me = this\r\n                me.id_rompecabezas = item.id_contenido_juego\r\n                me.img_old = item.imagen\r\n                me.titulo = item.descripcion\r\n                me.src_imagen_juego = item.imagen\r\n                me.modal_juego = true\r\n            },\r\n            openConfirm() {\r\n              this.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                text: '¿Está seguro de eliminar este rompecabezas?',\r\n                accept: this.acceptEliminar\r\n              })\r\n            },\r\n            acceptEliminar() {\r\n              let me = this\r\n              axios.get(this.$data_url+'api/delete_rompecabezas/' + me.id_rompecabezas)\r\n              .then(res => {\r\n                me.$vs.loading.close()\r\n                this.$vs.notify({ color: 'danger', title: 'Rompecabezas eliminado', text: 'Ya no estará disponible.' })\r\n                me.get_img_rompecabezas()\r\n              })\r\n            },\r\n\r\n        },\r\n    }\r\n</script>\r\n"],"mappings":"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","ignoreList":[]}]}