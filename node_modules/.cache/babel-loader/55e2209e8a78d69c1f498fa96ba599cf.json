{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\documentosMinisterio\\nuevoDocumento.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\documentosMinisterio\\nuevoDocumento.vue","mtime":1712682815809},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\babel.config.js","mtime":1712682813877},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\.babelrc","mtime":1712682813750},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import historicoMixin from \"@/mixins/historicomix\";\nimport Vue from 'vue';\nimport axios from 'axios';\nimport vSelect from 'vue-select';\nimport vueFilePond from \"vue-filepond\";\nimport \"filepond/dist/filepond.min.css\";\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css\";\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type\";\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview\";\nvar FilePond = vueFilePond(FilePondPluginFileValidateType, FilePondPluginImagePreview);\nexport default {\n  components: {\n    FilePond: FilePond,\n    'v-select': vSelect\n  },\n  mixins: [historicoMixin],\n  data: function data() {\n    return {\n      myFiles: [],\n      formData: {\n        company: null\n      },\n      asignatura: [],\n      long_name_file: 25,\n      //longitud del nombre de archivo a mostrar\n      limiteMegas: 5,\n      //maximo de megas permitido a subir en cada archivo\n      bytes: 1048576,\n      msjError: 'El peso del archivo excede el limite permitido, verifique antes de continuar',\n      tipo_archivo: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/msword',\n      porcentaje: '',\n      pesoArchivo: '',\n      muyPesado: '',\n      file: '',\n      msj: '',\n      documento: {\n        'nombre': '',\n        'descripcion': '',\n        'asignaturas': [],\n        'status': false\n      },\n      archivos: [],\n      usuario: [],\n      asignaturas: [],\n      grupo_usuario: '',\n      miusuario: ''\n    };\n  },\n  mounted: function mounted() {\n    var me = this;\n    me.usuario = JSON.parse(localStorage.getItem('usuario'));\n    me.miusuario = me.usuario;\n    me.grupo_usuario = me.miusuario.id_group;\n    this.getAsignaturas();\n  },\n  methods: {\n    onprocessfile: function onprocessfile(error, file) {\n      this.myFiles.push(JSON.parse(file.serverId));\n      console.log(this.myFiles);\n    },\n    onprocessfilestart: function onprocessfilestart(file) {\n      console.log(\"upload\");\n      this.disable = true;\n      this.isActive = true;\n    },\n    onUpdateFiles: function onUpdateFiles(file) {\n      this.formData.image = file;\n    },\n    handleFilePondInit: function handleFilePondInit() {\n      console.log(\"FilePond has initialized\");\n    },\n    resp: function resp(r) {\n      console.log(r);\n      console.log(\"hi\");\n    },\n    getAsignaturas: function getAsignaturas() {\n      var me = this;\n      this.$http.get(this.$server_url + 'asignaturasDoc/0').then(function (res) {\n        me.asignaturas = res.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    cargaArchivo: function cargaArchivo() {\n      var me = this;\n      me.msj = '';\n      me.porcentaje = 0;\n      me.pesoArchivo = 0;\n      me.muyPesado = false;\n      me.file = me.$refs.file.files[0];\n      me.pesoArchivo = (me.file.size / me.bytes).toFixed(2);\n      if (me.pesoArchivo > me.limiteMegas) {\n        me.muyPesado = true;\n        me.msj = me.msjError;\n      }\n    },\n    agregarDocumento: function agregarDocumento() {\n      var me = this;\n      me.$vs.loading();\n      this.documento.files = this.myFiles;\n      this.documento.asignaturas = this.asignatura;\n      this.$http.post(this.$server_url + 'document', this.documento).then(function (response) {\n        console.log(response.data);\n        me.$vs.loading.close();\n        var id_created = response.data.id;\n        var tipo = \"Documento Ministerial\";\n        var descripcion = me.documento.nombre + ' creado';\n        me.saveNotifications(me.usuario.idusuario, id_created, tipo, descripcion);\n        me.$router.push('/admin/documentosAdmin');\n      }).catch(function (error) {\n        me.$vs.loading.close();\n      });\n    },\n    openConfirmEliminar: function openConfirmEliminar(item) {\n      var me = this;\n      console.log(item);\n      me.$vs.dialog({\n        type: 'confirm',\n        color: 'danger',\n        title: \"Confirmar\",\n        text: '¿Está seguro en eliminar este archivo?',\n        acceptText: 'Aceptar',\n        cancelText: 'Cancelar',\n        accept: me.eliminarAdaptacion\n      });\n    },\n    voler: function voler() {\n      var me = this;\n      me.$router.go(-1);\n    }\n  }\n};",{"version":3,"names":["historicoMixin","Vue","axios","vSelect","vueFilePond","FilePondPluginFileValidateType","FilePondPluginImagePreview","FilePond","components","mixins","data","myFiles","formData","company","asignatura","long_name_file","limiteMegas","bytes","msjError","tipo_archivo","porcentaje","pesoArchivo","muyPesado","file","msj","documento","archivos","usuario","asignaturas","grupo_usuario","miusuario","mounted","me","JSON","parse","localStorage","getItem","id_group","getAsignaturas","methods","onprocessfile","error","push","serverId","console","log","onprocessfilestart","disable","isActive","onUpdateFiles","image","handleFilePondInit","resp","r","$http","get","$server_url","then","res","catch","cargaArchivo","$refs","files","size","toFixed","agregarDocumento","$vs","loading","post","response","close","id_created","id","tipo","descripcion","nombre","saveNotifications","idusuario","$router","openConfirmEliminar","item","dialog","type","color","title","text","acceptText","cancelText","accept","eliminarAdaptacion","voler","go"],"sources":["src/views/documentosMinisterio/nuevoDocumento.vue"],"sourcesContent":["<template>\r\n<div class=\"vx-col md:w-full w-full mb-base h-screen\">\r\n    <vx-card class=\"h-full\">\r\n        <div class=\"vx-row mt-4\">\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Nombre: </div>\r\n                <vs-input type=\"text\" class=\"inputx w-full mb-6\" v-model=\"documento.nombre\" maxlength=\"100\" placeholder=\"Nombre del documento\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Descripción: </div>\r\n                <vs-input type=\"text\" class=\"inputx w-full mb-6\" v-model=\"documento.descripcion\" maxlength=\"100\" placeholder=\"Descripción del documento\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row mb-4\">\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Asignaturas: </div>\r\n                <v-select multiple class=\"w-full\" v-model=\"asignatura\" :options=\"asignaturas\" :dir=\"$vs.rtl ? 'rtl' : 'ltr'\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row mb-4\">\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Estado: </div>\r\n                <vs-switch v-model=\"documento.status\"></vs-switch>\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-col w-full h-64 borde-unidad\">\r\n            <FilePond class=\"h-64\" label-idle=\"Suelta los archivos aquí...\" max-files=\"4\" v-bind:allow-multiple=\"true\" :chunkUploads=\"false\" :chunkForce=\"false\" :onprocessfilestart=\"onprocessfilestart\" chunkRetryDelays=\"[100,100,100]\" chunkSize=\"100\" @onUpdateFiles=\"onUpdateFiles\" @progressfiles=\"resp\" :server=\"$data_url+'api/uploadDocuemntos'\" @init=\"handleFilePondInit\" :storeAsFile=\"true\" :onprocessfile=\"onprocessfile\" />\r\n        </div>\r\n        <vs-button class=\"mt-12\" color=\"success\" @click=\"agregarDocumento()\">Guardar</vs-button>\r\n    </vx-card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport historicoMixin from \"@/mixins/historicomix\";\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nimport vueFilePond from \"vue-filepond\";\r\nimport \"filepond/dist/filepond.min.css\";\r\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css\";\r\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type\";\r\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview\";\r\nconst FilePond = vueFilePond(\r\n    FilePondPluginFileValidateType,\r\n    FilePondPluginImagePreview\r\n);\r\nexport default {\r\n    components: {\r\n        FilePond,\r\n        'v-select': vSelect,\r\n    },\r\n    mixins: [historicoMixin],\r\n    data() {\r\n        return {\r\n            myFiles: [],\r\n            formData: {\r\n                company: null\r\n            },\r\n            asignatura:[],\r\n            long_name_file: 25, //longitud del nombre de archivo a mostrar\r\n            limiteMegas: 5, //maximo de megas permitido a subir en cada archivo\r\n            bytes: 1048576,\r\n            msjError: 'El peso del archivo excede el limite permitido, verifique antes de continuar',\r\n            tipo_archivo: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/msword',\r\n            porcentaje: '',\r\n            pesoArchivo: '',\r\n            muyPesado: '',\r\n            file: '',\r\n            msj: '',\r\n            documento: {\r\n                'nombre': '',\r\n                'descripcion': '',\r\n                'asignaturas': [],\r\n                'status': false,\r\n            },\r\n            archivos: [],\r\n            usuario: [],\r\n            asignaturas: [],\r\n            grupo_usuario: '',\r\n            miusuario: '',\r\n        }\r\n    },\r\n    mounted() {\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n        me.miusuario = me.usuario\r\n        me.grupo_usuario = me.miusuario.id_group;\r\n        this.getAsignaturas()\r\n    },\r\n    methods: {\r\n        onprocessfile(error, file) {\r\n            this.myFiles.push(JSON.parse(file.serverId))\r\n            console.log(this.myFiles)\r\n        },\r\n        onprocessfilestart(file) {\r\n            console.log(\"upload\");\r\n            this.disable = true\r\n            this.isActive = true\r\n        },\r\n        onUpdateFiles(file) {\r\n            this.formData.image = file;\r\n        },\r\n        handleFilePondInit: function () {\r\n            console.log(\"FilePond has initialized\");\r\n        },\r\n        resp(r) {\r\n            console.log(r)\r\n            console.log(\"hi\")\r\n        },\r\n        getAsignaturas(){\r\n            let me = this\r\n            this.$http.get(this.$server_url+'asignaturasDoc/0').then(res => {\r\n                me.asignaturas = res.data;\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n        },\r\n        cargaArchivo() {\r\n            let me = this;\r\n            me.msj = '';\r\n            me.porcentaje = 0;\r\n            me.pesoArchivo = 0;\r\n            me.muyPesado = false;\r\n            me.file = me.$refs.file.files[0];\r\n            me.pesoArchivo = (me.file.size / me.bytes).toFixed(2);\r\n            if (me.pesoArchivo > me.limiteMegas) {\r\n                me.muyPesado = true;\r\n                me.msj = me.msjError;\r\n            }\r\n        },\r\n        agregarDocumento() {\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.documento.files = this.myFiles\r\n            this.documento.asignaturas = this.asignatura\r\n            this.$http.post(this.$server_url + 'document', this.documento)\r\n                .then(function (response) {\r\n                    console.log(response.data)\r\n                    me.$vs.loading.close()\r\n                    let id_created = response.data.id \r\n                    let tipo = \"Documento Ministerial\"\r\n                    let descripcion = me.documento.nombre +' creado'\r\n                    me.saveNotifications(me.usuario.idusuario,id_created,tipo,descripcion)\r\n                    me.$router.push('/admin/documentosAdmin');\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n\r\n                })\r\n\r\n        },\r\n        openConfirmEliminar(item) {\r\n            let me = this;\r\n            console.log(item)\r\n            me.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                text: '¿Está seguro en eliminar este archivo?',\r\n                acceptText: 'Aceptar',\r\n                cancelText: 'Cancelar',\r\n                accept: me.eliminarAdaptacion\r\n            })\r\n        },\r\n        voler() {\r\n            let me = this;\r\n            me.$router.go(-1);\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* input[type=\"file\"] {\r\n    display: none;\r\n} */\r\n\r\n.text-danger {\r\n    font-size: 11px;\r\n}\r\n\r\n.borde-unidad {\r\n    border: 1px dashed rgb(32, 32, 32);\r\n    /* display: inline-block; */\r\n    padding: 6px;\r\n    cursor: pointer;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}