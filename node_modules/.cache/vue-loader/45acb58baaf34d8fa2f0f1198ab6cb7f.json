{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\materialapoyo\\materialapoyo.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\materialapoyo\\materialapoyo.vue","mtime":1712682816161},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport listadoMaterarial from './material_subir/listadoMaterial.vue'\r\nimport historicoMixin from \"@/mixins/historicomix\";\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nimport cargarmaterial from './cargarmaterial';\r\nexport default {\r\n     mixins: [historicoMixin],\r\n    components: {\r\n        'v-select': vSelect,\r\n        cargarmaterial,\r\n        listadoMaterarial\r\n    },\r\n    data() {\r\n        return {\r\n            infotemas:[],\r\n            popupActivo:false,\r\n            archivos:false,\r\n            infoarchivos:[],\r\n            modalMaterial: false,\r\n            modalTemas: false,\r\n            material: [],\r\n            materialSelect: '',\r\n            materiales: [],\r\n            temas: [],\r\n            temaSelect: [],\r\n            asignaturas: [],\r\n            asignaturaSelect: {},\r\n            unidades: [{\r\n                \"id\": 1,\r\n                nombre_unidad: 'Unidad 1'\r\n            }, {\r\n                \"id\": 2,\r\n                nombre_unidad: 'Unidad 2'\r\n            }, {\r\n                \"id\": 3,\r\n                nombre_unidad: 'Unidad 3'\r\n            }, {\r\n                \"id\": 4,\r\n                nombre_unidad: 'Unidad 4'\r\n            }, {\r\n                \"id\": 5,\r\n                nombre_unidad: 'Unidad 5'\r\n            }, {\r\n                \"id\": 6,\r\n                nombre_unidad: 'Unidad 6'\r\n            }, {\r\n                \"id\": 7,\r\n                nombre_unidad: 'Unidad 7'\r\n            }, {\r\n                \"id\": 8,\r\n                nombre_unidad: 'Unidad 8'\r\n            }],\r\n            unidadesSelect: {},\r\n            n_material: '',\r\n            materialAp: {\r\n                'idmaterial': '',\r\n                'nombrematerial': '',\r\n                'descripcionmaterial': '',\r\n                'zipmaterial': '',\r\n                'webmaterial': '',\r\n                'imagenmaterial': '',\r\n                'exematerial': '',\r\n                'Estado_idEstado': 1,\r\n            },\r\n            estados: [],\r\n            op_eliminar: '',\r\n            op_editar: 0,\r\n            edita: 0,\r\n            item_eliminar: '',\r\n            data_material: [],\r\n            id_material_editar: '',\r\n            estado_material: false,\r\n            modalCursosEnvioLink: false,\r\n            modalCursosArchivos:false,\r\n            cursosDocente: [],\r\n            verTipoModal: false,\r\n            usuario: [],\r\n            miusuario:[],\r\n            tipoUsuario: 1,\r\n            grupo_usuario: '',\r\n            idusuario: '',\r\n            datoU: '',\r\n            modalMaterialTemas: false,\r\n            temasMostrar: '',\r\n            nombrematerial:'',\r\n             //====VARIABLES PARA RECURSOS EXTERNOS\r\n            libro:{\r\n                libroweb:'1',\r\n                libro_con_guia:'1',\r\n                guia_didactica:'1',\r\n                unidades:'1',\r\n            },\r\n            curso:{\r\n                ver:'1',\r\n                agregar:'1',\r\n                editar:'1',\r\n                eliminar:'1',\r\n            },\r\n            cuaderno:{\r\n                guia:'1',\r\n                didactica:'1',\r\n                web:'1',\r\n            },\r\n            planificacion:{\r\n                descargar:'1',\r\n                visualizar:'1',\r\n            },\r\n            //variables para recursos adicionales\r\n            mijuego:{\r\n                agregar:'1',\r\n                editar:'1',\r\n                eliminar:'1',\r\n                ver:'1',\r\n                asignar:'1',\r\n            },\r\n            juegoProlipa:{\r\n                asignar:'1',\r\n                ver:'1',\r\n                previsualizar:'1',\r\n            },\r\n            materialDigital:{\r\n                ver:'1',\r\n                previsualizar:'1',\r\n                asignar:'1',\r\n            },\r\n            materialpdf:{\r\n                subir:'1',\r\n                ver:'1',\r\n                descargar:'1',\r\n                asignar:'1',\r\n            },\r\n            propuesta:{\r\n                ver:'1',\r\n            },\r\n            adaptacion:{\r\n                ver:'1',\r\n            },\r\n            articulo:{\r\n                lengua:'1',\r\n                matematica:'1',\r\n                naturales:'1',\r\n                sociales:'1',\r\n                ensenanza:'1',\r\n            },\r\n            documentom:{\r\n                ver:'1',\r\n            },\r\n            permisosExternos:'',\r\n          //fin de variables para recursos adicionales\r\n          //FIN DE VARIABLES PARA RECURSOS EXTERNOS\r\n          userRoot:false,\r\n        }\r\n    },\r\n    mounted() {\r\n        let me = this;\r\n        //asignatura que se obtiene en el docente\r\n        me.asignaturaSelect = {\r\n            id: localStorage.idasignatura,\r\n            nombreasignatura: localStorage.nombreasignatura\r\n        }\r\n        me.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n        me.miusuario = me.usuario\r\n        me.tipoUsuario = me.usuario.id_group\r\n        me.miusuario = me.usuario\r\n        me.grupo_usuario = me.miusuario.id_group;\r\n        if (me.grupo_usuario == 10) { //director\r\n            me.datoU = JSON.parse(localStorage.getItem('datoUser'))\r\n            me.miusuario = me.datoU\r\n        }\r\n        me.getMaterialAsignaturas();\r\n        me.traerArchivos();\r\n        me.getTodoMaterial();\r\n        me.getTodoAsignaturas();\r\n        me.getEstados();\r\n        me.getUserRoot(me.usuario)\r\n          //PERMISOS EXTERNOS\r\n        if(localStorage.status_permisos == \"yes\"){\r\n            me.permisosExternos = JSON.parse(localStorage.permisosExternos)\r\n            me.libro                    = me.permisosExternos.permisos_libros\r\n            me.curso                    = me.permisosExternos.permisos_cursos\r\n            me.cuaderno                 = me.permisosExternos.permisos_cuadernos\r\n            me.planificacion            = me.permisosExternos.permisos_planificaciones\r\n            //data de los recursos adicionales\r\n            me.mijuego                  = me.permisosExternos.zona_diversion_mi_juego\r\n            me.juegoProlipa             = me.permisosExternos.zona_diversion_juego_prolipa\r\n            me.materialDigital          = me.permisosExternos.material_apoyo_digital\r\n            me.materialpdf              = me.permisosExternos.material_apoyo_pdf\r\n            me.propuesta                = me.permisosExternos.propuestas_metodologicas\r\n            me.adaptacion               = me.permisosExternos.adaptaciones\r\n            me.articulo                 = me.permisosExternos.articulos\r\n            me.documentom               = me.permisosExternos.documentos_ministeriales\r\n        }\r\n        //FIN DE PERMISOS EXTERNOS\r\n    },\r\n    methods: {\r\n        getUserRoot(dato) {\r\n            let me = this;\r\n            this.$http.get(this.$server_url + 'permisos/' + dato.idusuario)\r\n            .then((result) => {\r\n                if (result.data.length > 0) {\r\n                me.userRoot = true;\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n        },\r\n         abrirMaterial(data={}) {\r\n            let me = this\r\n            if (data.webmaterial === null || data.webmaterial === 'null') {\r\n                me.$vs.notify({\r\n                    text: 'El material  aun no está disponible',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            localStorage.materialApoyo = data.webmaterial;\r\n            let route = this.$router.resolve({path: '/material/apoyo/ver'});\r\n            window.open(route.href, '_blank');\r\n        },\r\n        //para subir archivos\r\n         //crear material\r\n        crearMaterial(){\r\n            localStorage.docente=\"yes\";\r\n            this.$router.push('/subirmaterial/docente/');\r\n        },\r\n        //para traer los temas de los archivos\r\n        verTemasArchivo(id_material){\r\n            let me = this;\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url+'materialtemas/'+id_material).then(res => {\r\n                this.infotemas = res.data;\r\n                me.popupActivo = true;\r\n                me.$vs.loading.close();\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error)\r\n            })\r\n        },\r\n        //para traer los archivos pdfs\r\n          traerArchivos() {\r\n            let me = this;\r\n             let id_asignatura = localStorage.idasignatura\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url + 'traer_archivos_asignaturas/' + id_asignatura).then(res => {\r\n                this.infoarchivos = res.data;\r\n                me.$vs.loading.close();\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error)\r\n            })\r\n        },\r\n        getMaterialAsignaturas() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            let id_asignatura = localStorage.idasignatura\r\n            if (me.tipoUsuario === 1) {\r\n                id_asignatura = 'null'\r\n            }\r\n            this.$http.get(this.$server_url+'temas_por_material/' + id_asignatura)\r\n                .then(res => {\r\n                    me.material = res.data.items\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        getTemas() {\r\n            let me = this;\r\n            me.temas = []\r\n            if (me.unidadesSelect === \"\" || me.unidadesSelect === undefined || me.unidadesSelect === null) {\r\n                me.$vs.notify({\r\n                    text: 'Seleccione la unidad',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return;\r\n            }\r\n            if (me.asignaturaSelect === \"\" || me.asignaturaSelect === undefined || me.asignaturaSelect === null) {\r\n                me.$vs.notify({\r\n                    text: 'Seleccione la asignatura',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return;\r\n            }\r\n            let asignatura = me.asignaturaSelect\r\n            if (me.asignaturaSelect.id) {\r\n                asignatura = me.asignaturaSelect.id\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('unidad', me.unidadesSelect);\r\n            formData.append('asignatura', asignatura);\r\n            this.$http.post(this.$server_url+'temas_asignatura_material', formData)\r\n                .then(res => {\r\n                    me.temas = res.data;\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                })\r\n        },\r\n        getTodoMaterial() {\r\n            let me = this;\r\n            // me.$vs.loading()\r\n            me.op_eliminar = '';\r\n            let id_asignatura = localStorage.idasignatura\r\n            if (me.tipoUsuario === 1) {\r\n                id_asignatura = 'null'\r\n            }\r\n            this.$http.get(this.$server_url+'todo_material_apoyo/' + id_asignatura)\r\n                .then(res => {\r\n                    me.materiales = res.data;\r\n                    me.$vs.loading.close()\r\n                    // console.log(me.material)\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        getTodoAsignaturas() {\r\n            let me = this;\r\n            // me.$vs.loading()\r\n            this.$http.get(this.$server_url+'todo_asignaturas')\r\n                .then(res => {\r\n                    me.asignaturas = res.data;\r\n                    me.$vs.loading.close()\r\n                    // console.log(me.material)\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        asignarMaterialAsignatura() {\r\n            let me = this;\r\n            if (me.materialSelect.idmaterial == undefined) {\r\n                me.$vs.notify({\r\n                    text: 'Seleccione el material de apoyo',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            if (me.asignaturaSelect == '') {\r\n                me.$vs.notify({\r\n                    text: 'Seleccione una asignatura',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n\r\n            me.$vs.loading()\r\n            let temas_vector = []\r\n            for (var i = 0; i < me.temaSelect.length; i++) {\r\n                temas_vector.push(me.temaSelect[i].id)\r\n            }\r\n            let formData1 = new FormData();\r\n            formData1.append('id_material', me.materialSelect.idmaterial);\r\n            formData1.append('id_tema', temas_vector);\r\n            this.$http.post(this.$server_url+'temas_material', formData1)\r\n                .then(res => {\r\n                    // console.log(res.data)\r\n                    me.$vs.notify({\r\n                        text: 'Temas registrados en el material',\r\n                        color: 'success',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    me.$vs.loading.close()\r\n                    me.getMaterialAsignaturas();\r\n                    me.modalTemas = false\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.notify({\r\n                        text: 'fallooooo. ',\r\n                        color: 'danger',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    me.$vs.loading.close()\r\n                    me.vaciar();\r\n                    me.getMaterialAsignaturas();\r\n                    me.modalTemas = false\r\n                })\r\n\r\n        },\r\n        dataFormularioEditar(item) {\r\n            let me = this\r\n            me.materialSelect = {\r\n                nombrematerial: item.nombrematerial,\r\n                idmaterial: item.idmaterial\r\n            }\r\n            me.unidadesSelect = {\r\n                id: item.temas[0].unidad,\r\n                nombre_unidad: 'Unidad ' + item.temas[0].unidad\r\n            }\r\n            me.asignaturaSelect = item.asignatura_idasignatura\r\n            // me.estado_material = item.estado\r\n            me.temaSelect = []\r\n            if (item.temas) {\r\n                for (var i = 0; i < item.temas.length; i++) {\r\n                    me.temaSelect.push({\r\n                        id: item.temas[i].id_tema,\r\n                        nombre_tema: item.temas[i].nombre_tema\r\n                    })\r\n                }\r\n            }\r\n\r\n            me.modalTemas = true\r\n        },\r\n        editarTemasMaterialAsignatura() {\r\n            let me = this\r\n            me.$vs.loading()\r\n            let formData = new FormData();\r\n            formData.append('idmaterial', me.data_material.idmaterial);\r\n            formData.append('idasignatura', me.data_material.asignatura_idasignatura);\r\n            this.$http.post(this.$server_url+'borrar_temas_material', formData)\r\n                .then(res => {\r\n                    let temas_vector = []\r\n                    for (var i = 0; i < me.temaSelect.length; i++) {\r\n                        temas_vector.push(me.temaSelect[i].id)\r\n                    }\r\n                    let formData1 = new FormData();\r\n                    formData1.append('id_material', me.data_material.idmaterial);\r\n                    formData1.append('id_tema', temas_vector);\r\n                    this.$http.post(this.$server_url+'temas_material', formData1)\r\n                        .then(res => {\r\n                            // console.log(res.data)\r\n                            me.$vs.notify({\r\n                                text: 'Temas editados en el material',\r\n                                color: 'success',\r\n                                iconPack: 'feather',\r\n                                icon: 'icon-alert-triangle'\r\n                            })\r\n                            me.$vs.loading.close()\r\n                            me.vaciar();\r\n                            me.getMaterialAsignaturas();\r\n                            me.modalTemas = false\r\n                        })\r\n                        .catch(error => {\r\n                            me.$vs.notify({\r\n                                text: 'falló. ',\r\n                                color: 'danger',\r\n                                iconPack: 'feather',\r\n                                icon: 'icon-alert-triangle'\r\n                            })\r\n                            me.$vs.loading.close()\r\n                        })\r\n                })\r\n                .catch(error => {\r\n\r\n                })\r\n        },\r\n        openConfirmEliminar(item) {\r\n            let me = this;\r\n            me.item_eliminar = item;\r\n            me.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: 'Confirmar',\r\n                text: '¿Está seguro de eliminar esta asignación?',\r\n                acceptText: 'Aceptar',\r\n                cancelText: 'Cancelar',\r\n                accept: me.eliminarMaterial\r\n            })\r\n        },\r\n        openConfirmEliminarMaterial() {\r\n            let me = this;\r\n            me.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: 'Confirmar',\r\n                text: '¿Está seguro de eliminar este material?',\r\n                acceptText: 'Aceptar',\r\n                cancelText: 'Cancelar',\r\n                accept: me.confirmEliminarMaterial\r\n            })\r\n        },\r\n        confirmEliminarMaterial() {\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('idmaterial', me.data_material.idmaterial);\r\n            formData.append('idasignatura', me.data_material.asignatura_idasignatura);\r\n            this.$http.post(this.$server_url+'borrar_temas_material', formData)\r\n                .then(res => {\r\n                    this.$http.post(this.$server_url+'borrar_material_asig', formData)\r\n                        .then(res => {\r\n                            me.getMaterialAsignaturas()\r\n                            me.$vs.notify({\r\n                                text: 'Material eliminado correctamente',\r\n                                color: 'success',\r\n                                iconPack: 'feather',\r\n                                icon: 'icon-alert-triangle'\r\n                            })\r\n                        })\r\n                })\r\n                .catch(error => {\r\n\r\n                })\r\n        },\r\n        eliminarMaterial() {\r\n            let me = this;\r\n            // console.log(me.item_eliminar.temas)\r\n            me.$vs.loading()\r\n            if (me.op_eliminar == 2) {\r\n                // console.log(me.item_eliminar)\r\n                let formData = new FormData();\r\n                formData.append('material_idmaterial', me.item_eliminar.idmaterial);\r\n                formData.append('asignatura_idasignatura', me.item_eliminar.asignatura_idasignatura);\r\n                formData.append('temas', me.item_eliminar.temas);\r\n                this.$http.post(this.$server_url+'quitar_material_asignatura', formData)\r\n                    .then(res => {\r\n                        // console.log(res.data)\r\n                        me.$vs.notify({\r\n                            text: me.item_eliminar.nombrematerial + ' eliminado',\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                        me.$vs.loading.close()\r\n                        me.vaciar();\r\n                        me.getMaterialAsignaturas();\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error)\r\n                        me.$vs.loading.close()\r\n                    })\r\n            }\r\n            if (me.op_eliminar == 1) {\r\n                let formData = new FormData();\r\n                formData.append('idmaterial', me.item_eliminar.idmaterial);\r\n                this.$http.post(this.$server_url+'eliminarMaterial', formData)\r\n                    .then(res => {\r\n                        // console.log(res.data)\r\n                        me.$vs.notify({\r\n                            text: me.item_eliminar.nombrematerial + ' eliminado',\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                        me.$vs.loading.close()\r\n                        me.getTodoMaterial();\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error)\r\n                        me.$vs.loading.close()\r\n                    })\r\n            }\r\n        },\r\n        getEstados() {\r\n            let me = this;\r\n            // me.$vs.loading()\r\n            this.$http.get(this.$server_url+'material_estados')\r\n                .then(res => {\r\n                    me.estados = res.data;\r\n                    me.$vs.loading.close()\r\n                    // console.log(me.material)\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        registrarMaterial(item) {\r\n            let me = this;\r\n            // console.log(item)\r\n            if (me.materialAp.nombrematerial == \"\" || me.materialAp.nombrematerial == undefined) {\r\n                me.$vs.notify({\r\n                    text: 'Ingrese el nombre del material de apoyo',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            if (me.materialAp.webmaterial == '' || me.materialAp.webmaterial == undefined) {\r\n                me.$vs.notify({\r\n                    text: 'Ingrese el nombre del archivo digital del material de apoyo',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            if (me.materialAp.imagenmaterial == '' || me.materialAp.imagenmaterial == undefined) {\r\n                me.$vs.notify({\r\n                    text: 'Escriba el nombre de la portada del material de apoyo',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            me.$vs.loading()\r\n            let formData = new FormData();\r\n            if (me.materialAp.idmaterial > 0) {\r\n                formData.append('idmaterial', me.materialAp.idmaterial);\r\n            }\r\n            formData.append('nombrematerial', me.materialAp.nombrematerial);\r\n            formData.append('descripcionmaterial', me.materialAp.descripcionmaterial);\r\n            formData.append('webmaterial', me.materialAp.webmaterial);\r\n            formData.append('exematerial', me.materialAp.exematerial);\r\n            formData.append('imagenmaterial', me.materialAp.imagenmaterial);\r\n            formData.append('Estado_idEstado', me.materialAp.Estado_idEstado);\r\n            formData.append('zipmaterial', me.materialAp.zipmaterial);\r\n            formData.append('creador', me.miusuario.idusuario);\r\n            this.$http.post(this.$server_url+'registrar_material', formData)\r\n                .then(res => {\r\n\r\n                    if (me.materialAp.idmaterial > 0) {\r\n                        me.edita = 0;\r\n                        me.$vs.notify({\r\n                            text: me.materialAp.nombrematerial + 'editado correctamente',\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                    } else {\r\n\r\n                        me.$vs.notify({\r\n                            text: 'Material registrado correctamente',\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                    }\r\n                    me.modalMaterial = false;\r\n                    me.$vs.loading.close()\r\n                    me.vaciar();\r\n                    me.getTodoMaterial();\r\n                })\r\n                .catch(error => {\r\n                    me.$vs.loading.close();\r\n                    me.getTodoMaterial();\r\n                })\r\n        },\r\n        selectMaterial(item) {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url+'showMaterial/' + item.idmaterial)\r\n                .then(res => {\r\n                    me.materialAp = (res.data[0]);\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        vaciar() {\r\n            let me = this;\r\n            me.materialAp = {\r\n                'idmaterial': '',\r\n                'nombrematerial': '',\r\n                'descripcionmaterial': '',\r\n                'zipmaterial': '',\r\n                'webmaterial': '',\r\n                'imagenmaterial': '',\r\n                'exematerial': '',\r\n                'Estado_idEstado': 1,\r\n            };\r\n            me.materialSelect = '';\r\n            me.temaSelec = 0;\r\n            me.unidadesSelect = {};\r\n            me.modalMaterial = false;\r\n\r\n        },\r\n        vaciarModal() {\r\n            let me              = this;\r\n            me.materialSelect   = '';\r\n            me.unidadesSelect   = '';\r\n            me.temaSelect       = \"\";\r\n            me.op_editar        = 0;\r\n            me.asignaturaSelect = \"\"\r\n            // me.asignaturas      = []\r\n            me.modalTemas       = true;\r\n        },\r\n        pasarDatos(item) {\r\n            let me = this;\r\n            me.op_editar = 1;\r\n            me.materialSelect = item.nombrematerial;\r\n            me.asignaturaSelect = item.nombreasignatura;\r\n            me.unidadesSelect = item.temas.length > 0 ? item.temas[0].id_unidad : '';\r\n            me.temaSelect = item.temas;\r\n            me.modalTemas = true;\r\n\r\n        },\r\n        modalAgregarMaterial() {\r\n            let me = this;\r\n            me.modalMaterial = true;\r\n        },\r\n        getCursosDocente() {\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('id_usuario', me.miusuario.idusuario);\r\n            formData.append('id_asignatura', localStorage.idasignatura);\r\n            formData.append('periodo_id',localStorage.periodo_id)\r\n            this.$http.post(this.$server_url+'curso_libro_docente', formData)\r\n                .then(function (res) {\r\n                    me.cursosDocente = res.data\r\n                    if(me.archivos){\r\n                        me.modalCursosArchivos = true\r\n                    }else{\r\n                         me.modalCursosEnvioLink = true\r\n                    }\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        verCalificaciones(item) {\r\n            let me = this\r\n            localStorage.codigo_calif = item.codigo\r\n            localStorage.nombre_curso_calif = item.nombre\r\n            localStorage.id_material_calif = me.data_material.idmaterial\r\n            localStorage.nombre_material_calif = me.data_material.nombrematerial\r\n            // me.$router.push('/calificaciones_materialapoyo')\r\n            window.open('/calificaciones_materialapoyo', '_blank');\r\n        },\r\n        asignarCurso(item) {\r\n            let me = this;\r\n            if (me.grupo_usuario == 10) {\r\n                me.$vs.notify({\r\n                    text: 'Este contenido pertenece a otro docente',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-check'\r\n                })\r\n                return;\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('codigo_curso', item.codigo);\r\n            formData.append('id_material', me.data_material.idmaterial);\r\n            this.$http.post(this.$server_url+'asignar_cursos_material', formData)\r\n                .then(function (res) {\r\n                    me.$vs.notify({\r\n                        text: res.data.message,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    if(res.data.status == 1){\r\n                        let h_idinstitucion = me.miusuario.institucion_idInstitucion;\r\n                        let h_idusuario = me.miusuario.idusuario;\r\n                        let h_idgrupo = me.miusuario.id_group;\r\n                        let h_idasignatura = localStorage.idasignatura\r\n                        let h_nombreasignatura = localStorage.nombreasignatura\r\n                        let h_recursotipo = 9; //9 = material\r\n                        let datoHistorico = {\r\n                            'user_nombre': me.miusuario.nombres,\r\n                            'user_apellido': me.miusuario.apellidos,\r\n                            'user_email': me.miusuario.email,\r\n                            'user_cedula': me.miusuario.cedula,\r\n                            'recurso_accion': 'asignar',\r\n                            'recurso_tipo': 'material',\r\n                            'recurso_nombre': me.nombrematerial,\r\n                            'recurso_detalle': 'material asignado  al curso '+item.codigo,\r\n                        }\r\n                        me.saveHistoricoVisitas(h_idinstitucion, h_idusuario, h_idgrupo, h_idasignatura,h_nombreasignatura,  h_recursotipo,datoHistorico)\r\n                    }\r\n                    me.getCursosDocente()\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        //para asignar el curso con el archivo\r\n        asignarCursoArchivo(item){\r\n             let me = this;\r\n            if (me.grupo_usuario == 10) {\r\n                me.$vs.notify({\r\n                    text: 'Este contenido pertenece a otro docente',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-check'\r\n                })\r\n                return;\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('codigo_curso', item.codigo);\r\n            formData.append('id_archivo', me.data_material.id_archivo);\r\n            this.$http.post(this.$server_url+'asignar_cursos_archivos', formData)\r\n                .then(function (res) {\r\n                    me.getCursosDocente()\r\n                    me.$vs.notify({\r\n                        text: res.data.message,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    if(res.data.status == 1){\r\n                        let h_idinstitucion = me.miusuario.institucion_idInstitucion;\r\n                        let h_idusuario = me.miusuario.idusuario;\r\n                        let h_idgrupo = me.miusuario.id_group;\r\n                        let h_idasignatura = localStorage.idasignatura\r\n                        let h_nombreasignatura = localStorage.nombreasignatura\r\n                        let h_recursotipo = 9; //9 = material\r\n                        let datoHistorico = {\r\n                            'user_nombre': me.miusuario.nombres,\r\n                            'user_apellido': me.miusuario.apellidos,\r\n                            'user_email': me.miusuario.email,\r\n                            'user_cedula': me.miusuario.cedula,\r\n                            'recurso_accion': 'asignar',\r\n                            'recurso_tipo': 'material',\r\n                            'recurso_nombre': 'archivo: '+me.nombrematerial,\r\n                            'recurso_detalle': 'asignar archivo al curso '+item.codigo,\r\n                        }\r\n                        me.saveHistoricoVisitas(h_idinstitucion, h_idusuario, h_idgrupo, h_idasignatura,h_nombreasignatura,  h_recursotipo,datoHistorico)\r\n                    }\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        verMaterial(item) {\r\n            let me = this;\r\n            let h_idinstitucion = me.miusuario.institucion_idInstitucion;\r\n            let h_idusuario = me.miusuario.idusuario;\r\n            let h_idgrupo = me.miusuario.id_group;\r\n            let h_idasignatura = localStorage.idasignatura\r\n            let h_nombreasignatura = localStorage.nombreasignatura\r\n            let h_recursotipo = 9; //9 = material\r\n            let datoHistorico = {\r\n                'user_nombre': me.miusuario.nombres,\r\n                'user_apellido': me.miusuario.apellidos,\r\n                'user_email': me.miusuario.email,\r\n                'user_cedula': me.miusuario.cedula,\r\n                'recurso_accion': 'ver',\r\n                'recurso_tipo': 'material',\r\n                'recurso_nombre': item.nombrematerial,\r\n                'recurso_detalle': 'material visto en el curso '+localStorage.codigo,\r\n            }\r\n            me.saveHistoricoVisitas(h_idinstitucion, h_idusuario, h_idgrupo, h_idasignatura,h_nombreasignatura,  h_recursotipo,datoHistorico)\r\n            if(me.usuario.id_group == 6 ){\r\n                me.saveMaterialApoyo(item)\r\n            }\r\n            localStorage.url_material = item.webmaterial;\r\n            window.open('/docente/material/digital','_blank')\r\n            // this.$router.push('/docente/material/digital');\r\n        },\r\n        UnidadesTemasMaterialShow(item) {\r\n            let me = this;\r\n            me.temasMostrar = item;\r\n            me.modalMaterialTemas = true;\r\n        },\r\n        saveMaterialApoyo(item){\r\n            let me = this;\r\n            let asignatura_id = localStorage.idasignatura\r\n            let idusuario     = me.usuario.idusuario\r\n            let url           = localStorage.url_material\r\n            let actividad     = item.nombrematerial\r\n            let periodo_id    = localStorage.periodo_id\r\n            this.$http.get(this.$server_url+'conteoActividad?asignatura_id='+asignatura_id+'&idusuario='+idusuario+'&url='+url+'&actividad='+actividad+'&periodo_id='+periodo_id+'&pagina=0&tipo=2')\r\n                .then(function (res) {\r\n                    me.tipos = res.data.tipoArea\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n    }\r\n}\r\n",{"version":3,"sources":["materialapoyo.vue"],"names":[],"mappings":";AAoRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"materialapoyo.vue","sourceRoot":"src/views/materialapoyo","sourcesContent":["<template>\r\n<div class=\"vx-col md:w-full w-full mb-base\">\r\n    <vs-popup title=\"Seleccione un curso\" :active.sync=\"modalCursosEnvioLink\">\r\n        <vs-list>\r\n            <vs-list-item v-for=\"(item,$index) in cursosDocente\" :key=\"$index\" :title=\"item.nombre\" :subtitle=\"item.codigo\">\r\n                <template slot=\"avatar\">\r\n                    <vs-avatar color=\"primary\" icon-pack=\"feather\" icon=\"icon-folder\" />\r\n                </template>\r\n                <vs-button class=\"m-1\" style=\"padding: 7px 5px 7px 5px; font-size: 12px;\" v-if=\"verTipoModal===true\" size=\"small\" type=\"filled\" target=\"_blank\" color=\"success\" @click=\"asignarCurso(item)\">Asignar material</vs-button>\r\n\r\n                <vs-button v-if=\"verTipoModal===false\" type=\"filled\" target=\"_blank\" color=\"warning\" style=\"font-size: 12px;\" size=\"small\" @click=\"modalCursosEnvioLink=false; verCalificaciones(item)\">Ver calificaciones</vs-button>\r\n            </vs-list-item>\r\n        </vs-list>\r\n    </vs-popup>\r\n    <vs-popup title=\"Seleccione un curso\" :active.sync=\"modalCursosArchivos\">\r\n        <vs-list>\r\n            <vs-list-item v-for=\"(item,$index) in cursosDocente\" :key=\"$index\" :title=\"item.nombre\" :subtitle=\"item.codigo\">\r\n                <template slot=\"avatar\">\r\n                    <vs-avatar color=\"primary\" icon-pack=\"feather\" icon=\"icon-folder\" />\r\n                </template>\r\n                <vs-button class=\"m-1\" style=\"padding: 7px 5px 7px 5px; font-size: 12px;\" v-if=\"verTipoModal===true\" size=\"small\" type=\"filled\" target=\"_blank\" color=\"success\" @click=\"asignarCursoArchivo(item)\">Asignar archivo</vs-button>\r\n            </vs-list-item>\r\n        </vs-list>\r\n    </vs-popup>\r\n    <vs-popup size=\"large\" title=\"Asignar material y temas\" :active.sync=\"modalTemas\">\r\n        <div class=\"vx-row m-5\" v-if=\"usuario\">\r\n            <div class=\"vx-col w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Material de apoyo: </div>\r\n                <v-select class=\"mb-4 w-full\" v-model=\"materialSelect\" :options=\"materiales\" label=\"nombrematerial\" :reduce=\"materiales => materiales\" />\r\n            </div>\r\n            <div class=\"vx-col md:w-2/3 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Asignatura: </div>\r\n                <v-select class=\"mb-4 w-full\" @input=\"unidadesSelect='';temaSelect='';temas=[];\" v-if=\"tipoUsuario != 6 || tipoUsuario!=16\" v-model=\"asignaturaSelect\" :options=\"asignaturas\" label=\"nombreasignatura\" :reduce=\"asignaturas => asignaturas.idasignatura\" />\r\n                <v-select class=\"mb-4 w-full\" v-else v-model=\"asignaturaSelect\" disabled :options=\"asignaturas\" label=\"nombreasignatura\" :reduce=\"asignaturas => asignaturas.idasignatura\" />\r\n            </div>\r\n            <div class=\"vx-col md:w-1/3 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Unidad: </div>\r\n                <v-select class=\"mb-4 w-full\" v-model=\"unidadesSelect\" :options=\"unidades\" label=\"nombre_unidad\" :reduce=\"unidades => unidades.id\" @input=\"getTemas();\" />\r\n            </div>\r\n            <div class=\"vx-col w-full mb-base\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Temas: </div>\r\n                <v-select multiple :closeOnSelect=\"false\" :options=\"temas\" :reduce=\"temas => temas\" label=\"nombre_tema\" class=\"w-full\" v-model=\"temaSelect\" />\r\n            </div>\r\n            <div class=\"vx-col md:w-2/3 w-full\" align=\"right\">\r\n                <vs-button v-if=\"op_editar==0\" style=\"display:inline-block\" @click=\"asignarMaterialAsignatura();\" color=\"success\" type=\"relief\">Asignar TEMAS </vs-button> &nbsp;\r\n                <vs-button v-if=\"op_editar==1\" style=\"display:inline-block\" @click=\"editarTemasMaterialAsignatura();\" color=\"warning\" type=\"relief\">Editar TEMAS</vs-button>\r\n            </div>\r\n        </div>\r\n    </vs-popup>\r\n    <vs-popup size=\"large\" title=\"Unidades\" :active.sync=\"modalMaterialTemas\">\r\n        <div v-for=\"(item,$index) in temasMostrar\" :key=\"$index\">\r\n            Unidad {{item.unidad}} -\r\n            {{ item.nombre_tema }}\r\n        </div>\r\n    </vs-popup>\r\n    <vx-card>\r\n      <!--DOCENTES-->\r\n      <div v-if=\"tipoUsuario === 6 || tipoUsuario === 10 || tipoUsuario == 16\">\r\n            <div class=\"\">\r\n              <vs-tabs>\r\n              <vs-tab label=\"Material Digital\">\r\n                  <div class=\"con-tab-ejemplo\">\r\n                        <vs-table stripe pagination max-items=\"30\" search :data=\"material\">\r\n                          <template slot=\"header\" v-if=\"tipoUsuario != 6 && tipoUsuario != 10 && tipoUsuario != 16\">\r\n                              <vs-button @click=\"vaciarModal()\" size=\"small\" color=\"dark\" type=\"filled\" style=\"font-size: 13px;\">Asignar material y temas </vs-button>\r\n                          </template>\r\n                          <template slot=\"thead\">\r\n                              <vs-th style=\"max-width: 20px;\">#</vs-th>\r\n                              <vs-th>Material</vs-th>\r\n                              <vs-th>Temas</vs-th>\r\n                              <vs-th>Acciones</vs-th>\r\n                          </template>\r\n                          <template slot-scope=\"{data}\">\r\n                              <vs-tr :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                                  <vs-td>\r\n                                      {{indextr+1}}\r\n                                  </vs-td>\r\n                                  <vs-td width=\"30%\">\r\n                                      <b>Material:</b> {{ data[indextr].nombrematerial }}<br>\r\n                                      <b>Libro:</b> {{ data[indextr].nombreasignatura }}\r\n                                  </vs-td>\r\n                                  <vs-td>\r\n                                      <template v-if=\"usuario.id_group == 16\">\r\n                                          <div v-if=\"materialDigital.ver = '1'\">\r\n                                              <div v-if=\"data[indextr].temas[0].unidad\">\r\n                                                  <vs-button @click=\"UnidadesTemasMaterialShow(data[indextr].temas)\" color=\"warning\" size=\"small\">Ver temas</vs-button>\r\n                                              </div>\r\n                                          </div>\r\n                                      </template>\r\n                                      <template v-else>\r\n                                          <div v-if=\"data[indextr].temas[0].unidad\">\r\n                                              <vs-button @click=\"UnidadesTemasMaterialShow(data[indextr].temas)\" color=\"warning\" size=\"small\">Ver temas</vs-button>\r\n                                          </div>\r\n                                      </template>\r\n                                  </vs-td>\r\n                                  <vs-td width=\"250px\">\r\n                                      <div v-if=\"usuario.id_group == 16\">\r\n                                          <vx-tooltip v-if=\"materialDigital.previsualizar == '1'\" style=\"display: inline-block;\" text=\"Previsualizar material\" position=\"top\" color=\"primary\">\r\n                                              <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-eye\" @click=\"verMaterial(data[indextr])\" color=\"primary\" type=\"line\"></vs-button>\r\n                                          </vx-tooltip>\r\n\r\n                                          <vx-tooltip v-if=\"materialDigital.asignar == '1'\" style=\"display: inline-block;\" text=\"Asignar cursos\" position=\"top\" color=\"warning\">\r\n                                              <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-folder\" @click=\"verTipoModal = true; data_material = data[indextr]; getCursosDocente();nombrematerial=tr.nombrematerial\" color=\"warning\" type=\"line\"></vs-button>\r\n                                          </vx-tooltip>\r\n                                      </div>\r\n                                      <div v-else>\r\n                                          <vx-tooltip style=\"display: inline-block;\" text=\"Previsualizar material\" position=\"top\" color=\"primary\">\r\n                                          <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-eye\" @click=\"verMaterial(data[indextr])\" color=\"primary\" type=\"line\"></vs-button>\r\n                                          </vx-tooltip>\r\n                                          <vx-tooltip style=\"display: inline-block;\" text=\"Asignar cursos\" position=\"top\" color=\"warning\">\r\n                                              <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-folder\" @click=\"verTipoModal = true; data_material = data[indextr]; getCursosDocente();nombrematerial=tr.nombrematerial\" color=\"warning\" type=\"line\"></vs-button>\r\n                                          </vx-tooltip>\r\n                                      </div>\r\n\r\n                                  </vs-td>\r\n                              </vs-tr>\r\n                          </template>\r\n                      </vs-table>\r\n                  </div>\r\n              </vs-tab>\r\n                  <vs-tab label=\"Material - archivos\">\r\n                      <listadoMaterarial tipoAsignatura=\"1\" :asignatura=\"asignaturaSelect.id\" asignaturaName=\"asignaturaSelect.nombreasignatura\"/>\r\n                  </vs-tab>\r\n              </vs-tabs>\r\n          </div>\r\n      </div>\r\n      <!--ADMINISTRADOR-->\r\n      <vs-tabs v-else alignment=\"fixed\" color=\"success mt-4\">\r\n        <vs-tab label=\"Material - asignaturas - temas\">\r\n            <div class=\"vx-col w-full\" align=\"left\" v-if=\"tipoUsuario == 1\">\r\n                <div v-if=\"material\">\r\n                    <vs-table stripe pagination max-items=\"30\" search :data=\"material\">\r\n                        <template slot=\"header\" v-if=\"tipoUsuario != 6 || tipoUsuario != 16\">\r\n                            <vs-button @click=\"vaciarModal()\" size=\"small\" color=\"dark\" type=\"filled\" style=\"font-size: 13px;\">Asignar material y temas </vs-button>\r\n                        </template>\r\n                        <template slot=\"thead\">\r\n                            <vs-th style=\"max-width: 20px;\">#</vs-th>\r\n                            <vs-th>Material</vs-th>\r\n                            <vs-th>Temas</vs-th>\r\n                            <vs-th>Acciones</vs-th>\r\n                        </template>\r\n                        <template slot-scope=\"{data}\">\r\n                            <vs-tr :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                                <vs-td>\r\n                                    {{indextr+1}}\r\n                                </vs-td>\r\n                                <vs-td width=\"30%\">\r\n                                    <b>Material:</b> {{ data[indextr].nombrematerial }}<br>\r\n                                    <b>Libro:</b> {{ data[indextr].nombreasignatura }}\r\n                                </vs-td>\r\n                                <vs-td>\r\n                                    <div v-if=\"data[indextr].temas[0].unidad\">\r\n                                        <vs-button @click=\"UnidadesTemasMaterialShow(data[indextr].temas)\" color=\"warning\" size=\"small\">Ver temas</vs-button>\r\n                                    </div>\r\n                                </vs-td>\r\n                                <vs-td width=\"250px\" v-if=\"usuario\">\r\n                                    <vx-tooltip v-if=\"tipoUsuario != 6 || tipoUsuario==16\" style=\"display: inline-block;\" text=\"Editar\" position=\"top\" color=\"success\">\r\n                                        <vs-button radius style=\"display: inline-block;\" class=\"m-2 mb-2\" icon-pack=\"feather\" icon=\"icon-edit\" color=\"success\" type=\"line\" size=\"large\" @click=\"data_material=data[indextr]; op_editar = 1; dataFormularioEditar(data[indextr])\"></vs-button>\r\n                                    </vx-tooltip>\r\n                                    <vx-tooltip v-if=\"tipoUsuario != 6 || tipoUsuario==16\" style=\"display: inline-block;\" text=\"Eliminar\" position=\"top\" color=\"danger\">\r\n                                        <vs-button radius style=\"display: inline-block;\" size=\"large\" class=\"m-2 mb-2\" icon-pack=\"feather\" color=\"danger\" icon=\"icon-trash\" type=\"line\" @click=\"data_material=data[indextr]; openConfirmEliminarMaterial(); op_eliminar=2\"></vs-button>\r\n                                    </vx-tooltip>\r\n                                    <vx-tooltip v-if=\"tipoUsuario === 6 || tipoUsuario==16\" style=\"display: inline-block;\" text=\"Asignar cursos\" position=\"top\" color=\"warning\">\r\n                                        <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-folder\" @click=\"verTipoModal = true; data_material = data[indextr]; getCursosDocente();nombrematerial=tr.nombrematerial\" color=\"warning\" type=\"line\"></vs-button>\r\n                                    </vx-tooltip>\r\n                                </vs-td>\r\n                            </vs-tr>\r\n                        </template>\r\n                    </vs-table>\r\n                </div>\r\n                <div v-else>\r\n                    <vs-button @click=\"vaciarModal()\" size=\"small\" color=\"dark\" type=\"filled\" style=\"font-size: 13px;\">Asignar material y temas </vs-button>\r\n                </div>\r\n            </div>\r\n        </vs-tab>\r\n        <vs-tab label=\"Material de apoyo interactivo\">\r\n            <vs-popup title=\"Asignar material y temas\" :active.sync=\"modalMaterial\">\r\n                <div class=\"vx-row mt-4\">\r\n                    <div class=\"vx-col w-full\" align=\"left\">\r\n                        <div style=\"font-size: 12px; \">Nombre: </div>\r\n                        <vs-input type=\"text\" class=\"inputx w-full mb-6\" v-model=\"materialAp.nombrematerial\" maxlength=\"100\" placeholder=\"Nombre del material\" />\r\n                    </div>\r\n                    <div class=\"vx-col w-full\" align=\"left\">\r\n                        <div style=\"font-size: 12px; \">Descripcion: </div>\r\n                        <vs-input type=\"text\" class=\"inputx w-full mb-6\" v-model=\"materialAp.descripcionmaterial\" maxlength=\"200\" placeholder=\"Descripción\" />\r\n                    </div>\r\n                    <div class=\"vx-col w-full\" align=\"left\">\r\n                        <div style=\"font-size: 12px; \">Nombre de la carpeta del archivo digital: </div>\r\n                        <vs-input type=\"text\" class=\"inputx w-full mb-6\" v-model=\"materialAp.webmaterial\" maxlength=\"200\" placeholder=\"Archivo digital\" />\r\n                    </div>\r\n                    <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                        <div style=\"font-size: 12px; \">Nombre del archivo zip: </div>\r\n                        <vs-input type=\"text\" class=\"inputx w-full mb-6\" v-model=\"materialAp.zipmaterial\" maxlength=\"200\" placeholder=\"Archivo zip\" />\r\n                    </div>\r\n                    <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                        <div style=\"font-size: 12px; \">Nombre de la portada: </div>\r\n                        <vs-input type=\"text\" class=\"inputx w-full mb-6\" v-model=\"materialAp.imagenmaterial\" maxlength=\"200\" placeholder=\"portada.jpg / portada.png\" />\r\n                    </div>\r\n                    <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full mb-base\" align=\"left\">\r\n                        <div style=\"font-size: 12px; \">Estado: </div>\r\n                        <v-select class=\"mb-4 w-full\" v-model=\"materialAp.Estado_idEstado\" :options=\"estados\" label=\"nombreestado\" :reduce=\"estados => estados.idEstado\" />\r\n                    </div>\r\n                    <div class=\"vx-col w-full mb-base\" align=\"left\">\r\n                        <vs-button v-if=\"edita==0\" style=\"display:inline-block\" @click=\"registrarMaterial();\" color=\"success\" type=\"relief\">Registrar material </vs-button> &nbsp;\r\n                        <vs-button v-if=\"edita==1\" style=\"display:inline-block\" @click=\"registrarMaterial(materialAp);\" color=\"warning\" type=\"relief\">Editar material </vs-button> &nbsp;\r\n                        <vs-button style=\"display:inline-block\" @click=\"edita=0; vaciar();\" color=\"danger\" type=\"relief\">Cancelar </vs-button> &nbsp;\r\n                    </div>\r\n                </div>\r\n            </vs-popup>\r\n            <div class=\"vx-row m-2\" v-if=\"tipoUsuario == 1\">\r\n                <div v-if=\"materiales\" class=\" w-full\">\r\n                    <vs-divider>\r\n                        <b>{{materiales.length}} materiales registrados actualmente</b>\r\n                    </vs-divider>\r\n                    <vs-table stripe pagination max-items=\"20\" width=\"100%\" search :data=\"materiales\">\r\n                        <template slot=\"header\">\r\n                            <vs-button @click=\"modalAgregarMaterial()\" v-if=\"usuario.id_group == 1 || userRoot == true\" size=\"small\" color=\"dark\" type=\"filled\" style=\"font-size: 13px;\">Agregar nuevo material</vs-button>\r\n                        </template>\r\n                        <template slot=\"thead\">\r\n                            <vs-th>#</vs-th>\r\n                            <vs-th>Nombre</vs-th>\r\n                            <vs-th>Fechas</vs-th>\r\n                            <vs-th>Estado</vs-th>\r\n                            <vs-th>Acciones</vs-th>\r\n                        </template>\r\n                        <template slot-scope=\"{data}\">\r\n                            <vs-tr :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                                <vs-td>\r\n                                    {{indextr+1}}\r\n                                </vs-td>\r\n                                <vs-td>\r\n                                    <vs-chip color=\"primary\">\r\n                                        <p @click=\"abrirMaterial(data[indextr])\">{{ data[indextr].nombrematerial }}</p>\r\n                                    </vs-chip>\r\n                                </vs-td>\r\n                                <vs-td>\r\n                                    <small>Actualizado: {{ data[indextr].updated_at }}<br>\r\n                                        Registrado: {{ data[indextr].created_at }}</small>\r\n                                </vs-td>\r\n                                <vs-td>\r\n                                    <label v-if=\"data[indextr].Estado_idEstado == '1'\" class=\"text-success\">Activo</label>\r\n                                    <label v-if=\"data[indextr].Estado_idEstado == '2'\" class=\"text-danger\">Inactivo</label>\r\n                                </vs-td>\r\n                                <vs-td v-if=\"usuario.id_group == 1 || userRoot == true\">\r\n                                    <vx-tooltip style=\"display: inline-block;\" text=\"Editar\" position=\"top\" color=\"warning\">\r\n                                        <vs-button radius style=\"display: inline-block;\" size=\"large\" class=\"m-2 mb-2\" icon-pack=\"feather\" color=\"warning\" icon=\"icon-edit\" type=\"line\" @click=\"selectMaterial(data[indextr]); edita=1; modalMaterial=true;\"></vs-button>\r\n                                    </vx-tooltip>\r\n                                    <vx-tooltip style=\"display: inline-block;\" text=\"Eliminar\" position=\"top\" color=\"danger\">\r\n                                        <vs-button radius style=\"display: inline-block;\" size=\"large\" class=\"m-2 mb-2\" icon-pack=\"feather\" color=\"danger\" icon=\"icon-trash\" type=\"line\" @click=\"openConfirmEliminar(data[indextr]);op_eliminar=1; edita = 0\"></vs-button>\r\n                                    </vx-tooltip>\r\n                                </vs-td>\r\n                                <vs-td v-else>\r\n                                </vs-td>\r\n                            </vs-tr>\r\n                        </template>\r\n                    </vs-table>\r\n                </div>\r\n                <div v-else>\r\n                    <vs-button @click=\"modalAgregarMaterial()\" size=\"small\" color=\"dark\" type=\"filled\" style=\"font-size: 13px;\">Agregar nuevo material</vs-button>\r\n                </div>\r\n            </div>\r\n        </vs-tab>\r\n        <vs-tab label=\"Cargar documentos material\">\r\n          <listadoMaterarial/>\r\n        </vs-tab>\r\n      </vs-tabs>\r\n    </vx-card>\r\n    <!-- PARA VER LOS TEMAS DE LOS ARCHIVOS -->\r\n    <vs-popup class=\"holamundo\"  title=\"Listado de Unidades-Temas\" :active.sync=\"popupActivo\">\r\n        <vs-list v-for=\"item in infotemas\" :key=\"item\">\r\n            <vs-list-item :title=\"'Unidad: '+item.unidad\" :subtitle=\"'Tema: '+item.nombre_tema\"></vs-list-item>\r\n        </vs-list>\r\n    </vs-popup>\r\n</div>\r\n</template>\r\n<script>\r\nimport listadoMaterarial from './material_subir/listadoMaterial.vue'\r\nimport historicoMixin from \"@/mixins/historicomix\";\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nimport cargarmaterial from './cargarmaterial';\r\nexport default {\r\n     mixins: [historicoMixin],\r\n    components: {\r\n        'v-select': vSelect,\r\n        cargarmaterial,\r\n        listadoMaterarial\r\n    },\r\n    data() {\r\n        return {\r\n            infotemas:[],\r\n            popupActivo:false,\r\n            archivos:false,\r\n            infoarchivos:[],\r\n            modalMaterial: false,\r\n            modalTemas: false,\r\n            material: [],\r\n            materialSelect: '',\r\n            materiales: [],\r\n            temas: [],\r\n            temaSelect: [],\r\n            asignaturas: [],\r\n            asignaturaSelect: {},\r\n            unidades: [{\r\n                \"id\": 1,\r\n                nombre_unidad: 'Unidad 1'\r\n            }, {\r\n                \"id\": 2,\r\n                nombre_unidad: 'Unidad 2'\r\n            }, {\r\n                \"id\": 3,\r\n                nombre_unidad: 'Unidad 3'\r\n            }, {\r\n                \"id\": 4,\r\n                nombre_unidad: 'Unidad 4'\r\n            }, {\r\n                \"id\": 5,\r\n                nombre_unidad: 'Unidad 5'\r\n            }, {\r\n                \"id\": 6,\r\n                nombre_unidad: 'Unidad 6'\r\n            }, {\r\n                \"id\": 7,\r\n                nombre_unidad: 'Unidad 7'\r\n            }, {\r\n                \"id\": 8,\r\n                nombre_unidad: 'Unidad 8'\r\n            }],\r\n            unidadesSelect: {},\r\n            n_material: '',\r\n            materialAp: {\r\n                'idmaterial': '',\r\n                'nombrematerial': '',\r\n                'descripcionmaterial': '',\r\n                'zipmaterial': '',\r\n                'webmaterial': '',\r\n                'imagenmaterial': '',\r\n                'exematerial': '',\r\n                'Estado_idEstado': 1,\r\n            },\r\n            estados: [],\r\n            op_eliminar: '',\r\n            op_editar: 0,\r\n            edita: 0,\r\n            item_eliminar: '',\r\n            data_material: [],\r\n            id_material_editar: '',\r\n            estado_material: false,\r\n            modalCursosEnvioLink: false,\r\n            modalCursosArchivos:false,\r\n            cursosDocente: [],\r\n            verTipoModal: false,\r\n            usuario: [],\r\n            miusuario:[],\r\n            tipoUsuario: 1,\r\n            grupo_usuario: '',\r\n            idusuario: '',\r\n            datoU: '',\r\n            modalMaterialTemas: false,\r\n            temasMostrar: '',\r\n            nombrematerial:'',\r\n             //====VARIABLES PARA RECURSOS EXTERNOS\r\n            libro:{\r\n                libroweb:'1',\r\n                libro_con_guia:'1',\r\n                guia_didactica:'1',\r\n                unidades:'1',\r\n            },\r\n            curso:{\r\n                ver:'1',\r\n                agregar:'1',\r\n                editar:'1',\r\n                eliminar:'1',\r\n            },\r\n            cuaderno:{\r\n                guia:'1',\r\n                didactica:'1',\r\n                web:'1',\r\n            },\r\n            planificacion:{\r\n                descargar:'1',\r\n                visualizar:'1',\r\n            },\r\n            //variables para recursos adicionales\r\n            mijuego:{\r\n                agregar:'1',\r\n                editar:'1',\r\n                eliminar:'1',\r\n                ver:'1',\r\n                asignar:'1',\r\n            },\r\n            juegoProlipa:{\r\n                asignar:'1',\r\n                ver:'1',\r\n                previsualizar:'1',\r\n            },\r\n            materialDigital:{\r\n                ver:'1',\r\n                previsualizar:'1',\r\n                asignar:'1',\r\n            },\r\n            materialpdf:{\r\n                subir:'1',\r\n                ver:'1',\r\n                descargar:'1',\r\n                asignar:'1',\r\n            },\r\n            propuesta:{\r\n                ver:'1',\r\n            },\r\n            adaptacion:{\r\n                ver:'1',\r\n            },\r\n            articulo:{\r\n                lengua:'1',\r\n                matematica:'1',\r\n                naturales:'1',\r\n                sociales:'1',\r\n                ensenanza:'1',\r\n            },\r\n            documentom:{\r\n                ver:'1',\r\n            },\r\n            permisosExternos:'',\r\n          //fin de variables para recursos adicionales\r\n          //FIN DE VARIABLES PARA RECURSOS EXTERNOS\r\n          userRoot:false,\r\n        }\r\n    },\r\n    mounted() {\r\n        let me = this;\r\n        //asignatura que se obtiene en el docente\r\n        me.asignaturaSelect = {\r\n            id: localStorage.idasignatura,\r\n            nombreasignatura: localStorage.nombreasignatura\r\n        }\r\n        me.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n        me.miusuario = me.usuario\r\n        me.tipoUsuario = me.usuario.id_group\r\n        me.miusuario = me.usuario\r\n        me.grupo_usuario = me.miusuario.id_group;\r\n        if (me.grupo_usuario == 10) { //director\r\n            me.datoU = JSON.parse(localStorage.getItem('datoUser'))\r\n            me.miusuario = me.datoU\r\n        }\r\n        me.getMaterialAsignaturas();\r\n        me.traerArchivos();\r\n        me.getTodoMaterial();\r\n        me.getTodoAsignaturas();\r\n        me.getEstados();\r\n        me.getUserRoot(me.usuario)\r\n          //PERMISOS EXTERNOS\r\n        if(localStorage.status_permisos == \"yes\"){\r\n            me.permisosExternos = JSON.parse(localStorage.permisosExternos)\r\n            me.libro                    = me.permisosExternos.permisos_libros\r\n            me.curso                    = me.permisosExternos.permisos_cursos\r\n            me.cuaderno                 = me.permisosExternos.permisos_cuadernos\r\n            me.planificacion            = me.permisosExternos.permisos_planificaciones\r\n            //data de los recursos adicionales\r\n            me.mijuego                  = me.permisosExternos.zona_diversion_mi_juego\r\n            me.juegoProlipa             = me.permisosExternos.zona_diversion_juego_prolipa\r\n            me.materialDigital          = me.permisosExternos.material_apoyo_digital\r\n            me.materialpdf              = me.permisosExternos.material_apoyo_pdf\r\n            me.propuesta                = me.permisosExternos.propuestas_metodologicas\r\n            me.adaptacion               = me.permisosExternos.adaptaciones\r\n            me.articulo                 = me.permisosExternos.articulos\r\n            me.documentom               = me.permisosExternos.documentos_ministeriales\r\n        }\r\n        //FIN DE PERMISOS EXTERNOS\r\n    },\r\n    methods: {\r\n        getUserRoot(dato) {\r\n            let me = this;\r\n            this.$http.get(this.$server_url + 'permisos/' + dato.idusuario)\r\n            .then((result) => {\r\n                if (result.data.length > 0) {\r\n                me.userRoot = true;\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n        },\r\n         abrirMaterial(data={}) {\r\n            let me = this\r\n            if (data.webmaterial === null || data.webmaterial === 'null') {\r\n                me.$vs.notify({\r\n                    text: 'El material  aun no está disponible',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            localStorage.materialApoyo = data.webmaterial;\r\n            let route = this.$router.resolve({path: '/material/apoyo/ver'});\r\n            window.open(route.href, '_blank');\r\n        },\r\n        //para subir archivos\r\n         //crear material\r\n        crearMaterial(){\r\n            localStorage.docente=\"yes\";\r\n            this.$router.push('/subirmaterial/docente/');\r\n        },\r\n        //para traer los temas de los archivos\r\n        verTemasArchivo(id_material){\r\n            let me = this;\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url+'materialtemas/'+id_material).then(res => {\r\n                this.infotemas = res.data;\r\n                me.popupActivo = true;\r\n                me.$vs.loading.close();\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error)\r\n            })\r\n        },\r\n        //para traer los archivos pdfs\r\n          traerArchivos() {\r\n            let me = this;\r\n             let id_asignatura = localStorage.idasignatura\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url + 'traer_archivos_asignaturas/' + id_asignatura).then(res => {\r\n                this.infoarchivos = res.data;\r\n                me.$vs.loading.close();\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error)\r\n            })\r\n        },\r\n        getMaterialAsignaturas() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            let id_asignatura = localStorage.idasignatura\r\n            if (me.tipoUsuario === 1) {\r\n                id_asignatura = 'null'\r\n            }\r\n            this.$http.get(this.$server_url+'temas_por_material/' + id_asignatura)\r\n                .then(res => {\r\n                    me.material = res.data.items\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        getTemas() {\r\n            let me = this;\r\n            me.temas = []\r\n            if (me.unidadesSelect === \"\" || me.unidadesSelect === undefined || me.unidadesSelect === null) {\r\n                me.$vs.notify({\r\n                    text: 'Seleccione la unidad',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return;\r\n            }\r\n            if (me.asignaturaSelect === \"\" || me.asignaturaSelect === undefined || me.asignaturaSelect === null) {\r\n                me.$vs.notify({\r\n                    text: 'Seleccione la asignatura',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return;\r\n            }\r\n            let asignatura = me.asignaturaSelect\r\n            if (me.asignaturaSelect.id) {\r\n                asignatura = me.asignaturaSelect.id\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('unidad', me.unidadesSelect);\r\n            formData.append('asignatura', asignatura);\r\n            this.$http.post(this.$server_url+'temas_asignatura_material', formData)\r\n                .then(res => {\r\n                    me.temas = res.data;\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                })\r\n        },\r\n        getTodoMaterial() {\r\n            let me = this;\r\n            // me.$vs.loading()\r\n            me.op_eliminar = '';\r\n            let id_asignatura = localStorage.idasignatura\r\n            if (me.tipoUsuario === 1) {\r\n                id_asignatura = 'null'\r\n            }\r\n            this.$http.get(this.$server_url+'todo_material_apoyo/' + id_asignatura)\r\n                .then(res => {\r\n                    me.materiales = res.data;\r\n                    me.$vs.loading.close()\r\n                    // console.log(me.material)\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        getTodoAsignaturas() {\r\n            let me = this;\r\n            // me.$vs.loading()\r\n            this.$http.get(this.$server_url+'todo_asignaturas')\r\n                .then(res => {\r\n                    me.asignaturas = res.data;\r\n                    me.$vs.loading.close()\r\n                    // console.log(me.material)\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        asignarMaterialAsignatura() {\r\n            let me = this;\r\n            if (me.materialSelect.idmaterial == undefined) {\r\n                me.$vs.notify({\r\n                    text: 'Seleccione el material de apoyo',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            if (me.asignaturaSelect == '') {\r\n                me.$vs.notify({\r\n                    text: 'Seleccione una asignatura',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n\r\n            me.$vs.loading()\r\n            let temas_vector = []\r\n            for (var i = 0; i < me.temaSelect.length; i++) {\r\n                temas_vector.push(me.temaSelect[i].id)\r\n            }\r\n            let formData1 = new FormData();\r\n            formData1.append('id_material', me.materialSelect.idmaterial);\r\n            formData1.append('id_tema', temas_vector);\r\n            this.$http.post(this.$server_url+'temas_material', formData1)\r\n                .then(res => {\r\n                    // console.log(res.data)\r\n                    me.$vs.notify({\r\n                        text: 'Temas registrados en el material',\r\n                        color: 'success',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    me.$vs.loading.close()\r\n                    me.getMaterialAsignaturas();\r\n                    me.modalTemas = false\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.notify({\r\n                        text: 'fallooooo. ',\r\n                        color: 'danger',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    me.$vs.loading.close()\r\n                    me.vaciar();\r\n                    me.getMaterialAsignaturas();\r\n                    me.modalTemas = false\r\n                })\r\n\r\n        },\r\n        dataFormularioEditar(item) {\r\n            let me = this\r\n            me.materialSelect = {\r\n                nombrematerial: item.nombrematerial,\r\n                idmaterial: item.idmaterial\r\n            }\r\n            me.unidadesSelect = {\r\n                id: item.temas[0].unidad,\r\n                nombre_unidad: 'Unidad ' + item.temas[0].unidad\r\n            }\r\n            me.asignaturaSelect = item.asignatura_idasignatura\r\n            // me.estado_material = item.estado\r\n            me.temaSelect = []\r\n            if (item.temas) {\r\n                for (var i = 0; i < item.temas.length; i++) {\r\n                    me.temaSelect.push({\r\n                        id: item.temas[i].id_tema,\r\n                        nombre_tema: item.temas[i].nombre_tema\r\n                    })\r\n                }\r\n            }\r\n\r\n            me.modalTemas = true\r\n        },\r\n        editarTemasMaterialAsignatura() {\r\n            let me = this\r\n            me.$vs.loading()\r\n            let formData = new FormData();\r\n            formData.append('idmaterial', me.data_material.idmaterial);\r\n            formData.append('idasignatura', me.data_material.asignatura_idasignatura);\r\n            this.$http.post(this.$server_url+'borrar_temas_material', formData)\r\n                .then(res => {\r\n                    let temas_vector = []\r\n                    for (var i = 0; i < me.temaSelect.length; i++) {\r\n                        temas_vector.push(me.temaSelect[i].id)\r\n                    }\r\n                    let formData1 = new FormData();\r\n                    formData1.append('id_material', me.data_material.idmaterial);\r\n                    formData1.append('id_tema', temas_vector);\r\n                    this.$http.post(this.$server_url+'temas_material', formData1)\r\n                        .then(res => {\r\n                            // console.log(res.data)\r\n                            me.$vs.notify({\r\n                                text: 'Temas editados en el material',\r\n                                color: 'success',\r\n                                iconPack: 'feather',\r\n                                icon: 'icon-alert-triangle'\r\n                            })\r\n                            me.$vs.loading.close()\r\n                            me.vaciar();\r\n                            me.getMaterialAsignaturas();\r\n                            me.modalTemas = false\r\n                        })\r\n                        .catch(error => {\r\n                            me.$vs.notify({\r\n                                text: 'falló. ',\r\n                                color: 'danger',\r\n                                iconPack: 'feather',\r\n                                icon: 'icon-alert-triangle'\r\n                            })\r\n                            me.$vs.loading.close()\r\n                        })\r\n                })\r\n                .catch(error => {\r\n\r\n                })\r\n        },\r\n        openConfirmEliminar(item) {\r\n            let me = this;\r\n            me.item_eliminar = item;\r\n            me.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: 'Confirmar',\r\n                text: '¿Está seguro de eliminar esta asignación?',\r\n                acceptText: 'Aceptar',\r\n                cancelText: 'Cancelar',\r\n                accept: me.eliminarMaterial\r\n            })\r\n        },\r\n        openConfirmEliminarMaterial() {\r\n            let me = this;\r\n            me.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: 'Confirmar',\r\n                text: '¿Está seguro de eliminar este material?',\r\n                acceptText: 'Aceptar',\r\n                cancelText: 'Cancelar',\r\n                accept: me.confirmEliminarMaterial\r\n            })\r\n        },\r\n        confirmEliminarMaterial() {\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('idmaterial', me.data_material.idmaterial);\r\n            formData.append('idasignatura', me.data_material.asignatura_idasignatura);\r\n            this.$http.post(this.$server_url+'borrar_temas_material', formData)\r\n                .then(res => {\r\n                    this.$http.post(this.$server_url+'borrar_material_asig', formData)\r\n                        .then(res => {\r\n                            me.getMaterialAsignaturas()\r\n                            me.$vs.notify({\r\n                                text: 'Material eliminado correctamente',\r\n                                color: 'success',\r\n                                iconPack: 'feather',\r\n                                icon: 'icon-alert-triangle'\r\n                            })\r\n                        })\r\n                })\r\n                .catch(error => {\r\n\r\n                })\r\n        },\r\n        eliminarMaterial() {\r\n            let me = this;\r\n            // console.log(me.item_eliminar.temas)\r\n            me.$vs.loading()\r\n            if (me.op_eliminar == 2) {\r\n                // console.log(me.item_eliminar)\r\n                let formData = new FormData();\r\n                formData.append('material_idmaterial', me.item_eliminar.idmaterial);\r\n                formData.append('asignatura_idasignatura', me.item_eliminar.asignatura_idasignatura);\r\n                formData.append('temas', me.item_eliminar.temas);\r\n                this.$http.post(this.$server_url+'quitar_material_asignatura', formData)\r\n                    .then(res => {\r\n                        // console.log(res.data)\r\n                        me.$vs.notify({\r\n                            text: me.item_eliminar.nombrematerial + ' eliminado',\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                        me.$vs.loading.close()\r\n                        me.vaciar();\r\n                        me.getMaterialAsignaturas();\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error)\r\n                        me.$vs.loading.close()\r\n                    })\r\n            }\r\n            if (me.op_eliminar == 1) {\r\n                let formData = new FormData();\r\n                formData.append('idmaterial', me.item_eliminar.idmaterial);\r\n                this.$http.post(this.$server_url+'eliminarMaterial', formData)\r\n                    .then(res => {\r\n                        // console.log(res.data)\r\n                        me.$vs.notify({\r\n                            text: me.item_eliminar.nombrematerial + ' eliminado',\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                        me.$vs.loading.close()\r\n                        me.getTodoMaterial();\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error)\r\n                        me.$vs.loading.close()\r\n                    })\r\n            }\r\n        },\r\n        getEstados() {\r\n            let me = this;\r\n            // me.$vs.loading()\r\n            this.$http.get(this.$server_url+'material_estados')\r\n                .then(res => {\r\n                    me.estados = res.data;\r\n                    me.$vs.loading.close()\r\n                    // console.log(me.material)\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        registrarMaterial(item) {\r\n            let me = this;\r\n            // console.log(item)\r\n            if (me.materialAp.nombrematerial == \"\" || me.materialAp.nombrematerial == undefined) {\r\n                me.$vs.notify({\r\n                    text: 'Ingrese el nombre del material de apoyo',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            if (me.materialAp.webmaterial == '' || me.materialAp.webmaterial == undefined) {\r\n                me.$vs.notify({\r\n                    text: 'Ingrese el nombre del archivo digital del material de apoyo',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            if (me.materialAp.imagenmaterial == '' || me.materialAp.imagenmaterial == undefined) {\r\n                me.$vs.notify({\r\n                    text: 'Escriba el nombre de la portada del material de apoyo',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            me.$vs.loading()\r\n            let formData = new FormData();\r\n            if (me.materialAp.idmaterial > 0) {\r\n                formData.append('idmaterial', me.materialAp.idmaterial);\r\n            }\r\n            formData.append('nombrematerial', me.materialAp.nombrematerial);\r\n            formData.append('descripcionmaterial', me.materialAp.descripcionmaterial);\r\n            formData.append('webmaterial', me.materialAp.webmaterial);\r\n            formData.append('exematerial', me.materialAp.exematerial);\r\n            formData.append('imagenmaterial', me.materialAp.imagenmaterial);\r\n            formData.append('Estado_idEstado', me.materialAp.Estado_idEstado);\r\n            formData.append('zipmaterial', me.materialAp.zipmaterial);\r\n            formData.append('creador', me.miusuario.idusuario);\r\n            this.$http.post(this.$server_url+'registrar_material', formData)\r\n                .then(res => {\r\n\r\n                    if (me.materialAp.idmaterial > 0) {\r\n                        me.edita = 0;\r\n                        me.$vs.notify({\r\n                            text: me.materialAp.nombrematerial + 'editado correctamente',\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                    } else {\r\n\r\n                        me.$vs.notify({\r\n                            text: 'Material registrado correctamente',\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                    }\r\n                    me.modalMaterial = false;\r\n                    me.$vs.loading.close()\r\n                    me.vaciar();\r\n                    me.getTodoMaterial();\r\n                })\r\n                .catch(error => {\r\n                    me.$vs.loading.close();\r\n                    me.getTodoMaterial();\r\n                })\r\n        },\r\n        selectMaterial(item) {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url+'showMaterial/' + item.idmaterial)\r\n                .then(res => {\r\n                    me.materialAp = (res.data[0]);\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        vaciar() {\r\n            let me = this;\r\n            me.materialAp = {\r\n                'idmaterial': '',\r\n                'nombrematerial': '',\r\n                'descripcionmaterial': '',\r\n                'zipmaterial': '',\r\n                'webmaterial': '',\r\n                'imagenmaterial': '',\r\n                'exematerial': '',\r\n                'Estado_idEstado': 1,\r\n            };\r\n            me.materialSelect = '';\r\n            me.temaSelec = 0;\r\n            me.unidadesSelect = {};\r\n            me.modalMaterial = false;\r\n\r\n        },\r\n        vaciarModal() {\r\n            let me              = this;\r\n            me.materialSelect   = '';\r\n            me.unidadesSelect   = '';\r\n            me.temaSelect       = \"\";\r\n            me.op_editar        = 0;\r\n            me.asignaturaSelect = \"\"\r\n            // me.asignaturas      = []\r\n            me.modalTemas       = true;\r\n        },\r\n        pasarDatos(item) {\r\n            let me = this;\r\n            me.op_editar = 1;\r\n            me.materialSelect = item.nombrematerial;\r\n            me.asignaturaSelect = item.nombreasignatura;\r\n            me.unidadesSelect = item.temas.length > 0 ? item.temas[0].id_unidad : '';\r\n            me.temaSelect = item.temas;\r\n            me.modalTemas = true;\r\n\r\n        },\r\n        modalAgregarMaterial() {\r\n            let me = this;\r\n            me.modalMaterial = true;\r\n        },\r\n        getCursosDocente() {\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('id_usuario', me.miusuario.idusuario);\r\n            formData.append('id_asignatura', localStorage.idasignatura);\r\n            formData.append('periodo_id',localStorage.periodo_id)\r\n            this.$http.post(this.$server_url+'curso_libro_docente', formData)\r\n                .then(function (res) {\r\n                    me.cursosDocente = res.data\r\n                    if(me.archivos){\r\n                        me.modalCursosArchivos = true\r\n                    }else{\r\n                         me.modalCursosEnvioLink = true\r\n                    }\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        verCalificaciones(item) {\r\n            let me = this\r\n            localStorage.codigo_calif = item.codigo\r\n            localStorage.nombre_curso_calif = item.nombre\r\n            localStorage.id_material_calif = me.data_material.idmaterial\r\n            localStorage.nombre_material_calif = me.data_material.nombrematerial\r\n            // me.$router.push('/calificaciones_materialapoyo')\r\n            window.open('/calificaciones_materialapoyo', '_blank');\r\n        },\r\n        asignarCurso(item) {\r\n            let me = this;\r\n            if (me.grupo_usuario == 10) {\r\n                me.$vs.notify({\r\n                    text: 'Este contenido pertenece a otro docente',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-check'\r\n                })\r\n                return;\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('codigo_curso', item.codigo);\r\n            formData.append('id_material', me.data_material.idmaterial);\r\n            this.$http.post(this.$server_url+'asignar_cursos_material', formData)\r\n                .then(function (res) {\r\n                    me.$vs.notify({\r\n                        text: res.data.message,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    if(res.data.status == 1){\r\n                        let h_idinstitucion = me.miusuario.institucion_idInstitucion;\r\n                        let h_idusuario = me.miusuario.idusuario;\r\n                        let h_idgrupo = me.miusuario.id_group;\r\n                        let h_idasignatura = localStorage.idasignatura\r\n                        let h_nombreasignatura = localStorage.nombreasignatura\r\n                        let h_recursotipo = 9; //9 = material\r\n                        let datoHistorico = {\r\n                            'user_nombre': me.miusuario.nombres,\r\n                            'user_apellido': me.miusuario.apellidos,\r\n                            'user_email': me.miusuario.email,\r\n                            'user_cedula': me.miusuario.cedula,\r\n                            'recurso_accion': 'asignar',\r\n                            'recurso_tipo': 'material',\r\n                            'recurso_nombre': me.nombrematerial,\r\n                            'recurso_detalle': 'material asignado  al curso '+item.codigo,\r\n                        }\r\n                        me.saveHistoricoVisitas(h_idinstitucion, h_idusuario, h_idgrupo, h_idasignatura,h_nombreasignatura,  h_recursotipo,datoHistorico)\r\n                    }\r\n                    me.getCursosDocente()\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        //para asignar el curso con el archivo\r\n        asignarCursoArchivo(item){\r\n             let me = this;\r\n            if (me.grupo_usuario == 10) {\r\n                me.$vs.notify({\r\n                    text: 'Este contenido pertenece a otro docente',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-check'\r\n                })\r\n                return;\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('codigo_curso', item.codigo);\r\n            formData.append('id_archivo', me.data_material.id_archivo);\r\n            this.$http.post(this.$server_url+'asignar_cursos_archivos', formData)\r\n                .then(function (res) {\r\n                    me.getCursosDocente()\r\n                    me.$vs.notify({\r\n                        text: res.data.message,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    if(res.data.status == 1){\r\n                        let h_idinstitucion = me.miusuario.institucion_idInstitucion;\r\n                        let h_idusuario = me.miusuario.idusuario;\r\n                        let h_idgrupo = me.miusuario.id_group;\r\n                        let h_idasignatura = localStorage.idasignatura\r\n                        let h_nombreasignatura = localStorage.nombreasignatura\r\n                        let h_recursotipo = 9; //9 = material\r\n                        let datoHistorico = {\r\n                            'user_nombre': me.miusuario.nombres,\r\n                            'user_apellido': me.miusuario.apellidos,\r\n                            'user_email': me.miusuario.email,\r\n                            'user_cedula': me.miusuario.cedula,\r\n                            'recurso_accion': 'asignar',\r\n                            'recurso_tipo': 'material',\r\n                            'recurso_nombre': 'archivo: '+me.nombrematerial,\r\n                            'recurso_detalle': 'asignar archivo al curso '+item.codigo,\r\n                        }\r\n                        me.saveHistoricoVisitas(h_idinstitucion, h_idusuario, h_idgrupo, h_idasignatura,h_nombreasignatura,  h_recursotipo,datoHistorico)\r\n                    }\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        verMaterial(item) {\r\n            let me = this;\r\n            let h_idinstitucion = me.miusuario.institucion_idInstitucion;\r\n            let h_idusuario = me.miusuario.idusuario;\r\n            let h_idgrupo = me.miusuario.id_group;\r\n            let h_idasignatura = localStorage.idasignatura\r\n            let h_nombreasignatura = localStorage.nombreasignatura\r\n            let h_recursotipo = 9; //9 = material\r\n            let datoHistorico = {\r\n                'user_nombre': me.miusuario.nombres,\r\n                'user_apellido': me.miusuario.apellidos,\r\n                'user_email': me.miusuario.email,\r\n                'user_cedula': me.miusuario.cedula,\r\n                'recurso_accion': 'ver',\r\n                'recurso_tipo': 'material',\r\n                'recurso_nombre': item.nombrematerial,\r\n                'recurso_detalle': 'material visto en el curso '+localStorage.codigo,\r\n            }\r\n            me.saveHistoricoVisitas(h_idinstitucion, h_idusuario, h_idgrupo, h_idasignatura,h_nombreasignatura,  h_recursotipo,datoHistorico)\r\n            if(me.usuario.id_group == 6 ){\r\n                me.saveMaterialApoyo(item)\r\n            }\r\n            localStorage.url_material = item.webmaterial;\r\n            window.open('/docente/material/digital','_blank')\r\n            // this.$router.push('/docente/material/digital');\r\n        },\r\n        UnidadesTemasMaterialShow(item) {\r\n            let me = this;\r\n            me.temasMostrar = item;\r\n            me.modalMaterialTemas = true;\r\n        },\r\n        saveMaterialApoyo(item){\r\n            let me = this;\r\n            let asignatura_id = localStorage.idasignatura\r\n            let idusuario     = me.usuario.idusuario\r\n            let url           = localStorage.url_material\r\n            let actividad     = item.nombrematerial\r\n            let periodo_id    = localStorage.periodo_id\r\n            this.$http.get(this.$server_url+'conteoActividad?asignatura_id='+asignatura_id+'&idusuario='+idusuario+'&url='+url+'&actividad='+actividad+'&periodo_id='+periodo_id+'&pagina=0&tipo=2')\r\n                .then(function (res) {\r\n                    me.tipos = res.data.tipoArea\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n    }\r\n}\r\n</script>\r\n"]}]}