{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\home\\components\\asesor\\components\\contratosDesactivos.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\home\\components\\asesor\\components\\contratosDesactivos.vue","mtime":1712682815966},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport vSelect from 'vue-select'\r\nexport default {\r\n    data() {\r\n        return{\r\n             usuario:[],\r\n            contratos:[],\r\n            periodo:'0',\r\n            region:'1',\r\n            periodos:[],\r\n            contratoPeriodo:{\r\n                periodo:'',\r\n            },\r\n            //=====VARIABLES PARA LA VERIFICACIONES====\r\n            popupVerificaciones:false,\r\n            popupActivo:false,\r\n            popupContratoCodigo:false,\r\n            historicoLiquidacion:[],\r\n            InformacionLiquidacion:[],\r\n            informacionFechasLiquidacion:[],\r\n            contrato:\"\",\r\n            popupDetalleVerificacion:false,\r\n            popupVerCodigos:false,\r\n            codigosPerdidos:[],\r\n            ContratoCodigo:[],\r\n            codigosMovidos:[],\r\n            DetalleVerificacion:[],\r\n            ArregloVerCodigos:[],\r\n            popupDetalleVerificacion:false,\r\n            popupVerCodigos:false,\r\n            title:'',\r\n            title2:'',\r\n            verificacion_id:0,\r\n            contContrato:0,\r\n            popupChangeLiquidacion:false,\r\n\r\n        }\r\n    },\r\n      components: {\r\n        'v-select': vSelect,         \r\n    },\r\n     computed:{\r\n        sumaTotal(){\r\n            let me = this;\r\n            if(me.DetalleVerificacion.length >0){\r\n                let datos = me.DetalleVerificacion.filter(p => p.cantidad)\r\n                let total = datos.reduce((a, b) => a + (b[\"cantidad\"] || 0), 0);\r\n                return total\r\n            }     \r\n        },\r\n    },\r\n     created() {\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n       \r\n        me.obtenerPeriodos();\r\n      \r\n    },\r\n    methods:{\r\n      \r\n             //cantidad de contratos del asesor\r\n        async getContratos() {\r\n            let me = this;\r\n            if(me.contratoPeriodo.periodo == null || me.contratoPeriodo.periodo  == ''){\r\n                   me.$vs.notify({\r\n                  text:'Debe seleccionar un periodo para filtrar',\r\n                  color:'primary',\r\n                  iconPack: 'feather',\r\n                  icon:'icon-check'})\r\n            }\r\n          \r\n             me.$vs.loading();\r\n            this.$http.get(this.$server_url+'contratosAsesor?idusuario=' + me.usuario.idusuario+'&idperiodoescolar='+me.contratoPeriodo.periodo.idperiodoescolar)\r\n                .then(function (response) {\r\n                    me.contratos = response.data;\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n\r\n        //para obtener los periodos\r\n        obtenerPeriodos(){\r\n            let me = this;\r\n            me.contratos = [];\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'contratosAsesor?periodoEstado=' + me.periodo+'&region='+me.region+'&traerPeriodos=yes')\r\n                .then(function (response) {\r\n                    me.periodos = response.data;\r\n                     me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                     me.$vs.loading.close()\r\n                })\r\n\r\n        },\r\n\r\n        //===============VERIFICACIONES================================\r\n          //para ver el contrato del codigo\r\n            VerContrato(verif){\r\n                let me = this;\r\n             \r\n                 //para las fechas de las verificaciones\r\n                 this.$http.get(this.$server_url+'verificacion?id='+verif)\r\n                .then(function (res) {\r\n                   \r\n                    me.ContratoCodigo = res.data[0]\r\n                    \r\n                       if(res.data.message){\r\n                            me.$vs.notify({\r\n                            text: res.data.message,\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-user'\r\n                        })\r\n                        return false;\r\n                      }\r\n                      me.popupCodigosPerdidos = false;\r\n                      me.popupActivo = false;\r\n                      me.popupContratoCodigo = true;\r\n\r\n               \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                 \r\n                })\r\n            },\r\n\r\n              close(){\r\n                  let me =this;\r\n                  me.popupActivo = true;\r\n                this.$vs.notify({\r\n                    color:'danger',\r\n                    title:'Cerrado',\r\n                    text:'Has cerrado!'\r\n                })\r\n                },\r\n\r\n            getInformacionLiquidacion(item) {\r\n                let me = this;\r\n                 if(item.estado == 0){\r\n                    me.$vs.notify({\r\n                    text: 'El contrato esta inactivo no se puede abrir',\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-user'\r\n                    })\r\n                    return false;      \r\n                    \r\n                }\r\n                me.InformacionLiquidacion = [];\r\n                me.informacionFechasLiquidacion = [];\r\n                me.$vs.loading();\r\n                this.$http.get(this.$server_url+'n_verificacion?contrato='+item.contrato+'&informacion=yes')\r\n                    .then(function (res) {\r\n                        me.InformacionLiquidacion = res.data\r\n                        me.$vs.loading.close()\r\n                        if(res.data.message){\r\n                            me.$vs.notify({\r\n                            text: res.data.message,\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-user'\r\n                            })\r\n                            return false;      \r\n                         }\r\n                        me.popupVerificaciones = true;\r\n                    })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n\r\n                //para buscar los codigos perdidos relacionados a este contrato\r\n                 this.$http.get(this.$server_url+'liquidacion/codigosperdidos/'+item.contrato)\r\n                .then(function (res) {\r\n                \r\n                     me.codigosPerdidos = res.data.codigos\r\n                   \r\n                    if(res.data.status == '1'){\r\n                        $('#codeLost').css('display', 'block');\r\n                    }\r\n               \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                 \r\n                })\r\n\r\n                //para buscar los codigos movidos a otro contrato\r\n                    //para buscar los codigos perdidos relacionados a este contrato\r\n                 this.$http.get(this.$server_url+'liquidacion/codigosmovidos/'+item.contrato)\r\n                .then(function (res) {\r\n                  \r\n                     me.codigosMovidos = res.data.codigos\r\n                   \r\n                    if(res.data.status == '1'){\r\n                        $('#codeMove').css('display', 'block');\r\n                    }\r\n               \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                 \r\n                })\r\n\r\n                //para las fechas de las verificaciones\r\n                 this.$http.get(this.$server_url+'verificacion?contrato='+item.contrato+'&fechasVerificacion=yes')\r\n                .then(function (res) {\r\n\r\n                    me.informacionFechasLiquidacion = res.data\r\n               \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                 \r\n                })\r\n            },\r\n             VerCodigos(tr){\r\n            let me  = this;  \r\n            me.$vs.loading();\r\n            me.title2 = \"CÃ³digos del libro \"+tr.nombre_libro\r\n            this.$http.get(this.$server_url+'n_verificacion?contrato='+tr.contrato+'&verCodigos=yes&verificacion_id='+me.verificacion_id+'&libro_id='+tr.libro_id+'&num_verificacion='+tr.verificacion_id)\r\n            .then(function (res) {\r\n                \r\n                me.ArregloVerCodigos = res.data\r\n                me.popupDetalleVerificacion = false;\r\n                me.popupVerCodigos = true;\r\n                me.$vs.loading.close()\r\n\r\n                if(res.data.message){\r\n                    me.$vs.notify({\r\n                    text: res.data.message,\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-user'\r\n                })\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n                me.$vs.loading.close()\r\n            })\r\n      \r\n           \r\n         },\r\n         getDetallesVerificacion(tr){\r\n            let me = this;\r\n            me.popupVerificaciones = false;\r\n            me.verificacion_id = tr.id\r\n            me.$vs.loading();\r\n            me.title = \"Verificacion N. \"+tr.num_verificacion + \" del contrato \"+ tr.contrato\r\n            this.$http.get(this.$server_url+'n_verificacion?contrato='+tr.contrato+'&detalles=yes&verificacion_id='+tr.num_verificacion)\r\n            .then(function (res) {\r\n                me.DetalleVerificacion = res.data\r\n                me.popupDetalleVerificacion = true\r\n                me.$vs.loading.close()\r\n\r\n                if(res.data.message){\r\n                    me.$vs.notify({\r\n                    text: res.data.message,\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-user'\r\n                })\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n                me.$vs.loading.close()\r\n            })\r\n         }      \r\n            \r\n           \r\n      \r\n    },\r\n}\r\n",{"version":3,"sources":["contratosDesactivos.vue"],"names":[],"mappings":";AAyNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA","file":"contratosDesactivos.vue","sourceRoot":"src/views/home/components/asesor/components","sourcesContent":["<template>\r\n    <div>\r\n        <br/>\r\n            <ul class=\"leftx\">\r\n                <li class=\"modelx\">\r\n                </li>\r\n                <div style=\"display:flex;\">\r\n                    <li style=\"margin-left:10px;\">\r\n                   \r\n                        <vs-radio v-model=\"region\" vs-name=\"radios1\"  @input=\"obtenerPeriodos()\" vs-value=\"1\">Sierra</vs-radio>\r\n                    </li>\r\n                    <li style=\"margin-left:10px;\">\r\n                        <vs-radio v-model=\"region\" vs-name=\"radios1\" @input=\"obtenerPeriodos()\" vs-value=\"2\">Costa</vs-radio>\r\n                    </li>\r\n                </div>\r\n            </ul>\r\n            <br/>\r\n            <vs-row>\r\n                <vs-col vs-type=\"flex\" vs-justify=\"start\" vs-align=\"start\" vs-w=\"12\">       \r\n                <div style=\"display:flex;width:100%\">\r\n                     <div style=\"width:70%;\">   \r\n                        <v-select :options=\"periodos\" :reduce=\"periodos => periodos\" label=\"descripcion\" class=\"w-full\" v-model=\"contratoPeriodo.periodo\" />\r\n                            <br/><br/><br/>\r\n                            <br/><br/><br/>\r\n                     </div>\r\n                     <div style=\"width:20%;margin-left:10px;\">\r\n                         <vs-button color=\"warning\"  @click=\"getContratos()\"  type=\"filled\" icon=\"search\"></vs-button>\r\n                     </div>\r\n                 </div>\r\n                </vs-col>\r\n                \r\n            </vs-row>\r\n\r\n            <div v-if=\"contratos.length >0 \">\r\n             <br/><br/>\r\n                <vs-table max-items=\"10\" search pagination :data=\"contratos\" style=\"margin-top:-40px\">\r\n                     <template slot=\"thead\">\r\n                    <vs-th>\r\n                        Contrato\r\n                    </vs-th>\r\n\r\n                    <vs-th>\r\n                        docente\r\n                    </vs-th>\r\n                 \r\n                    <vs-th>\r\n                        Institucion\r\n                    </vs-th>\r\n\r\n                    <vs-th>\r\n                        Cant. Verificaciones\r\n                    </vs-th>\r\n\r\n                \r\n                    <vs-th>\r\n                        Accion\r\n                    </vs-th>\r\n\r\n                  \r\n                </template>\r\n\r\n                <template slot-scope=\"{data}\">\r\n                    <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                        <vs-td >\r\n                            {{data[indextr].contrato}}<br>\r\n                          \r\n                            <p>{{data[indextr].ciudad}} - {{data[indextr].year}}</p>\r\n                            \r\n                        </vs-td>\r\n\r\n                        <vs-td >\r\n                            {{data[indextr].temporal_cedula_docente}}<br>\r\n                            {{data[indextr].temporal_nombre_docente}}\r\n                        </vs-td>\r\n\r\n\r\n                        <vs-td  >\r\n                            {{data[indextr].temporal_institucion}}\r\n                            <br/>\r\n                            <span style=\"font-size:10px;font-weight:500;\">{{tr.periodo}}</span>\r\n                            <br/>\r\n                            <template v-if=\"data[indextr].estado == '1'\">\r\n                               <vs-chip color=\"primary\">\r\n                                    Activo\r\n                                </vs-chip>\r\n                            </template>\r\n\r\n                            <template v-else>\r\n                                <vs-chip color=\"primary\">\r\n                                    Desactivado\r\n                                </vs-chip>\r\n                            </template>\r\n\r\n                        </vs-td>\r\n\r\n                        <vs-td>\r\n                           \r\n                            {{ tr.contContrato }}\r\n                        </vs-td>\r\n\r\n                      \r\n\r\n                        <vs-td > \r\n                             <vx-tooltip style=\"display: inline-block;\" text=\"ver verificaciones\" position=\"top\" color=\"primary\">\r\n                                    <vs-button class=\"modal-default-button\" color=\"primary\" @click=\"getInformacionLiquidacion(data[indextr])\" type=\"filled\" size=\"small\" icon-pack=\"feather\" icon=\"icon-bookmark\"> </vs-button>\r\n                                </vx-tooltip> &nbsp;\r\n                            \r\n                        </vs-td>\r\n\r\n             \r\n\r\n                    </vs-tr>\r\n                </template>\r\n                </vs-table>   \r\n            </div>\r\n            <div v-else class=\"p-3\">\r\n                <p> No existe contratos asociados al asesor </p>\r\n            </div>\r\n\r\n            <!--Modales-->\r\n              \r\n            <vs-popup class=\"holamundo\"  fullscreen title=\"Verificaciones del contrato\" :active.sync=\"popupVerificaciones\">\r\n                <vs-table max-items=\"10\" search pagination :data=\"InformacionLiquidacion\">\r\n                    <template slot=\"thead\">\r\n                        \r\n                        <vs-th>Contrato</vs-th>\r\n                        <vs-th>Num. VerificaciÃ³n.</vs-th>\r\n                        <vs-th>Fecha inicio</vs-th>\r\n                        <vs-th>Fecha fin</vs-th>\r\n                        <vs-th>Estado</vs-th>\r\n                        <vs-th>Accion</vs-th>\r\n                \r\n                    </template>\r\n                    <template slot-scope=\"{data}\">\r\n                        <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                            \r\n                            <vs-td>\r\n                                {{data[indextr].contrato}}<br>\r\n                            </vs-td>\r\n                            <vs-td>\r\n                                {{data[indextr].num_verificacion}}<br>\r\n                            </vs-td>\r\n                            <vs-td>\r\n                                {{tr.fecha_inicio}}\r\n                            </vs-td>\r\n                                <vs-td>\r\n                                {{tr.fecha_fin}}\r\n                            </vs-td>\r\n                            <vs-td>\r\n                                <vs-chip v-if=\"tr.estado == '1'\" color=\"primary\">\r\n                                        Abierto\r\n                                </vs-chip>\r\n                                <vs-chip v-else color=\"warning\">\r\n                                        Cerrada\r\n                                </vs-chip>\r\n                            </vs-td>\r\n\r\n                            <vs-td>\r\n                                <div style=\"display:flex;\" v-if=\"tr.estado == '0'\">\r\n                                    <vx-tooltip style=\"display: inline-block;\" text=\"Detalle de la verificaciÃ³n\" position=\"top\" color=\"warning\">\r\n                                        <vs-button style=\"border-radius:20px;\" color=\"warning\" type=\"line\" icon-pack=\"feather\" @click=\"getDetallesVerificacion(tr)\" icon=\"icon-bookmark\">Detalle</vs-button>\r\n                                    </vx-tooltip>\r\n\r\n                                </div>\r\n                                \r\n                            </vs-td>      \r\n                        </vs-tr>\r\n                    </template>\r\n                </vs-table> \r\n            </vs-popup>\r\n\r\n            <!--MODAL PARA DETALLES DE LA VERIFICACION -->\r\n            <vs-popup\r\n            :title=\"title\" fullscreen :active.sync=\"popupDetalleVerificacion\">\r\n                <vs-button radius color=\"success\" @click=\"popupVerificaciones = true;\" type=\"gradient\" icon=\"reply\"></vs-button>\r\n                <vs-chip color=\"primary\" style=\"font-size:12px;\">\r\n                Total Libros: {{sumaTotal}}\r\n                </vs-chip>\r\n                <vs-table max-items=\"10\" search pagination :data=\"DetalleVerificacion\" class=\"mt-4\">\r\n                    <template slot=\"thead\">\r\n                        <vs-th>Libro</vs-th>\r\n                        <vs-th>CÃ³digo LiquidaciÃ³n</vs-th>\r\n                        <vs-th>Cantidad</vs-th>\r\n                        <vs-th>Acciones</vs-th>\r\n                    </template>\r\n                    <template slot-scope=\"{data}\">\r\n                        <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">   \r\n                            <vs-td>   \r\n                                {{data[indextr].nombre_libro}}<br>\r\n                            </vs-td>\r\n                            <vs-td>\r\n                                {{data[indextr].codigo}}<br>\r\n                            </vs-td>\r\n                            <vs-td>\r\n                                {{tr.cantidad}}\r\n                            </vs-td>\r\n                            <vs-td>\r\n                            <vs-button color=\"success\" type=\"relief\" @click=\"VerCodigos(tr)\" icon=\"code\">Ver cÃ³digos</vs-button>\r\n                            </vs-td>      \r\n                        </vs-tr>\r\n                    </template>\r\n                </vs-table> \r\n            </vs-popup>\r\n            <!--MODAL PARA VER LOS CODIGOS DE LA VERIFICACION -->\r\n            <vs-popup\r\n            :title=\"title2\"  :active.sync=\"popupVerCodigos\">\r\n            <vs-button color=\"success\" icon=\"arrow_back\" @click=\"popupVerCodigos = false; popupDetalleVerificacion = true;\" type=\"gradient\"></vs-button>\r\n                <vs-list >\r\n                    <vs-list-header  title=\"CÃ³digos del libro\"></vs-list-header>\r\n                    <vs-list-item :key=\"indextr\" v-for=\"(tr, indextr) in ArregloVerCodigos\" :title=\"tr.codigo\">\r\n                    </vs-list-item>\r\n                </vs-list>\r\n            </vs-popup>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport vSelect from 'vue-select'\r\nexport default {\r\n    data() {\r\n        return{\r\n             usuario:[],\r\n            contratos:[],\r\n            periodo:'0',\r\n            region:'1',\r\n            periodos:[],\r\n            contratoPeriodo:{\r\n                periodo:'',\r\n            },\r\n            //=====VARIABLES PARA LA VERIFICACIONES====\r\n            popupVerificaciones:false,\r\n            popupActivo:false,\r\n            popupContratoCodigo:false,\r\n            historicoLiquidacion:[],\r\n            InformacionLiquidacion:[],\r\n            informacionFechasLiquidacion:[],\r\n            contrato:\"\",\r\n            popupDetalleVerificacion:false,\r\n            popupVerCodigos:false,\r\n            codigosPerdidos:[],\r\n            ContratoCodigo:[],\r\n            codigosMovidos:[],\r\n            DetalleVerificacion:[],\r\n            ArregloVerCodigos:[],\r\n            popupDetalleVerificacion:false,\r\n            popupVerCodigos:false,\r\n            title:'',\r\n            title2:'',\r\n            verificacion_id:0,\r\n            contContrato:0,\r\n            popupChangeLiquidacion:false,\r\n\r\n        }\r\n    },\r\n      components: {\r\n        'v-select': vSelect,         \r\n    },\r\n     computed:{\r\n        sumaTotal(){\r\n            let me = this;\r\n            if(me.DetalleVerificacion.length >0){\r\n                let datos = me.DetalleVerificacion.filter(p => p.cantidad)\r\n                let total = datos.reduce((a, b) => a + (b[\"cantidad\"] || 0), 0);\r\n                return total\r\n            }     \r\n        },\r\n    },\r\n     created() {\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n       \r\n        me.obtenerPeriodos();\r\n      \r\n    },\r\n    methods:{\r\n      \r\n             //cantidad de contratos del asesor\r\n        async getContratos() {\r\n            let me = this;\r\n            if(me.contratoPeriodo.periodo == null || me.contratoPeriodo.periodo  == ''){\r\n                   me.$vs.notify({\r\n                  text:'Debe seleccionar un periodo para filtrar',\r\n                  color:'primary',\r\n                  iconPack: 'feather',\r\n                  icon:'icon-check'})\r\n            }\r\n          \r\n             me.$vs.loading();\r\n            this.$http.get(this.$server_url+'contratosAsesor?idusuario=' + me.usuario.idusuario+'&idperiodoescolar='+me.contratoPeriodo.periodo.idperiodoescolar)\r\n                .then(function (response) {\r\n                    me.contratos = response.data;\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n\r\n        //para obtener los periodos\r\n        obtenerPeriodos(){\r\n            let me = this;\r\n            me.contratos = [];\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'contratosAsesor?periodoEstado=' + me.periodo+'&region='+me.region+'&traerPeriodos=yes')\r\n                .then(function (response) {\r\n                    me.periodos = response.data;\r\n                     me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                     me.$vs.loading.close()\r\n                })\r\n\r\n        },\r\n\r\n        //===============VERIFICACIONES================================\r\n          //para ver el contrato del codigo\r\n            VerContrato(verif){\r\n                let me = this;\r\n             \r\n                 //para las fechas de las verificaciones\r\n                 this.$http.get(this.$server_url+'verificacion?id='+verif)\r\n                .then(function (res) {\r\n                   \r\n                    me.ContratoCodigo = res.data[0]\r\n                    \r\n                       if(res.data.message){\r\n                            me.$vs.notify({\r\n                            text: res.data.message,\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-user'\r\n                        })\r\n                        return false;\r\n                      }\r\n                      me.popupCodigosPerdidos = false;\r\n                      me.popupActivo = false;\r\n                      me.popupContratoCodigo = true;\r\n\r\n               \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                 \r\n                })\r\n            },\r\n\r\n              close(){\r\n                  let me =this;\r\n                  me.popupActivo = true;\r\n                this.$vs.notify({\r\n                    color:'danger',\r\n                    title:'Cerrado',\r\n                    text:'Has cerrado!'\r\n                })\r\n                },\r\n\r\n            getInformacionLiquidacion(item) {\r\n                let me = this;\r\n                 if(item.estado == 0){\r\n                    me.$vs.notify({\r\n                    text: 'El contrato esta inactivo no se puede abrir',\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-user'\r\n                    })\r\n                    return false;      \r\n                    \r\n                }\r\n                me.InformacionLiquidacion = [];\r\n                me.informacionFechasLiquidacion = [];\r\n                me.$vs.loading();\r\n                this.$http.get(this.$server_url+'n_verificacion?contrato='+item.contrato+'&informacion=yes')\r\n                    .then(function (res) {\r\n                        me.InformacionLiquidacion = res.data\r\n                        me.$vs.loading.close()\r\n                        if(res.data.message){\r\n                            me.$vs.notify({\r\n                            text: res.data.message,\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-user'\r\n                            })\r\n                            return false;      \r\n                         }\r\n                        me.popupVerificaciones = true;\r\n                    })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n\r\n                //para buscar los codigos perdidos relacionados a este contrato\r\n                 this.$http.get(this.$server_url+'liquidacion/codigosperdidos/'+item.contrato)\r\n                .then(function (res) {\r\n                \r\n                     me.codigosPerdidos = res.data.codigos\r\n                   \r\n                    if(res.data.status == '1'){\r\n                        $('#codeLost').css('display', 'block');\r\n                    }\r\n               \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                 \r\n                })\r\n\r\n                //para buscar los codigos movidos a otro contrato\r\n                    //para buscar los codigos perdidos relacionados a este contrato\r\n                 this.$http.get(this.$server_url+'liquidacion/codigosmovidos/'+item.contrato)\r\n                .then(function (res) {\r\n                  \r\n                     me.codigosMovidos = res.data.codigos\r\n                   \r\n                    if(res.data.status == '1'){\r\n                        $('#codeMove').css('display', 'block');\r\n                    }\r\n               \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                 \r\n                })\r\n\r\n                //para las fechas de las verificaciones\r\n                 this.$http.get(this.$server_url+'verificacion?contrato='+item.contrato+'&fechasVerificacion=yes')\r\n                .then(function (res) {\r\n\r\n                    me.informacionFechasLiquidacion = res.data\r\n               \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                 \r\n                })\r\n            },\r\n             VerCodigos(tr){\r\n            let me  = this;  \r\n            me.$vs.loading();\r\n            me.title2 = \"CÃ³digos del libro \"+tr.nombre_libro\r\n            this.$http.get(this.$server_url+'n_verificacion?contrato='+tr.contrato+'&verCodigos=yes&verificacion_id='+me.verificacion_id+'&libro_id='+tr.libro_id+'&num_verificacion='+tr.verificacion_id)\r\n            .then(function (res) {\r\n                \r\n                me.ArregloVerCodigos = res.data\r\n                me.popupDetalleVerificacion = false;\r\n                me.popupVerCodigos = true;\r\n                me.$vs.loading.close()\r\n\r\n                if(res.data.message){\r\n                    me.$vs.notify({\r\n                    text: res.data.message,\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-user'\r\n                })\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n                me.$vs.loading.close()\r\n            })\r\n      \r\n           \r\n         },\r\n         getDetallesVerificacion(tr){\r\n            let me = this;\r\n            me.popupVerificaciones = false;\r\n            me.verificacion_id = tr.id\r\n            me.$vs.loading();\r\n            me.title = \"Verificacion N. \"+tr.num_verificacion + \" del contrato \"+ tr.contrato\r\n            this.$http.get(this.$server_url+'n_verificacion?contrato='+tr.contrato+'&detalles=yes&verificacion_id='+tr.num_verificacion)\r\n            .then(function (res) {\r\n                me.DetalleVerificacion = res.data\r\n                me.popupDetalleVerificacion = true\r\n                me.$vs.loading.close()\r\n\r\n                if(res.data.message){\r\n                    me.$vs.notify({\r\n                    text: res.data.message,\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-user'\r\n                })\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n                me.$vs.loading.close()\r\n            })\r\n         }      \r\n            \r\n           \r\n      \r\n    },\r\n}\r\n</script>"]}]}