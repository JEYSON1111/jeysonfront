{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\codigos\\components\\utils\\gestionCodigosCrear.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\codigos\\components\\utils\\gestionCodigosCrear.vue","mtime":1712682815661},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport flatPickr from 'vue-flatpickr-component';\r\nimport 'flatpickr/dist/flatpickr.css';\r\nimport vSelect from 'vue-select'\r\nexport default {\r\n    data() {\r\n       return{\r\n            usuario:[],\r\n            libros:[],\r\n            codigo:{\r\n                codigo:'',\r\n                libro:'',\r\n                idusuario:0,\r\n                contrato:'',\r\n                id_periodo:'',\r\n                estado_liquidacion:1,\r\n                bc_estado:1,\r\n                codigos_barras:1,\r\n                bc_institucion:0,\r\n                bc_periodo:0,\r\n                venta_estado:0,\r\n                venta_lista_institucion:0,\r\n                contador:1,\r\n                estado:0,\r\n                verif1:'',\r\n                verif2:'',\r\n                verif3:'',\r\n                verif4:'',\r\n                verif5:'',\r\n                verif6:'',\r\n                verif7:'',\r\n                verif8:'',\r\n                verif9:'',\r\n                verif10:'',\r\n                bc_fecha_ingreso: null,\r\n                codigo_union:'',\r\n                liquidado_regalado:0,\r\n                prueba_diagnostica:0,\r\n            },\r\n            configdateTimePicker: {\r\n                enableTime: true,\r\n                dateFormat: 'Y-m-d H:i:s'\r\n            },\r\n            observacion:'',\r\n       }\r\n    },\r\n    created(){\r\n        let me = this;\r\n        me.getLibros();\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"));\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        if(me.editar == 1){\r\n            me.codigo = me.codigosEdit\r\n            me.codigo.libro =\r\n            {\r\n                nombre_serie:me.codigosEdit.serie,\r\n                nombre:me.codigosEdit.book,\r\n                year: me.codigosEdit.anio,\r\n                idLibro:me.codigosEdit.libro_idlibro,\r\n                nombreasignatura: me.codigosEdit.serie + \" - \"+ me.codigosEdit.book\r\n            }\r\n\r\n        }\r\n    },\r\n    props:{\r\n        codigosEdit:{\r\n            type:Array,\r\n            default:[],\r\n        },\r\n        editar:{\r\n            type:Number,\r\n            default:0,\r\n        }\r\n    },\r\n    components: {\r\n        'v-select': vSelect,\r\n        flatPickr,\r\n    },\r\n    methods:{\r\n        //para obtener el listado de Tipos de Area\r\n        getLibros() {\r\n        let me = this;\r\n        this.$http.get(this.$server_url+'traerSeries')\r\n            .then(function (res) {\r\n                me.libros = res.data\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n            })\r\n        },\r\n        searchContador(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'contadorCodigo?libro='+me.codigo.libro.idLibro)\r\n            .then(function (res) {\r\n                me.codigo.contador = res.data.contador\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n            })\r\n        },\r\n        guardarCodigo(){\r\n          let me = this;\r\n          //VALIDACION\r\n          if(me.codigo.codigo.trim() == \"\"){\r\n            me.$vs.notify({\r\n            text:'Debe ingresar un codigo',\r\n            color:'warning',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n            return false;\r\n          }\r\n          if(me.codigo.libro == undefined || me.codigo.libro == \"\" || me.codigo.libro == null){\r\n            me.$vs.notify({\r\n            text:'Debe seleccionar un libro',\r\n            color:'warning',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n            return false;\r\n          }\r\n          if(me.observacion == \"\" || me.observacion == undefined || me.observacion == null){\r\n            me.$vs.notify({\r\n            text:'Debe ingresar una observaci√≥n',\r\n            color:'warning',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n            return false;\r\n          }\r\n          //FIN VALIDACION\r\n          let formData = new FormData();\r\n          me.$vs.loading()\r\n          formData.append('comentario',             me.observacion)\r\n          formData.append('codigo',                 me.codigo.codigo)\r\n          formData.append('serie',                  me.codigo.libro.nombre_serie)\r\n          formData.append('libro',                  me.codigo.libro.nombre)\r\n          formData.append('anio',                   me.codigo.libro.year)\r\n          formData.append('libro_idlibro',          me.codigo.libro.idLibro)\r\n          formData.append('idusuario',              me.codigo.idusuario)\r\n          formData.append('estado',                 me.codigo.estado)\r\n          formData.append('contrato',               me.codigo.contrato)\r\n          formData.append('id_periodo',             me.codigo.id_periodo)\r\n          formData.append('verif1',                 me.codigo.verif1 == 'null' ? '':me.codigo.verif1 )\r\n          formData.append('verif2',                 me.codigo.verif2 == 'null' ? '':me.codigo.verif2 )\r\n          formData.append('verif3',                 me.codigo.verif3 == 'null' ? '':me.codigo.verif3 )\r\n          formData.append('verif4',                 me.codigo.verif4 == 'null' ? '':me.codigo.verif4 )\r\n          formData.append('verif5',                 me.codigo.verif5 == 'null' ? '':me.codigo.verif5 )\r\n          formData.append('verif6',                 me.codigo.verif6 == 'null' ? '':me.codigo.verif6 )\r\n          formData.append('verif7',                 me.codigo.verif7 == 'null' ? '':me.codigo.verif7 )\r\n          formData.append('verif8',                 me.codigo.verif8 == 'null' ? '':me.codigo.verif8 )\r\n          formData.append('verif9',                 me.codigo.verif9 == 'null' ? '':me.codigo.verif9 )\r\n          formData.append('verif10',                me.codigo.verif10 == 'null' ? '':me.codigo.verif10 )\r\n          formData.append('estado_liquidacion',     me.codigo.estado_liquidacion)\r\n          formData.append('bc_estado',              me.codigo.bc_estado)\r\n          formData.append('codigos_barras',         me.codigo.codigos_barras)\r\n          formData.append('bc_institucion',         me.codigo.bc_institucion)\r\n          formData.append('bc_periodo',             me.codigo.bc_periodo)\r\n          formData.append('editar',                 me.editar)\r\n          //auditoria\r\n          formData.append('institucion_id',         me.usuario.institucion_idInstitucion)\r\n          formData.append('periodo_id',             localStorage.periodo_id)\r\n          formData.append('user_created',           me.usuario.idusuario)\r\n          formData.append('old_values',             JSON.stringify(me.codigosEdit))\r\n          if(me.codigo.bc_fecha_ingreso == \"\" || me.codigo.bc_fecha_ingreso == undefined || me.codigo.bc_fecha_ingreso == null){\r\n\r\n          }else{\r\n            formData.append('bc_fecha_ingreso',     me.codigo.bc_fecha_ingreso)\r\n          }\r\n          formData.append('venta_estado',           me.codigo.venta_estado)\r\n          formData.append('venta_estado',           me.codigo.venta_estado)\r\n          formData.append('venta_lista_institucion',me.codigo.venta_lista_institucion)\r\n          formData.append('contador',               me.codigo.contador)\r\n          formData.append('codigo_union',           me.codigo.codigo_union)\r\n          formData.append('liquidado_regalado',     me.codigo.liquidado_regalado)\r\n          formData.append('prueba_diagnostica',     me.codigo.prueba_diagnostica)\r\n          this.$http.post(this.$server_url+'gestionCodigos', formData)\r\n              .then(function (res) {\r\n                  me.$vs.loading.close()\r\n                  if(res.data.status == '3'){\r\n                      me.$vs.notify({\r\n                      text: res.data.message,\r\n                      color: 'danger',\r\n                      iconPack: 'feather',\r\n                      icon: 'icon-alert-triangle'\r\n                    })\r\n                    return\r\n                  }\r\n                  if(res.data.status == '1'){\r\n                    me.$emit('code',me.codigo.codigo)\r\n                    me.$emit('regresar',false)\r\n                    me.limpiar();\r\n                  }\r\n                  me.$vs.notify({\r\n                      text: res.data.message,\r\n                      color: 'primary',\r\n                      iconPack: 'feather',\r\n                      icon: 'icon-alert-triangle'\r\n                  })\r\n\r\n\r\n              })\r\n              .catch(function (error) {me.$vs.loading.close()})\r\n        },\r\n        limpiar(){\r\n            let me = this\r\n            me.codigo.codigo= ''\r\n            me.codigo.libro=''\r\n            me.codigo.idusuario=0\r\n            me.codigo.contrato=''\r\n            me.codigo.id_periodo=''\r\n            me.codigo.estado_liquidacion=1\r\n            me.codigo.bc_estado=1\r\n            me.codigo.codigos_barras=1\r\n            me.codigo.bc_institucion=0\r\n            me.codigo.bc_periodo=0\r\n            me.codigo.venta_estado=0\r\n            me.codigo.venta_lista_institucion=0\r\n            me.codigo.contador=1\r\n            me.codigo.estado=0\r\n            me.codigo.verif1=''\r\n            me.codigo.verif2=''\r\n            me.codigo.verif3=''\r\n            me.codigo.verif4=''\r\n            me.codigo.verif5=''\r\n            me.codigo.verif6=''\r\n            me.codigo.verif7=''\r\n            me.codigo.verif8=''\r\n            me.codigo.verif9=''\r\n            me.codigo.verif10=''\r\n            me.codigo.bc_fecha_ingreso= null\r\n            me.codigo.codigo_union = \"\"\r\n            me.liquidado_regalado=0\r\n            me.prueba_diagnostica=0\r\n        },\r\n    },\r\n}\r\n",{"version":3,"sources":["gestionCodigosCrear.vue"],"names":[],"mappings":";AAkMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"gestionCodigosCrear.vue","sourceRoot":"src/views/codigos/components/utils","sourcesContent":["<template>\r\n    <div class=\"mt-3\">\r\n        <p class=\"font-semibold text-2xl text-warning\">{{ editar == 1?'Editar c√≥digo':'Guardar c√≥digo' }}</p>\r\n        <p class=\"font-bold\">Observaci√≥n del cambio</p>\r\n        <vs-input icon=\"icon-message-square\" class=\"w-full mt-2\" icon-pack=\"feather\" placeholder=\"Comentario\" v-model=\"observacion\"/>\r\n        <vs-divider></vs-divider>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n            <vs-input class=\"w-full\" icon=\"code\" label=\"Codigo\" v-model=\"codigo.codigo\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <p>Libro:</p>\r\n                <v-select :options=\"libros\" :reduce=\"libros => libros\" @input=\"searchContador()\" label=\"nombreasignatura\" class=\"w-full\" v-model=\"codigo.libro\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <vs-input class=\"w-full\" icon=\"person\" label=\"Id usuario\" v-model=\"codigo.idusuario\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <vs-input class=\"w-full\" icon=\"bookmark\" label=\"Contrato\" v-model=\"codigo.contrato\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <vs-input class=\"w-full\" icon=\"swap_horiz\" label=\"Id Periodo\" v-model=\"codigo.id_periodo\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-6\">\r\n                <p class=\"ml-2\">Estado liquidacion</p>\r\n                <ul class=\"flex mt-2 ml-2\">\r\n                  <li>\r\n                    <vs-radio v-model=\"codigo.estado_liquidacion\" vs-name=\"radiosestado_liquidacion\" vs-value=\"0\">Liquidado</vs-radio>\r\n                  </li>\r\n                  <li>\r\n                    <vs-radio v-model=\"codigo.estado_liquidacion\" class=\"ml-3\" vs-name=\"radiosestado_liquidacion\" vs-value=\"1\">Sin liquidar</vs-radio>\r\n                  </li>\r\n                  <li>\r\n                    <vs-radio class=\"ml-3\" v-model=\"codigo.estado_liquidacion\" vs-name=\"radiosestado_liquidacion\" vs-value=\"2\">Regalado</vs-radio>\r\n                  </li>\r\n                  <li>\r\n                    <vs-radio class=\"ml-3\" v-model=\"codigo.estado_liquidacion\" vs-name=\"radiosestado_liquidacion\" vs-value=\"3\">Devuelto</vs-radio>\r\n                  </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <p class=\"ml-2\">Bc_estado</p>\r\n                <ul class=\"flex mt-2 ml-2\">\r\n                  <li>\r\n                    <vs-radio v-model=\"codigo.bc_estado\" vs-name=\"radiosEstado2bc_estado\" vs-value=\"1\">Sin leer</vs-radio>\r\n                  </li>\r\n                  <li>\r\n                    <vs-radio class=\"ml-3\" v-model=\"codigo.bc_estado\" vs-name=\"radiosEstado2bc_estado\" vs-value=\"2\">Leido</vs-radio>\r\n                  </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-6\">\r\n                <p class=\"ml-2\">Codigos de barras</p>\r\n                <ul class=\"flex mt-2 ml-2\">\r\n                  <li>\r\n                    <vs-radio v-model=\"codigo.codigos_barras\" vs-name=\"radioscodigos_barras\" vs-value=\"1\">Si</vs-radio>\r\n                  </li>\r\n                  <li>\r\n                    <vs-radio class=\"ml-3\" v-model=\"codigo.codigos_barras\" vs-name=\"radioscodigos_barras\" vs-value=\"0\">No</vs-radio>\r\n                  </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <vs-input class=\"w-full\" icon=\"swap_vert\" label=\"Bc_Institucion\" v-model=\"codigo.bc_institucion\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-6\">\r\n                <vs-input class=\"w-full\" icon=\"swap_vert\" label=\"Bc_periodo\" v-model=\"codigo.bc_periodo\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <p>Bc_fecha_ingreso</p>\r\n                <flat-pickr :config=\"configdateTimePicker\" v-model=\"codigo.bc_fecha_ingreso\"  placeholder=\"Bc_fecha_ingreso\" class=\"m-1\" style=\"display: inline-block;width: 100%;\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-6\">\r\n                <p class=\"ml-2\">Venta estado</p>\r\n                <ul class=\"flex mt-2 ml-2\">\r\n                  <li>\r\n                    <vs-radio v-model=\"codigo.venta_estado\" vs-name=\"radiosventa_estado\" vs-value=\"0\">Nada</vs-radio>\r\n                  </li>\r\n                  <li>\r\n                    <vs-radio class=\"ml-3\" v-model=\"codigo.venta_estado\" vs-name=\"radiosventa_estado\" vs-value=\"1\">Venta directa</vs-radio>\r\n                  </li>\r\n                  <li>\r\n                    <vs-radio class=\"ml-3\" v-model=\"codigo.venta_estado\" vs-name=\"radiosventa_estado\" vs-value=\"2\">Venta lista</vs-radio>\r\n                  </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <vs-input class=\"w-full\" icon=\"swap_vert\" label=\"venta_lista_institucion\" v-model=\"codigo.venta_lista_institucion\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-6\">\r\n                <vs-input type=\"number\" class=\"w-full\" icon=\"swap_vert\" label=\"Contador\" v-model=\"codigo.contador\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <vs-input class=\"w-full\" icon=\"filter\" label=\"verif1\" v-model=\"codigo.verif1\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-6\">\r\n                <vs-input type=\"number\" class=\"w-full\" icon=\"filter\" label=\"verif2\" v-model=\"codigo.verif2\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <vs-input class=\"w-full\" icon=\"filter\" label=\"verif3\" v-model=\"codigo.verif3\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-6\">\r\n                <vs-input type=\"number\" class=\"w-full\" icon=\"filter\" label=\"verif4\" v-model=\"codigo.verif4\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <vs-input class=\"w-full\" icon=\"filter\" label=\"verif5\" v-model=\"codigo.verif5\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-6\">\r\n                <vs-input type=\"number\" class=\"w-full\" icon=\"filter\" label=\"verif6\" v-model=\"codigo.verif6\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <vs-input class=\"w-full\" icon=\"filter\" label=\"verif7\" v-model=\"codigo.verif7\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-6\">\r\n                <vs-input type=\"number\" class=\"w-full\" icon=\"filter\" label=\"verif8\" v-model=\"codigo.verif8\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                <vs-input class=\"w-full\" icon=\"filter\" label=\"verif9\" v-model=\"codigo.verif9\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-6\">\r\n                <vs-input type=\"number\" class=\"w-full\" icon=\"filter\" label=\"verif10\" v-model=\"codigo.verif10\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n          <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n              <vs-input class=\"w-full\" icon=\"filter\" label=\"Codigo uni√≥n\" v-model=\"codigo.codigo_union\" />\r\n          </div>\r\n          <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n            <p class=\"ml-2\">Regalado liquidado</p>\r\n                <ul class=\"flex mt-2 ml-2\">\r\n                  <li>\r\n                    <vs-radio class=\"ml-3\" v-model=\"codigo.liquidado_regalado\" vs-name=\"radiosventa_liquidado_regalado\" vs-value=\"0\">Sin liquidar</vs-radio>\r\n                  </li>\r\n                  <li>\r\n                    <vs-radio class=\"ml-3\" v-model=\"codigo.liquidado_regalado\" vs-name=\"radiosventa_liquidado_regalado\" vs-value=\"1\">Regalado liquidado</vs-radio>\r\n                  </li>\r\n                </ul>\r\n          </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n          <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n            <p class=\"ml-2\">Prueba Diagn√≥stica</p>\r\n                <ul class=\"flex mt-2\">\r\n                  <li>\r\n                    <vs-radio class=\"\" v-model=\"codigo.prueba_diagnostica\" vs-name=\"radiosprueba_diagnostica\" vs-value=\"0\">Activaci√≥n</vs-radio>\r\n                  </li>\r\n                  <li>\r\n                    <vs-radio class=\"ml-3\" v-model=\"codigo.prueba_diagnostica\" vs-name=\"radiosprueba_diagnostica\" vs-value=\"1\">Diagn√≥stica</vs-radio>\r\n                  </li>\r\n                </ul>\r\n          </div>\r\n        </div>\r\n        <div class=\"vx-row mt-3\">\r\n            <div class=\"vx-col w-full mb-6\">\r\n                <ul class=\"flex\">\r\n                  <li>\r\n                    <vs-radio v-model=\"codigo.estado\" vs-name=\"radiosEstado2\" vs-value=\"0\">Activo</vs-radio>\r\n                  </li>\r\n                  <li>\r\n                    <vs-radio class=\"ml-3\" v-model=\"codigo.estado\" vs-name=\"radiosEstado2\" vs-value=\"2\">Bloqueado</vs-radio>\r\n                  </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col w-full\">\r\n            <vs-button class=\"mr-3 mb-2\" @click=\"guardarCodigo();\">Guardar</vs-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport flatPickr from 'vue-flatpickr-component';\r\nimport 'flatpickr/dist/flatpickr.css';\r\nimport vSelect from 'vue-select'\r\nexport default {\r\n    data() {\r\n       return{\r\n            usuario:[],\r\n            libros:[],\r\n            codigo:{\r\n                codigo:'',\r\n                libro:'',\r\n                idusuario:0,\r\n                contrato:'',\r\n                id_periodo:'',\r\n                estado_liquidacion:1,\r\n                bc_estado:1,\r\n                codigos_barras:1,\r\n                bc_institucion:0,\r\n                bc_periodo:0,\r\n                venta_estado:0,\r\n                venta_lista_institucion:0,\r\n                contador:1,\r\n                estado:0,\r\n                verif1:'',\r\n                verif2:'',\r\n                verif3:'',\r\n                verif4:'',\r\n                verif5:'',\r\n                verif6:'',\r\n                verif7:'',\r\n                verif8:'',\r\n                verif9:'',\r\n                verif10:'',\r\n                bc_fecha_ingreso: null,\r\n                codigo_union:'',\r\n                liquidado_regalado:0,\r\n                prueba_diagnostica:0,\r\n            },\r\n            configdateTimePicker: {\r\n                enableTime: true,\r\n                dateFormat: 'Y-m-d H:i:s'\r\n            },\r\n            observacion:'',\r\n       }\r\n    },\r\n    created(){\r\n        let me = this;\r\n        me.getLibros();\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"));\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        if(me.editar == 1){\r\n            me.codigo = me.codigosEdit\r\n            me.codigo.libro =\r\n            {\r\n                nombre_serie:me.codigosEdit.serie,\r\n                nombre:me.codigosEdit.book,\r\n                year: me.codigosEdit.anio,\r\n                idLibro:me.codigosEdit.libro_idlibro,\r\n                nombreasignatura: me.codigosEdit.serie + \" - \"+ me.codigosEdit.book\r\n            }\r\n\r\n        }\r\n    },\r\n    props:{\r\n        codigosEdit:{\r\n            type:Array,\r\n            default:[],\r\n        },\r\n        editar:{\r\n            type:Number,\r\n            default:0,\r\n        }\r\n    },\r\n    components: {\r\n        'v-select': vSelect,\r\n        flatPickr,\r\n    },\r\n    methods:{\r\n        //para obtener el listado de Tipos de Area\r\n        getLibros() {\r\n        let me = this;\r\n        this.$http.get(this.$server_url+'traerSeries')\r\n            .then(function (res) {\r\n                me.libros = res.data\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n            })\r\n        },\r\n        searchContador(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'contadorCodigo?libro='+me.codigo.libro.idLibro)\r\n            .then(function (res) {\r\n                me.codigo.contador = res.data.contador\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n            })\r\n        },\r\n        guardarCodigo(){\r\n          let me = this;\r\n          //VALIDACION\r\n          if(me.codigo.codigo.trim() == \"\"){\r\n            me.$vs.notify({\r\n            text:'Debe ingresar un codigo',\r\n            color:'warning',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n            return false;\r\n          }\r\n          if(me.codigo.libro == undefined || me.codigo.libro == \"\" || me.codigo.libro == null){\r\n            me.$vs.notify({\r\n            text:'Debe seleccionar un libro',\r\n            color:'warning',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n            return false;\r\n          }\r\n          if(me.observacion == \"\" || me.observacion == undefined || me.observacion == null){\r\n            me.$vs.notify({\r\n            text:'Debe ingresar una observaci√≥n',\r\n            color:'warning',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n            return false;\r\n          }\r\n          //FIN VALIDACION\r\n          let formData = new FormData();\r\n          me.$vs.loading()\r\n          formData.append('comentario',             me.observacion)\r\n          formData.append('codigo',                 me.codigo.codigo)\r\n          formData.append('serie',                  me.codigo.libro.nombre_serie)\r\n          formData.append('libro',                  me.codigo.libro.nombre)\r\n          formData.append('anio',                   me.codigo.libro.year)\r\n          formData.append('libro_idlibro',          me.codigo.libro.idLibro)\r\n          formData.append('idusuario',              me.codigo.idusuario)\r\n          formData.append('estado',                 me.codigo.estado)\r\n          formData.append('contrato',               me.codigo.contrato)\r\n          formData.append('id_periodo',             me.codigo.id_periodo)\r\n          formData.append('verif1',                 me.codigo.verif1 == 'null' ? '':me.codigo.verif1 )\r\n          formData.append('verif2',                 me.codigo.verif2 == 'null' ? '':me.codigo.verif2 )\r\n          formData.append('verif3',                 me.codigo.verif3 == 'null' ? '':me.codigo.verif3 )\r\n          formData.append('verif4',                 me.codigo.verif4 == 'null' ? '':me.codigo.verif4 )\r\n          formData.append('verif5',                 me.codigo.verif5 == 'null' ? '':me.codigo.verif5 )\r\n          formData.append('verif6',                 me.codigo.verif6 == 'null' ? '':me.codigo.verif6 )\r\n          formData.append('verif7',                 me.codigo.verif7 == 'null' ? '':me.codigo.verif7 )\r\n          formData.append('verif8',                 me.codigo.verif8 == 'null' ? '':me.codigo.verif8 )\r\n          formData.append('verif9',                 me.codigo.verif9 == 'null' ? '':me.codigo.verif9 )\r\n          formData.append('verif10',                me.codigo.verif10 == 'null' ? '':me.codigo.verif10 )\r\n          formData.append('estado_liquidacion',     me.codigo.estado_liquidacion)\r\n          formData.append('bc_estado',              me.codigo.bc_estado)\r\n          formData.append('codigos_barras',         me.codigo.codigos_barras)\r\n          formData.append('bc_institucion',         me.codigo.bc_institucion)\r\n          formData.append('bc_periodo',             me.codigo.bc_periodo)\r\n          formData.append('editar',                 me.editar)\r\n          //auditoria\r\n          formData.append('institucion_id',         me.usuario.institucion_idInstitucion)\r\n          formData.append('periodo_id',             localStorage.periodo_id)\r\n          formData.append('user_created',           me.usuario.idusuario)\r\n          formData.append('old_values',             JSON.stringify(me.codigosEdit))\r\n          if(me.codigo.bc_fecha_ingreso == \"\" || me.codigo.bc_fecha_ingreso == undefined || me.codigo.bc_fecha_ingreso == null){\r\n\r\n          }else{\r\n            formData.append('bc_fecha_ingreso',     me.codigo.bc_fecha_ingreso)\r\n          }\r\n          formData.append('venta_estado',           me.codigo.venta_estado)\r\n          formData.append('venta_estado',           me.codigo.venta_estado)\r\n          formData.append('venta_lista_institucion',me.codigo.venta_lista_institucion)\r\n          formData.append('contador',               me.codigo.contador)\r\n          formData.append('codigo_union',           me.codigo.codigo_union)\r\n          formData.append('liquidado_regalado',     me.codigo.liquidado_regalado)\r\n          formData.append('prueba_diagnostica',     me.codigo.prueba_diagnostica)\r\n          this.$http.post(this.$server_url+'gestionCodigos', formData)\r\n              .then(function (res) {\r\n                  me.$vs.loading.close()\r\n                  if(res.data.status == '3'){\r\n                      me.$vs.notify({\r\n                      text: res.data.message,\r\n                      color: 'danger',\r\n                      iconPack: 'feather',\r\n                      icon: 'icon-alert-triangle'\r\n                    })\r\n                    return\r\n                  }\r\n                  if(res.data.status == '1'){\r\n                    me.$emit('code',me.codigo.codigo)\r\n                    me.$emit('regresar',false)\r\n                    me.limpiar();\r\n                  }\r\n                  me.$vs.notify({\r\n                      text: res.data.message,\r\n                      color: 'primary',\r\n                      iconPack: 'feather',\r\n                      icon: 'icon-alert-triangle'\r\n                  })\r\n\r\n\r\n              })\r\n              .catch(function (error) {me.$vs.loading.close()})\r\n        },\r\n        limpiar(){\r\n            let me = this\r\n            me.codigo.codigo= ''\r\n            me.codigo.libro=''\r\n            me.codigo.idusuario=0\r\n            me.codigo.contrato=''\r\n            me.codigo.id_periodo=''\r\n            me.codigo.estado_liquidacion=1\r\n            me.codigo.bc_estado=1\r\n            me.codigo.codigos_barras=1\r\n            me.codigo.bc_institucion=0\r\n            me.codigo.bc_periodo=0\r\n            me.codigo.venta_estado=0\r\n            me.codigo.venta_lista_institucion=0\r\n            me.codigo.contador=1\r\n            me.codigo.estado=0\r\n            me.codigo.verif1=''\r\n            me.codigo.verif2=''\r\n            me.codigo.verif3=''\r\n            me.codigo.verif4=''\r\n            me.codigo.verif5=''\r\n            me.codigo.verif6=''\r\n            me.codigo.verif7=''\r\n            me.codigo.verif8=''\r\n            me.codigo.verif9=''\r\n            me.codigo.verif10=''\r\n            me.codigo.bc_fecha_ingreso= null\r\n            me.codigo.codigo_union = \"\"\r\n            me.liquidado_regalado=0\r\n            me.prueba_diagnostica=0\r\n        },\r\n    },\r\n}\r\n</script>\r\n"]}]}