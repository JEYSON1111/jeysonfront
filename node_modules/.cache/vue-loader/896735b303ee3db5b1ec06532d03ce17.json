{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\gerencia\\reportes\\ReporteTrasabilidadDetalle.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\gerencia\\reportes\\ReporteTrasabilidadDetalle.vue","mtime":1712682816341},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport chart from \"vue-apexcharts\";\r\nimport moment from 'moment'\r\nexport default{\r\n    components: { apexchart: chart },\r\n    data(){\r\n        return{\r\n            arregloTransabilidad:[],\r\n            tmpArreglo:[],\r\n            datosMostrar:[],\r\n            series: [{\r\n                name: 'Reporte de trazabilidad',\r\n                data: []\r\n            }],\r\n            options: {\r\n                chart: {\r\n                height: 350,\r\n                type: 'bar',\r\n                },\r\n                plotOptions: {\r\n                bar: {\r\n                    borderRadius: 10,\r\n                    dataLabels: {\r\n                    position: 'top', // top, center, bottom\r\n                    },\r\n                },\r\n                },\r\n                dataLabels: {\r\n                enabled: true,\r\n                formatter: function (val) {\r\n                    return val + ' horas.';\r\n                },\r\n                offsetY: -20,\r\n                style: {\r\n                    fontSize: '12px',\r\n                    colors: ['#304758'],\r\n                },\r\n                },\r\n\r\n                xaxis: {\r\n                categories: [\r\n                    'Anticipo aprobado',\r\n                    'Generar Contrato',\r\n                    'Recibe contabilidad',\r\n                    'Cheque sin firmar',\r\n                    'Cheque firmado',\r\n                    'Recibe cheque',\r\n                    'Envia cheque',\r\n                    'Sube pagaré',\r\n                    'entr. Pagaré (fact)',\r\n                    'entr. Pagaré (cont.)',\r\n                ],\r\n                position: 'top',\r\n                axisBorder: {\r\n                    show: false,\r\n                },\r\n                axisTicks: {\r\n                    show: false,\r\n                },\r\n                crosshairs: {\r\n                    fill: {\r\n                    type: 'gradient',\r\n                    gradient: {\r\n                        colorFrom: '#D8E3F0',\r\n                        colorTo: '#BED1E6',\r\n                        stops: [0, 100],\r\n                        opacityFrom: 0.4,\r\n                        opacityTo: 0.5,\r\n                    },\r\n                    },\r\n                },\r\n                tooltip: {\r\n                    enabled: true,\r\n                },\r\n                },\r\n                yaxis: {\r\n                axisBorder: {\r\n                    show: false,\r\n                },\r\n                axisTicks: {\r\n                    show: false,\r\n                },\r\n                labels: {\r\n                    show: false,\r\n                    formatter: function (val) {\r\n                    return val + '%';\r\n                    },\r\n                },\r\n                },\r\n                title: {\r\n                text: '',\r\n                floating: true,\r\n                offsetY: 330,\r\n                align: 'center',\r\n                style: {\r\n                    color: '#444',\r\n                },\r\n                },\r\n            },\r\n        }\r\n    },\r\n    props:{\r\n        pedido:{\r\n            type:Array,\r\n            default:{}\r\n        },\r\n    },\r\n    created(){\r\n        let me = this;\r\n    },\r\n    mounted(){\r\n        let me = this\r\n        me.getTransabilidad()\r\n    },\r\n    methods:{\r\n        getTransabilidad(){\r\n            let me = this\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'getTransabilidad/'+me.pedido.id_pedido)\r\n                .then(function (res) {\r\n                    //me.arregloTransabilidad = res.data[0]\r\n                    me.$vs.loading.close()\r\n                    let datos = res.data[0]\r\n                    var cal = new Object();\r\n                    cal.pedido_creacion                                 = datos.pedido_creacion\r\n                    cal.fecha_aprobacion_anticipo_gerencia              = datos.fecha_aprobacion_anticipo_gerencia\r\n                    cal.fecha_rechazo_gerencia                          = datos.fecha_rechazo_gerencia\r\n                    cal.f_generateContrato                              = datos.f_generateContrato\r\n                    cal.fecha_contabilidad_recibe                       = datos.fecha_contabilidad_recibe\r\n                    cal.fecha_contabilidad_sube_cheque_sin_firmar       = datos.fecha_contabilidad_sube_cheque_sin_firmar\r\n                    cal.fecha_subir_cheque                              = datos.fecha_subir_cheque\r\n                    cal.fecha_facturador_recibe_cheque                  = datos.fecha_facturador_recibe_cheque\r\n                    cal.fecha_envio_cheque_for_asesor                   = datos.fecha_envio_cheque_for_asesor\r\n                    cal.fecha_orden_firmada                             = datos.fecha_orden_firmada\r\n                    cal.fecha_que_recibe_orden_firmada                  = datos.fecha_que_recibe_orden_firmada\r\n                    cal.fecha_que_recibe_orden_firmada_contabilidad     = datos.fecha_que_recibe_orden_firmada_contabilidad\r\n                    //=====DIFERENCIAS======\r\n                    //diferencia entre la fecha de anticipo - la fecha de creacion\r\n                    let lapso1 = me.calculateHours(datos.fecha_aprobacion_anticipo_gerencia,datos.pedido_creacion)\r\n                    cal.diferencia1 = lapso1\r\n                    me.datosMostrar.push(lapso1)\r\n                    //diferencia entre la fecha de generar contrato - la fecha de anticipo \r\n                    let lapso2 = me.calculateHours(datos.f_generateContrato,datos.fecha_aprobacion_anticipo_gerencia)\r\n                    cal.diferencia2 = lapso2\r\n                    me.datosMostrar.push(lapso2)\r\n                    //diferencia entre contabilidad recibe - la fecha de generar contrato\r\n                    let lapso3 = me.calculateHours(datos.fecha_contabilidad_recibe,datos.f_generateContrato)\r\n                    cal.diferencia3 = lapso3\r\n                    me.datosMostrar.push(lapso3)\r\n                    //diferencia entre Subir cheque sin firmar - la fecha  de contabilidad recibe\r\n                    let lapso4 = me.calculateHours(datos.fecha_contabilidad_sube_cheque_sin_firmar,datos.fecha_contabilidad_recibe)\r\n                    cal.diferencia4 = lapso4\r\n                    me.datosMostrar.push(lapso4)\r\n                    //diferencia entre Subir cheque firmado - la fecha cheque sin firmar \r\n                    let lapso5 = me.calculateHours(datos.fecha_subir_cheque,datos.fecha_contabilidad_sube_cheque_sin_firmar)\r\n                    cal.diferencia5 = lapso5\r\n                    me.datosMostrar.push(lapso5)\r\n                    //diferencia entre Facturador recibe el cheque - Subir cheque firmado\r\n                    let lapso6 = me.calculateHours(datos.fecha_facturador_recibe_cheque,datos.fecha_subir_cheque)\r\n                    cal.diferencia6 = lapso6\r\n                    me.datosMostrar.push(lapso6)\r\n                    //diferencia entre Facturador envia cheque al asesor - Facturador recibe el cheque\r\n                    let lapso7 = me.calculateHours(datos.fecha_envio_cheque_for_asesor,datos.fecha_facturador_recibe_cheque)\r\n                    cal.diferencia7 = lapso7\r\n                    me.datosMostrar.push(lapso7)\r\n                    //diferencia entre Asesor sube Pagaré firmado - Facturador envia cheque al asesor\r\n                    let lapso8 = me.calculateHours(datos.fecha_orden_firmada,datos.fecha_facturador_recibe_cheque)\r\n                    cal.diferencia8 = lapso8\r\n                    me.datosMostrar.push(lapso8)\r\n                    //diferencia entre entrega Pagaré firmado fisico(facturador) - Asesor sube Pagaré firmado\r\n                    let lapso9 = me.calculateHours( datos.fecha_que_recibe_orden_firmada, datos.fecha_orden_firmada )\r\n                    cal.diferencia9 = lapso9\r\n                    me.datosMostrar.push(lapso9)\r\n                    //diferencia entre entrega Pagaré firmado fisico(contabilidad) - Pagaré firmado fisico(facturador)\r\n                    let lapso10 = me.calculateHours( datos.fecha_que_recibe_orden_firmada_contabilidad, datos.fecha_que_recibe_orden_firmada )\r\n                    cal.diferencia10 = lapso10\r\n                    me.datosMostrar.push(lapso10)\r\n                    //enviar datos\r\n                    me.setRender(me.datosMostrar)\r\n                    //this.series[0].data = me.datosMostrar;\r\n                    me.tmpArreglo.push(cal)\r\n                    me.arregloTransabilidad = me.tmpArreglo[0]\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        setRender(tr){\r\n            let me = this\r\n            var arreglo = tr\r\n            this.series[0].data = arreglo\r\n        },\r\n        calculateHours(fecha_mayor,fecha_menor){\r\n            if(fecha_mayor == null || fecha_menor == null ){\r\n                return 0\r\n            }{\r\n                const fecha1 = new Date(Date.parse(fecha_menor.replace(' ', 'T')));\r\n                const fecha2 = new Date(Date.parse(fecha_mayor.replace(' ', 'T')));\r\n                const diferenciaEnMilisegundos = (fecha2 - fecha1);\r\n                // const diferenciaEnMilisegundos = Math.abs(fecha2 - fecha1);\r\n                const diferenciaEnHoras = Math.floor(diferenciaEnMilisegundos / 3600000);\r\n                return diferenciaEnHoras\r\n            }\r\n           \r\n        },\r\n        //metodo par descargar el excel\r\n        ExportToExcel(type, fn, dl) {\r\n        var elt = document.getElementById('tbl_exporttable_to_xls');\r\n        var wb = XLSX.utils.table_to_book(elt, { sheet: \"sheet1\" });\r\n        return dl ?\r\n            XLSX.write(wb, { bookType: type, bookSST: true, type: 'base64' }):\r\n            XLSX.writeFile(wb, fn || ('ReporteTareas.' + (type || 'xlsx')));\r\n        \r\n        }\r\n    }\r\n}\r\n",{"version":3,"sources":["ReporteTrasabilidadDetalle.vue"],"names":[],"mappings":";AAsHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ReporteTrasabilidadDetalle.vue","sourceRoot":"src/views/pedidos/gerencia/reportes","sourcesContent":["<template>\r\n    <vx-card    \r\n    :title=\"'Reporte de trazabilidad del pedido #'+pedido.id_pedido\"\r\n    title-color=\"primary\"\r\n    subtitle=\"\">\r\n    <ul class=\"mb-1\">\r\n        <!-- <pre>\r\n            {{ arregloTransabilidad }}\r\n        </pre> -->\r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-warning\"></span>\r\n                    <span class=\"font-semibold\">Creación de pedido ({{ arregloTransabilidad.pedido_creacion }})</span>\r\n                </span>\r\n                <!-- <span>{{ arregloTransabilidad.pedido_creacion }}</span> -->\r\n            </li>\r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-warning\"></span>\r\n                    <span class=\"font-semibold\">Aprobado anticipo gerencia / facturador ({{ arregloTransabilidad.fecha_aprobacion_anticipo_gerencia }})</span>\r\n                </span>\r\n                <span>despues de {{ arregloTransabilidad.diferencia1 }} horas</span>\r\n            </li>\r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-danger\"></span>\r\n                    <span class=\"font-semibold\" v-if=\"arregloTransabilidad.fecha_rechazo_gerencia == null || arregloTransabilidad.fecha_rechazo_gerencia == 'null'\">Rechazo gerencia (<span class=\"font-bold text-warning\">No existe fecha</span>) </span>\r\n                    <span class=\"font-semibold\" v-else>Rechazo gerencia ({{ arregloTransabilidad.fecha_rechazo_gerencia }})</span>\r\n                </span>\r\n            </li>\r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-primary\"></span>\r\n                    <span class=\"font-semibold\" v-if=\"arregloTransabilidad.f_generateContrato == null || arregloTransabilidad.f_generateContrato == 'null'\">Generar contrato (<span class=\"font-bold text-warning\">No existe fecha</span>) </span>\r\n                    <span class=\"font-semibold\" v-else>Generar contrato ({{ arregloTransabilidad.f_generateContrato }})</span>\r\n                </span>\r\n                <span>despues de {{ arregloTransabilidad.diferencia2 }} horas</span>\r\n            </li>\r\n            \r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-success\"></span>\r\n                    <span class=\"font-semibold\" v-if=\"arregloTransabilidad.fecha_contabilidad_recibe == null || arregloTransabilidad.fecha_contabilidad_recibe == 'null'\">Contabilidad recibe (<span class=\"font-bold text-warning\">No existe fecha</span>) </span>\r\n                    <span class=\"font-semibold\" v-else>Contabilidad recibe ({{ arregloTransabilidad.fecha_contabilidad_recibe }})</span>\r\n                </span>\r\n                <span>despues de {{ arregloTransabilidad.diferencia3 }} horas</span>\r\n            </li>\r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-warning\"></span>\r\n                    <span class=\"font-semibold\" v-if=\"arregloTransabilidad.fecha_contabilidad_sube_cheque_sin_firmar == null || arregloTransabilidad.fecha_contabilidad_sube_cheque_sin_firmar == 'null'\">Subir cheque sin firmar (<span class=\"font-bold text-warning\">No existe fecha</span>) </span>\r\n                    <span class=\"font-semibold\" v-else>Subir cheque sin firmar ({{ arregloTransabilidad.fecha_contabilidad_sube_cheque_sin_firmar }})</span>\r\n                </span>\r\n                <span>despues de {{ arregloTransabilidad.diferencia4 }} horas</span>\r\n            </li>\r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-success\"></span>\r\n                    <span class=\"font-semibold\" v-if=\"arregloTransabilidad.fecha_subir_cheque == null || arregloTransabilidad.fecha_subir_cheque == 'null'\">Subir cheque firmado (<span class=\"font-bold text-warning\">No existe fecha</span>) </span>\r\n                    <span class=\"font-semibold\" v-else>Subir cheque firmado ({{ arregloTransabilidad.fecha_subir_cheque }})</span>\r\n                </span>\r\n                <span>despues de {{ arregloTransabilidad.diferencia5 }} horas</span>\r\n            </li>\r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-dark\"></span>\r\n                    <span class=\"font-semibold\" v-if=\"arregloTransabilidad.fecha_facturador_recibe_cheque == null || arregloTransabilidad.fecha_facturador_recibe_cheque == 'null'\">Facturador recibe el cheque (<span class=\"font-bold text-warning\">No existe fecha</span>) </span>\r\n                    <span class=\"font-semibold\" v-else>Facturador recibe el cheque ({{ arregloTransabilidad.fecha_facturador_recibe_cheque }})</span>\r\n                </span>\r\n                <span>despues de {{ arregloTransabilidad.diferencia6 }} horas</span>\r\n            </li>\r\n            \r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-danger\"></span>\r\n                    <span class=\"font-semibold\" v-if=\"arregloTransabilidad.fecha_envio_cheque_for_asesor == null || arregloTransabilidad.fecha_envio_cheque_for_asesor == 'null'\">Facturador envia cheque al asesor (<span class=\"font-bold text-warning\">No existe fecha</span>) </span>\r\n                    <span class=\"font-semibold\" v-else>Facturador envia cheque al asesor ({{ arregloTransabilidad.fecha_envio_cheque_for_asesor }})</span>\r\n                </span>\r\n                <span>despues de {{ arregloTransabilidad.diferencia7 }} horas</span>\r\n            </li>\r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-primary\"></span>\r\n                    <span class=\"font-semibold\" v-if=\"arregloTransabilidad.fecha_orden_firmada == null || arregloTransabilidad.fecha_orden_firmada == 'null'\">Asesor sube Pagaré firmado (<span class=\"font-bold text-warning\">No existe fecha</span>) </span>\r\n                    <span class=\"font-semibold\" v-else>Asesor sube Pagaré firmado ({{ arregloTransabilidad.fecha_orden_firmada }})</span>\r\n                </span>\r\n                <span>despues de {{ arregloTransabilidad.diferencia8 }} horas</span>\r\n            </li>\r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-warning\"></span>\r\n                    <span class=\"font-semibold\" v-if=\"arregloTransabilidad.fecha_que_recibe_orden_firmada == null || arregloTransabilidad.fecha_que_recibe_orden_firmada == 'null'\">Asesor entrega Pagaré firmado fisico - facturador (<span class=\"font-bold text-warning\">No existe fecha</span>) </span>\r\n                    <span class=\"font-semibold\" v-else>Asesor entrega Pagaré firmado fisico - facturador ({{ arregloTransabilidad.fecha_que_recibe_orden_firmada }})</span>\r\n                </span>\r\n                <span>despues de {{ arregloTransabilidad.diferencia9 }} horas</span>\r\n            </li>\r\n            <li class=\"flex justify-between py-3 px-6 border d-theme-border-grey-light border-solid border-r-0 border-l-0 border-b-0\">\r\n                <span class=\"flex items-center\">\r\n                    <span class=\"inline-block h-3 w-3 rounded-full mr-2 bg-primary\"></span>\r\n                    <span class=\"font-semibold\" v-if=\"arregloTransabilidad.fecha_que_recibe_orden_firmada_contabilidad == null || arregloTransabilidad.fecha_que_recibe_orden_firmada_contabilidad == 'null'\">Facturador entrega Pagaré firmado fisico - contabilidad (<span class=\"font-bold text-warning\">No existe fecha</span>) </span>\r\n                    <span class=\"font-semibold\" v-else>Facturador entrega Pagaré firmado fisico - contabilidad ({{ arregloTransabilidad.fecha_que_recibe_orden_firmada_contabilidad }})</span>\r\n                </span>\r\n                <span>despues de {{ arregloTransabilidad.diferencia10 }} horas</span>\r\n            </li>\r\n        </ul>\r\n        <vs-divider>Grafico estadístico</vs-divider>\r\n        <p style=\"display: none;\">{{ series }}</p>\r\n        <div id=\"chart\" style=\"width: 100%;\">\r\n        <apexchart\r\n          type=\"bar\"\r\n          height=\"350\"\r\n          :options=\"options\"\r\n          :series=\"[series[0]]\"\r\n        ></apexchart>\r\n      </div>\r\n    </vx-card>\r\n</template>\r\n<script>\r\nimport chart from \"vue-apexcharts\";\r\nimport moment from 'moment'\r\nexport default{\r\n    components: { apexchart: chart },\r\n    data(){\r\n        return{\r\n            arregloTransabilidad:[],\r\n            tmpArreglo:[],\r\n            datosMostrar:[],\r\n            series: [{\r\n                name: 'Reporte de trazabilidad',\r\n                data: []\r\n            }],\r\n            options: {\r\n                chart: {\r\n                height: 350,\r\n                type: 'bar',\r\n                },\r\n                plotOptions: {\r\n                bar: {\r\n                    borderRadius: 10,\r\n                    dataLabels: {\r\n                    position: 'top', // top, center, bottom\r\n                    },\r\n                },\r\n                },\r\n                dataLabels: {\r\n                enabled: true,\r\n                formatter: function (val) {\r\n                    return val + ' horas.';\r\n                },\r\n                offsetY: -20,\r\n                style: {\r\n                    fontSize: '12px',\r\n                    colors: ['#304758'],\r\n                },\r\n                },\r\n\r\n                xaxis: {\r\n                categories: [\r\n                    'Anticipo aprobado',\r\n                    'Generar Contrato',\r\n                    'Recibe contabilidad',\r\n                    'Cheque sin firmar',\r\n                    'Cheque firmado',\r\n                    'Recibe cheque',\r\n                    'Envia cheque',\r\n                    'Sube pagaré',\r\n                    'entr. Pagaré (fact)',\r\n                    'entr. Pagaré (cont.)',\r\n                ],\r\n                position: 'top',\r\n                axisBorder: {\r\n                    show: false,\r\n                },\r\n                axisTicks: {\r\n                    show: false,\r\n                },\r\n                crosshairs: {\r\n                    fill: {\r\n                    type: 'gradient',\r\n                    gradient: {\r\n                        colorFrom: '#D8E3F0',\r\n                        colorTo: '#BED1E6',\r\n                        stops: [0, 100],\r\n                        opacityFrom: 0.4,\r\n                        opacityTo: 0.5,\r\n                    },\r\n                    },\r\n                },\r\n                tooltip: {\r\n                    enabled: true,\r\n                },\r\n                },\r\n                yaxis: {\r\n                axisBorder: {\r\n                    show: false,\r\n                },\r\n                axisTicks: {\r\n                    show: false,\r\n                },\r\n                labels: {\r\n                    show: false,\r\n                    formatter: function (val) {\r\n                    return val + '%';\r\n                    },\r\n                },\r\n                },\r\n                title: {\r\n                text: '',\r\n                floating: true,\r\n                offsetY: 330,\r\n                align: 'center',\r\n                style: {\r\n                    color: '#444',\r\n                },\r\n                },\r\n            },\r\n        }\r\n    },\r\n    props:{\r\n        pedido:{\r\n            type:Array,\r\n            default:{}\r\n        },\r\n    },\r\n    created(){\r\n        let me = this;\r\n    },\r\n    mounted(){\r\n        let me = this\r\n        me.getTransabilidad()\r\n    },\r\n    methods:{\r\n        getTransabilidad(){\r\n            let me = this\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'getTransabilidad/'+me.pedido.id_pedido)\r\n                .then(function (res) {\r\n                    //me.arregloTransabilidad = res.data[0]\r\n                    me.$vs.loading.close()\r\n                    let datos = res.data[0]\r\n                    var cal = new Object();\r\n                    cal.pedido_creacion                                 = datos.pedido_creacion\r\n                    cal.fecha_aprobacion_anticipo_gerencia              = datos.fecha_aprobacion_anticipo_gerencia\r\n                    cal.fecha_rechazo_gerencia                          = datos.fecha_rechazo_gerencia\r\n                    cal.f_generateContrato                              = datos.f_generateContrato\r\n                    cal.fecha_contabilidad_recibe                       = datos.fecha_contabilidad_recibe\r\n                    cal.fecha_contabilidad_sube_cheque_sin_firmar       = datos.fecha_contabilidad_sube_cheque_sin_firmar\r\n                    cal.fecha_subir_cheque                              = datos.fecha_subir_cheque\r\n                    cal.fecha_facturador_recibe_cheque                  = datos.fecha_facturador_recibe_cheque\r\n                    cal.fecha_envio_cheque_for_asesor                   = datos.fecha_envio_cheque_for_asesor\r\n                    cal.fecha_orden_firmada                             = datos.fecha_orden_firmada\r\n                    cal.fecha_que_recibe_orden_firmada                  = datos.fecha_que_recibe_orden_firmada\r\n                    cal.fecha_que_recibe_orden_firmada_contabilidad     = datos.fecha_que_recibe_orden_firmada_contabilidad\r\n                    //=====DIFERENCIAS======\r\n                    //diferencia entre la fecha de anticipo - la fecha de creacion\r\n                    let lapso1 = me.calculateHours(datos.fecha_aprobacion_anticipo_gerencia,datos.pedido_creacion)\r\n                    cal.diferencia1 = lapso1\r\n                    me.datosMostrar.push(lapso1)\r\n                    //diferencia entre la fecha de generar contrato - la fecha de anticipo \r\n                    let lapso2 = me.calculateHours(datos.f_generateContrato,datos.fecha_aprobacion_anticipo_gerencia)\r\n                    cal.diferencia2 = lapso2\r\n                    me.datosMostrar.push(lapso2)\r\n                    //diferencia entre contabilidad recibe - la fecha de generar contrato\r\n                    let lapso3 = me.calculateHours(datos.fecha_contabilidad_recibe,datos.f_generateContrato)\r\n                    cal.diferencia3 = lapso3\r\n                    me.datosMostrar.push(lapso3)\r\n                    //diferencia entre Subir cheque sin firmar - la fecha  de contabilidad recibe\r\n                    let lapso4 = me.calculateHours(datos.fecha_contabilidad_sube_cheque_sin_firmar,datos.fecha_contabilidad_recibe)\r\n                    cal.diferencia4 = lapso4\r\n                    me.datosMostrar.push(lapso4)\r\n                    //diferencia entre Subir cheque firmado - la fecha cheque sin firmar \r\n                    let lapso5 = me.calculateHours(datos.fecha_subir_cheque,datos.fecha_contabilidad_sube_cheque_sin_firmar)\r\n                    cal.diferencia5 = lapso5\r\n                    me.datosMostrar.push(lapso5)\r\n                    //diferencia entre Facturador recibe el cheque - Subir cheque firmado\r\n                    let lapso6 = me.calculateHours(datos.fecha_facturador_recibe_cheque,datos.fecha_subir_cheque)\r\n                    cal.diferencia6 = lapso6\r\n                    me.datosMostrar.push(lapso6)\r\n                    //diferencia entre Facturador envia cheque al asesor - Facturador recibe el cheque\r\n                    let lapso7 = me.calculateHours(datos.fecha_envio_cheque_for_asesor,datos.fecha_facturador_recibe_cheque)\r\n                    cal.diferencia7 = lapso7\r\n                    me.datosMostrar.push(lapso7)\r\n                    //diferencia entre Asesor sube Pagaré firmado - Facturador envia cheque al asesor\r\n                    let lapso8 = me.calculateHours(datos.fecha_orden_firmada,datos.fecha_facturador_recibe_cheque)\r\n                    cal.diferencia8 = lapso8\r\n                    me.datosMostrar.push(lapso8)\r\n                    //diferencia entre entrega Pagaré firmado fisico(facturador) - Asesor sube Pagaré firmado\r\n                    let lapso9 = me.calculateHours( datos.fecha_que_recibe_orden_firmada, datos.fecha_orden_firmada )\r\n                    cal.diferencia9 = lapso9\r\n                    me.datosMostrar.push(lapso9)\r\n                    //diferencia entre entrega Pagaré firmado fisico(contabilidad) - Pagaré firmado fisico(facturador)\r\n                    let lapso10 = me.calculateHours( datos.fecha_que_recibe_orden_firmada_contabilidad, datos.fecha_que_recibe_orden_firmada )\r\n                    cal.diferencia10 = lapso10\r\n                    me.datosMostrar.push(lapso10)\r\n                    //enviar datos\r\n                    me.setRender(me.datosMostrar)\r\n                    //this.series[0].data = me.datosMostrar;\r\n                    me.tmpArreglo.push(cal)\r\n                    me.arregloTransabilidad = me.tmpArreglo[0]\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        setRender(tr){\r\n            let me = this\r\n            var arreglo = tr\r\n            this.series[0].data = arreglo\r\n        },\r\n        calculateHours(fecha_mayor,fecha_menor){\r\n            if(fecha_mayor == null || fecha_menor == null ){\r\n                return 0\r\n            }{\r\n                const fecha1 = new Date(Date.parse(fecha_menor.replace(' ', 'T')));\r\n                const fecha2 = new Date(Date.parse(fecha_mayor.replace(' ', 'T')));\r\n                const diferenciaEnMilisegundos = (fecha2 - fecha1);\r\n                // const diferenciaEnMilisegundos = Math.abs(fecha2 - fecha1);\r\n                const diferenciaEnHoras = Math.floor(diferenciaEnMilisegundos / 3600000);\r\n                return diferenciaEnHoras\r\n            }\r\n           \r\n        },\r\n        //metodo par descargar el excel\r\n        ExportToExcel(type, fn, dl) {\r\n        var elt = document.getElementById('tbl_exporttable_to_xls');\r\n        var wb = XLSX.utils.table_to_book(elt, { sheet: \"sheet1\" });\r\n        return dl ?\r\n            XLSX.write(wb, { bookType: type, bookSST: true, type: 'base64' }):\r\n            XLSX.writeFile(wb, fn || ('ReporteTareas.' + (type || 'xlsx')));\r\n        \r\n        }\r\n    }\r\n}\r\n</script>"]}]}