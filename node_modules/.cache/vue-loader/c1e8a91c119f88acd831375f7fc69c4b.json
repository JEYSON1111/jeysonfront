{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\contenidos\\nuevo.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\contenidos\\nuevo.vue","mtime":1712682815707},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar'\r\nimport \"vue-select/dist/vue-select.css\";\r\nimport vSelect from \"vue-select\";\r\nimport axios from \"axios\";\r\nimport vue2Dropzone from 'vue2-dropzone'\r\nimport 'vue2-dropzone/dist/vue2Dropzone.min.css'\r\nimport {\r\n    mapState\r\n} from 'vuex'\r\nexport default {\r\n    props: {\r\n        isSidebarActive: {\r\n            type: Boolean,\r\n            required: true\r\n        },\r\n        data: {\r\n            type: Object,\r\n            default: () => {}\r\n        }\r\n    },\r\n    components: {\r\n        'v-select': vSelect,\r\n        VuePerfectScrollbar,\r\n        vueDropzone: vue2Dropzone,\r\n    },\r\n    data() {\r\n        return {\r\n            asigTemas: [],\r\n            file: [],\r\n            dropzoneOptions: {\r\n                url: this.$data_url+'api/setContenido',\r\n                dictDefaultMessage: \"<i class='fa fa-cloud-upload'></i> Click o arrastra un archivo aquí.\",\r\n                chunking: true,\r\n                thumbnailWidth: 150,\r\n                maxFilesize: 200.5,\r\n                addRemoveLinks: true,\r\n                headers: {\r\n                    \"My-Awesome-Header\": \"header value\"\r\n                }\r\n            },\r\n            temas: [],\r\n            unidad: [{\r\n                    id: 1,\r\n                    nombre: 'Unidad 1'\r\n                },\r\n                {\r\n                    id: 2,\r\n                    nombre: 'Unidad 2'\r\n                },\r\n                {\r\n                    id: 3,\r\n                    nombre: 'Unidad 3'\r\n                },\r\n                {\r\n                    id: 4,\r\n                    nombre: 'Unidad 4'\r\n                },\r\n                {\r\n                    id: 5,\r\n                    nombre: 'Unidad 5'\r\n                },\r\n                {\r\n                    id: 6,\r\n                    nombre: 'Unidad 6'\r\n                },\r\n                {\r\n                    id: 7,\r\n                    nombre: 'Unidad 7'\r\n                },\r\n                {\r\n                    id: 8,\r\n                    nombre: 'Unidad 8'\r\n                },\r\n            ],\r\n            asignaturas: [],\r\n            errors: [],\r\n            contenido: {},\r\n            setButton: true,\r\n            arch: {}\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getasignaturas();\r\n    },\r\n    computed: {\r\n        get_ext_img() {\r\n            return (ext) => {\r\n                if (ext === 'doc') return require('@/assets/images/file-icons/doc.png')\r\n                else if (ext === 'jpg') return require('@/assets/images/file-icons/jpg.png')\r\n                else if (ext === 'xls') return require('@/assets/images/file-icons/xls.png')\r\n                else if (ext === 'pdf') return require('@/assets/images/file-icons/pdf.png')\r\n                else return require('@/assets/images/file-icons/doc.png')\r\n            }\r\n        },\r\n        isSidebarActiveLocal: {\r\n            get() {\r\n                return this.isSidebarActive\r\n            },\r\n            set(val) {\r\n                if (!val) {\r\n                    this.$emit('closeSidebar')\r\n                }\r\n            }\r\n        },\r\n        scrollbarTag() {\r\n            return this.$store.getters.scrollbarTag\r\n        }\r\n    },\r\n    methods: {\r\n        successUpload() {\r\n            this.$vs.notify({\r\n                color: 'success',\r\n                title: 'Upload Success',\r\n                text: 'Lorem ipsum dolor sit amet, consectetur'\r\n            })\r\n        },\r\n        onUploadProgress: uploadEvent => {\r\n            var pocentaje = Math.round(uploadEvent.loaded / uploadEvent.total * 100);\r\n            console.log(pocentaje)\r\n        },\r\n        async quitarArchivo() {\r\n            this.arch = {}\r\n        },\r\n        async guardar(file) {\r\n            let me = this\r\n            me.$vs.loading({\r\n                color: '#046AE7'\r\n            })\r\n            let formData = new FormData();\r\n            formData.append('file', file);\r\n            axios.post(this.$data_url+'api/setContenido', formData, this.onUploadProgress)\r\n                .then(function (response) {\r\n                    me.arch = response.data;\r\n                    me.$refs.dropzone.removeAllFiles();\r\n                    me.$vs.loading.close();\r\n                    me.setButton = false;\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        async guardarContenido() {\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('idcontenido', me.arch.idcontenido);\r\n            formData.append('nombre', me.arch.nombre);\r\n            formData.append('idasignatura', me.contenido.idasignatura);\r\n            formData.append('unidad', me.contenido.unidad);\r\n            formData.append('temas', JSON.stringify(me.asigTemas));\r\n            this.$http.post(this.$server_url+'contenido', formData)\r\n                .then(function (res) {\r\n                    me.$store.dispatch('getContenido')\r\n                    me.$vs.notify({\r\n                        color: 'success',\r\n                        text: 'Registro agregado'\r\n                    })\r\n                    me.arch = {}\r\n                    me.contenido = {}\r\n                    me.asigTemas = []\r\n                    me.isSidebarActiveLocal = false\r\n                })\r\n                .catch(function (error) {\r\n\r\n                })\r\n        },\r\n        tems() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"temas?unidad=\" + me.contenido.unidad + \"&asignatura=\" + me.contenido.idasignatura)\r\n                .then(function (response) {\r\n                    me.temas = response.data\r\n                    console.log(response.data)\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        getTemas(unidad, asignatura) {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"temas?unidad=\" + unidad + \"&asignatura=\" + asignatura)\r\n                .then(function (response) {\r\n                    me.temas = response.data\r\n                    console.log(response.data)\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        getasignaturas() {\r\n            let me = this;\r\n            var url = this.$server_url+\"asignaturas\";\r\n            this.$http.get(url).then(function (response) {\r\n                    var respuesta = response.data;\r\n                    me.asignaturas = response.data;\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                });\r\n        },\r\n\r\n    },\r\n}\r\n",{"version":3,"sources":["nuevo.vue"],"names":[],"mappings":";AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"nuevo.vue","sourceRoot":"src/views/contenidos","sourcesContent":["<template>\r\n<vs-sidebar click-not-close position-right parent=\"body\" default-index=\"1\" color=\"primary\" class=\"add-new-data-sidebar items-no-padding\" spacer v-model=\"isSidebarActiveLocal\">\r\n    <div class=\"mt-6 flex items-center justify-between px-6\">\r\n        <!-- <h4>{{ Object.entries(this.data).length === 0 ? \"ADD NEW\" : \"UPDATE\" }} ITEM</h4> -->\r\n        <h4>Nueva Teletarea</h4>\r\n        <feather-icon icon=\"XIcon\" @click.stop=\"isSidebarActiveLocal = false\" class=\"cursor-pointer\"></feather-icon>\r\n    </div>\r\n    <vs-divider class=\"mb-0\"></vs-divider>\r\n\r\n    <component :is=\"scrollbarTag\" class=\"scroll-area--data-list-add-new\" :key=\"$vs.rtl\">\r\n\r\n        <div class=\"p-6\">\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Archivo</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <template v-if=\"!arch.nombre\">\r\n                        <vue-dropzone class=\"vx-card\" ref=\"dropzone\" id=\"drop1\" @vdropzone-complete=\"guardar\" :options=\"dropzoneOptions\"></vue-dropzone>\r\n                    </template>\r\n                    <img v-if=\"arch.nombre\" :src=\"get_ext_img(arch.file_ext)\" :alt=\"arch.nombre\" style=\"witch:70px\" class=\"mt-4\">\r\n                    <p>\r\n                        {{arch.nombre}}\r\n                    </p>\r\n                    <vs-button v-if=\"arch.nombre\" @click=\"quitarArchivo()\" size=\"small\">Cambiar archivo</vs-button>\r\n                </div>\r\n            </div>\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Unidad</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <v-select :options=\"unidad\" :reduce=\"unidad => unidad.id\" label=\"nombre\" v-model=\"contenido.unidad\" @input=\"tems\"></v-select>\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.unidad\">{{ errors.unidad }}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Asignatura</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <v-select :options=\"asignaturas\" :reduce=\"asignaturas => asignaturas.idasignatura\" label=\"nombreasignatura\" v-model=\"contenido.idasignatura\" @input=\"tems\"></v-select>\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.asignatura\">{{ errors.asignatura }}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Temas</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <v-select multiple :options=\"temas\" :reduce=\"temas => temas.id\" label=\"nombre_tema\" v-model=\"asigTemas\"></v-select>\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.asigTemas\">{{ errors.asigTemas }}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </component>\r\n\r\n    <div class=\"p-2 text-center\" slot=\"footer\">\r\n        <div class=\"flex flex-wrap mt-4\">\r\n            <div class=\"w-1/3 ml-auto\">\r\n                <vs-button color=\"danger\" type=\"relief\" class=\"mb-2\" @click.stop=\"isSidebarActiveLocal = false\" icon-pack=\"feather\" icon=\"icon-close\">Cancelar</vs-button>\r\n            </div>\r\n            <div class=\"w-1/3 ml-auto\">\r\n                <vs-button :disabled='setButton' color=\"success\" @click=\"guardarContenido\" type=\"relief\" icon-pack=\"feather\" icon=\"icon-save\">Guardar</vs-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</vs-sidebar>\r\n</template>\r\n\r\n<script>\r\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar'\r\nimport \"vue-select/dist/vue-select.css\";\r\nimport vSelect from \"vue-select\";\r\nimport axios from \"axios\";\r\nimport vue2Dropzone from 'vue2-dropzone'\r\nimport 'vue2-dropzone/dist/vue2Dropzone.min.css'\r\nimport {\r\n    mapState\r\n} from 'vuex'\r\nexport default {\r\n    props: {\r\n        isSidebarActive: {\r\n            type: Boolean,\r\n            required: true\r\n        },\r\n        data: {\r\n            type: Object,\r\n            default: () => {}\r\n        }\r\n    },\r\n    components: {\r\n        'v-select': vSelect,\r\n        VuePerfectScrollbar,\r\n        vueDropzone: vue2Dropzone,\r\n    },\r\n    data() {\r\n        return {\r\n            asigTemas: [],\r\n            file: [],\r\n            dropzoneOptions: {\r\n                url: this.$data_url+'api/setContenido',\r\n                dictDefaultMessage: \"<i class='fa fa-cloud-upload'></i> Click o arrastra un archivo aquí.\",\r\n                chunking: true,\r\n                thumbnailWidth: 150,\r\n                maxFilesize: 200.5,\r\n                addRemoveLinks: true,\r\n                headers: {\r\n                    \"My-Awesome-Header\": \"header value\"\r\n                }\r\n            },\r\n            temas: [],\r\n            unidad: [{\r\n                    id: 1,\r\n                    nombre: 'Unidad 1'\r\n                },\r\n                {\r\n                    id: 2,\r\n                    nombre: 'Unidad 2'\r\n                },\r\n                {\r\n                    id: 3,\r\n                    nombre: 'Unidad 3'\r\n                },\r\n                {\r\n                    id: 4,\r\n                    nombre: 'Unidad 4'\r\n                },\r\n                {\r\n                    id: 5,\r\n                    nombre: 'Unidad 5'\r\n                },\r\n                {\r\n                    id: 6,\r\n                    nombre: 'Unidad 6'\r\n                },\r\n                {\r\n                    id: 7,\r\n                    nombre: 'Unidad 7'\r\n                },\r\n                {\r\n                    id: 8,\r\n                    nombre: 'Unidad 8'\r\n                },\r\n            ],\r\n            asignaturas: [],\r\n            errors: [],\r\n            contenido: {},\r\n            setButton: true,\r\n            arch: {}\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getasignaturas();\r\n    },\r\n    computed: {\r\n        get_ext_img() {\r\n            return (ext) => {\r\n                if (ext === 'doc') return require('@/assets/images/file-icons/doc.png')\r\n                else if (ext === 'jpg') return require('@/assets/images/file-icons/jpg.png')\r\n                else if (ext === 'xls') return require('@/assets/images/file-icons/xls.png')\r\n                else if (ext === 'pdf') return require('@/assets/images/file-icons/pdf.png')\r\n                else return require('@/assets/images/file-icons/doc.png')\r\n            }\r\n        },\r\n        isSidebarActiveLocal: {\r\n            get() {\r\n                return this.isSidebarActive\r\n            },\r\n            set(val) {\r\n                if (!val) {\r\n                    this.$emit('closeSidebar')\r\n                }\r\n            }\r\n        },\r\n        scrollbarTag() {\r\n            return this.$store.getters.scrollbarTag\r\n        }\r\n    },\r\n    methods: {\r\n        successUpload() {\r\n            this.$vs.notify({\r\n                color: 'success',\r\n                title: 'Upload Success',\r\n                text: 'Lorem ipsum dolor sit amet, consectetur'\r\n            })\r\n        },\r\n        onUploadProgress: uploadEvent => {\r\n            var pocentaje = Math.round(uploadEvent.loaded / uploadEvent.total * 100);\r\n            console.log(pocentaje)\r\n        },\r\n        async quitarArchivo() {\r\n            this.arch = {}\r\n        },\r\n        async guardar(file) {\r\n            let me = this\r\n            me.$vs.loading({\r\n                color: '#046AE7'\r\n            })\r\n            let formData = new FormData();\r\n            formData.append('file', file);\r\n            axios.post(this.$data_url+'api/setContenido', formData, this.onUploadProgress)\r\n                .then(function (response) {\r\n                    me.arch = response.data;\r\n                    me.$refs.dropzone.removeAllFiles();\r\n                    me.$vs.loading.close();\r\n                    me.setButton = false;\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        async guardarContenido() {\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('idcontenido', me.arch.idcontenido);\r\n            formData.append('nombre', me.arch.nombre);\r\n            formData.append('idasignatura', me.contenido.idasignatura);\r\n            formData.append('unidad', me.contenido.unidad);\r\n            formData.append('temas', JSON.stringify(me.asigTemas));\r\n            this.$http.post(this.$server_url+'contenido', formData)\r\n                .then(function (res) {\r\n                    me.$store.dispatch('getContenido')\r\n                    me.$vs.notify({\r\n                        color: 'success',\r\n                        text: 'Registro agregado'\r\n                    })\r\n                    me.arch = {}\r\n                    me.contenido = {}\r\n                    me.asigTemas = []\r\n                    me.isSidebarActiveLocal = false\r\n                })\r\n                .catch(function (error) {\r\n\r\n                })\r\n        },\r\n        tems() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"temas?unidad=\" + me.contenido.unidad + \"&asignatura=\" + me.contenido.idasignatura)\r\n                .then(function (response) {\r\n                    me.temas = response.data\r\n                    console.log(response.data)\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        getTemas(unidad, asignatura) {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"temas?unidad=\" + unidad + \"&asignatura=\" + asignatura)\r\n                .then(function (response) {\r\n                    me.temas = response.data\r\n                    console.log(response.data)\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        getasignaturas() {\r\n            let me = this;\r\n            var url = this.$server_url+\"asignaturas\";\r\n            this.$http.get(url).then(function (response) {\r\n                    var respuesta = response.data;\r\n                    me.asignaturas = response.data;\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                });\r\n        },\r\n\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-new-data-sidebar {\r\n    ::v-deep .vs-sidebar--background {\r\n        z-index: 52010;\r\n    }\r\n\r\n    ::v-deep .vs-sidebar {\r\n        z-index: 52010;\r\n        width: 60%;\r\n        max-width: 60%;\r\n\r\n        .img-upload {\r\n            margin-top: 2rem;\r\n\r\n            .con-img-upload {\r\n                padding: 0;\r\n            }\r\n\r\n            .con-input-upload {\r\n                width: 100%;\r\n                margin: 0;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.scroll-area--data-list-add-new {\r\n    // height: calc(var(--vh, 1vh) * 100 - 4.3rem);\r\n    height: calc(var(--vh, 1vh) * 100 - 16px - 45px - 82px);\r\n\r\n    &:not(.ps) {\r\n        overflow-y: auto;\r\n    }\r\n}\r\n</style>\r\n"]}]}