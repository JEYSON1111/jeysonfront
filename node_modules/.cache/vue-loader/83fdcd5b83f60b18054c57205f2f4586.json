{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\salle\\administrador\\InstitucionesComponent.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\salle\\administrador\\InstitucionesComponent.vue","mtime":1712682816500},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n    import axios from 'axios'\r\n    import vSelect from 'vue-select'\r\n    import flatPickr from 'vue-flatpickr-component'\r\n    import 'flatpickr/dist/flatpickr.css'\r\n    export default {\r\n        data(){\r\n          return {\r\n            usuario: [],\r\n            instituciones: [],\r\n            institucion: {},\r\n            modalConfigInstitucion: false,\r\n            configdateTimePicker: {\r\n                enableTime: true,\r\n                dateFormat: 'Y-m-d H:i:s'\r\n            },\r\n            ver_respuestas: false,\r\n            cant_intentos: 1,\r\n            fecha_inicio: '',\r\n            fecha_fin: '',\r\n            observaciones: '',\r\n            arregloPeriodos:[],\r\n          }\r\n        },\r\n        components: {\r\n          'v-select': vSelect,\r\n          flatPickr\r\n        },\r\n        created(){\r\n          this.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n          this.getInstituciones()\r\n          this.getPeriodosEvaluacion()\r\n        },\r\n        methods: {\r\n          getPeriodosEvaluacion() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'salle/periodos')\r\n              .then(function (response) {\r\n                me.arregloPeriodos = response.data;\r\n              })\r\n              .catch(function (error) {\r\n              })\r\n          },\r\n          getInstituciones(){\r\n            let me = this\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url+'instituciones_salle/'+localStorage.EvaluacionSelectSalle)\r\n            .then(res => {\r\n              me.$vs.loading.close()\r\n              me.instituciones = res.data.items\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n              me.$vs.loading.close()\r\n            })\r\n          },\r\n          verInstitucion(item){\r\n            let me = this\r\n            me.institucion = item\r\n            me.ver_respuestas = item.institucion.ver_respuestas\r\n            me.fecha_inicio = item.institucion.fecha_inicio\r\n            me.cant_intentos = 1 //item.institucion.cant_evaluaciones\r\n            me.fecha_fin = item.institucion.fecha_fin\r\n            me.observaciones = item.institucion.observaciones\r\n            me.modalConfigInstitucion = true\r\n          },\r\n          guardarConfiguracion(){\r\n            let me = this\r\n            if( me.fecha_inicio === '' ||  me.fecha_fin === '' ){\r\n              me.$vs.notify({\r\n              text:'Debe completar los campos obligatorios antes de guardar',\r\n              color:'warning',\r\n              iconPack: 'feather',\r\n              icon:'icon-alert-triangle'})\r\n              return\r\n            }\r\n            let id_configuracion = me.institucion.institucion.id_configuracion\r\n            let ver_respuestas = 0\r\n            if( me.ver_respuestas === true ){\r\n              ver_respuestas = 1\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('id_configuracion',   id_configuracion);\r\n            formData.append('id_institucion',     me.institucion.institucion.idInstitucion);\r\n            formData.append('fecha_inicio',       me.fecha_inicio);\r\n            formData.append('fecha_fin',          me.fecha_fin);\r\n            formData.append('cant_evaluaciones',  1);\r\n            formData.append('ver_respuestas',     ver_respuestas);\r\n            formData.append('observaciones',      me.observaciones);\r\n            formData.append('n_evaluacion',       localStorage.EvaluacionSelectSalle)\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'save_instituciones_salle', formData)\r\n            .then(res => {\r\n              me.getInstituciones()\r\n              me.modalConfigInstitucion = false\r\n              me.$vs.loading.close()\r\n              me.$vs.notify({\r\n              text:'Configuración guardada correctamente',\r\n              color:'success',\r\n              iconPack: 'feather',\r\n              icon:'icon-check'})\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n              me.$vs.loading.close()\r\n            })\r\n          }\r\n        },\r\n    }\r\n",{"version":3,"sources":["InstitucionesComponent.vue"],"names":[],"mappings":";AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InstitucionesComponent.vue","sourceRoot":"src/views/salle/administrador","sourcesContent":["<template>\r\n  <div>\r\n    <!-- Modal Configuraciones-->\r\n    <vs-popup title=\"Configurar institución\" :active.sync=\"modalConfigInstitucion\">\r\n        <div v-if=\"institucion.institucion\" class=\"vx-row\">\r\n          <div class=\"vx-col w-full\" align=\"left\">\r\n            <b>{{institucion.institucion.nombreInstitucion.toUpperCase()}}</b><br>\r\n            <b>Dirección:</b> {{institucion.institucion.nombre_ciudad.toUpperCase()}} - <span v-if=\"institucion.institucion.direccionInstitucion\">{{institucion.institucion.direccionInstitucion.toUpperCase()}}</span><br>\r\n          </div>\r\n          <div class=\"vx-col sm:w-1/2 w-full\" align=\"left\">\r\n            <b>Teléfono:</b> <span v-if=\"institucion.institucion.telefonoInstitucion\">{{institucion.institucion.telefonoInstitucion.toUpperCase()}}</span> <br>\r\n          </div>\r\n        </div>\r\n        <vs-divider> Configuración evaluaciones </vs-divider>\r\n        <div class=\"vx-row mb-base\">\r\n          <div class=\"vx-col sm:w-1/2 w-full\" align=\"left\">\r\n              <div style=\"font-size: 12px; color: gray;\">Fecha inicio * </div>\r\n              <flat-pickr class=\"mb-4 w-full\" :config=\"configdateTimePicker\" v-model=\"fecha_inicio\" />\r\n          </div>\r\n          <div class=\"vx-col sm:w-1/2 w-full\" align=\"left\">\r\n              <div style=\"font-size: 12px; color: gray;\">Fecha fin * </div>\r\n              <flat-pickr class=\"mb-4 w-full\" :config=\"configdateTimePicker\" v-model=\"fecha_fin\" />\r\n          </div>\r\n          <div class=\"vx-col sm:w-1/2 w-full\" align=\"left\">\r\n              <div style=\"font-size: 12px; color: gray;\">Cantidad intentos (min 1) * </div>\r\n              <vs-input disabled class=\"mb-3 w-full\" type=\"number\" v-model=\"cant_intentos\"/>\r\n          </div>\r\n          <div class=\"vx-col sm:w-1/2 w-full\" align=\"left\">\r\n              <div style=\"font-size: 12px; color: gray;\" align=\"center\">\r\n                  Ver respuestas\r\n                  <vs-switch color=\"success\" class=\"mt-3\" style=\"width: 150px;\" v-model=\"ver_respuestas\">\r\n                      <span slot=\"on\">Activado</span>\r\n                      <span slot=\"off\">Desactivado</span>\r\n                  </vs-switch>\r\n              </div>\r\n          </div>\r\n          <div class=\"vx-col w-full\" align=\"left\">\r\n            <vs-input class=\"mb-3 w-full\" label=\"Observaciones\" v-model=\"observaciones\"/>\r\n          </div>\r\n        </div>\r\n        <vs-button color=\"success\" class=\"w-full mb-3\" type=\"gradient\" @click=\"guardarConfiguracion()\">Guardar</vs-button>\r\n    </vs-popup>\r\n    <!----fin modal configuraciones-->\r\n    <vx-card>\r\n        <!-----listado instituciones--------->\r\n        <div v-if=\"instituciones\">\r\n        <vs-table stripe pagination max-items=\"25\" search :data=\"instituciones\">\r\n          <template slot=\"header\">\r\n            <h5>Instituciones</h5>\r\n            <p class=\"mt-1 ml-3\"><vs-chip color=\"primary\">Cantidad: {{ instituciones.length }}</vs-chip></p>\r\n          </template>\r\n          <template slot=\"thead\">\r\n              <vs-th>Institución</vs-th>\r\n              <vs-th>Ciudad</vs-th>\r\n              <vs-th>Periodo</vs-th>\r\n              <vs-th>Configuración</vs-th>\r\n              <vs-th>Acciones</vs-th>\r\n          </template>\r\n          <template slot-scope=\"{data}\">\r\n          <vs-tr :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n              <vs-td>\r\n                {{data[indextr].institucion.nombreInstitucion}}<br>\r\n              </vs-td>\r\n              <vs-td>\r\n                {{data[indextr].institucion.nombre_ciudad}}\r\n              </vs-td>\r\n              <vs-td>\r\n                <p v-for=\"(item,key) in arregloPeriodos\" :key=\"key\">\r\n                  <vs-chip v-if=\"item.id == tr.institucion.n_evaluacion\">Evaluación: <b class=\"ml-1\">{{ item.nombre }}</b></vs-chip>\r\n                </p>\r\n              </vs-td>\r\n              <vs-td>\r\n                Inicio: {{data[indextr].institucion.fecha_inicio}} <br>\r\n                Fin: {{data[indextr].institucion.fecha_fin}}<br>\r\n                Intentos: {{data[indextr].institucion.cant_evaluaciones}}<br>\r\n                Ver respuestas: <span v-if=\"data[indextr].institucion.ver_respuestas === 1\">SI</span>\r\n                <span v-if=\"data[indextr].institucion.ver_respuestas === 0\">NO</span>\r\n              </vs-td>\r\n\r\n              <vs-td class=\"text-center\">\r\n                  <vx-tooltip style=\"display: inline-block;\" text=\"Configurar institución\" position=\"top\" color=\"primary\">\r\n                      <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-settings\" @click=\"verInstitucion(data[indextr])\" color=\"primary\" type=\"line\"></vs-button>\r\n                  </vx-tooltip>\r\n              </vs-td>\r\n          </vs-tr>\r\n          </template>\r\n        </vs-table>\r\n        </div>\r\n        <!------fin listado instituciones--------->\r\n    </vx-card>\r\n  </div>\r\n</template>\r\n<script>\r\n    import axios from 'axios'\r\n    import vSelect from 'vue-select'\r\n    import flatPickr from 'vue-flatpickr-component'\r\n    import 'flatpickr/dist/flatpickr.css'\r\n    export default {\r\n        data(){\r\n          return {\r\n            usuario: [],\r\n            instituciones: [],\r\n            institucion: {},\r\n            modalConfigInstitucion: false,\r\n            configdateTimePicker: {\r\n                enableTime: true,\r\n                dateFormat: 'Y-m-d H:i:s'\r\n            },\r\n            ver_respuestas: false,\r\n            cant_intentos: 1,\r\n            fecha_inicio: '',\r\n            fecha_fin: '',\r\n            observaciones: '',\r\n            arregloPeriodos:[],\r\n          }\r\n        },\r\n        components: {\r\n          'v-select': vSelect,\r\n          flatPickr\r\n        },\r\n        created(){\r\n          this.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n          this.getInstituciones()\r\n          this.getPeriodosEvaluacion()\r\n        },\r\n        methods: {\r\n          getPeriodosEvaluacion() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'salle/periodos')\r\n              .then(function (response) {\r\n                me.arregloPeriodos = response.data;\r\n              })\r\n              .catch(function (error) {\r\n              })\r\n          },\r\n          getInstituciones(){\r\n            let me = this\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url+'instituciones_salle/'+localStorage.EvaluacionSelectSalle)\r\n            .then(res => {\r\n              me.$vs.loading.close()\r\n              me.instituciones = res.data.items\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n              me.$vs.loading.close()\r\n            })\r\n          },\r\n          verInstitucion(item){\r\n            let me = this\r\n            me.institucion = item\r\n            me.ver_respuestas = item.institucion.ver_respuestas\r\n            me.fecha_inicio = item.institucion.fecha_inicio\r\n            me.cant_intentos = 1 //item.institucion.cant_evaluaciones\r\n            me.fecha_fin = item.institucion.fecha_fin\r\n            me.observaciones = item.institucion.observaciones\r\n            me.modalConfigInstitucion = true\r\n          },\r\n          guardarConfiguracion(){\r\n            let me = this\r\n            if( me.fecha_inicio === '' ||  me.fecha_fin === '' ){\r\n              me.$vs.notify({\r\n              text:'Debe completar los campos obligatorios antes de guardar',\r\n              color:'warning',\r\n              iconPack: 'feather',\r\n              icon:'icon-alert-triangle'})\r\n              return\r\n            }\r\n            let id_configuracion = me.institucion.institucion.id_configuracion\r\n            let ver_respuestas = 0\r\n            if( me.ver_respuestas === true ){\r\n              ver_respuestas = 1\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('id_configuracion',   id_configuracion);\r\n            formData.append('id_institucion',     me.institucion.institucion.idInstitucion);\r\n            formData.append('fecha_inicio',       me.fecha_inicio);\r\n            formData.append('fecha_fin',          me.fecha_fin);\r\n            formData.append('cant_evaluaciones',  1);\r\n            formData.append('ver_respuestas',     ver_respuestas);\r\n            formData.append('observaciones',      me.observaciones);\r\n            formData.append('n_evaluacion',       localStorage.EvaluacionSelectSalle)\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'save_instituciones_salle', formData)\r\n            .then(res => {\r\n              me.getInstituciones()\r\n              me.modalConfigInstitucion = false\r\n              me.$vs.loading.close()\r\n              me.$vs.notify({\r\n              text:'Configuración guardada correctamente',\r\n              color:'success',\r\n              iconPack: 'feather',\r\n              icon:'icon-check'})\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n              me.$vs.loading.close()\r\n            })\r\n          }\r\n        },\r\n    }\r\n</script>\r\n"]}]}