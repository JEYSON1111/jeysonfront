{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\home\\docentes\\formulario\\components\\asesorSelectBook.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\home\\docentes\\formulario\\components\\asesorSelectBook.vue","mtime":1712682815982},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport vSelect from 'vue-select'\r\nimport {FormWizard, TabContent} from 'vue-form-wizard'\r\nimport 'vue-form-wizard/dist/vue-form-wizard.min.css'\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport \"vue-select/dist/vue-select.css\";\r\nVue.use(axios)\r\nVue.component(\"v-select\", vSelect);\r\nimport $ from 'jquery'\r\nexport default {\r\n  data() {\r\n    return {\r\n      id:0,\r\n      msgError:'',\r\n      getError:false,\r\n      user:{\r\n        idusuario:0,\r\n        cedula:'',\r\n        nombres:'',\r\n        apellidos:'',\r\n        email:'',\r\n        telefono:'',\r\n        periodoDescripcion:'',\r\n        nombreInstitucion:'',\r\n        periodo_id:'',\r\n      },\r\n      arregloManantial:[],\r\n      arregloRuta:[],\r\n      arregloComplementarias:[],\r\n      librosAsignados:[],\r\n      serie:{\r\n        //manatial\r\n        manantial:'',\r\n        ruta:'',\r\n        complementarias:'',\r\n      },\r\n      libro_generado_id:0,\r\n      deleteBook:false,\r\n    }\r\n  },\r\n  props:{\r\n        formularioNombreInstitucion:{\r\n          type:String,\r\n          default:0,\r\n        },\r\n        formularioPeriodo:{\r\n          type:String,\r\n          default:\"\",\r\n        },\r\n        formulario_id:{\r\n          type:Number,\r\n          default:0,\r\n        }\r\n    },\r\n  created(){\r\n    let me     = this;\r\n    me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n  },\r\n  mounted() {\r\n        let me = this;\r\n        if (localStorage.tk != null) {\r\n            this.$router.push('/home');\r\n        } else {}\r\n        me.getSeries();\r\n        me.getBooksGenerados();\r\n    },\r\n    methods: {\r\n        //para obtener  la series\r\n        getSeries() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'traerSeries')\r\n                .then(function (res) {\r\n                    me.arregloManantial         = res.data.filter(p => p.id_serie == 1 || p.id_serie == 2)\r\n                    me.arregloRuta              = res.data.filter(p => p.id_serie == 3 || p.id_serie == 4)\r\n                    me.arregloComplementarias   = res.data.filter(p => p.id_serie == 5 || p.id_serie == 6 || p.id_serie == 7 || p.id_serie == 8 || p.id_serie == 9)\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        //para obtener los libros generados\r\n        getBooksGenerados() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'getBooksGenerados?formulario_link_id='+me.formulario_id)\r\n                .then(function (res) {\r\n                   me.librosAsignados = res.data\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        openConfirm() {\r\n            let me = this;\r\n            let repetida = false;\r\n            let repe_asign = '';\r\n            //validar que almenos un libro sea seleccionado\r\n            if((me.serie.manantial == \"\" || me.serie.manantial == null) &&  (me.serie.ruta == \"\" || me.serie.ruta == null) && (me.serie.complementarias == \"\" || me.serie.complementarias == null)){\r\n                me.$vs.notify({\r\n                text:\"Debe seleccionar al menos un libro\",\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return\r\n            }\r\n            //VALIDACION DE LIBROS MANANTIAL\r\n            if (me.serie.manantial !== \"\" && me.librosAsignados != undefined) { //libros ya asignadas\r\n                for (let index = 0; index < me.serie.manantial.length; index++) {\r\n                    for (let j = 0; j < me.librosAsignados.length; j++) {\r\n                        if (me.serie.manantial[index].idLibro == me.librosAsignados[j].libro_id) {\r\n                            repetida = true;\r\n                            repe_asign +=me.serie.manantial[index].nombre + ' , ';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (repetida) {\r\n                me.$vs.notify({\r\n                    time: 5000,\r\n                    text: 'Estos libros de MANANTIAL ' + repe_asign + ' ya se encuentra asignados, verifique antes de continuar',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            //VALIDACION DE LIBROS RUTA\r\n            if (me.serie.ruta !== \"\"  && me.librosAsignados != undefined) { //libros ya asignadas\r\n                for (let index = 0; index < me.serie.ruta.length; index++) {\r\n                    for (let j = 0; j < me.librosAsignados.length; j++) {\r\n                        if (me.serie.ruta[index].idLibro == me.librosAsignados[j].libro_id) {\r\n                            repetida = true;\r\n                            repe_asign +=me.serie.ruta[index].nombre + ' , ';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (repetida) {\r\n                me.$vs.notify({\r\n                    time: 5000,\r\n                    text: 'Estos libros de RUTA ' + repe_asign + ' ya se encuentra asignados, verifique antes de continuar',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            //VALIDACION DE AREAS COMPLEMENTARIAS\r\n            if (me.serie.complementarias != '') { //libros ya asignadas\r\n                for (let index = 0; index < me.serie.complementarias.length; index++) {\r\n                    for (let j = 0; j < me.librosAsignados.length; j++) {\r\n                        if (me.serie.complementarias[index].idLibro == me.librosAsignados[j].libro_id) {\r\n                            repetida = true;\r\n                            repe_asign +=me.serie.complementarias[index].nombre + ' , ';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (repetida) {\r\n                me.$vs.notify({\r\n                    time: 5000,\r\n                    text: 'Estos libros de áreas COMPLEMENTARIAS ' + repe_asign + ' ya se encuentra asignados, verifique antes de continuar',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            \r\n            this.guardarFormulario()\r\n            \r\n        },\r\n        guardarFormulario(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('formulario_link_id',   me.formulario_id)\r\n            //Libros\r\n            formData.append('manantial',            JSON.stringify(me.serie.manantial))\r\n            formData.append('ruta',                 JSON.stringify(me.serie.ruta))\r\n            formData.append('complementarias',      JSON.stringify(me.serie.complementarias))\r\n            this.$http.post(this.$server_url+'asesorGeneraBook',formData)\r\n                .then(function (res) {\r\n                  if(res.data.status == 3){\r\n                    me.$vs.notify({\r\n                    text:res.data.message,\r\n                    color:'success',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check',\r\n                    time:8000\r\n                    })   \r\n                    return\r\n                  }\r\n                  me.$vs.notify({\r\n                  text:res.data.message,\r\n                  color:'success',\r\n                  iconPack: 'feather',\r\n                  icon:'icon-check',\r\n                  time:8000\r\n                  })\r\n                  me.limpiar();\r\n                  me.getBooksGenerados();\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        //cancelar libro\r\n        confirmDeleteBook(tr){\r\n            let me = this;\r\n            me.deleteBook = true;\r\n            me.libro_generado_id = tr.id\r\n        },\r\n        CancelarLibro(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'formularioDocente?cancelarGeneracionBook=yes&id='+me.libro_generado_id)\r\n                .then(function (res) {\r\n                   me.$vs.notify({\r\n                    text:\"Se elimino correctamente\",\r\n                    color:'success',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check',\r\n                    })  \r\n                    me.deleteBook = false;\r\n                    me.getBooksGenerados() \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        limpiar(){\r\n            let me                          = this;\r\n            me.user.idusuario               = 0\r\n            me.user.cedula                  = \"\"\r\n            me.user.nombres                 = \"\"\r\n            me.user.apellidos               = \"\"\r\n            me.user.email                   = \"\"\r\n            me.user.telefono                = \"\"\r\n            me.serie.manantial              = \"\"\r\n            me.serie.ruta                   = \"\"\r\n            me.serie.complementarias        = \"\"\r\n            me.librosAsignados              = []\r\n            me.id                           = 0\r\n        },\r\n        formSubmitted() {\r\n            alert(\"Form submitted!\");\r\n        },\r\n    },\r\n    components: {\r\n        FormWizard,\r\n        TabContent,\r\n        vSelect\r\n    }\r\n}\r\n",{"version":3,"sources":["asesorSelectBook.vue"],"names":[],"mappings":";AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"asesorSelectBook.vue","sourceRoot":"src/views/home/docentes/formulario/components","sourcesContent":["<template>\r\n    <div>\r\n        <div style=\"padding:0px 40px;\">\r\n            <vx-card class=\"mt-3\">\r\n                <p class=\"font-bold text-3xl text-warning\">Seleccione los libros que podran elegir los docentes</p>\r\n                <br>\r\n                <div class=\"vx-row mb-6\">\r\n                    <div class=\"vx-col sm:w-1/2 w-full mb-2\" style=\"margin-top:-15px;\">\r\n                        <vs-list>\r\n                            <vs-list-item title=\"Institución\"   :subtitle=\"formularioNombreInstitucion\"></vs-list-item>\r\n                            <vs-list-item title=\"Período\"       :subtitle=\"formularioPeriodo\"></vs-list-item>\r\n                        </vs-list>\r\n                    </div>\r\n                </div>\r\n            </vx-card>\r\n            <!--REGISTRO LIBROS DE AREAS BASICAS-->\r\n            <vx-card class=\"mt-3\">\r\n                <p class=\"text-2xl font-medium\">Áreas básicas</p>\r\n                <small>Puede ser seleccionar uno más libros</small>\r\n                <vs-divider></vs-divider>\r\n                <div class=\"flex\">\r\n                    <div style=\"width:50%\">\r\n                        <p class=\"text-primary text-2xl font-light\">Seleccione los libros de la serie <code>MANANTIAL</code></p>\r\n                    </div>\r\n                    <div style=\"width:50%\" class=\"flex\">\r\n                        <v-select multiple  :closeOnSelect=\"false\" :options=\"arregloManantial\" :reduce=\"arregloManantial => arregloManantial\" label=\"nombre\" class=\"w-full\" v-model=\"serie.manantial\" />\r\n                    </div>\r\n                </div>\r\n                <div class=\"flex mt-5\">\r\n                    <div style=\"width:50%\">\r\n                        <p class=\"text-primary text-2xl font-light\">Seleccione los libros de la serie <code>RUTA</code></p>\r\n                    </div>\r\n                    <div style=\"width:50%\" class=\"flex\">\r\n                        <v-select multiple :closeOnSelect=\"false\" :options=\"arregloRuta\" :reduce=\"arregloRuta => arregloRuta\" label=\"nombre\" class=\"w-full\" v-model=\"serie.ruta\" />\r\n                    </div>\r\n                </div>\r\n            </vx-card>\r\n            <!--FIN REGISTRO LIBROS DE AREAS BASICAS-->\r\n            <!--REGISTRO LIBROS DE AREAS COMPLEMENTARIAS-->\r\n            <vx-card class=\"mt-3\">\r\n                <p class=\"text-2xl font-medium\">Áreas Complementarias</p>\r\n                <small>Puede ser seleccionar uno más libros</small>\r\n                <vs-divider></vs-divider>\r\n                <div class=\"flex\">\r\n                    <div style=\"width:50%\">\r\n                        <p class=\"text-primary text-2xl font-light\">Seleccione los libros de áreas   <code>COMPLEMENTARIAS</code> </p>\r\n                    </div>\r\n                    <div style=\"width:50%\" class=\"flex\">\r\n                        <v-select multiple :closeOnSelect=\"false\" :options=\"arregloComplementarias\" :reduce=\"arregloComplementarias => arregloComplementarias\" label=\"nombre\" class=\"w-full\" v-model=\"serie.complementarias\" />\r\n                    </div>\r\n                </div>\r\n                <div v-if=\"deleteBook\" class=\"mt-4\">\r\n                    <p class=\"font-bold text-danger text-2xl\">Estas seguro de eliminar este libro generado para los docentes?</p>\r\n                    <vs-divider></vs-divider>\r\n                    <div class=\"flex\">\r\n                        <vs-button color=\"warning\" @click=\"CancelarLibro();\" type=\"filled\">Si</vs-button>\r\n                        <vs-button  class=\"ml-2\" color=\"primary\" @click=\"deleteBook = false;\" type=\"border\">Cancelar</vs-button>\r\n                    </div>\r\n                </div>\r\n                <div v-else>\r\n                    <div v-if=\"librosAsignados\" class=\"vx-col w-full\" style=\"margin-top:30px;\">\r\n                        <vs-divider color=\"primary\">Usted tiene asignado estos libros:</vs-divider>\r\n                        <div class=\"vx-col w-full\" align=\"left\">\r\n                            <vs-list>\r\n                                <vs-list-item class=\"ml-6\" icon-pack=\"feather\" icon=\"icon-check\" v-for=\"(item,index) in librosAsignados\" :key=\"index\" :subtitle=\"item.nombrelibro\">\r\n                                    <vx-tooltip  style=\"display: inline-block;\" text=\"Eliminar\" position=\"top\" color=\"danger\">\r\n                                        <vs-button class=\"mr-6\" size=\"small\" @click=\"confirmDeleteBook(item)\" color=\"danger\" icon-pack=\"feather\" icon=\"icon-trash\"></vs-button>\r\n                                    </vx-tooltip>\r\n                                </vs-list-item>\r\n                            </vs-list>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"flex mt-5\">\r\n                        <vs-button color=\"success\" v-if=\"getError == false\" icon=\"save\" class=\"mr-3 mb-2\" @click=\"openConfirm()\">Guardar Selección</vs-button>\r\n                    </div>\r\n                </div>\r\n              \r\n            </vx-card>\r\n            <!--FIN REGISTRO LIBROS DE AREAS BASICAS-->\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport vSelect from 'vue-select'\r\nimport {FormWizard, TabContent} from 'vue-form-wizard'\r\nimport 'vue-form-wizard/dist/vue-form-wizard.min.css'\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport \"vue-select/dist/vue-select.css\";\r\nVue.use(axios)\r\nVue.component(\"v-select\", vSelect);\r\nimport $ from 'jquery'\r\nexport default {\r\n  data() {\r\n    return {\r\n      id:0,\r\n      msgError:'',\r\n      getError:false,\r\n      user:{\r\n        idusuario:0,\r\n        cedula:'',\r\n        nombres:'',\r\n        apellidos:'',\r\n        email:'',\r\n        telefono:'',\r\n        periodoDescripcion:'',\r\n        nombreInstitucion:'',\r\n        periodo_id:'',\r\n      },\r\n      arregloManantial:[],\r\n      arregloRuta:[],\r\n      arregloComplementarias:[],\r\n      librosAsignados:[],\r\n      serie:{\r\n        //manatial\r\n        manantial:'',\r\n        ruta:'',\r\n        complementarias:'',\r\n      },\r\n      libro_generado_id:0,\r\n      deleteBook:false,\r\n    }\r\n  },\r\n  props:{\r\n        formularioNombreInstitucion:{\r\n          type:String,\r\n          default:0,\r\n        },\r\n        formularioPeriodo:{\r\n          type:String,\r\n          default:\"\",\r\n        },\r\n        formulario_id:{\r\n          type:Number,\r\n          default:0,\r\n        }\r\n    },\r\n  created(){\r\n    let me     = this;\r\n    me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n  },\r\n  mounted() {\r\n        let me = this;\r\n        if (localStorage.tk != null) {\r\n            this.$router.push('/home');\r\n        } else {}\r\n        me.getSeries();\r\n        me.getBooksGenerados();\r\n    },\r\n    methods: {\r\n        //para obtener  la series\r\n        getSeries() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'traerSeries')\r\n                .then(function (res) {\r\n                    me.arregloManantial         = res.data.filter(p => p.id_serie == 1 || p.id_serie == 2)\r\n                    me.arregloRuta              = res.data.filter(p => p.id_serie == 3 || p.id_serie == 4)\r\n                    me.arregloComplementarias   = res.data.filter(p => p.id_serie == 5 || p.id_serie == 6 || p.id_serie == 7 || p.id_serie == 8 || p.id_serie == 9)\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        //para obtener los libros generados\r\n        getBooksGenerados() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'getBooksGenerados?formulario_link_id='+me.formulario_id)\r\n                .then(function (res) {\r\n                   me.librosAsignados = res.data\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        openConfirm() {\r\n            let me = this;\r\n            let repetida = false;\r\n            let repe_asign = '';\r\n            //validar que almenos un libro sea seleccionado\r\n            if((me.serie.manantial == \"\" || me.serie.manantial == null) &&  (me.serie.ruta == \"\" || me.serie.ruta == null) && (me.serie.complementarias == \"\" || me.serie.complementarias == null)){\r\n                me.$vs.notify({\r\n                text:\"Debe seleccionar al menos un libro\",\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return\r\n            }\r\n            //VALIDACION DE LIBROS MANANTIAL\r\n            if (me.serie.manantial !== \"\" && me.librosAsignados != undefined) { //libros ya asignadas\r\n                for (let index = 0; index < me.serie.manantial.length; index++) {\r\n                    for (let j = 0; j < me.librosAsignados.length; j++) {\r\n                        if (me.serie.manantial[index].idLibro == me.librosAsignados[j].libro_id) {\r\n                            repetida = true;\r\n                            repe_asign +=me.serie.manantial[index].nombre + ' , ';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (repetida) {\r\n                me.$vs.notify({\r\n                    time: 5000,\r\n                    text: 'Estos libros de MANANTIAL ' + repe_asign + ' ya se encuentra asignados, verifique antes de continuar',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            //VALIDACION DE LIBROS RUTA\r\n            if (me.serie.ruta !== \"\"  && me.librosAsignados != undefined) { //libros ya asignadas\r\n                for (let index = 0; index < me.serie.ruta.length; index++) {\r\n                    for (let j = 0; j < me.librosAsignados.length; j++) {\r\n                        if (me.serie.ruta[index].idLibro == me.librosAsignados[j].libro_id) {\r\n                            repetida = true;\r\n                            repe_asign +=me.serie.ruta[index].nombre + ' , ';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (repetida) {\r\n                me.$vs.notify({\r\n                    time: 5000,\r\n                    text: 'Estos libros de RUTA ' + repe_asign + ' ya se encuentra asignados, verifique antes de continuar',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            //VALIDACION DE AREAS COMPLEMENTARIAS\r\n            if (me.serie.complementarias != '') { //libros ya asignadas\r\n                for (let index = 0; index < me.serie.complementarias.length; index++) {\r\n                    for (let j = 0; j < me.librosAsignados.length; j++) {\r\n                        if (me.serie.complementarias[index].idLibro == me.librosAsignados[j].libro_id) {\r\n                            repetida = true;\r\n                            repe_asign +=me.serie.complementarias[index].nombre + ' , ';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (repetida) {\r\n                me.$vs.notify({\r\n                    time: 5000,\r\n                    text: 'Estos libros de áreas COMPLEMENTARIAS ' + repe_asign + ' ya se encuentra asignados, verifique antes de continuar',\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n            }\r\n            \r\n            this.guardarFormulario()\r\n            \r\n        },\r\n        guardarFormulario(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('formulario_link_id',   me.formulario_id)\r\n            //Libros\r\n            formData.append('manantial',            JSON.stringify(me.serie.manantial))\r\n            formData.append('ruta',                 JSON.stringify(me.serie.ruta))\r\n            formData.append('complementarias',      JSON.stringify(me.serie.complementarias))\r\n            this.$http.post(this.$server_url+'asesorGeneraBook',formData)\r\n                .then(function (res) {\r\n                  if(res.data.status == 3){\r\n                    me.$vs.notify({\r\n                    text:res.data.message,\r\n                    color:'success',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check',\r\n                    time:8000\r\n                    })   \r\n                    return\r\n                  }\r\n                  me.$vs.notify({\r\n                  text:res.data.message,\r\n                  color:'success',\r\n                  iconPack: 'feather',\r\n                  icon:'icon-check',\r\n                  time:8000\r\n                  })\r\n                  me.limpiar();\r\n                  me.getBooksGenerados();\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        //cancelar libro\r\n        confirmDeleteBook(tr){\r\n            let me = this;\r\n            me.deleteBook = true;\r\n            me.libro_generado_id = tr.id\r\n        },\r\n        CancelarLibro(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'formularioDocente?cancelarGeneracionBook=yes&id='+me.libro_generado_id)\r\n                .then(function (res) {\r\n                   me.$vs.notify({\r\n                    text:\"Se elimino correctamente\",\r\n                    color:'success',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check',\r\n                    })  \r\n                    me.deleteBook = false;\r\n                    me.getBooksGenerados() \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        limpiar(){\r\n            let me                          = this;\r\n            me.user.idusuario               = 0\r\n            me.user.cedula                  = \"\"\r\n            me.user.nombres                 = \"\"\r\n            me.user.apellidos               = \"\"\r\n            me.user.email                   = \"\"\r\n            me.user.telefono                = \"\"\r\n            me.serie.manantial              = \"\"\r\n            me.serie.ruta                   = \"\"\r\n            me.serie.complementarias        = \"\"\r\n            me.librosAsignados              = []\r\n            me.id                           = 0\r\n        },\r\n        formSubmitted() {\r\n            alert(\"Form submitted!\");\r\n        },\r\n    },\r\n    components: {\r\n        FormWizard,\r\n        TabContent,\r\n        vSelect\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.banner{\r\n    background: #00B4DB;  /* fallback for old browsers */\r\nbackground: -webkit-linear-gradient(to right, #0083B0, #00B4DB);  /* Chrome 10-25, Safari 5.1-6 */\r\nbackground: linear-gradient(to right, #0083B0, #00B4DB); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\r\nbox-shadow: 5px 6px 5px #0083B0;\r\n}\r\n</style>\r\n"]}]}