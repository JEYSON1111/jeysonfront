{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\facturacion\\10_10_1_4\\orden_pedido\\orden_trabajo.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\facturacion\\10_10_1_4\\orden_pedido\\orden_trabajo.vue","mtime":1712682815915},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n  import Vue from \"vue\";\r\n  import axios from \"axios\";\r\n  import vSelect from \"vue-select\";\r\n  import TableOrdenesVue from \"./components/TableOrdenes.vue\";\r\n  export default {\r\n    data() {\r\n      return {\r\n        k: \"\",\r\n        counter: 0,\r\n        Ordentrabajo: [],\r\n        popupdetalle: false,\r\n        popupActivoGuardar: false,\r\n        popupActivoEditar: false,\r\n        popupEliminar: false,\r\n        popupActivoDesactivar: false,\r\n        popupActivoEliminar: false,\r\n        popuptemporada: false,\r\n        popupadd: false,\r\n        tabTemporada: {\r\n          temp: \"\",\r\n          anio: \"\",\r\n        },\r\n        changeValues: false,\r\n        tabOrdenTrabajo: {\r\n          codigo: \"\",\r\n          fecha: \"\",\r\n          serie: \"\",\r\n          prov_codigo: \"\",\r\n          observacion: \"\",\r\n          pro_car_codigo: \"\",\r\n        },\r\n        inputs: [],\r\n        id: \"\",\r\n        idusuarioresp: \"\",\r\n        pro_codigo: \"\",\r\n        region: \"\",\r\n        anio: \"\",\r\n        val:0,\r\n        Ordentodo: [],\r\n        obser: \"\",\r\n        Producto: [],\r\n        busquedaxcodigo: \"\",\r\n        valorBusqueda: \"0\",\r\n        checkBox_mostrarinactivos: false,\r\n        options1: [\r\n          { text: \"COSTA\", value: \"C\" },\r\n          { text: \"SIERRA\", value: \"S\" },\r\n        ],\r\n        options3: [],\r\n        options4: [],\r\n        options: [],\r\n        options2: [\r\n          { text: \"2010\", value: \"10\" },\r\n          { text: \"2011\", value: \"11\" },\r\n          { text: \"2012\", value: \"12\" },\r\n          { text: \"2013\", value: \"13\" },\r\n          { text: \"2014\", value: \"14\" },\r\n          { text: \"2015\", value: \"15\" },\r\n          { text: \"2016\", value: \"16\" },\r\n          { text: \"2017\", value: \"17\" },\r\n          { text: \"2018\", value: \"18\" },\r\n          { text: \"2019\", value: \"19\" },\r\n          { text: \"2020\", value: \"20\" },\r\n          { text: \"2021\", value: \"21\" },\r\n          { text: \"2022\", value: \"22\" },\r\n          { text: \"2023\", value: \"23\" },\r\n          { text: \"2024\", value: \"24\" },\r\n          { text: \"2025\", value: \"25\" },\r\n        ],\r\n      };\r\n    },\r\n  \r\n    components: {\r\n      \"v-select\": vSelect,\r\n      TableOrdenesVue\r\n    },\r\n    computed: {\r\n   \r\n    },\r\n    mounted() {\r\n      this.mostrarFechayhora();\r\n      this.mostrarFecha();\r\n    },\r\n    methods: {\r\n      filterKey(e) {\r\n        const key = e.key;\r\n        if (key === \".\" || key === \"-\" || key === \"e\" || key === \"+\")\r\n          return e.preventDefault();\r\n      },\r\n      Validarselects() {\r\n        let me = this;\r\n        if (me.tabTemporada.temp == null || me.tabTemporada.temp == 0) {\r\n          me.$vs.notify({\r\n            text: \"Seleccione..\",\r\n            color: \"warning\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-check\",\r\n          });\r\n          return false;\r\n        }\r\n        if (me.tabTemporada.anio == null || me.tabTemporada.anio == 0) {\r\n          me.$vs.notify({\r\n            text: \"Seleccione..\",\r\n            color: \"warning\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-check\",\r\n          });\r\n          return false;\r\n        }\r\n        me.$vs.loading();\r\n        me.val=1;\r\n        this.getNuevo(me.tabTemporada.temp.value, me.tabTemporada.anio.value);\r\n        me.$vs.loading.close();\r\n      },\r\n      getDeta(tr) {\r\n        this.popupdetalle = true;\r\n        this.tabOrdenTrabajo.codigo = tr.or_codigo;\r\n        this.tabOrdenTrabajo.fecha = tr.or_fecha;\r\n        this.tabOrdenTrabajo.observacion = tr.or_observacion;\r\n        this.options4 = [];\r\n        this.tabOrdenTrabajo.prov_codigo = {prov_codigo:tr.prov_codigo, prov_nombre:tr.prov_nombre};\r\n        this.inputs = [];\r\n  \r\n        let me = this;\r\n        me.$vs.loading();\r\n        this.getprov();\r\n        var url = \"\";\r\n        url = this.$server_url + \"Get_Ordendetalle?or_codigo=\" + tr.or_codigo;\r\n        this.$http\r\n          .get(url)\r\n          .then(function (res) {\r\n            me.inputs = res.data;\r\n  \r\n            me.inputs.push();\r\n            me.$vs.loading.close();\r\n            if (res.data.message) {\r\n              me.$vs.notify({\r\n                text: res.data.message,\r\n                color: \"success\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-user\",\r\n              });\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error + \" error\");\r\n            this.inputs = [];\r\n            me.$vs.loading.close();\r\n          });\r\n      },\r\n      getOrden() {\r\n        let me = this;\r\n        let url =\r\n          this.$server_url +\r\n          \"GetOrden_xfiltro?busqueda=undefined&razonbusqueda=\" +\r\n          me.tabOrdenTrabajo.codigo;\r\n        me.$vs.loading();\r\n        this.$http\r\n          .get(url)\r\n          .then(function (res) {\r\n            me.Ordentrabajo = res.data;\r\n  \r\n            if (me.Ordentrabajo.length === 0) {\r\n              me.$vs.notify({\r\n                text: \"No hay órden de trabajo para esta búsqueda\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n              me.Ordentrabajo = [];\r\n              me.region.text = \"\";\r\n              me.anio.text = \"\";\r\n              me.$vs.loading.close();\r\n            } else {\r\n              me.$vs.loading.close();\r\n              if (res.data.message) {\r\n                me.$vs.notify({\r\n                  text: res.data.message,\r\n                  color: \"success\",\r\n                  iconPack: \"feather\",\r\n                  icon: \"icon-user\",\r\n                });\r\n              }\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            if (error.response && error.response.status === 404) {\r\n              me.$vs.notify({\r\n                text: \"No hay órden de trabajo para esta búsqueda\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n              me.Ordentrabajo = [];\r\n              me.$vs.loading.close();\r\n            } else {\r\n              console.log(error + \" error\");\r\n              me.$vs.loading.close();\r\n            }\r\n          });\r\n      },\r\n      getOrdenParametro() {\r\n        let me = this;\r\n        let url;\r\n        if (me.busqueda == \"codigo\") {\r\n          if (me.busquedaxcodigo.length < 2) {\r\n            me.$vs.notify({\r\n              text: \"Minimo 2 caracteres de busqueda\",\r\n              color: \"warning\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n            return false;\r\n          }\r\n          url =\r\n            this.$server_url +\r\n            \"GetOrden_xfiltro?busqueda=\" +\r\n            me.busqueda +\r\n            \"&razonbusqueda=\" +\r\n            me.busquedaxcodigo;\r\n        } else if (me.busqueda == \"undefined\") {\r\n          if (me.busquedaxcodigo.length < 2) {\r\n            me.$vs.notify({\r\n              text: \"Minimo 2 caracteres de busqueda\",\r\n              color: \"warning\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n            return false;\r\n          }\r\n          url =\r\n            this.$server_url +\r\n            \"GetOrden_xfiltro?busqueda=\" +\r\n            me.busqueda +\r\n            \"&razonbusqueda=\" +\r\n            me.busquedaxcodigo;\r\n        } else if (me.busqueda == \"temporada\") {\r\n          let a = me.region.value + me.anio.value;\r\n          url =\r\n            this.$server_url +\r\n            \"GetOrden_xfiltro?busqueda=\" +\r\n            me.busqueda +\r\n            \"&razonbusqueda=\" +\r\n            a;\r\n        } else {\r\n          url = this.$server_url + \"GetOrden_xfiltro?busqueda=\" + me.busqueda;\r\n        }\r\n        me.$vs.loading();\r\n        this.$http\r\n          .get(url)\r\n          .then(function (res) {\r\n            me.Ordentrabajo = res.data;\r\n  \r\n            if (me.Ordentrabajo.length === 0) {\r\n              me.$vs.notify({\r\n                text: \"No hay órden de trabajo para esta búsqueda\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n              me.Ordentrabajo = [];\r\n              me.$vs.loading.close();\r\n            } else {\r\n              me.$vs.loading.close();\r\n              if (res.data.message) {\r\n                me.$vs.notify({\r\n                  text: res.data.message,\r\n                  color: \"success\",\r\n                  iconPack: \"feather\",\r\n                  icon: \"icon-user\",\r\n                });\r\n              }\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            if (error.response && error.response.status === 404) {\r\n              me.$vs.notify({\r\n                text: \"No hay órden de trabajo para esta búsqueda\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n              me.Ordentrabajo = [];\r\n              me.$vs.loading.close();\r\n            } else {\r\n              console.log(error + \" error\");\r\n              me.$vs.loading.close();\r\n            }\r\n          });\r\n      },\r\n      mostrarFechayhora: function () {\r\n        const date = new Date();\r\n        const formatear =\r\n          date.getFullYear() +\r\n          \"-\" +\r\n          (\"0\" + (date.getMonth() + 1)).slice(-2) +\r\n          \"-\" +\r\n          (\"0\" + date.getDate()).slice(-2) +\r\n          \" \" +\r\n          (\"0\" + date.getHours()).slice(-2) +\r\n          \":\" +\r\n          (\"0\" + date.getMinutes()).slice(-2) +\r\n          \":\" +\r\n          (\"0\" + date.getSeconds()).slice(-2);\r\n  \r\n        return formatear;\r\n      },\r\n      mostrarFecha: function () {\r\n        let currendate = new Date();\r\n        let Nueva = new Date();\r\n        Nueva.setDate(currendate.getDate() + 15);\r\n        const res =\r\n          Nueva.getFullYear() +\r\n          \"-\" +\r\n          (\"0\" + (Nueva.getMonth() + 1)).slice(-2) +\r\n          \"-\" +\r\n          (\"0\" + Nueva.getDate()).slice(-2);\r\n        return res;\r\n      },\r\n      add(k) {\r\n        let a, b, c, d, e, f, g, h, i, j;\r\n        let me = this;\r\n        let fe = me.mostrarFecha();\r\n  \r\n        me.$vs.loading();\r\n        var nombre = me.pro_codigo;\r\n        fetch(this.$server_url + \"GetProductoCaracter?pro_codigo=\" + nombre) // llamamos a la ruta del controlador\r\n          .then((res) => res.json())\r\n          .then((res) => {\r\n            Object.entries(res[0]).forEach((elem) => {\r\n              if (elem[0] == \"pro_codigo\") {\r\n                a = elem[1];\r\n              } else if (elem[0] == \"pro_nombre\") {\r\n                b = elem[1];\r\n              } else if (elem[0] == \"pro_tama\\u00f1o\") {\r\n                c = elem[1];\r\n              } else if (elem[0] == \"mat_in_codigo\") {\r\n                d = elem[1];\r\n              } else if (elem[0] == \"pro_int_tinta\") {\r\n                e = elem[1];\r\n              } else if (elem[0] == \"mat_cub_codigo\") {\r\n                f = elem[1];\r\n              } else if (elem[0] == \"pro_cub_recubrimiento\") {\r\n                g = elem[1];\r\n              } else if (elem[0] == \"pro_cub_tintas\") {\r\n                h = elem[1];\r\n              } else if (elem[0] == \"pro_acabados\") {\r\n                i = elem[1];\r\n              } else if (elem[0] == \"pro_int_pagina\") {\r\n                j = elem[1];\r\n              }\r\n            });\r\n            this.inputs.push({\r\n              id: 0,\r\n              pro_codigo: a,\r\n              pro_nombre: b,\r\n              pro_int_pagina: j,\r\n              pro_tamaño: c,\r\n              pro_acabados: i,\r\n              pro_cub_recubrimiento: g,\r\n              cantidad: \"\",\r\n              fe_entrega: fe,\r\n              observacion: \"\",\r\n              mat_in_codigo: d,\r\n              pro_int_tinta: e,\r\n              mat_cub_codigo: f,\r\n              pro_cub_tintas: h,\r\n            });\r\n            me.pro_codigo = \"\";\r\n  \r\n            me.$vs.loading.close();\r\n          })\r\n          .catch(function (error) {\r\n            if (error.response != \"\") {\r\n              me.$vs.notify({\r\n                text:\r\n                  \"No esta registrado las caracteristicas del producto para la orden de trabajo en esta búsqueda\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n              me.$vs.loading.close();\r\n            } else {\r\n              console.log(error + \" error\");\r\n              me.$vs.loading.close();\r\n            }\r\n          });\r\n      },\r\n      remove(index) {\r\n        let me = this;\r\n        let preId = 0;\r\n        preId = this.inputs[index].id;\r\n        if (preId > 0) {\r\n          let formData = new FormData();\r\n          formData.append(\"id\", preId);\r\n  \r\n          this.inputs.splice(index, 1);\r\n        } else {\r\n          this.inputs.splice(index, 1);\r\n        }\r\n      },\r\n      getremove1(index, b) {\r\n        this.popupEliminar = true;\r\n  \r\n        this.tabOrdenTrabajo.codigo = b;\r\n        this.k = index;\r\n      },\r\n      remove1(index, b) {\r\n        let me = this;\r\n        let preId = 0;\r\n        let datos = {\r\n          det_or_codigo: b,\r\n        };\r\n        me.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"Eliminar_OrdenDetalle\", datos)\r\n          .then((res) => {\r\n            preId = this.inputs[index].id;\r\n            if (preId > 0) {\r\n              let formData = new FormData();\r\n              formData.append(\"id\", preId);\r\n  \r\n              this.inputs.splice(index, 1);\r\n            } else {\r\n              this.inputs.splice(index, 1);\r\n            }\r\n            me.$vs.loading.close();\r\n  \r\n            me.$vs.notify({\r\n              text: \"Detalle de la orden eliminado con exito\",\r\n              color: \"success\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n          })\r\n          .catch(function (error) {\r\n            me.$vs.loading.close();\r\n            me.$vs.notify({\r\n              text: \"Detalle de la orden no se pudo eliminar\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n      edit() {\r\n        let formData = new FormData();\r\n        formData.append(\"data_detalleorden\", JSON.stringify(this.inputs));\r\n        this.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"PostOrdenDetalle_Editar\", formData)\r\n          .then((res) => {\r\n            this.$vs.loading.close();\r\n            this.getOrden();\r\n            this.$vs.notify({\r\n              text: \"Detalle de orden editado con exito\",\r\n              color: \"success\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n          })\r\n          .catch(function () {\r\n            this.$vs.loading.close();\r\n            this.$vs.notify({\r\n              text: \"Detalle de Orden de trabajo no se pudo editar\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n  \r\n      getTemporada() {\r\n        this.val=0;\r\n        this.popupActivoGuardar = true;\r\n        this.tabTemporada.temp = \"\";\r\n        this.tabTemporada.anio = {text:'2024', value:'24'};\r\n        this.mostrarFecha();\r\n      },\r\n      \r\n      //SECCION GUARDAR NUEVO PRODUCTO\r\n      getDetallar() {\r\n        this.popupadd = true;\r\n        this.popupActivoEditar = false;\r\n        this.inputs = [];\r\n        this.getserie();\r\n      },\r\n      getNuevo(a, b) {\r\n        let me = this;\r\n        const usuariorespo = localStorage.getItem(\"usuario\");\r\n        const usuarioObjeto = JSON.parse(usuariorespo);\r\n        me.idusuarioresp = usuarioObjeto.iniciales;\r\n        me.tabOrdenTrabajo.observacion = \"\";\r\n        me.options4 = [];\r\n        me.pro_codigo = \"\";\r\n  \r\n        let c, d;\r\n        let ne = [];\r\n  \r\n        var f = this.mostrarFechayhora();\r\n        if (!a || !b) {\r\n          this.$vs.notify({\r\n            text: \"seleccione los datos antes \",\r\n            color: \"danger\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-triangle\",\r\n          });\r\n          return;\r\n        } else {\r\n          me.$vs.loading();\r\n          \r\n          me.getserie();\r\n          me.getprov();\r\n          this.$http\r\n            .get(this.$server_url + \"Get_Codigo\")\r\n            .then((res) => {\r\n              ne = res.data;\r\n              c = ne[0];\r\n              d = ne[1];\r\n              me.id = c + \"-\" + a + b + \"-\" + me.idusuarioresp + \"-\" + d;\r\n              me.$vs.loading.close();\r\n              me.tabOrdenTrabajo.codigo = me.id;\r\n              me.tabOrdenTrabajo.fecha = me.mostrarFechayhora();\r\n              me.tabOrdenTrabajo.prov_codigo = \"\";\r\n            })\r\n            .catch((err) => {\r\n              console.log(err);\r\n              me.$vs.loading.close();\r\n            });\r\n          this.popupActivoGuardar = true;\r\n          this.inputs = [];\r\n        }\r\n      },\r\n      getserie() {\r\n        let me = this;\r\n        me.pro_codigo = \"\";\r\n        me.options3 = [];\r\n        this.$http\r\n          .get(this.$server_url + \"GetProd\")\r\n          .then((res) => {\r\n            me.options3 = res.data;\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            me.options3 = [];\r\n          });\r\n      },\r\n      getprov() {\r\n        let me = this;\r\n        me.options4 = [];\r\n        this.$http\r\n          .get(this.$server_url + \"Get_provedor\")\r\n          .then((res) => {\r\n            me.options4 = res.data;\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            me.options4 = [];\r\n            me.$vs.loading.close();\r\n          });\r\n      },\r\n      guardarnuevo1() {\r\n        let me = this;\r\n        var f = me.mostrarFechayhora();\r\n        let cod = me.id;\r\n        let a = me.tabOrdenTrabajo.prov_codigo.prov_codigo;\r\n  \r\n        let b = \"1\";\r\n        console.log(a);\r\n        if (me.tabOrdenTrabajo.observacion==0 ||me.tabOrdenTrabajo.observacion==null || me.tabOrdenTrabajo.prov_codigo.prov_codigo==null ) {\r\n          me.$vs.notify({\r\n            text: \"Escriba los datos antes de guardar\",\r\n            color: \"danger\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-triangle\",\r\n          });\r\n          return;\r\n        }\r\n        if (me.inputs.length == 0) {\r\n          me.$vs.notify({\r\n            text: \"Agregue los detalles antes de guardar\",\r\n            color: \"danger\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-triangle\",\r\n          });\r\n          return;\r\n        }\r\n        let datos = {\r\n          or_codigo: cod,\r\n          usu_codigo: me.idusuarioresp,\r\n          or_fecha: f,\r\n          prov_codigo: parseInt(a),\r\n          or_estado: parseInt(b),\r\n          or_observacion: me.tabOrdenTrabajo.observacion,\r\n        };\r\n        me.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"PostOrden_Registrar_modificar\", datos)\r\n          .then((res) => {\r\n            me.guardarnuevo();\r\n            me.$vs.loading.close();\r\n            me.Ordentrabajo = [];\r\n            this.popupActivoEditar = false;\r\n            this.popupActivoDesactivar = false;\r\n            this.popupActivoGuardar = false;\r\n            this.popupActivoEliminar = false;\r\n          })\r\n          .catch(function () {\r\n            me.$vs.loading.close();\r\n            me.$vs.notify({\r\n              text: \"Orden de trabajo no se pudo guardar\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n  \r\n      guardarnuevo() {\r\n        let me = this;\r\n        me.id = me.tabOrdenTrabajo.codigo;\r\n        let formData = new FormData();\r\n  \r\n        formData.append(\"data_detalleorden\", JSON.stringify(me.inputs));\r\n        formData.append(\"or_codigo\", me.id);\r\n        me.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"PostOrdenDetalle_Registra\", formData)\r\n          .then((res) => {\r\n            me.Ordentrabajo = [];\r\n            me.$vs.loading.close();\r\n            me.getOrden();\r\n            me.$vs.notify({\r\n              text: \"La orden de trabajo y los detalles se ha guardado con exito\",\r\n              color: \"success\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n            this.getCancelar();\r\n          })\r\n          .catch(function () {\r\n            me.$vs.loading.close();\r\n            me.$vs.notify({\r\n              text: \"Orden de trabajo no se pudo guardar\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n      getEditar(tr) {\r\n        this.popupActivoEditar = true;\r\n        this.tabOrdenTrabajo.codigo = tr.or_codigo;\r\n        this.tabOrdenTrabajo.fecha = tr.or_fecha;\r\n        this.tabOrdenTrabajo.observacion = tr.or_observacion;\r\n        this.options4 = [];\r\n        this.getprov();\r\n        this.tabOrdenTrabajo.prov_codigo = {prov_codigo:tr.prov_codigo, prov_nombre:tr.prov_nombre};\r\n        this.inputs = [];\r\n        let me = this;\r\n        me.$vs.loading();\r\n        var url = \"\";\r\n        url = this.$server_url + \"Get_Ordendetalle?or_codigo=\" + tr.or_codigo;\r\n        this.$http\r\n          .get(url)\r\n          .then(function (res) {\r\n            me.inputs = res.data;\r\n            me.$vs.loading.close();\r\n            if (res.data.message) {\r\n              me.$vs.notify({\r\n                text: res.data.message,\r\n                color: \"success\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-user\",\r\n              });\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error + \" error\");\r\n            this.inputs = [];\r\n            me.$vs.loading.close();\r\n          });\r\n      },\r\n      editar() {\r\n        let me = this;\r\n        if (!me.tabOrdenTrabajo.observacion) {\r\n          me.$vs.notify({\r\n            text: \"Escriba los datos antes de editar\",\r\n            color: \"danger\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-triangle\",\r\n          });\r\n          return;\r\n        }\r\n        let datos = {\r\n          or_codigo: me.tabOrdenTrabajo.codigo,\r\n          or_observacion: me.tabOrdenTrabajo.observacion,\r\n        };\r\n        me.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"PostOrden_Registrar_modificar\", datos)\r\n          .then((res) => {\r\n            me.edit();\r\n            me.$vs.loading.close();\r\n            this.popupActivoEditar = false;\r\n            me.Ordentrabajo = [];\r\n          })\r\n          .catch(function (error) {\r\n            me.$vs.loading.close();\r\n            me.$vs.notify({\r\n              text: \"Orden de trabajo no se pudo EDITAR\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n      popup_desactivar_activar_orden(tr) {\r\n        console.log(\"llego\",tr)\r\n        this.popupActivoDesactivar = true;\r\n        this.tabOrdenTrabajo.codigo = tr.or_codigo;\r\n        this.tabOrdenTrabajo.or_estado = tr.or_estado;\r\n      },\r\n      desactivar_activar_orden() {\r\n        let me = this;\r\n        let valornuevo = me.tabOrdenTrabajo.or_estado;\r\n        if (valornuevo == 1) {\r\n          valornuevo = 2;\r\n          let datos = {\r\n            or_codigo: me.tabOrdenTrabajo.codigo,\r\n            or_estado: valornuevo,\r\n          };\r\n          me.$vs.loading();\r\n           this.$http\r\n            .post(this.$server_url + \"Desactivar_Orden\", datos)\r\n            .then((res) => {\r\n              me.$vs.loading.close();\r\n              me.Ordentrabajo = [];\r\n              me.$vs.notify({\r\n                text: \"Orden Finalizada\",\r\n                color: \"success\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-check\",\r\n              });\r\n              me.getCancelar();\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n              me.$vs.loading.close();\r\n              me.$vs.notify({\r\n                text: \"No se pudo finalizar la orden\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n            });\r\n        } else if (valornuevo == 2) {\r\n          valornuevo = 1;\r\n          let datos = {\r\n            or_codigo: me.tabOrdenTrabajo.codigo,\r\n            or_estado: valornuevo,\r\n          };\r\n          me.$vs.loading();\r\n          this.$http\r\n            .post(this.$server_url + \"Desactivar_Orden\", datos)\r\n            .then((res) => {\r\n              me.$vs.loading.close();\r\n              me.Ordentrabajo = [];\r\n              me.$vs.notify({\r\n                text: \"Orden Pendiente\",\r\n                color: \"success\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-check\",\r\n              });\r\n              me.getCancelar();\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n              me.$vs.loading.close();\r\n              me.$vs.notify({\r\n                text: \"No se pudo poner en pendiente la orden\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n            });\r\n        }\r\n      },\r\n      getPreguntaEliminar(tr) {\r\n        this.popupActivoEliminar = true;\r\n        this.tabOrdenTrabajo.codigo = tr.or_codigo;\r\n      },\r\n      getEliminar() {\r\n        let me = this;\r\n        console.log(this.tabOrdenTrabajo.codigo);\r\n        let datos = {\r\n          or_codigo: this.tabOrdenTrabajo.codigo,\r\n        };\r\n        me.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"Eliminar_Orden\", datos)\r\n          .then((data) => {\r\n            me.$vs.loading.close();\r\n            me.Ordentrabajo = [];\r\n            me.$vs.notify({\r\n              text: \"Orden de trabajo eliminado con exito\",\r\n              color: \"success\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n            me.getCancelar();\r\n          })\r\n          .catch(function () {\r\n            me.$vs.loading.close();\r\n            me.$vs.notify({\r\n              text: \"Orden de trabajo no se pudo eliminar\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n      getCancelar() {\r\n        this.popupActivoEditar = false;\r\n        this.popupActivoGuardar = false;\r\n        this.popupActivoEliminar = false;\r\n        this.popupActivoDesactivar = false;\r\n        this.popuptemporada = false;\r\n        this.popupadd = false;\r\n        this.popupdetalle = false;\r\n      },\r\n    },\r\n  };\r\n  ",{"version":3,"sources":["orden_trabajo.vue"],"names":[],"mappings":";AAu5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orden_trabajo.vue","sourceRoot":"src/views/facturacion/10_10_1_4/orden_pedido","sourcesContent":["<template>\r\n    <vx-card fixed-height=\"true\">\r\n      <vs-row vs-justify=\"flex-start\">\r\n        <vs-button type=\"border\" color=\"success\" class=\"mr-2\" @click=\"getTemporada()\"\r\n          >Agregar orden de trabajo</vs-button\r\n        >\r\n        <vs-col\r\n          type=\"flex\"\r\n          vs-justify=\"flex-start\"\r\n          vs-align=\"flex-start\"\r\n          class=\"m-2\"\r\n          vs-w=\"12\"\r\n        >\r\n          <p>Búsqueda por filtros</p>\r\n          <br />\r\n          <vs-card class=\"seccionmostrartodo\">\r\n            <div>\r\n              <div v-if=\"valorBusqueda == '0'\">\r\n                <vs-input\r\n                  class=\"w-full\"\r\n                  @keyup.enter=\"getOrdenParametro()\"\r\n                  icon-after=\"true\"\r\n                  label-placeholder=\"icon-after\"\r\n                  style=\"margin: 0px 0px 20px 0px\"\r\n                  icon=\"search\"\r\n                  placeholder=\"Buscar\"\r\n                  v-model=\"busquedaxcodigo\"\r\n                />\r\n              </div>\r\n              <div v-if=\"valorBusqueda == '3'\">\r\n                <vs-row style=\"margin: 0px 0px 20px 0px\">\r\n                  <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                    <font style=\"font-size: 11.5px\">&nbsp;Temporada:</font><br />\r\n                    <v-select\r\n                      :options=\"options1\"\r\n                      :reduce=\"(options1) => options1\"\r\n                      label=\"text\"\r\n                      class=\"w-full\"\r\n                      value=\"value\"\r\n                      placeholder=\"--Seleccione--\"\r\n                      v-model=\"region\"\r\n                    />\r\n                  </vs-col>\r\n                </vs-row>\r\n                  <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                    <font style=\"font-size: 11.5px\">&nbsp;Año:</font><br />\r\n                    <v-select\r\n                      :options=\"options2\"\r\n                      :reduce=\"(options2) => options2\"\r\n                      label=\"text\"\r\n                      class=\"w-full \"\r\n                      value=\"value\"\r\n                      placeholder=\"--Seleccione--\"\r\n                      v-model=\"anio\"\r\n                    />\r\n                  </vs-col>\r\n                </vs-row>\r\n              </vs-row>\r\n              </div>\r\n              <div v-else></div>\r\n            </div>\r\n            <div>\r\n              <ul class=\"leftx\" style=\"display: flex; margin: 0px 0px 0px 20px\">\r\n                <li class=\"modelx\"></li>\r\n                <li style=\"margin: 10px 20px 0px 0px\">\r\n                  <vs-radio\r\n                    vs-name=\"radios1\"\r\n                    vs-value=\"0\"\r\n                    v-model=\"valorBusqueda\"\r\n                    @input=\"busqueda = 'codigo'\"\r\n                    >Código</vs-radio\r\n                  >\r\n                </li>\r\n                <li style=\"margin: 10px 10px 0px 0px\">\r\n                  <vs-radio\r\n                    vs-name=\"radios2\"\r\n                    vs-value=\"1\"\r\n                    v-model=\"valorBusqueda\"\r\n                    @input=\"busqueda = 'pendiente'\"\r\n                    >Pendientes</vs-radio\r\n                  >\r\n                </li>\r\n                <li style=\"margin: 10px 10px 0px 0px\">\r\n                  <vs-radio\r\n                    vs-name=\"radios3\"\r\n                    vs-value=\"2\"\r\n                    v-model=\"valorBusqueda\"\r\n                    @input=\"busqueda = 'finalizado'\"\r\n                    >Finalizado</vs-radio\r\n                  >\r\n                </li>\r\n                <li style=\"margin: 10px 10px 0px 0px\">\r\n                  <vs-radio\r\n                    vs-name=\"radios3\"\r\n                    vs-value=\"3\"\r\n                    v-model=\"valorBusqueda\"\r\n                    @input=\"busqueda = 'temporada'\"\r\n                    >Temporada</vs-radio\r\n                  >\r\n                </li>\r\n                <li>\r\n                  <vs-button\r\n                    color=\"warning\"\r\n                    type=\"filled\"\r\n                    style=\"margin-left: 10px\"\r\n                    @click=\"getOrdenParametro()\"\r\n                    icon=\"search\"\r\n                  ></vs-button>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </vs-card>\r\n        </vs-col>\r\n      </vs-row>\r\n      <!-- <vs-button type=\"border\" color=\"success\" class=\"mr-2\" @click=\"getNuevo()\">Agregar Nuevo Producto</vs-button> -->\r\n      <TableOrdenesVue :Ordentrabajo=\"Ordentrabajo\" @popup_desactivar_activar_orden=\"popup_desactivar_activar_orden\" \r\n      @getDeta=\"getDeta\" @getEditar=\"getEditar\" @getPreguntaEliminar=\"getPreguntaEliminar\"/>\r\n       \r\n      <!-- SECCION REGISTRO -->\r\n  \r\n      <!-- SECCION REGISTRO -->\r\n      <vs-popup\r\n        class=\"crear\"\r\n        title=\"Generar orden de trabajo\"\r\n        :active.sync=\"popupActivoGuardar\"\r\n        fullscreen\r\n      >\r\n        <vs-col\r\n          vs-align=\"center\"\r\n          vs-lg=\"12\"\r\n          vs-sm=\"12\"\r\n          vs-xs=\"12\"\r\n          style=\"text-align: center\"\r\n          ><b style=\"color: blue\">SELECCIONE LA TEMPORADA Y AÑO</b></vs-col\r\n        >\r\n        <vs-row style=\"height: 150px\">\r\n          <vs-col vs-justify=\"center\" vs-align=\"center\" vs-lg=\"6\" vs-sm=\"6\" vs-xs=\"6\">\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"12\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\">\r\n                <font style=\"font-size: 11.5px\">&nbsp;Temporada:</font><br />\r\n                <v-select\r\n                  :options=\"options1\"\r\n                  :reduce=\"(options1) => options1\"\r\n                  placeholder=\"--Seleccione--\"\r\n                  label=\"text\"\r\n                  class=\"small\"\r\n                  value=\"value\"\r\n                  style=\"height: 30px\"\r\n                  v-model=\"tabTemporada.temp\"\r\n                  @input=\"Validarselects()\"\r\n                />\r\n              </vs-col>\r\n            </vs-row>\r\n          </vs-col>\r\n          <vs-col vs-justify=\"center\" vs-align=\"center\" vs-lg=\"6\" vs-sm=\"6\" vs-xs=\"6\">\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"12\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\">\r\n                <font style=\"font-size: 11.5px\">&nbsp;Año:</font><br />\r\n                <v-select\r\n                  :options=\"options2\"\r\n                  :reduce=\"(options2) => options2\"\r\n                  placeholder=\"--Seleccione--\"\r\n                  label=\"text\"\r\n                  class=\"small\"\r\n                  value=\"value\"\r\n                  @input=\"Validarselects()\"\r\n                  v-model=\"tabTemporada.anio\"\r\n                />\r\n              </vs-col>\r\n            </vs-row>\r\n          </vs-col>\r\n        </vs-row>\r\n        <template v-if='val== 1'>\r\n          <vs-row style=\"margin-top: -80px\">\r\n            <vs-col\r\n              vs-type=\"flex\"\r\n              vs-justify=\"center\"\r\n              vs-align=\"center\"\r\n              vs-w=\"3\"\r\n              class=\"mt-2\"\r\n            >\r\n            </vs-col>\r\n            <vs-col\r\n              vs-align=\"center\"\r\n              vs-lg=\"12\"\r\n              vs-sm=\"12\"\r\n              vs-xs=\"12\"\r\n              style=\"text-align: center\"\r\n              ><b>REGISTRO DE ORDEN DE TRABAJO</b></vs-col\r\n            >\r\n            <vs-col\r\n              vs-justify=\"center\"\r\n              vs-align=\"center\"\r\n              vs-lg=\"12\"\r\n              vs-sm=\"12\"\r\n              vs-xs=\"12\"\r\n              vs-type=\"flex\"\r\n            >\r\n              <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n                <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                  <vs-input\r\n                    label=\"Código:\"\r\n                    class=\"w-full\"\r\n                    icon=\"error_outline\"\r\n                    disabled\r\n                    v-model=\"tabOrdenTrabajo.codigo\"\r\n                  />\r\n                </vs-col>\r\n              </vs-row>\r\n              <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n                <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                  <vs-input\r\n                    label=\"Fecha:\"\r\n                    class=\"w-full\"\r\n                    icon=\"error_outline\"\r\n                    disabled\r\n                    v-model=\"tabOrdenTrabajo.fecha\"\r\n                  />\r\n                </vs-col>\r\n              </vs-row>\r\n            </vs-col>\r\n            <vs-col\r\n              vs-type=\"flex\"\r\n              vs-justify=\"center\"\r\n              vs-align=\"center\"\r\n              vs-lg=\"12\"\r\n              vs-sm=\"12\"\r\n              vs-xs=\"12\"\r\n            >\r\n              <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n                <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                  <p>Proveedor: *</p>\r\n                  <v-select\r\n                    :options=\"options4\"\r\n                    :reduce=\"(options4) => options4\"\r\n                    density=\"comfortable\"\r\n                    label=\"prov_nombre\"\r\n                    class=\"w-full\"\r\n                    value=\"prov_codigo\"\r\n                    placeholder=\"--Seleccione--\"\r\n                    v-model=\"tabOrdenTrabajo.prov_codigo\"\r\n                  />\r\n                </vs-col>\r\n              </vs-row>\r\n              <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n                <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                  <vs-textarea\r\n                    label=\"Observación: *\"\r\n                    placeholder=\"Escribe...\"\r\n                    class=\"w-full\"\r\n                    icon=\"mode_edit\"\r\n                    v-model=\"tabOrdenTrabajo.observacion\"\r\n                  />\r\n                </vs-col>\r\n              </vs-row>\r\n            </vs-col>\r\n  \r\n            <vs-col\r\n              vs-align=\"center\"\r\n              vs-lg=\"12\"\r\n              vs-sm=\"12\"\r\n              vs-xs=\"12\"\r\n              style=\"text-align: center\"\r\n              ><b>Añadir productos.</b></vs-col\r\n            >\r\n            <vs-col vs-justify=\"center\" vs-align=\"center\" vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\">\r\n              <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"12\">\r\n                <vs-col\r\n                  vs-type=\"flex\"\r\n                  vs-justify=\"center\"\r\n                  vs-align=\"center\"\r\n                  vs-w=\"8\"\r\n                  vs-sm=\"9\"\r\n                  class=\"m-2\"\r\n                >\r\n                  <v-select\r\n                    :options=\"options3\"\r\n                    :reduce=\"(options3) => options3.pro_codigo\"\r\n                    label=\"pro_nombre\"\r\n                    class=\"w-full h-100\"\r\n                    placeholder=\"--Seleccione--\"\r\n                    v-model=\"pro_codigo\"\r\n                  />\r\n                </vs-col>\r\n                <vs-col\r\n                  vs-type=\"flex\"\r\n                  vs-justify=\"center\"\r\n                  vs-align=\"center\"\r\n                  vs-w=\"1\"\r\n                  vs-sm=\"1\"\r\n                  class=\"m-2\"\r\n                >\r\n                  <vs-button\r\n                    color=\"success\"\r\n                    type=\"relief\"\r\n                    icon=\"add\"\r\n                    @click=\"add(k)\"\r\n                  ></vs-button>\r\n                </vs-col>\r\n              </vs-row>\r\n            </vs-col>\r\n            <vs-col\r\n              vs-align=\"center\"\r\n              vs-lg=\"12\"\r\n              vs-sm=\"12\"\r\n              vs-xs=\"12\"\r\n              style=\"text-align: center\"\r\n              ><b>Detalle de orden</b></vs-col\r\n            >\r\n  \r\n            <vs-col vs-justify=\"center\" vs-align=\"center\" vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\">\r\n              <vs-divider>Cantidad: {{ inputs.length }}</vs-divider>\r\n              <br />\r\n  \r\n              <vs-table :data=\"inputs\">\r\n                    <vs-tr v-for=\"(input, k) in inputs\" :key=\"k\">\r\n                      <vs-td width=\"50\"\r\n                        ><br /><b>{{ k + 1 }}</b></vs-td\r\n                      >\r\n                      <vs-td width=\"550\">\r\n                        <b>Libro {{input.pro_nombre}}</b></br>\r\n                        <b>Id: </b> {{input.pro_codigo}}</br>\r\n                      </vs-td>\r\n                      <vs-td width=\"550\">\r\n                        <b>Páginas: </b> {{input.pro_int_pagina}}</br>\r\n                        <b>Tamaño: </b> {{input.pro_tamaño}}</br>\r\n                        <b>Acabados: </b> {{input.pro_acabados}}</br>\r\n                        <b>Recubrimiento: </b> {{input.pro_cub_recubrimiento}}</br>\r\n                        <b>Código Interior: </b> {{input.mat_in_codigo}}</br>\r\n                        <b>Tintas Interior: </b> {{input.pro_int_tinta}}</br>\r\n                        <b>Código Cubierta: </b> {{input.mat_cub_codigo}}</br>\r\n                        <b>Tintas Cubierta:: </b> {{input.pro_cub_tintas}}</br>\r\n                      </vs-td>\r\n                      <vs-td width=\"1000\">\r\n                        <vs-input\r\n                          label=\"Cantidad: *\"\r\n                          class=\"w-full m-1\"\r\n                          placeholder=\"2010\"\r\n                          icon=\"mode_edit\"\r\n                          type=\"number\"\r\n                          @keydown=\"filterKey\"\r\n                          v-model=\"input.cantidad\"\r\n                        />\r\n  \r\n                        <vs-input\r\n                          label=\"Posible Entrega: *\"\r\n                          class=\"w-full\"\r\n                          type=\"date\"\r\n                          v-model=\"input.fe_entrega\"\r\n                        />\r\n                        <vs-textarea\r\n                          label=\"Observaciones: *\"\r\n                          placeholder=\"Escribe......\"\r\n                          icon=\"mode_edit\"\r\n                          class=\"w-full\"\r\n                          v-model=\"input.observacion\"\r\n                        />\r\n                      </vs-td>\r\n                      <vs-td>\r\n                        <br /><br />\r\n                        <vs-button\r\n                          v-if=\"k > -1\"\r\n                          @click=\"remove(k)\"\r\n                          color=\"danger\"\r\n                          type=\"relief\"\r\n                          icon=\"delete\"\r\n                        ></vs-button>\r\n                      </vs-td> </vs-tr\r\n                    ><br />\r\n              </vs-table>\r\n            </vs-col>\r\n          </vs-row>\r\n          <br /><br />\r\n          <vs-col\r\n            vs-type=\"flex\"\r\n            vs-justify=\"center\"\r\n            vs-align=\"center\"\r\n            vs-w=\"12\"\r\n            class=\"mt-2\"\r\n          >\r\n            <vs-button @click=\"getTemporada()\" color=\"warning\" type=\"relief\"\r\n              >Limpiar</vs-button\r\n            >&emsp;\r\n            <vs-button @click=\"guardarnuevo1()\" color=\"success\" type=\"relief\"\r\n              >Guardar</vs-button\r\n            >&emsp;\r\n            <vs-button @click=\"getCancelar()\" color=\"danger\" type=\"relief\"\r\n              >Cancelar</vs-button\r\n            >\r\n          </vs-col>\r\n        </template>\r\n      </vs-popup>\r\n      <!-- detalles -->\r\n      <vs-popup\r\n        class=\"detalle\"\r\n        :title=\"`Detalles orden de trabajo: ${tabOrdenTrabajo.codigo}`\"\r\n        :active.sync=\"popupdetalle\"\r\n        fullscreen\r\n      >\r\n        <vs-row>\r\n          <vs-col\r\n            vs-justify=\"center\"\r\n            vs-align=\"center\"\r\n            vs-lg=\"12\"\r\n            vs-sm=\"12\"\r\n            vs-xs=\"12\"\r\n            vs-type=\"flex\"\r\n          >\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                <vs-input\r\n                  label=\"Código:\"\r\n                  class=\"w-full\"\r\n                  icon=\"error_outline\"\r\n                  disabled\r\n                  v-model=\"tabOrdenTrabajo.codigo\"\r\n                />\r\n              </vs-col>\r\n            </vs-row>\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                <vs-input\r\n                  label=\"Fecha: \"\r\n                  class=\"w-full\"\r\n                  icon=\"error_outline\"\r\n                  disabled\r\n                  v-model=\"tabOrdenTrabajo.fecha\"\r\n                />\r\n              </vs-col>\r\n            </vs-row>\r\n          </vs-col>\r\n          <vs-col\r\n            vs-justify=\"center\"\r\n            vs-align=\"center\"\r\n            vs-lg=\"12\"\r\n            vs-sm=\"12\"\r\n            vs-xs=\"12\"\r\n            vs-type=\"flex\"\r\n          >\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                <p>Proveedor: *</p>\r\n                <v-select\r\n                  :options=\"options4\"\r\n                  :reduce=\"(options4) => options4\"\r\n                  density=\"comfortable\"\r\n                  label=\"prov_nombre\"\r\n                  class=\"w-full\"\r\n                  value=\"prov_codigo\"\r\n                  placeholder=\"--Seleccione--\"\r\n                  v-model=\"tabOrdenTrabajo.prov_codigo\"\r\n                  disabled\r\n                />\r\n              </vs-col>\r\n            </vs-row>\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                <vs-textarea\r\n                  label=\"Observación: *\"\r\n                  placeholder=\"Escribe...\"\r\n                  class=\"w-full\"\r\n                  icon=\"error_outline\"\r\n                  v-model=\"tabOrdenTrabajo.observacion\"\r\n                  disabled\r\n                />\r\n              </vs-col>\r\n            </vs-row>\r\n          </vs-col>\r\n        </vs-row>\r\n        <vs-row>\r\n          <vs-col\r\n            vs-align=\"center\"\r\n            vs-lg=\"12\"\r\n            vs-sm=\"12\"\r\n            vs-xs=\"12\"\r\n            style=\"text-align: center\"\r\n            ><b>Detalle de orden</b></vs-col>\r\n          <vs-col vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\">\r\n            <vs-divider>Cantidad: {{ inputs.length }}</vs-divider>\r\n            <br />\r\n            <vs-table :data=\"inputs\">\r\n                  <vs-tr v-for=\"(input, k) in inputs\" :key=\"k\">\r\n                    <vs-td width=\"50\"\r\n                      ><br /><b>{{ k + 1 }}</b></vs-td\r\n                    >\r\n                    <vs-td width=\"550\">\r\n                      <b>Libro {{input.pro_nombre}}</b></br>\r\n                      <b>Id: </b> {{input.pro_codigo}}</br>\r\n                    </vs-td>\r\n                    <vs-td width=\"550\">\r\n                        <b>Páginas: </b> {{input.det_or_int_paginas}}</br>\r\n                        <b>Tamaño: </b> {{input.det_or_tamaño}}</br>\r\n                        <b>Acabados: </b> {{input.det_or_acabados}}</br>\r\n                        <b>Recubrimiento: </b> {{input.det_or_recubrimiento}}</br>\r\n                        <b>Código Interior: </b> {{input.det_or_in_codigo}}</br>\r\n                        <b>Tintas Interior: </b> {{input.det_or_in_tintas}}</br>\r\n                        <b>Código Cubierta: </b> {{input.mat_cub_codigo}}</br>\r\n                        <b>Tintas Cubierta:: </b> {{input.det_or_cub_tintas}}</br>\r\n                    </vs-td>\r\n                    <vs-td width=\"800\">\r\n                      <b>Cantidad: </b> {{input.det_or_cantidad}}</br>\r\n                      <b>Posible Entrega: </b> {{input.det_or_posible_entrega}}</br>\r\n                      <b>Observaciones: </b> {{input.det_or_observaciones}}</br>\r\n                      \r\n                    </vs-td> \r\n                    \r\n                  </vs-tr>\r\n            </vs-table>\r\n          </vs-col>\r\n        </vs-row>\r\n        <br /><br />\r\n        <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"12\" class=\"mt-2\">\r\n          <vs-button @click=\"getCancelar()\" color=\"danger\" type=\"relief\"\r\n            >Cancelar</vs-button\r\n          >\r\n        </vs-col>\r\n      </vs-popup>\r\n  \r\n      <!-- SECCION EDITAR -->\r\n      <vs-popup\r\n        class=\"editar\"\r\n        :title=\"`Edición orden de trabajo: ${tabOrdenTrabajo.codigo}`\"\r\n        :active.sync=\"popupActivoEditar\"\r\n        fullscreen\r\n      >\r\n        <vs-row>\r\n          <vs-col\r\n            vs-justify=\"center\"\r\n            vs-align=\"center\"\r\n            vs-lg=\"12\"\r\n            vs-sm=\"12\"\r\n            vs-xs=\"12\"\r\n            vs-type=\"flex\"\r\n          >\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                <vs-input\r\n                  label=\"Código:\"\r\n                  class=\"w-full\"\r\n                  icon=\"error_outline\"\r\n                  disabled\r\n                  v-model=\"tabOrdenTrabajo.codigo\"\r\n                />\r\n              </vs-col>\r\n            </vs-row>\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                <vs-input\r\n                  label=\"Fecha: \"\r\n                  class=\"w-full\"\r\n                  icon=\"error_outline\"\r\n                  disabled\r\n                  v-model=\"tabOrdenTrabajo.fecha\"\r\n                />\r\n              </vs-col>\r\n            </vs-row>\r\n          </vs-col>\r\n          <vs-col\r\n            vs-justify=\"center\"\r\n            vs-align=\"center\"\r\n            vs-lg=\"12\"\r\n            vs-sm=\"12\"\r\n            vs-xs=\"12\"\r\n            vs-type=\"flex\"\r\n          >\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                <p>Proveedor: *</p>\r\n                <v-select\r\n                  :options=\"options4\"\r\n                  :reduce=\"(options4) => options4\"\r\n                  density=\"comfortable\"\r\n                  label=\"prov_nombre\"\r\n                  class=\"w-full\"\r\n                  value=\"prov_codigo\"\r\n                  placeholder=\"--Seleccione--\"\r\n                  v-model=\"tabOrdenTrabajo.prov_codigo\"\r\n                />\r\n              </vs-col>\r\n            </vs-row>\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"6\">\r\n              <vs-col vs-justify=\"center\" vs-align=\"center\" vs-w=\"10\" class=\"m-2\">\r\n                <vs-textarea\r\n                  label=\"Observación: *\"\r\n                  placeholder=\"Escribe...\"\r\n                  class=\"w-full\"\r\n                  icon=\"mode_edit\"\r\n                  v-model=\"tabOrdenTrabajo.observacion\"\r\n                />\r\n              </vs-col>\r\n            </vs-row>\r\n          </vs-col>\r\n        </vs-row>\r\n        <vs-row>\r\n          <vs-col\r\n            vs-align=\"center\"\r\n            vs-lg=\"12\"\r\n            vs-sm=\"12\"\r\n            vs-xs=\"12\"\r\n            style=\"text-align: center\"\r\n            ><b>Detalle de orden</b></vs-col\r\n          >\r\n  \r\n          <vs-col vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\">\r\n            <vs-divider>Cantidad: {{ inputs.length }}</vs-divider>\r\n            <br />\r\n            <vs-table :data=\"inputs\">\r\n                  <vs-tr v-for=\"(input, k) in inputs\" :key=\"k\">\r\n                    <vs-td width=\"50\"\r\n                      ><br /><b>{{ k + 1 }}</b></vs-td\r\n                    >\r\n                    <vs-td width=\"550\">\r\n                      <b>Libro {{input.pro_nombre}}</b></br>\r\n                      <b>Id: </b> {{input.pro_codigo}}</br>\r\n                    </vs-td>\r\n                    <vs-td width=\"550\">\r\n                        <b>Páginas: </b> {{input.det_or_int_paginas}}</br>\r\n                        <b>Tamaño: </b> {{input.det_or_tamaño}}</br>\r\n                        <b>Acabados: </b> {{input.det_or_acabados}}</br>\r\n                        <b>Recubrimiento: </b> {{input.det_or_recubrimiento}}</br>\r\n                        <b>Código Interior: </b> {{input.det_or_in_codigo}}</br>\r\n                        <b>Tintas Interior: </b> {{input.det_or_in_tintas}}</br>\r\n                        <b>Código Cubierta: </b> {{input.mat_cub_codigo}}</br>\r\n                        <b>Tintas Cubierta:: </b> {{input.det_or_cub_tintas}}</br>\r\n                    </vs-td>\r\n                    <vs-td width=\"1000\">\r\n                      \r\n                      <vs-input\r\n                        label=\"Cantidad:\"\r\n                        class=\"w-full m-1\"\r\n                        placeholder=\"2010\"\r\n                        icon=\"mode_edit\"\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        @keydown=\"filterKey\"\r\n                        v-model=\"input.det_or_cantidad\"\r\n                      />\r\n                      <vs-input\r\n                        label=\"Posible Entrega: \"\r\n                        class=\"w-full m-1\"\r\n                        v-model=\"input.det_or_posible_entrega\"\r\n                      />\r\n                      <vs-textarea\r\n                        label=\"Observaciones: \"\r\n                        placeholder=\"Escribe......\"\r\n                        icon=\"mode_edit\"\r\n                        class=\"w-full\"\r\n                        v-model=\"input.det_or_observaciones\"\r\n                      />\r\n                    </vs-td>\r\n                    \r\n                    <vs-td>\r\n                      <br />\r\n                      <vs-button\r\n                        v-if=\"k > -1\"\r\n                        @click=\"getremove1(k, input.det_or_codigo)\"\r\n                        color=\"danger\"\r\n                        type=\"relief\"\r\n                        icon=\"delete\"\r\n                      ></vs-button>\r\n                    </vs-td>\r\n                  </vs-tr>\r\n            </vs-table>\r\n          </vs-col>\r\n        </vs-row>\r\n        <br /><br />\r\n        <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"12\" class=\"mt-2\">\r\n          <vs-button @click=\"getDetallar()\" type=\"relief\" icon=\"add\">Detalles</vs-button\r\n          >&emsp;\r\n          <vs-button @click=\"editar()\" type=\"relief\" color=\"success\" icon=\"edit\"\r\n            >Editar </vs-button\r\n          >&emsp;\r\n          <vs-button @click=\"getCancelar()\" color=\"danger\" type=\"relief\"\r\n            >Cancelar</vs-button\r\n          >\r\n        </vs-col>\r\n  \r\n        <vs-popup\r\n          class=\"eliminar\"\r\n          :title=\"`¿Confirma que desea eliminar el detalle de la orden: ${tabOrdenTrabajo.codigo}?`\"\r\n          :active.sync=\"popupEliminar\"\r\n        >\r\n          <vs-col\r\n            vs-type=\"flex\"\r\n            vs-justify=\"center\"\r\n            vs-align=\"center\"\r\n            vs-w=\"3\"\r\n            class=\"mt-2\"\r\n          ></vs-col>\r\n          <vs-col\r\n            vs-type=\"flex\"\r\n            vs-justify=\"center\"\r\n            vs-align=\"center\"\r\n            vs-w=\"3\"\r\n            class=\"mt-2\"\r\n          >\r\n            <vs-button\r\n              @click=\"\r\n                remove1(k, tabOrdenTrabajo.codigo);\r\n                popupEliminar = false;\r\n              \"\r\n              type=\"relief\"\r\n              >Aceptar</vs-button\r\n            >\r\n          </vs-col>\r\n          <vs-col\r\n            vs-type=\"flex\"\r\n            vs-justify=\"center\"\r\n            vs-align=\"center\"\r\n            vs-w=\"3\"\r\n            class=\"mt-2\"\r\n          >\r\n            <vs-button @click=\"popupEliminar = false\" color=\"danger\" type=\"relief\"\r\n              >Cancelar</vs-button\r\n            >\r\n          </vs-col>\r\n        </vs-popup>\r\n      </vs-popup>\r\n      <!-- añadir mas productos -->\r\n      <vs-popup\r\n        class=\"Detalle\"\r\n        :title=\"`Detalles Orden de trabajo: ${tabOrdenTrabajo.codigo}`\"\r\n        :active.sync=\"popupadd\"\r\n        fullscreen\r\n      >\r\n        <vs-row>\r\n          <vs-col\r\n            vs-align=\"center\"\r\n            vs-lg=\"12\"\r\n            vs-sm=\"12\"\r\n            vs-xs=\"12\"\r\n            style=\"text-align: center\"\r\n          >\r\n            <vs-input\r\n              label=\"Código:\"\r\n              class=\"w-full\"\r\n              icon=\"error_outline\"\r\n              disabled\r\n              v-model=\"tabOrdenTrabajo.codigo\"\r\n            />\r\n          </vs-col>\r\n          <vs-col\r\n            vs-align=\"center\"\r\n            vs-lg=\"12\"\r\n            vs-sm=\"12\"\r\n            vs-xs=\"12\"\r\n            style=\"text-align: center\"\r\n            ><b>Añadir productos.</b></vs-col\r\n          >\r\n          <vs-col vs-justify=\"center\" vs-align=\"center\" vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\">\r\n            <vs-row vs-type=\"flex\" vs-justify=\"center\" vs-w=\"12\">\r\n              <vs-col\r\n                vs-type=\"flex\"\r\n                vs-justify=\"center\"\r\n                vs-align=\"center\"\r\n                vs-w=\"8\"\r\n                vs-sm=\"9\"\r\n                class=\"m-2\"\r\n              >\r\n                <v-select\r\n                  :options=\"options3\"\r\n                  :reduce=\"(options3) => options3.pro_codigo\"\r\n                  label=\"pro_nombre\"\r\n                  class=\"w-full h-100\"\r\n                  placeholder=\"--Seleccione--\"\r\n                  v-model=\"pro_codigo\"\r\n                />\r\n              </vs-col>\r\n              <vs-col\r\n                vs-type=\"flex\"\r\n                vs-justify=\"center\"\r\n                vs-align=\"center\"\r\n                vs-w=\"1\"\r\n                vs-sm=\"1\"\r\n                class=\"m-2\"\r\n              >\r\n                <vs-button\r\n                  color=\"success\"\r\n                  type=\"relief\"\r\n                  icon=\"add\"\r\n                  @click=\"add(k)\"\r\n                ></vs-button>\r\n              </vs-col>\r\n            </vs-row>\r\n          </vs-col>\r\n          <vs-col\r\n            vs-align=\"center\"\r\n            vs-lg=\"12\"\r\n            vs-sm=\"12\"\r\n            vs-xs=\"12\"\r\n            style=\"text-align: center\"\r\n            ><b>Detalle de orden</b></vs-col\r\n          >\r\n  \r\n          <vs-col vs-justify=\"center\" vs-align=\"center\" vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\">\r\n            <vs-divider>Cantidad: {{ inputs.length }}</vs-divider>\r\n            <br\r\n          /></vs-col>\r\n  \r\n          <vs-col vs-justify=\"center\" vs-align=\"center\" vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\">\r\n            <vs-table :data=\"inputs\">\r\n                  <vs-tr v-for=\"(input, k) in inputs\" :key=\"k\">\r\n                    <vs-td width=\"50\"\r\n                      ><br /><b>{{ k + 1 }}</b></vs-td\r\n                    >\r\n                    <vs-td width=\"550\">\r\n                        <b>Libro {{input.pro_nombre}}</b></br>\r\n                        <b>Id: </b> {{input.pro_codigo}}</br>\r\n                      </vs-td>\r\n                      <vs-td width=\"550\">\r\n                        <b>Páginas: </b> {{input.pro_int_pagina}}</br>\r\n                        <b>Tamaño: </b> {{input.pro_tamaño}}</br>\r\n                        <b>Acabados: </b> {{input.pro_acabados}}</br>\r\n                        <b>Recubrimiento: </b> {{input.pro_cub_recubrimiento}}</br>\r\n                        <b>Código Interior: </b> {{input.mat_in_codigo}}</br>\r\n                        <b>Tintas Interior: </b> {{input.pro_int_tinta}}</br>\r\n                        <b>Código Cubierta: </b> {{input.mat_cub_codigo}}</br>\r\n                        <b>Tintas Cubierta:: </b> {{input.pro_cub_tintas}}</br>\r\n                      </vs-td>\r\n                    <vs-td width=\"1000\">\r\n                      <vs-input\r\n                        label=\"Cantidad: *\"\r\n                        class=\"w-full m-1\"\r\n                        placeholder=\"2010\"\r\n                        icon=\"mode_edit\"\r\n                        type=\"number\"\r\n                        min=\"0\"\r\n                        @keydown=\"filterKey\"\r\n                        v-model=\"input.cantidad\"\r\n                      />\r\n  \r\n                      <vs-input\r\n                        label=\"Posible Entrega: *\"\r\n                        class=\"w-full m-1\"\r\n                        type=\"date\"\r\n                        v-model=\"input.fe_entrega\"\r\n                      />\r\n                      <vs-textarea\r\n                        label=\"Observaciones: *\"\r\n                        placeholder=\"Escribe......\"\r\n                        icon=\"mode_edit\"\r\n                        class=\"w-full\"\r\n                        v-model=\"input.observacion\"\r\n                      />\r\n                    </vs-td>\r\n                    \r\n                    <vs-td>\r\n                      <br /><br />\r\n                      <vs-button\r\n                        v-if=\"k > -1\"\r\n                        @click=\"remove(k)\"\r\n                        color=\"danger\"\r\n                        type=\"relief\"\r\n                        icon=\"delete\"\r\n                      ></vs-button>\r\n                    </vs-td> </vs-tr\r\n                  ><br />\r\n            </vs-table>\r\n          </vs-col>\r\n        </vs-row>\r\n        <br /><br />\r\n        <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"12\" class=\"mt-2\">\r\n          <vs-button @click=\"guardarnuevo(); \" color=\"success\" type=\"relief\"\r\n            >Guardar</vs-button\r\n          >&emsp;\r\n          <vs-button @click=\"popupadd = false; popupActivoEditar = true;\" color=\"danger\" type=\"relief\"\r\n            >Cancelar</vs-button\r\n          >\r\n        </vs-col>\r\n      </vs-popup>\r\n  \r\n      <vs-popup\r\n        class=\"eliminar\"\r\n        :title=\"`¿Confirma que desea eliminar el registro: ${tabOrdenTrabajo.codigo}?`\"\r\n        :active.sync=\"popupActivoEliminar\"\r\n      >\r\n        <vs-col\r\n          vs-type=\"flex\"\r\n          vs-justify=\"center\"\r\n          vs-align=\"center\"\r\n          vs-w=\"3\"\r\n          class=\"mt-2\"\r\n        ></vs-col>\r\n        <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"3\" class=\"mt-2\">\r\n          <vs-button @click=\"getEliminar()\" type=\"relief\">Aceptar</vs-button>\r\n        </vs-col>\r\n        <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"3\" class=\"mt-2\">\r\n          <vs-button @click=\"getCancelar()\" color=\"danger\" type=\"relief\"\r\n            >Cancelar</vs-button\r\n          >\r\n        </vs-col>\r\n      </vs-popup>\r\n  \r\n      <vs-popup\r\n        class=\"desactivar\"\r\n        :title=\"`¿Confirma que desea cambiar el estado de la orden de trabajo: ${tabOrdenTrabajo.codigo}?`\"\r\n        :active.sync=\"popupActivoDesactivar\"\r\n      >\r\n        <vs-col\r\n          vs-type=\"flex\"\r\n          vs-justify=\"center\"\r\n          vs-align=\"center\"\r\n          vs-w=\"3\"\r\n          class=\"mt-2\"\r\n        ></vs-col>\r\n        <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"3\" class=\"mt-2\">\r\n          <vs-button @click=\"desactivar_activar_orden()\" type=\"relief\">Aceptar</vs-button>\r\n        </vs-col>\r\n        <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"3\" class=\"mt-2\">\r\n          <vs-button @click=\"getCancelar()\" color=\"danger\" type=\"relief\"\r\n            >Cancelar</vs-button\r\n          >\r\n        </vs-col>\r\n      </vs-popup>\r\n    </vx-card>\r\n  </template>\r\n  <script>\r\n  import Vue from \"vue\";\r\n  import axios from \"axios\";\r\n  import vSelect from \"vue-select\";\r\n  import TableOrdenesVue from \"./components/TableOrdenes.vue\";\r\n  export default {\r\n    data() {\r\n      return {\r\n        k: \"\",\r\n        counter: 0,\r\n        Ordentrabajo: [],\r\n        popupdetalle: false,\r\n        popupActivoGuardar: false,\r\n        popupActivoEditar: false,\r\n        popupEliminar: false,\r\n        popupActivoDesactivar: false,\r\n        popupActivoEliminar: false,\r\n        popuptemporada: false,\r\n        popupadd: false,\r\n        tabTemporada: {\r\n          temp: \"\",\r\n          anio: \"\",\r\n        },\r\n        changeValues: false,\r\n        tabOrdenTrabajo: {\r\n          codigo: \"\",\r\n          fecha: \"\",\r\n          serie: \"\",\r\n          prov_codigo: \"\",\r\n          observacion: \"\",\r\n          pro_car_codigo: \"\",\r\n        },\r\n        inputs: [],\r\n        id: \"\",\r\n        idusuarioresp: \"\",\r\n        pro_codigo: \"\",\r\n        region: \"\",\r\n        anio: \"\",\r\n        val:0,\r\n        Ordentodo: [],\r\n        obser: \"\",\r\n        Producto: [],\r\n        busquedaxcodigo: \"\",\r\n        valorBusqueda: \"0\",\r\n        checkBox_mostrarinactivos: false,\r\n        options1: [\r\n          { text: \"COSTA\", value: \"C\" },\r\n          { text: \"SIERRA\", value: \"S\" },\r\n        ],\r\n        options3: [],\r\n        options4: [],\r\n        options: [],\r\n        options2: [\r\n          { text: \"2010\", value: \"10\" },\r\n          { text: \"2011\", value: \"11\" },\r\n          { text: \"2012\", value: \"12\" },\r\n          { text: \"2013\", value: \"13\" },\r\n          { text: \"2014\", value: \"14\" },\r\n          { text: \"2015\", value: \"15\" },\r\n          { text: \"2016\", value: \"16\" },\r\n          { text: \"2017\", value: \"17\" },\r\n          { text: \"2018\", value: \"18\" },\r\n          { text: \"2019\", value: \"19\" },\r\n          { text: \"2020\", value: \"20\" },\r\n          { text: \"2021\", value: \"21\" },\r\n          { text: \"2022\", value: \"22\" },\r\n          { text: \"2023\", value: \"23\" },\r\n          { text: \"2024\", value: \"24\" },\r\n          { text: \"2025\", value: \"25\" },\r\n        ],\r\n      };\r\n    },\r\n  \r\n    components: {\r\n      \"v-select\": vSelect,\r\n      TableOrdenesVue\r\n    },\r\n    computed: {\r\n   \r\n    },\r\n    mounted() {\r\n      this.mostrarFechayhora();\r\n      this.mostrarFecha();\r\n    },\r\n    methods: {\r\n      filterKey(e) {\r\n        const key = e.key;\r\n        if (key === \".\" || key === \"-\" || key === \"e\" || key === \"+\")\r\n          return e.preventDefault();\r\n      },\r\n      Validarselects() {\r\n        let me = this;\r\n        if (me.tabTemporada.temp == null || me.tabTemporada.temp == 0) {\r\n          me.$vs.notify({\r\n            text: \"Seleccione..\",\r\n            color: \"warning\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-check\",\r\n          });\r\n          return false;\r\n        }\r\n        if (me.tabTemporada.anio == null || me.tabTemporada.anio == 0) {\r\n          me.$vs.notify({\r\n            text: \"Seleccione..\",\r\n            color: \"warning\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-check\",\r\n          });\r\n          return false;\r\n        }\r\n        me.$vs.loading();\r\n        me.val=1;\r\n        this.getNuevo(me.tabTemporada.temp.value, me.tabTemporada.anio.value);\r\n        me.$vs.loading.close();\r\n      },\r\n      getDeta(tr) {\r\n        this.popupdetalle = true;\r\n        this.tabOrdenTrabajo.codigo = tr.or_codigo;\r\n        this.tabOrdenTrabajo.fecha = tr.or_fecha;\r\n        this.tabOrdenTrabajo.observacion = tr.or_observacion;\r\n        this.options4 = [];\r\n        this.tabOrdenTrabajo.prov_codigo = {prov_codigo:tr.prov_codigo, prov_nombre:tr.prov_nombre};\r\n        this.inputs = [];\r\n  \r\n        let me = this;\r\n        me.$vs.loading();\r\n        this.getprov();\r\n        var url = \"\";\r\n        url = this.$server_url + \"Get_Ordendetalle?or_codigo=\" + tr.or_codigo;\r\n        this.$http\r\n          .get(url)\r\n          .then(function (res) {\r\n            me.inputs = res.data;\r\n  \r\n            me.inputs.push();\r\n            me.$vs.loading.close();\r\n            if (res.data.message) {\r\n              me.$vs.notify({\r\n                text: res.data.message,\r\n                color: \"success\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-user\",\r\n              });\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error + \" error\");\r\n            this.inputs = [];\r\n            me.$vs.loading.close();\r\n          });\r\n      },\r\n      getOrden() {\r\n        let me = this;\r\n        let url =\r\n          this.$server_url +\r\n          \"GetOrden_xfiltro?busqueda=undefined&razonbusqueda=\" +\r\n          me.tabOrdenTrabajo.codigo;\r\n        me.$vs.loading();\r\n        this.$http\r\n          .get(url)\r\n          .then(function (res) {\r\n            me.Ordentrabajo = res.data;\r\n  \r\n            if (me.Ordentrabajo.length === 0) {\r\n              me.$vs.notify({\r\n                text: \"No hay órden de trabajo para esta búsqueda\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n              me.Ordentrabajo = [];\r\n              me.region.text = \"\";\r\n              me.anio.text = \"\";\r\n              me.$vs.loading.close();\r\n            } else {\r\n              me.$vs.loading.close();\r\n              if (res.data.message) {\r\n                me.$vs.notify({\r\n                  text: res.data.message,\r\n                  color: \"success\",\r\n                  iconPack: \"feather\",\r\n                  icon: \"icon-user\",\r\n                });\r\n              }\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            if (error.response && error.response.status === 404) {\r\n              me.$vs.notify({\r\n                text: \"No hay órden de trabajo para esta búsqueda\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n              me.Ordentrabajo = [];\r\n              me.$vs.loading.close();\r\n            } else {\r\n              console.log(error + \" error\");\r\n              me.$vs.loading.close();\r\n            }\r\n          });\r\n      },\r\n      getOrdenParametro() {\r\n        let me = this;\r\n        let url;\r\n        if (me.busqueda == \"codigo\") {\r\n          if (me.busquedaxcodigo.length < 2) {\r\n            me.$vs.notify({\r\n              text: \"Minimo 2 caracteres de busqueda\",\r\n              color: \"warning\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n            return false;\r\n          }\r\n          url =\r\n            this.$server_url +\r\n            \"GetOrden_xfiltro?busqueda=\" +\r\n            me.busqueda +\r\n            \"&razonbusqueda=\" +\r\n            me.busquedaxcodigo;\r\n        } else if (me.busqueda == \"undefined\") {\r\n          if (me.busquedaxcodigo.length < 2) {\r\n            me.$vs.notify({\r\n              text: \"Minimo 2 caracteres de busqueda\",\r\n              color: \"warning\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n            return false;\r\n          }\r\n          url =\r\n            this.$server_url +\r\n            \"GetOrden_xfiltro?busqueda=\" +\r\n            me.busqueda +\r\n            \"&razonbusqueda=\" +\r\n            me.busquedaxcodigo;\r\n        } else if (me.busqueda == \"temporada\") {\r\n          let a = me.region.value + me.anio.value;\r\n          url =\r\n            this.$server_url +\r\n            \"GetOrden_xfiltro?busqueda=\" +\r\n            me.busqueda +\r\n            \"&razonbusqueda=\" +\r\n            a;\r\n        } else {\r\n          url = this.$server_url + \"GetOrden_xfiltro?busqueda=\" + me.busqueda;\r\n        }\r\n        me.$vs.loading();\r\n        this.$http\r\n          .get(url)\r\n          .then(function (res) {\r\n            me.Ordentrabajo = res.data;\r\n  \r\n            if (me.Ordentrabajo.length === 0) {\r\n              me.$vs.notify({\r\n                text: \"No hay órden de trabajo para esta búsqueda\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n              me.Ordentrabajo = [];\r\n              me.$vs.loading.close();\r\n            } else {\r\n              me.$vs.loading.close();\r\n              if (res.data.message) {\r\n                me.$vs.notify({\r\n                  text: res.data.message,\r\n                  color: \"success\",\r\n                  iconPack: \"feather\",\r\n                  icon: \"icon-user\",\r\n                });\r\n              }\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            if (error.response && error.response.status === 404) {\r\n              me.$vs.notify({\r\n                text: \"No hay órden de trabajo para esta búsqueda\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n              me.Ordentrabajo = [];\r\n              me.$vs.loading.close();\r\n            } else {\r\n              console.log(error + \" error\");\r\n              me.$vs.loading.close();\r\n            }\r\n          });\r\n      },\r\n      mostrarFechayhora: function () {\r\n        const date = new Date();\r\n        const formatear =\r\n          date.getFullYear() +\r\n          \"-\" +\r\n          (\"0\" + (date.getMonth() + 1)).slice(-2) +\r\n          \"-\" +\r\n          (\"0\" + date.getDate()).slice(-2) +\r\n          \" \" +\r\n          (\"0\" + date.getHours()).slice(-2) +\r\n          \":\" +\r\n          (\"0\" + date.getMinutes()).slice(-2) +\r\n          \":\" +\r\n          (\"0\" + date.getSeconds()).slice(-2);\r\n  \r\n        return formatear;\r\n      },\r\n      mostrarFecha: function () {\r\n        let currendate = new Date();\r\n        let Nueva = new Date();\r\n        Nueva.setDate(currendate.getDate() + 15);\r\n        const res =\r\n          Nueva.getFullYear() +\r\n          \"-\" +\r\n          (\"0\" + (Nueva.getMonth() + 1)).slice(-2) +\r\n          \"-\" +\r\n          (\"0\" + Nueva.getDate()).slice(-2);\r\n        return res;\r\n      },\r\n      add(k) {\r\n        let a, b, c, d, e, f, g, h, i, j;\r\n        let me = this;\r\n        let fe = me.mostrarFecha();\r\n  \r\n        me.$vs.loading();\r\n        var nombre = me.pro_codigo;\r\n        fetch(this.$server_url + \"GetProductoCaracter?pro_codigo=\" + nombre) // llamamos a la ruta del controlador\r\n          .then((res) => res.json())\r\n          .then((res) => {\r\n            Object.entries(res[0]).forEach((elem) => {\r\n              if (elem[0] == \"pro_codigo\") {\r\n                a = elem[1];\r\n              } else if (elem[0] == \"pro_nombre\") {\r\n                b = elem[1];\r\n              } else if (elem[0] == \"pro_tama\\u00f1o\") {\r\n                c = elem[1];\r\n              } else if (elem[0] == \"mat_in_codigo\") {\r\n                d = elem[1];\r\n              } else if (elem[0] == \"pro_int_tinta\") {\r\n                e = elem[1];\r\n              } else if (elem[0] == \"mat_cub_codigo\") {\r\n                f = elem[1];\r\n              } else if (elem[0] == \"pro_cub_recubrimiento\") {\r\n                g = elem[1];\r\n              } else if (elem[0] == \"pro_cub_tintas\") {\r\n                h = elem[1];\r\n              } else if (elem[0] == \"pro_acabados\") {\r\n                i = elem[1];\r\n              } else if (elem[0] == \"pro_int_pagina\") {\r\n                j = elem[1];\r\n              }\r\n            });\r\n            this.inputs.push({\r\n              id: 0,\r\n              pro_codigo: a,\r\n              pro_nombre: b,\r\n              pro_int_pagina: j,\r\n              pro_tamaño: c,\r\n              pro_acabados: i,\r\n              pro_cub_recubrimiento: g,\r\n              cantidad: \"\",\r\n              fe_entrega: fe,\r\n              observacion: \"\",\r\n              mat_in_codigo: d,\r\n              pro_int_tinta: e,\r\n              mat_cub_codigo: f,\r\n              pro_cub_tintas: h,\r\n            });\r\n            me.pro_codigo = \"\";\r\n  \r\n            me.$vs.loading.close();\r\n          })\r\n          .catch(function (error) {\r\n            if (error.response != \"\") {\r\n              me.$vs.notify({\r\n                text:\r\n                  \"No esta registrado las caracteristicas del producto para la orden de trabajo en esta búsqueda\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n              me.$vs.loading.close();\r\n            } else {\r\n              console.log(error + \" error\");\r\n              me.$vs.loading.close();\r\n            }\r\n          });\r\n      },\r\n      remove(index) {\r\n        let me = this;\r\n        let preId = 0;\r\n        preId = this.inputs[index].id;\r\n        if (preId > 0) {\r\n          let formData = new FormData();\r\n          formData.append(\"id\", preId);\r\n  \r\n          this.inputs.splice(index, 1);\r\n        } else {\r\n          this.inputs.splice(index, 1);\r\n        }\r\n      },\r\n      getremove1(index, b) {\r\n        this.popupEliminar = true;\r\n  \r\n        this.tabOrdenTrabajo.codigo = b;\r\n        this.k = index;\r\n      },\r\n      remove1(index, b) {\r\n        let me = this;\r\n        let preId = 0;\r\n        let datos = {\r\n          det_or_codigo: b,\r\n        };\r\n        me.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"Eliminar_OrdenDetalle\", datos)\r\n          .then((res) => {\r\n            preId = this.inputs[index].id;\r\n            if (preId > 0) {\r\n              let formData = new FormData();\r\n              formData.append(\"id\", preId);\r\n  \r\n              this.inputs.splice(index, 1);\r\n            } else {\r\n              this.inputs.splice(index, 1);\r\n            }\r\n            me.$vs.loading.close();\r\n  \r\n            me.$vs.notify({\r\n              text: \"Detalle de la orden eliminado con exito\",\r\n              color: \"success\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n          })\r\n          .catch(function (error) {\r\n            me.$vs.loading.close();\r\n            me.$vs.notify({\r\n              text: \"Detalle de la orden no se pudo eliminar\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n      edit() {\r\n        let formData = new FormData();\r\n        formData.append(\"data_detalleorden\", JSON.stringify(this.inputs));\r\n        this.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"PostOrdenDetalle_Editar\", formData)\r\n          .then((res) => {\r\n            this.$vs.loading.close();\r\n            this.getOrden();\r\n            this.$vs.notify({\r\n              text: \"Detalle de orden editado con exito\",\r\n              color: \"success\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n          })\r\n          .catch(function () {\r\n            this.$vs.loading.close();\r\n            this.$vs.notify({\r\n              text: \"Detalle de Orden de trabajo no se pudo editar\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n  \r\n      getTemporada() {\r\n        this.val=0;\r\n        this.popupActivoGuardar = true;\r\n        this.tabTemporada.temp = \"\";\r\n        this.tabTemporada.anio = {text:'2024', value:'24'};\r\n        this.mostrarFecha();\r\n      },\r\n      \r\n      //SECCION GUARDAR NUEVO PRODUCTO\r\n      getDetallar() {\r\n        this.popupadd = true;\r\n        this.popupActivoEditar = false;\r\n        this.inputs = [];\r\n        this.getserie();\r\n      },\r\n      getNuevo(a, b) {\r\n        let me = this;\r\n        const usuariorespo = localStorage.getItem(\"usuario\");\r\n        const usuarioObjeto = JSON.parse(usuariorespo);\r\n        me.idusuarioresp = usuarioObjeto.iniciales;\r\n        me.tabOrdenTrabajo.observacion = \"\";\r\n        me.options4 = [];\r\n        me.pro_codigo = \"\";\r\n  \r\n        let c, d;\r\n        let ne = [];\r\n  \r\n        var f = this.mostrarFechayhora();\r\n        if (!a || !b) {\r\n          this.$vs.notify({\r\n            text: \"seleccione los datos antes \",\r\n            color: \"danger\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-triangle\",\r\n          });\r\n          return;\r\n        } else {\r\n          me.$vs.loading();\r\n          \r\n          me.getserie();\r\n          me.getprov();\r\n          this.$http\r\n            .get(this.$server_url + \"Get_Codigo\")\r\n            .then((res) => {\r\n              ne = res.data;\r\n              c = ne[0];\r\n              d = ne[1];\r\n              me.id = c + \"-\" + a + b + \"-\" + me.idusuarioresp + \"-\" + d;\r\n              me.$vs.loading.close();\r\n              me.tabOrdenTrabajo.codigo = me.id;\r\n              me.tabOrdenTrabajo.fecha = me.mostrarFechayhora();\r\n              me.tabOrdenTrabajo.prov_codigo = \"\";\r\n            })\r\n            .catch((err) => {\r\n              console.log(err);\r\n              me.$vs.loading.close();\r\n            });\r\n          this.popupActivoGuardar = true;\r\n          this.inputs = [];\r\n        }\r\n      },\r\n      getserie() {\r\n        let me = this;\r\n        me.pro_codigo = \"\";\r\n        me.options3 = [];\r\n        this.$http\r\n          .get(this.$server_url + \"GetProd\")\r\n          .then((res) => {\r\n            me.options3 = res.data;\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            me.options3 = [];\r\n          });\r\n      },\r\n      getprov() {\r\n        let me = this;\r\n        me.options4 = [];\r\n        this.$http\r\n          .get(this.$server_url + \"Get_provedor\")\r\n          .then((res) => {\r\n            me.options4 = res.data;\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            me.options4 = [];\r\n            me.$vs.loading.close();\r\n          });\r\n      },\r\n      guardarnuevo1() {\r\n        let me = this;\r\n        var f = me.mostrarFechayhora();\r\n        let cod = me.id;\r\n        let a = me.tabOrdenTrabajo.prov_codigo.prov_codigo;\r\n  \r\n        let b = \"1\";\r\n        console.log(a);\r\n        if (me.tabOrdenTrabajo.observacion==0 ||me.tabOrdenTrabajo.observacion==null || me.tabOrdenTrabajo.prov_codigo.prov_codigo==null ) {\r\n          me.$vs.notify({\r\n            text: \"Escriba los datos antes de guardar\",\r\n            color: \"danger\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-triangle\",\r\n          });\r\n          return;\r\n        }\r\n        if (me.inputs.length == 0) {\r\n          me.$vs.notify({\r\n            text: \"Agregue los detalles antes de guardar\",\r\n            color: \"danger\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-triangle\",\r\n          });\r\n          return;\r\n        }\r\n        let datos = {\r\n          or_codigo: cod,\r\n          usu_codigo: me.idusuarioresp,\r\n          or_fecha: f,\r\n          prov_codigo: parseInt(a),\r\n          or_estado: parseInt(b),\r\n          or_observacion: me.tabOrdenTrabajo.observacion,\r\n        };\r\n        me.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"PostOrden_Registrar_modificar\", datos)\r\n          .then((res) => {\r\n            me.guardarnuevo();\r\n            me.$vs.loading.close();\r\n            me.Ordentrabajo = [];\r\n            this.popupActivoEditar = false;\r\n            this.popupActivoDesactivar = false;\r\n            this.popupActivoGuardar = false;\r\n            this.popupActivoEliminar = false;\r\n          })\r\n          .catch(function () {\r\n            me.$vs.loading.close();\r\n            me.$vs.notify({\r\n              text: \"Orden de trabajo no se pudo guardar\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n  \r\n      guardarnuevo() {\r\n        let me = this;\r\n        me.id = me.tabOrdenTrabajo.codigo;\r\n        let formData = new FormData();\r\n  \r\n        formData.append(\"data_detalleorden\", JSON.stringify(me.inputs));\r\n        formData.append(\"or_codigo\", me.id);\r\n        me.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"PostOrdenDetalle_Registra\", formData)\r\n          .then((res) => {\r\n            me.Ordentrabajo = [];\r\n            me.$vs.loading.close();\r\n            me.getOrden();\r\n            me.$vs.notify({\r\n              text: \"La orden de trabajo y los detalles se ha guardado con exito\",\r\n              color: \"success\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n            this.getCancelar();\r\n          })\r\n          .catch(function () {\r\n            me.$vs.loading.close();\r\n            me.$vs.notify({\r\n              text: \"Orden de trabajo no se pudo guardar\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n      getEditar(tr) {\r\n        this.popupActivoEditar = true;\r\n        this.tabOrdenTrabajo.codigo = tr.or_codigo;\r\n        this.tabOrdenTrabajo.fecha = tr.or_fecha;\r\n        this.tabOrdenTrabajo.observacion = tr.or_observacion;\r\n        this.options4 = [];\r\n        this.getprov();\r\n        this.tabOrdenTrabajo.prov_codigo = {prov_codigo:tr.prov_codigo, prov_nombre:tr.prov_nombre};\r\n        this.inputs = [];\r\n        let me = this;\r\n        me.$vs.loading();\r\n        var url = \"\";\r\n        url = this.$server_url + \"Get_Ordendetalle?or_codigo=\" + tr.or_codigo;\r\n        this.$http\r\n          .get(url)\r\n          .then(function (res) {\r\n            me.inputs = res.data;\r\n            me.$vs.loading.close();\r\n            if (res.data.message) {\r\n              me.$vs.notify({\r\n                text: res.data.message,\r\n                color: \"success\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-user\",\r\n              });\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error + \" error\");\r\n            this.inputs = [];\r\n            me.$vs.loading.close();\r\n          });\r\n      },\r\n      editar() {\r\n        let me = this;\r\n        if (!me.tabOrdenTrabajo.observacion) {\r\n          me.$vs.notify({\r\n            text: \"Escriba los datos antes de editar\",\r\n            color: \"danger\",\r\n            iconPack: \"feather\",\r\n            icon: \"icon-alert-triangle\",\r\n          });\r\n          return;\r\n        }\r\n        let datos = {\r\n          or_codigo: me.tabOrdenTrabajo.codigo,\r\n          or_observacion: me.tabOrdenTrabajo.observacion,\r\n        };\r\n        me.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"PostOrden_Registrar_modificar\", datos)\r\n          .then((res) => {\r\n            me.edit();\r\n            me.$vs.loading.close();\r\n            this.popupActivoEditar = false;\r\n            me.Ordentrabajo = [];\r\n          })\r\n          .catch(function (error) {\r\n            me.$vs.loading.close();\r\n            me.$vs.notify({\r\n              text: \"Orden de trabajo no se pudo EDITAR\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n      popup_desactivar_activar_orden(tr) {\r\n        console.log(\"llego\",tr)\r\n        this.popupActivoDesactivar = true;\r\n        this.tabOrdenTrabajo.codigo = tr.or_codigo;\r\n        this.tabOrdenTrabajo.or_estado = tr.or_estado;\r\n      },\r\n      desactivar_activar_orden() {\r\n        let me = this;\r\n        let valornuevo = me.tabOrdenTrabajo.or_estado;\r\n        if (valornuevo == 1) {\r\n          valornuevo = 2;\r\n          let datos = {\r\n            or_codigo: me.tabOrdenTrabajo.codigo,\r\n            or_estado: valornuevo,\r\n          };\r\n          me.$vs.loading();\r\n           this.$http\r\n            .post(this.$server_url + \"Desactivar_Orden\", datos)\r\n            .then((res) => {\r\n              me.$vs.loading.close();\r\n              me.Ordentrabajo = [];\r\n              me.$vs.notify({\r\n                text: \"Orden Finalizada\",\r\n                color: \"success\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-check\",\r\n              });\r\n              me.getCancelar();\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n              me.$vs.loading.close();\r\n              me.$vs.notify({\r\n                text: \"No se pudo finalizar la orden\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n            });\r\n        } else if (valornuevo == 2) {\r\n          valornuevo = 1;\r\n          let datos = {\r\n            or_codigo: me.tabOrdenTrabajo.codigo,\r\n            or_estado: valornuevo,\r\n          };\r\n          me.$vs.loading();\r\n          this.$http\r\n            .post(this.$server_url + \"Desactivar_Orden\", datos)\r\n            .then((res) => {\r\n              me.$vs.loading.close();\r\n              me.Ordentrabajo = [];\r\n              me.$vs.notify({\r\n                text: \"Orden Pendiente\",\r\n                color: \"success\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-check\",\r\n              });\r\n              me.getCancelar();\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n              me.$vs.loading.close();\r\n              me.$vs.notify({\r\n                text: \"No se pudo poner en pendiente la orden\",\r\n                color: \"danger\",\r\n                iconPack: \"feather\",\r\n                icon: \"icon-x\",\r\n              });\r\n            });\r\n        }\r\n      },\r\n      getPreguntaEliminar(tr) {\r\n        this.popupActivoEliminar = true;\r\n        this.tabOrdenTrabajo.codigo = tr.or_codigo;\r\n      },\r\n      getEliminar() {\r\n        let me = this;\r\n        console.log(this.tabOrdenTrabajo.codigo);\r\n        let datos = {\r\n          or_codigo: this.tabOrdenTrabajo.codigo,\r\n        };\r\n        me.$vs.loading();\r\n        this.$http\r\n          .post(this.$server_url + \"Eliminar_Orden\", datos)\r\n          .then((data) => {\r\n            me.$vs.loading.close();\r\n            me.Ordentrabajo = [];\r\n            me.$vs.notify({\r\n              text: \"Orden de trabajo eliminado con exito\",\r\n              color: \"success\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-check\",\r\n            });\r\n            me.getCancelar();\r\n          })\r\n          .catch(function () {\r\n            me.$vs.loading.close();\r\n            me.$vs.notify({\r\n              text: \"Orden de trabajo no se pudo eliminar\",\r\n              color: \"danger\",\r\n              iconPack: \"feather\",\r\n              icon: \"icon-x\",\r\n            });\r\n          });\r\n      },\r\n      getCancelar() {\r\n        this.popupActivoEditar = false;\r\n        this.popupActivoGuardar = false;\r\n        this.popupActivoEliminar = false;\r\n        this.popupActivoDesactivar = false;\r\n        this.popuptemporada = false;\r\n        this.popupadd = false;\r\n        this.popupdetalle = false;\r\n      },\r\n    },\r\n  };\r\n  </script>\r\n  "]}]}