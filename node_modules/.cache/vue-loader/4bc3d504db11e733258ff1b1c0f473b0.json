{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos2\\pedidos\\anticipos\\pagos2\\components\\AprobarAnticipoAprobado.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos2\\pedidos\\anticipos\\pagos2\\components\\AprobarAnticipoAprobado.vue","mtime":1712682816398},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport PagosRepository from '../../../../../../repositories/PagoRepository'\r\nexport default {\r\n  data() {\r\n    return{\r\n      solicitud:{\r\n        valor:'',\r\n        observacion:'',\r\n        anticipo_aprobado:'',\r\n      },\r\n    }\r\n  },\r\n  props:{\r\n    sendPedido:{\r\n      type:Object,\r\n      default:function(){ return { } }\r\n    },\r\n    usuario:{\r\n      type:Object,\r\n      default:function(){ return { } }\r\n    },\r\n    userRoot:{\r\n      type:Boolean,\r\n      default:false,\r\n    },\r\n    sendConvenio:{\r\n      type:Object,\r\n      default:function(){\r\n        return {}\r\n      }\r\n    },\r\n    ifconvenio:{\r\n      type:Number,\r\n      default:0,\r\n    }\r\n  },\r\n  mounted(){\r\n    let me = this\r\n    me.setValues()\r\n  },\r\n  methods:{\r\n    setValues(){\r\n      let me = this\r\n      //====ANTICIPO APROBADO\r\n      if(me.ifconvenio == 0){\r\n        //=====FACTURADOR===\r\n        if(me.sendPedido.ifagregado_anticipo_aprobado > 0){\r\n          me.anticipo_aprobado    = me.sendPedido.anticipo_aprobado\r\n        }else{\r\n          if(me.sendPedido.anticipoAsesor > 0 ){\r\n            me.anticipo_aprobado    = me.sendPedido.anticipoAsesor\r\n          }else{\r\n            me.anticipo_aprobado    = me.sendPedido.anticipo\r\n          }\r\n        }\r\n        //===GERENCIA===\r\n        me.solicitud.valor        = me.anticipo_aprobado\r\n        me.solicitud.observacion  = me.sendPedido.anticipo_solicitud_observacion\r\n        return\r\n      }\r\n      //====CONVENIO\r\n      else{\r\n         //=====FACTURADOR===\r\n        //si aun no esta aprobado el anticipo asigno al input el anticipo sugerido\r\n        if(me.sendConvenio.anticipo_global > me.sendConvenio.valor_sugerido){\r\n          me.anticipo_aprobado    = me.sendConvenio.anticipo_global\r\n          me.solicitud.valor      = me.sendConvenio.anticipo_global\r\n        }else{\r\n          me.anticipo_aprobado    = me.sendConvenio.valor_sugerido\r\n          me.solicitud.valor      = me.sendConvenio.valor_sugerido\r\n        }\r\n        //===GERENCIA===\r\n\r\n        me.solicitud.observacion  = me.sendConvenio.observacion_sugerido\r\n\r\n      }\r\n    },\r\n    //FACTURADOR\r\n    updatePedido(campo,valor,campo2,valor2){\r\n      let me = this\r\n      let formData = new FormData();\r\n      formData.append('actualizarDosCampo',         'yes');\r\n      formData.append('anticipoAprobado',           'yes');\r\n      formData.append('user_created',               me.usuario.idusuario);\r\n      formData.append('id_group',                   me.usuario.id_group);\r\n      formData.append('id_pedido',                  me.sendPedido.id_pedido);\r\n      formData.append('campo',                      campo)\r\n      formData.append('campo2',                     campo2)\r\n      formData.append('valor',                      valor)\r\n      formData.append('valor2',                     valor2)\r\n      me.$vs.loading()\r\n      this.$http.post(this.$server_url+'updateThePedido', formData)\r\n      .then(res => {\r\n        me.$vs.loading.close()\r\n        me.$vs.notify({\r\n        text:res.data.message,\r\n        color:'success',\r\n        iconPack: 'feather',\r\n        icon:'icon-check'})\r\n        me.$emit('changeHandle',1)\r\n      })\r\n      .catch((e)=>{\r\n        me.$vs.loading.close()\r\n      })\r\n    },\r\n    updateConvenio(cantidad,campo1,valor1,campo2,valor2,campo3,valor3){\r\n      let me = this;\r\n      let formData = new FormData();\r\n      formData.append('updateCamposDatos',    'yes')\r\n      if(cantidad == 1)                       { formData.append('unCampo', 'yes') }\r\n      if(cantidad == 2)                       { formData.append('dosCampos', 'yes') }\r\n      if(cantidad == 3)                       { formData.append('tresCampos', 'yes') }\r\n      formData.append('id',                   me.sendConvenio.id);\r\n      formData.append('campo1',               campo1);\r\n      formData.append('campo2',               campo2);\r\n      formData.append('campo3',               campo3);\r\n      formData.append('valor1',               valor1)\r\n      formData.append('valor2',               valor2)\r\n      formData.append('valor3',               valor3)\r\n      formData.append('user_created',         me.usuario.idusuario)\r\n      formData.append('idConvenio',           me.sendConvenio.id)\r\n      this.$http.post(this.$server_url+'convenio', formData)\r\n      .then(res => {\r\n        me.$emit('changeHandle',1)\r\n          me.$vs.notify({\r\n          text:'Se guardo correctamente',\r\n          color:'success',\r\n          iconPack: 'feather',\r\n          icon:'icon-check'})\r\n\r\n      })\r\n      .catch((e)=>{\r\n        // me.$vs.loading.close()\r\n      })\r\n    },\r\n    solicitarAnticipo(){\r\n      let me = this;\r\n      if(me.sendPedido.estado == 2){\r\n        me.$vs.notify({\r\n          color: 'warning',\r\n          title: 'Mensaje',\r\n          text: 'No se puede modificar el pedido anulado',\r\n          time:5000,\r\n        })\r\n        return false\r\n      }\r\n\r\n      if(me.solicitud.valor < 50){\r\n        me.$vs.notify({\r\n        text:'El valor no puede ser menor a 50',\r\n        color:'warning',\r\n        iconPack: 'feather',\r\n        icon:'icon-check'})\r\n        return\r\n      }\r\n      let formData = new FormData();\r\n      //====ANTICIPO\r\n      formData.append('actualizarTresCampo',      'yes')\r\n      formData.append('id_pedido',                me.sendPedido.id_pedido);\r\n      formData.append('campo',                    'anticipo_solicitud_for_gerencia')\r\n      formData.append('campo2',                   'anticipo_solicitud_observacion')\r\n      //estado 2 => SOLICITUD A GERENCIA\r\n      formData.append('campo3',                   'ifagregado_anticipo_aprobado')\r\n      formData.append('valor',                    me.solicitud.valor)\r\n      //====CONVENIO\r\n      if(me.solicitud.observacion == null ||      me.solicitud.observacion == \"null\" ) {  formData.append('valor2',  \"\") }\r\n      else{ formData.append('valor2',             me.solicitud.observacion)}\r\n      formData.append('valor3',                   2)\r\n      me.$vs.loading()\r\n      this.$http.post(this.$server_url+'updateThePedido', formData)\r\n      .then(res => {\r\n          me.$vs.loading.close()\r\n\r\n          me.$vs.notify({\r\n          text:res.data.message,\r\n          color:'success',\r\n          iconPack: 'feather',\r\n          icon:'icon-check'})\r\n          me.$emit('changeHandle',1)\r\n      })\r\n      .catch((e) => {\r\n        me.$vs.loading.close()\r\n      })\r\n    },\r\n  }\r\n}\r\n",{"version":3,"sources":["AprobarAnticipoAprobado.vue"],"names":[],"mappings":";AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AprobarAnticipoAprobado.vue","sourceRoot":"src/views/pedidos2/pedidos/anticipos/pagos2/components","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <div class=\"uno\" v-if=\"ifconvenio == 0\">\r\n        <small v-if=\"sendPedido.ifagregado_anticipo_aprobado == 0\">Anticipo aprobado no asignado</small>\r\n        <small v-if=\"sendPedido.ifagregado_anticipo_aprobado == 1\">Anticipo aprobado por facturador</small>\r\n        <small v-if=\"sendPedido.ifagregado_anticipo_aprobado == 2\" class=\"font-bold\">!Anticipo solicitado a gerencia ${{ sendPedido.anticipo_solicitud_for_gerencia }}</small>\r\n        <small v-if=\"sendPedido.ifagregado_anticipo_aprobado == 3\"><b>ANTICIPO APROBADO POR GERENCIA <span class=\"text-success\">$ {{ sendPedido.anticipo_aprobado_gerencia }}</span></b></small>\r\n        <small v-if=\"sendPedido.ifagregado_anticipo_aprobado == 4\" class=\"text-danger\">Anticipo solicitado: rechazado</small>\r\n        <small v-if=\"sendPedido.ifagregado_anticipo_aprobado == 5\" class=\"text-success\">Gerencia aprueba anticipo sugerido</small>\r\n      </div>\r\n      <div v-else>\r\n        <small v-if=\"sendConvenio.convenio_aprobado == 0\">Convenio aprobado facturador</small>\r\n        <small v-if=\"sendConvenio.convenio_aprobado == 1\">Convenio solicitado a gerencia ${{ sendConvenio.valor_sugerido }} </small>\r\n        <small v-if=\"sendConvenio.convenio_aprobado == 2\" class=\"text-danger\">Convenio anulado por  gerencia ${{ sendConvenio.valor_sugerido }} </small>\r\n        <small v-if=\"sendConvenio.convenio_aprobado == 3\">Convenio aprobado por gerencia ${{ sendConvenio.valor_aprobado_gerencia }} </small>\r\n      </div>\r\n      <vs-tabs alignment=\"fixed\" class=\"mt-1\">\r\n        <vs-tab label=\"Facturador\">\r\n          <div>\r\n            <p class=\"text-center font-bold\">Estas seguro de aprobar el {{ifconvenio == 0 ? 'Anticipo': 'Convenio'}}? </p>\r\n            <vs-input type=\"number\"  v-model=\"anticipo_aprobado\" class=\"mt-1\" style=\"width: 90%;\" />\r\n            <div class=\"flex mt-5 justify-center\">\r\n              <vs-button class=\"mr-3 mb-2\" icon=\"check\" v-if=\"ifconvenio==0\" @click=\"updatePedido('anticipo_aprobado',anticipo_aprobado,'ifagregado_anticipo_aprobado',1)\">Aprobar Anticipo</vs-button>\r\n              <vs-button class=\"mr-3 mb-2\" icon=\"check\" v-if=\"ifconvenio==1\" @click=\"updateConvenio(1,'anticipo_global',anticipo_aprobado,'convenio_aprobado',1)\">Aprobar Convenio</vs-button>\r\n              <vs-button color=\"warning\" type=\"border\" @click=\"$emit('changeHandle',0);\" icon-pack=\"feather\" class=\"mb-2\" icon=\"icon-x\">Cancelar</vs-button>\r\n            </div>\r\n          </div>\r\n        </vs-tab>\r\n        <vs-tab label=\"Gerencia\">\r\n            <div>\r\n              <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col w-full\">\r\n                <vs-input class=\"w-full\" icon-pack=\"feather\" icon=\"icon-dollar-sign\" icon-no-border label=\"Valor  a solicitar\" v-model=\"solicitud.valor\" />\r\n                </div>\r\n            </div>\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col w-full\">\r\n                <vs-input type=\"email\" class=\"w-full\" icon-pack=\"feather\" icon=\"icon-mail\" icon-no-border label=\"Observación(Opcional)\" v-model=\"solicitud.observacion\" />\r\n                </div>\r\n            </div>\r\n            <div class=\"flex justify-center\">\r\n              <vs-button class=\"mr-3 mb-2\" v-if=\"ifconvenio==0\" @click=\"solicitarAnticipo()\">Solicitar</vs-button>\r\n              <vs-button class=\"mr-3 mb-2\" v-if=\"ifconvenio==1\" @click=\"updateConvenio(3,'valor_sugerido',solicitud.valor,'convenio_aprobado',1,'observacion_sugerido',solicitud.observacion)\">Solicitar</vs-button>\r\n              <vs-button color=\"warning\" @click=\"$emit('changeHandle',0);\" type=\"border\" class=\"mb-2\">Cancelar</vs-button>\r\n            </div>\r\n          </div>\r\n        </vs-tab>\r\n      </vs-tabs>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport PagosRepository from '../../../../../../repositories/PagoRepository'\r\nexport default {\r\n  data() {\r\n    return{\r\n      solicitud:{\r\n        valor:'',\r\n        observacion:'',\r\n        anticipo_aprobado:'',\r\n      },\r\n    }\r\n  },\r\n  props:{\r\n    sendPedido:{\r\n      type:Object,\r\n      default:function(){ return { } }\r\n    },\r\n    usuario:{\r\n      type:Object,\r\n      default:function(){ return { } }\r\n    },\r\n    userRoot:{\r\n      type:Boolean,\r\n      default:false,\r\n    },\r\n    sendConvenio:{\r\n      type:Object,\r\n      default:function(){\r\n        return {}\r\n      }\r\n    },\r\n    ifconvenio:{\r\n      type:Number,\r\n      default:0,\r\n    }\r\n  },\r\n  mounted(){\r\n    let me = this\r\n    me.setValues()\r\n  },\r\n  methods:{\r\n    setValues(){\r\n      let me = this\r\n      //====ANTICIPO APROBADO\r\n      if(me.ifconvenio == 0){\r\n        //=====FACTURADOR===\r\n        if(me.sendPedido.ifagregado_anticipo_aprobado > 0){\r\n          me.anticipo_aprobado    = me.sendPedido.anticipo_aprobado\r\n        }else{\r\n          if(me.sendPedido.anticipoAsesor > 0 ){\r\n            me.anticipo_aprobado    = me.sendPedido.anticipoAsesor\r\n          }else{\r\n            me.anticipo_aprobado    = me.sendPedido.anticipo\r\n          }\r\n        }\r\n        //===GERENCIA===\r\n        me.solicitud.valor        = me.anticipo_aprobado\r\n        me.solicitud.observacion  = me.sendPedido.anticipo_solicitud_observacion\r\n        return\r\n      }\r\n      //====CONVENIO\r\n      else{\r\n         //=====FACTURADOR===\r\n        //si aun no esta aprobado el anticipo asigno al input el anticipo sugerido\r\n        if(me.sendConvenio.anticipo_global > me.sendConvenio.valor_sugerido){\r\n          me.anticipo_aprobado    = me.sendConvenio.anticipo_global\r\n          me.solicitud.valor      = me.sendConvenio.anticipo_global\r\n        }else{\r\n          me.anticipo_aprobado    = me.sendConvenio.valor_sugerido\r\n          me.solicitud.valor      = me.sendConvenio.valor_sugerido\r\n        }\r\n        //===GERENCIA===\r\n\r\n        me.solicitud.observacion  = me.sendConvenio.observacion_sugerido\r\n\r\n      }\r\n    },\r\n    //FACTURADOR\r\n    updatePedido(campo,valor,campo2,valor2){\r\n      let me = this\r\n      let formData = new FormData();\r\n      formData.append('actualizarDosCampo',         'yes');\r\n      formData.append('anticipoAprobado',           'yes');\r\n      formData.append('user_created',               me.usuario.idusuario);\r\n      formData.append('id_group',                   me.usuario.id_group);\r\n      formData.append('id_pedido',                  me.sendPedido.id_pedido);\r\n      formData.append('campo',                      campo)\r\n      formData.append('campo2',                     campo2)\r\n      formData.append('valor',                      valor)\r\n      formData.append('valor2',                     valor2)\r\n      me.$vs.loading()\r\n      this.$http.post(this.$server_url+'updateThePedido', formData)\r\n      .then(res => {\r\n        me.$vs.loading.close()\r\n        me.$vs.notify({\r\n        text:res.data.message,\r\n        color:'success',\r\n        iconPack: 'feather',\r\n        icon:'icon-check'})\r\n        me.$emit('changeHandle',1)\r\n      })\r\n      .catch((e)=>{\r\n        me.$vs.loading.close()\r\n      })\r\n    },\r\n    updateConvenio(cantidad,campo1,valor1,campo2,valor2,campo3,valor3){\r\n      let me = this;\r\n      let formData = new FormData();\r\n      formData.append('updateCamposDatos',    'yes')\r\n      if(cantidad == 1)                       { formData.append('unCampo', 'yes') }\r\n      if(cantidad == 2)                       { formData.append('dosCampos', 'yes') }\r\n      if(cantidad == 3)                       { formData.append('tresCampos', 'yes') }\r\n      formData.append('id',                   me.sendConvenio.id);\r\n      formData.append('campo1',               campo1);\r\n      formData.append('campo2',               campo2);\r\n      formData.append('campo3',               campo3);\r\n      formData.append('valor1',               valor1)\r\n      formData.append('valor2',               valor2)\r\n      formData.append('valor3',               valor3)\r\n      formData.append('user_created',         me.usuario.idusuario)\r\n      formData.append('idConvenio',           me.sendConvenio.id)\r\n      this.$http.post(this.$server_url+'convenio', formData)\r\n      .then(res => {\r\n        me.$emit('changeHandle',1)\r\n          me.$vs.notify({\r\n          text:'Se guardo correctamente',\r\n          color:'success',\r\n          iconPack: 'feather',\r\n          icon:'icon-check'})\r\n\r\n      })\r\n      .catch((e)=>{\r\n        // me.$vs.loading.close()\r\n      })\r\n    },\r\n    solicitarAnticipo(){\r\n      let me = this;\r\n      if(me.sendPedido.estado == 2){\r\n        me.$vs.notify({\r\n          color: 'warning',\r\n          title: 'Mensaje',\r\n          text: 'No se puede modificar el pedido anulado',\r\n          time:5000,\r\n        })\r\n        return false\r\n      }\r\n\r\n      if(me.solicitud.valor < 50){\r\n        me.$vs.notify({\r\n        text:'El valor no puede ser menor a 50',\r\n        color:'warning',\r\n        iconPack: 'feather',\r\n        icon:'icon-check'})\r\n        return\r\n      }\r\n      let formData = new FormData();\r\n      //====ANTICIPO\r\n      formData.append('actualizarTresCampo',      'yes')\r\n      formData.append('id_pedido',                me.sendPedido.id_pedido);\r\n      formData.append('campo',                    'anticipo_solicitud_for_gerencia')\r\n      formData.append('campo2',                   'anticipo_solicitud_observacion')\r\n      //estado 2 => SOLICITUD A GERENCIA\r\n      formData.append('campo3',                   'ifagregado_anticipo_aprobado')\r\n      formData.append('valor',                    me.solicitud.valor)\r\n      //====CONVENIO\r\n      if(me.solicitud.observacion == null ||      me.solicitud.observacion == \"null\" ) {  formData.append('valor2',  \"\") }\r\n      else{ formData.append('valor2',             me.solicitud.observacion)}\r\n      formData.append('valor3',                   2)\r\n      me.$vs.loading()\r\n      this.$http.post(this.$server_url+'updateThePedido', formData)\r\n      .then(res => {\r\n          me.$vs.loading.close()\r\n\r\n          me.$vs.notify({\r\n          text:res.data.message,\r\n          color:'success',\r\n          iconPack: 'feather',\r\n          icon:'icon-check'})\r\n          me.$emit('changeHandle',1)\r\n      })\r\n      .catch((e) => {\r\n        me.$vs.loading.close()\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n"]}]}