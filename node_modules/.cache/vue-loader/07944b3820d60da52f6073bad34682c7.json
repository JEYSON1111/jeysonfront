{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\components\\Guias\\devolucionGuias\\ScreenDevolucionGuias.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\components\\Guias\\devolucionGuias\\ScreenDevolucionGuias.vue","mtime":1712682816265},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport DevolucionBodegaVue from './DevolucionBodega.vue';\r\nimport DetalleDevolucionVue from './components/DetalleDevolucion.vue';\r\nexport default{\r\n    data(){\r\n        return{\r\n            periodo_id:0,\r\n            usuario:[],\r\n            arregloDevoluciones:[],\r\n            arregloDetalle:[],\r\n            devolucion:{},\r\n            popupDetalles:false,\r\n            menu:0,\r\n            id:0,\r\n        }\r\n    },\r\n    components:{\r\n        DevolucionBodegaVue,\r\n        DetalleDevolucionVue,\r\n    },\r\n    props:{\r\n        periodoBodega:{\r\n            type:Number,\r\n            default:0,\r\n        },\r\n        periodoSelect:{\r\n          type:Object,\r\n          default:function(){\r\n            return {}\r\n          }\r\n        }\r\n    },\r\n    created(){\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"));\r\n        if(me.usuario.id_group == 11){\r\n            me.periodo_id = this.periodoSelect.idperiodoescolar\r\n        }\r\n        //bodega\r\n        else{\r\n            me.periodo_id = me.periodoBodega\r\n        } \r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.getListadoDevoluciones()\r\n    },\r\n    methods:{\r\n        changeHandle(e){\r\n            let me = this;\r\n            me.menu = 0\r\n            me.getListadoDevoluciones()\r\n        },\r\n        getListadoDevoluciones() {\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'guias?devolucion=yes&asesor_id='+me.usuario.idusuario+'&periodo_id='+me.periodo_id)\r\n                .then(function (res) {\r\n                    me.arregloDevoluciones = res.data\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        getDetalles(tr) {\r\n            let me = this;\r\n            me.arregloDetalle = []\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'guias?detalle=yes&id='+tr.id)\r\n                .then(function (res) {\r\n                    let datos = res.data\r\n                    me.arregloDetalle = datos.filter(p => p.cantidad_devuelta > 0)\r\n                    me.popupDetalles  = true\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        generarDevolucion(){\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'guias?validarGenerar=yes&asesor_id='+me.usuario.idusuario)\r\n                .then(function (res) {\r\n                    me.$vs.loading.close()\r\n                    if(res.data.status == 0){\r\n                        me.$vs.notify({\r\n                        text:res.data.message,\r\n                        color:'warning',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-check'})\r\n                        return\r\n                    }\r\n                    me.id = 0\r\n                    me.menu = 1   \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        openConfirmEliminar(){\r\n            this.$vs.dialog({\r\n                type:'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                cancelText:'cancelar',\r\n                title: `Confirmar`,\r\n                text: 'Esta seguro de eliminar la devolución?.',\r\n                accept:this.eliminarDevolucion\r\n            })\r\n        },\r\n        eliminarDevolucion(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('id',me.devolucion.id);\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'eliminarDevolucionGuias', formData)\r\n            .then(res => {\r\n            me.getListadoDevoluciones();\r\n            me.$vs.loading.close()\r\n            me.$vs.notify({\r\n                text:'devolución eliminado con exito',\r\n                color:'success',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n            })\r\n            me.devolucion = {}\r\n        }\r\n    }\r\n}\r\n",{"version":3,"sources":["ScreenDevolucionGuias.vue"],"names":[],"mappings":";AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ScreenDevolucionGuias.vue","sourceRoot":"src/views/pedidos/components/Guias/devolucionGuias","sourcesContent":["<template>\r\n    <div>\r\n        <div v-if=\"menu == 1\">\r\n            <vs-button color=\"primary\" type=\"border\" style=\"margin-top: -20px;\" @click=\"menu = 0\">← Regresar</vs-button>\r\n            <DevolucionBodegaVue v-if=\"menu == 1\" :id=\"id\" :periodo_id=\"periodo_id\" @change=\"changeHandle\" />\r\n        </div>\r\n        <div v-if=\"menu == 0\">\r\n            <vs-button class=\"btn_lg p-2\" color=\"success\"  @click=\"generarDevolucion()\" type=\"line\" icon-pack=\"feather\" icon=\"icon-plus\" icon-after>Solicitar Devolución</vs-button>\r\n            <vs-table max-items=\"10\" stripe search pagination :data=\"arregloDevoluciones\">\r\n                <template slot=\"header\">\r\n                    <vs-chip  color=\"primary\">Cantidad: <b> {{ arregloDevoluciones.length }}</b></vs-chip>\r\n                </template>\r\n                <template slot=\"thead\">\r\n                    <vs-th>#</vs-th>\r\n                    <vs-th>Asesor</vs-th>\r\n                    <vs-th>Cantidad a devolver</vs-th>\r\n                    <vs-th>Estado</vs-th>\r\n                    <vs-th>Acciones</vs-th>\r\n                </template>\r\n                <template slot-scope=\"{data}\">\r\n                    <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                        <vs-td>\r\n                           {{data[indextr].id}}<br>\r\n                        </vs-td>\r\n                        <vs-td>\r\n                            {{data[indextr].asesor}}<br>\r\n                        </vs-td>\r\n                        <vs-td>\r\n                            {{ tr.cantidad_devolver }}\r\n                        </vs-td>\r\n                        <vs-td>\r\n                            <vs-chip color=\"warning\" v-if=\"tr.estado == 0\">Pendiente</vs-chip>\r\n                            <vs-chip color=\"success\" v-if=\"tr.estado == 1\">Aprobado</vs-chip>\r\n                            <vs-chip color=\"danger\"  v-if=\"tr.estado == 2\">Rechazado</vs-chip><br><br>\r\n                            <div v-if=\"tr.estado == 1\">\r\n                                <p><b>Acta:</b> {{ tr.ven_codigo }}</p>\r\n                                <p><b>Fecha de aprobación:</b> {{ tr.fecha_aprobacion }}</p>\r\n                            </div>\r\n                        </vs-td>\r\n                        <vs-td>\r\n                            <div class=\"flex\" style=\"flex-direction: column;\">\r\n                                <!--EDITAR-->\r\n                                <vx-tooltip style=\"display: inline-block;\" text=\"Editar Devolución\" position=\"top\" color=\"primary\">\r\n                                    <vs-button class=\"modal-default-button\" v-if=\"tr.estado == 0\" @click=\"id = tr.id;menu = 1\" size=\"small\" color=\"dark\" type=\"filled\" icon-pack=\"feather\" icon=\"icon-edit\"> Editar Devolución</vs-button>\r\n                                </vx-tooltip> &nbsp;\r\n                                <!--DETALLE-->\r\n                                <vx-tooltip style=\"display: inline-block;\" text=\"Ver detalles\" position=\"top\" color=\"primary\">\r\n                                    <vs-button class=\"modal-default-button\" style=\"margin-top: -10px;\" size=\"small\" color=\"primary\" @click=\"getDetalles(tr)\" type=\"filled\" icon-pack=\"feather\" icon=\"icon-file-minus\"> Detalles</vs-button>\r\n                                </vx-tooltip> &nbsp;\r\n                                <!--ELIMINAR DEVOLUCION-->\r\n                                <vx-tooltip style=\"display: inline-block;\" text=\"Eliminar devolución de guias\" position=\"top\" color=\"dark\">\r\n                                    <vs-button class=\"modal-default-button\" v-if=\"tr.estado == 0\" style=\"margin-top: -10px;\" size=\"small\" color=\"warning\" type=\"filled\" icon-pack=\"feather\" @click=\"devolucion =tr;openConfirmEliminar()\" icon=\"icon-corner-down-left\"> Eliminar Devolución</vs-button>\r\n                                </vx-tooltip> &nbsp;\r\n                            </div>\r\n                        </vs-td>\r\n                    </vs-tr>\r\n                </template>\r\n            </vs-table>\r\n        </div>\r\n        <!--MODALES-->\r\n        <!--DETALLES-->\r\n        <vs-popup class=\"holamundo\" fullscreen :title=\"'Detalles de la Devolución'\" :active.sync=\"popupDetalles\">\r\n            <DetalleDevolucionVue v-if=\"popupDetalles\" :arregloDetalle=\"arregloDetalle\"/>\r\n        </vs-popup>\r\n    </div>\r\n</template>\r\n<script>\r\nimport DevolucionBodegaVue from './DevolucionBodega.vue';\r\nimport DetalleDevolucionVue from './components/DetalleDevolucion.vue';\r\nexport default{\r\n    data(){\r\n        return{\r\n            periodo_id:0,\r\n            usuario:[],\r\n            arregloDevoluciones:[],\r\n            arregloDetalle:[],\r\n            devolucion:{},\r\n            popupDetalles:false,\r\n            menu:0,\r\n            id:0,\r\n        }\r\n    },\r\n    components:{\r\n        DevolucionBodegaVue,\r\n        DetalleDevolucionVue,\r\n    },\r\n    props:{\r\n        periodoBodega:{\r\n            type:Number,\r\n            default:0,\r\n        },\r\n        periodoSelect:{\r\n          type:Object,\r\n          default:function(){\r\n            return {}\r\n          }\r\n        }\r\n    },\r\n    created(){\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"));\r\n        if(me.usuario.id_group == 11){\r\n            me.periodo_id = this.periodoSelect.idperiodoescolar\r\n        }\r\n        //bodega\r\n        else{\r\n            me.periodo_id = me.periodoBodega\r\n        } \r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.getListadoDevoluciones()\r\n    },\r\n    methods:{\r\n        changeHandle(e){\r\n            let me = this;\r\n            me.menu = 0\r\n            me.getListadoDevoluciones()\r\n        },\r\n        getListadoDevoluciones() {\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'guias?devolucion=yes&asesor_id='+me.usuario.idusuario+'&periodo_id='+me.periodo_id)\r\n                .then(function (res) {\r\n                    me.arregloDevoluciones = res.data\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        getDetalles(tr) {\r\n            let me = this;\r\n            me.arregloDetalle = []\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'guias?detalle=yes&id='+tr.id)\r\n                .then(function (res) {\r\n                    let datos = res.data\r\n                    me.arregloDetalle = datos.filter(p => p.cantidad_devuelta > 0)\r\n                    me.popupDetalles  = true\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        generarDevolucion(){\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'guias?validarGenerar=yes&asesor_id='+me.usuario.idusuario)\r\n                .then(function (res) {\r\n                    me.$vs.loading.close()\r\n                    if(res.data.status == 0){\r\n                        me.$vs.notify({\r\n                        text:res.data.message,\r\n                        color:'warning',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-check'})\r\n                        return\r\n                    }\r\n                    me.id = 0\r\n                    me.menu = 1   \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        openConfirmEliminar(){\r\n            this.$vs.dialog({\r\n                type:'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                cancelText:'cancelar',\r\n                title: `Confirmar`,\r\n                text: 'Esta seguro de eliminar la devolución?.',\r\n                accept:this.eliminarDevolucion\r\n            })\r\n        },\r\n        eliminarDevolucion(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('id',me.devolucion.id);\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'eliminarDevolucionGuias', formData)\r\n            .then(res => {\r\n            me.getListadoDevoluciones();\r\n            me.$vs.loading.close()\r\n            me.$vs.notify({\r\n                text:'devolución eliminado con exito',\r\n                color:'success',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n            })\r\n            me.devolucion = {}\r\n        }\r\n    }\r\n}\r\n</script>"]}]}