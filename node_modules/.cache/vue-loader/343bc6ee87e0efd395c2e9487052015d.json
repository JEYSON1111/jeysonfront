{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\docentes\\nuevo.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\docentes\\nuevo.vue","mtime":1712682815788},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nimport 'vue-select/dist/vue-select.css';\r\nimport Datepicker from 'vuejs-datepicker';\r\nimport flatPickr from 'vue-flatpickr-component';\r\nimport 'flatpickr/dist/flatpickr.css';\r\nVue.use(axios)\r\nexport default {\r\n    data() {\r\n        return {\r\n            nombre: '',\r\n            seccion: '',\r\n            materia: '',\r\n            aula: '',\r\n            usuario:[],\r\n            idcurso:'',\r\n            title:'',\r\n            asignaturas: [],\r\n            asignaturaSelected: {},\r\n            otraActivo: false,\r\n            nombre_otra_asignatura: '',\r\n        }\r\n    },\r\n    created() {\r\n        let me = this;\r\n        this.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n        if(localStorage.idcurso == ''){\r\n            this.title = \"Agregar nuevo curso\"\r\n        }else{\r\n            this.title = \"Editar Curso\"\r\n            this.$http.get(this.$server_url+'curso/' + localStorage.idcurso )\r\n                .then(function (response) {\r\n                    console.log(response.data);\r\n                    me.idcurso = response.data.idcurso\r\n                    me.nombre = response.data.nombre\r\n                    me.seccion = response.data.seccion\r\n                    me.materia = response.data.materia\r\n                    me.asignaturaSelected = {id: localStorage.idasignatura, label: localStorage.nombreasignatura}\r\n                    me.aula = response.data.aula\r\n                })\r\n                .catch(function (error) {})\r\n        }\r\n        if(me.desdeModal == 1){  me.asignaturaSelected = {id: localStorage.idasignatura, label: localStorage.nombreasignatura} }\r\n    },\r\n    mounted() {\r\n        this.getAsignaturas()\r\n    },\r\n    components: {\r\n        'v-select': vSelect\r\n    },\r\n    props:{\r\n      desdeModal:{\r\n        type:Number,\r\n        default:0\r\n      },\r\n    },\r\n    methods: {\r\n        getAsignaturas(){\r\n            let me = this\r\n            this.$http.get(this.$server_url+'asignaturasDoc/'+me.usuario.idusuario).then(res => {\r\n                me.asignaturas = res.data;\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n        },\r\n        enviar() {\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append(\"idusuario\", me.usuario.idusuario);\r\n            formData.append(\"idcurso\", me.idcurso);\r\n            formData.append(\"nombre\", me.nombre);\r\n            formData.append(\"seccion\", me.seccion);\r\n            formData.append(\"materia\", '---');\r\n            formData.append(\"aula\", me.aula);\r\n            if(me.usuario.id_group == 16){\r\n                formData.append('id_asignatura',localStorage.idasignatura)\r\n            }else{\r\n                formData.append(\"id_asignatura\", me.asignaturaSelected.id);\r\n            }\r\n            this.$http.post(this.$server_url+'curso',formData)\r\n                .then(function (response) {\r\n                    if(me.desdeModal == 1){\r\n                      me.$vs.notify({\r\n                      text:'Curso creado con éxito',\r\n                      color:'success',\r\n                      iconPack: 'feather',\r\n                      icon:'icon-check'})\r\n                      me.$emit('changeReturn',1)\r\n                    }else{\r\n                      me.$router.go(-1);\r\n                    }\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        crearOtraAsignatura(){\r\n            let me = this\r\n            let formData = new FormData();\r\n\r\n            formData.append('otraAsignatura',\"yes\");\r\n            formData.append('nombreasignatura', me.nombre_otra_asignatura);\r\n            formData.append('area_idarea', 83);\r\n            formData.append('nivel_idnivel', 30);\r\n            formData.append('tipo_asignatura', 0);\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'asignatura', formData)\r\n            .then(function (res) {\r\n                me.getAsignaturas()\r\n                me.asignaturaSelected.id = res.data.idasignatura\r\n                me.asignaturaSelected.label = res.data.nombreasignatura\r\n                me.asignaturaDocente(res.data.idasignatura)\r\n                me.$vs.loading.close()\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error)\r\n            })\r\n        },\r\n        asignaturaDocente(id_asignatura){\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('usuario_idusuario', me.usuario.idusuario);\r\n            formData.append('asignatura_idasignatura', id_asignatura);\r\n\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'guardar_asignatura_usuario', formData)\r\n            .then(function (res) {\r\n                me.nombre_otra_asignatura = ''\r\n                me.otraActivo = false\r\n                me.$vs.loading.close()\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error)\r\n            })\r\n        }\r\n    },\r\n}\r\n",{"version":3,"sources":["nuevo.vue"],"names":[],"mappings":";AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"nuevo.vue","sourceRoot":"src/views/docentes","sourcesContent":["<template>\r\n<div>\r\n    <vx-card :title=\"title\">\r\n        <div class=\"vx-row mb-6\">\r\n            <div class=\"vx-col sm:w-1/3 w-full\">\r\n                <span>Grado</span>\r\n            </div>\r\n            <div class=\"vx-col sm:w-2/3 w-full\">\r\n                <vs-input class=\"w-full\" v-model=\"nombre\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row mb-6\">\r\n            <div class=\"vx-col sm:w-1/3 w-full\">\r\n                <span>Área</span>\r\n            </div>\r\n            <div class=\"vx-col sm:w-2/3 w-full\">\r\n                <vs-input class=\"w-full\" v-model=\"seccion\" />\r\n            </div>\r\n        </div>\r\n        <div v-if=\"usuario.id_group == 16\">\r\n\r\n        </div>\r\n        <div class=\"vx-row mb-6\" v-else>\r\n            <div class=\"vx-col sm:w-1/3 w-full\">\r\n                <span>Asignatura</span>\r\n            </div>\r\n            <div class=\"vx-col sm:w-2/3 w-full\">\r\n                <vx-input-group>\r\n                    <v-select class=\"w-full\" v-model=\"asignaturaSelected\" :options=\"asignaturas\" :dir=\"$vs.rtl ? 'rtl' : 'ltr'\" />\r\n\r\n                    <template slot=\"append\">\r\n                        <div class=\"append-text btn-addon\">\r\n                        <vs-button color=\"primary\" @click=\"otraActivo=true\">Otra</vs-button>\r\n                        </div>\r\n                    </template>\r\n                </vx-input-group>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"p-2 mb-2 mt-4\" v-if=\"otraActivo===true\" align=\"justify\" style=\"background-color: #FFC8D4; color: #D50430; border-radius: 5px;\">\r\n            <span>\r\n                Antes de crear otra asignatura, verifique nuevamente en el listado asignaturas que se encuentra en la parte superior.<br>\r\n                Las asignaturas de naturales, sociales, lengua, matemática, computación y eca que ya pertenecen a prolipa, serán eliminadas por un administrador.\r\n            </span>\r\n        </div>\r\n        <span v-if=\"otraActivo===true\">Para mayor información escribanos a soporte@prolipa.com.ec</span>\r\n\r\n        <div class=\"vx-row mb-6\" v-if=\"otraActivo===true\">\r\n            <div class=\"vx-col sm:w-2/3 w-full ml-auto\">\r\n                Especifique: <br>\r\n\r\n                <vx-input-group>\r\n                    <vs-input v-model=\"nombre_otra_asignatura\" class=\"w-full\"></vs-input>\r\n\r\n                    <template slot=\"append\">\r\n                        <div class=\"append-text btn-addon\">\r\n                        <vs-button color=\"dark\" @click=\"crearOtraAsignatura()\">Guardar</vs-button>\r\n                        </div>\r\n                    </template>\r\n                </vx-input-group>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"vx-row mb-6\">\r\n            <div class=\"vx-col sm:w-1/3 w-full\">\r\n                <span>Paralelo</span>\r\n            </div>\r\n            <div class=\"vx-col sm:w-2/3 w-full\">\r\n                <vs-input class=\"w-full\" v-model=\"aula\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row\">\r\n            <div class=\"vx-col sm:w-2/3 w-full ml-auto\">\r\n              <vs-button class=\"mr-3 mb-2\" @click=\"enviar\">Enviar</vs-button>\r\n              <vs-button  v-if=\"desdeModal == 1\" color=\"danger\" type=\"border\" @click=\"$emit('changeReturn',0)\" class=\"mb-2\">Cancelar</vs-button>\r\n              <vs-button v-else color=\"danger\" type=\"border\" @click=\"$router.go(-1)\" class=\"mb-2\">Cancelar</vs-button>\r\n            </div>\r\n        </div>\r\n    </vx-card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nimport 'vue-select/dist/vue-select.css';\r\nimport Datepicker from 'vuejs-datepicker';\r\nimport flatPickr from 'vue-flatpickr-component';\r\nimport 'flatpickr/dist/flatpickr.css';\r\nVue.use(axios)\r\nexport default {\r\n    data() {\r\n        return {\r\n            nombre: '',\r\n            seccion: '',\r\n            materia: '',\r\n            aula: '',\r\n            usuario:[],\r\n            idcurso:'',\r\n            title:'',\r\n            asignaturas: [],\r\n            asignaturaSelected: {},\r\n            otraActivo: false,\r\n            nombre_otra_asignatura: '',\r\n        }\r\n    },\r\n    created() {\r\n        let me = this;\r\n        this.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n        if(localStorage.idcurso == ''){\r\n            this.title = \"Agregar nuevo curso\"\r\n        }else{\r\n            this.title = \"Editar Curso\"\r\n            this.$http.get(this.$server_url+'curso/' + localStorage.idcurso )\r\n                .then(function (response) {\r\n                    console.log(response.data);\r\n                    me.idcurso = response.data.idcurso\r\n                    me.nombre = response.data.nombre\r\n                    me.seccion = response.data.seccion\r\n                    me.materia = response.data.materia\r\n                    me.asignaturaSelected = {id: localStorage.idasignatura, label: localStorage.nombreasignatura}\r\n                    me.aula = response.data.aula\r\n                })\r\n                .catch(function (error) {})\r\n        }\r\n        if(me.desdeModal == 1){  me.asignaturaSelected = {id: localStorage.idasignatura, label: localStorage.nombreasignatura} }\r\n    },\r\n    mounted() {\r\n        this.getAsignaturas()\r\n    },\r\n    components: {\r\n        'v-select': vSelect\r\n    },\r\n    props:{\r\n      desdeModal:{\r\n        type:Number,\r\n        default:0\r\n      },\r\n    },\r\n    methods: {\r\n        getAsignaturas(){\r\n            let me = this\r\n            this.$http.get(this.$server_url+'asignaturasDoc/'+me.usuario.idusuario).then(res => {\r\n                me.asignaturas = res.data;\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n        },\r\n        enviar() {\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append(\"idusuario\", me.usuario.idusuario);\r\n            formData.append(\"idcurso\", me.idcurso);\r\n            formData.append(\"nombre\", me.nombre);\r\n            formData.append(\"seccion\", me.seccion);\r\n            formData.append(\"materia\", '---');\r\n            formData.append(\"aula\", me.aula);\r\n            if(me.usuario.id_group == 16){\r\n                formData.append('id_asignatura',localStorage.idasignatura)\r\n            }else{\r\n                formData.append(\"id_asignatura\", me.asignaturaSelected.id);\r\n            }\r\n            this.$http.post(this.$server_url+'curso',formData)\r\n                .then(function (response) {\r\n                    if(me.desdeModal == 1){\r\n                      me.$vs.notify({\r\n                      text:'Curso creado con éxito',\r\n                      color:'success',\r\n                      iconPack: 'feather',\r\n                      icon:'icon-check'})\r\n                      me.$emit('changeReturn',1)\r\n                    }else{\r\n                      me.$router.go(-1);\r\n                    }\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        crearOtraAsignatura(){\r\n            let me = this\r\n            let formData = new FormData();\r\n\r\n            formData.append('otraAsignatura',\"yes\");\r\n            formData.append('nombreasignatura', me.nombre_otra_asignatura);\r\n            formData.append('area_idarea', 83);\r\n            formData.append('nivel_idnivel', 30);\r\n            formData.append('tipo_asignatura', 0);\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'asignatura', formData)\r\n            .then(function (res) {\r\n                me.getAsignaturas()\r\n                me.asignaturaSelected.id = res.data.idasignatura\r\n                me.asignaturaSelected.label = res.data.nombreasignatura\r\n                me.asignaturaDocente(res.data.idasignatura)\r\n                me.$vs.loading.close()\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error)\r\n            })\r\n        },\r\n        asignaturaDocente(id_asignatura){\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('usuario_idusuario', me.usuario.idusuario);\r\n            formData.append('asignatura_idasignatura', id_asignatura);\r\n\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'guardar_asignatura_usuario', formData)\r\n            .then(function (res) {\r\n                me.nombre_otra_asignatura = ''\r\n                me.otraActivo = false\r\n                me.$vs.loading.close()\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error)\r\n            })\r\n        }\r\n    },\r\n}\r\n</script>\r\n"]}]}