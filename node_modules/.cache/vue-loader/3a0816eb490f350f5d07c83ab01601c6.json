{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\gestion_matricula\\administrador\\listado_matriculas.vue?vue&type=style&index=0&id=e62e150e&lang=css","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\gestion_matricula\\administrador\\listado_matriculas.vue","mtime":1712682815943},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n.btn_filtro{\r\n    font-size: 12px;\r\n    width: 100px;\r\n    height: 40px;\r\n    padding: 0px !important;\r\n}\r\n",{"version":3,"sources":["listado_matriculas.vue"],"names":[],"mappings":";AAgkCA;AACA;AACA;AACA;AACA;AACA","file":"listado_matriculas.vue","sourceRoot":"src/views/gestion_matricula/administrador","sourcesContent":["<template>\r\n    <div>\r\n\r\n\r\n    <!----modal exportar--------->\r\n    <vs-prompt title=\"Exportar a Excel\" class=\"export-options\" @accept=\"getEstudiantes(1)\" accept-text=\"Exportar\" :active.sync=\"activePrompt\">\r\n\r\n        <vs-alert class=\"mb-3\" color=\"danger\" icon-pack=\"feather\" icon=\"icon-info\">\r\n            <span>Recuerde <b>seleccionar</b> las filas que desea exportar.</span>\r\n        </vs-alert>\r\n\r\n        <vs-input v-model=\"fileName\" placeholder=\"Ingrese el nombre del archivo\" class=\"w-full\" />\r\n\r\n    </vs-prompt>\r\n    <!----fin modal exportar--------->\r\n\r\n    <!----modal importar--------->\r\n    <vs-popup title=\"Importar pagos desde excel\" :active.sync=\"modalImportar\">\r\n\r\n        <importarexcel style=\"z-index: 4;\"/>\r\n\r\n    </vs-popup>\r\n    <!----fin modal importar--------->\r\n\r\n    <!----modalProcesaMatricula--------->\r\n    <vs-popup title=\"Importar estudiantes a procesar\" :active.sync=\"modalProcesaMatricula\">\r\n\r\n        <procesarMatriculas style=\"z-index: 4;\"/>\r\n\r\n    </vs-popup>\r\n    <!----fin modalProcesaMatricula--------->\r\n\r\n\r\n    <!-- modal pagos -->\r\n    <vs-popup title=\"Ingreso de pago\" :active.sync=\"modalPagos\">\r\n        <!-- comprobante_pago: {{comprobante_pago}} -->\r\n        <div class=\"vx-row mb-3\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-3\">\r\n                <div style=\"font-size: 12px; color: gray;\">Forma de pago</div>\r\n                <v-select v-model=\"forma_pago\" :options=\"formas_pago\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full\">\r\n                <div style=\"font-size: 12px; color: gray;\">Banco/Coop.</div>\r\n                <v-select v-model=\"banco\" :options=\"bancos\" />\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div class=\"vx-row mb-base\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-3\">\r\n                <vs-input class=\"w-full\" label=\"Número TR/CH\" type=\"number\" v-model=\"n_tr_ch\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-3\">\r\n                <vs-input class=\"w-full\" label=\"Valor pagado\" type=\"number\" v-model=\"val_pagado\" />\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"w-full\" align=\"center\">\r\n            <vs-button type=\"gradient\" class=\"mb-3\" icon-pack=\"feather\" icon=\"icon-save\" @click=\"guardarPago()\">Guardar</vs-button>\r\n        </div>\r\n\r\n    </vs-popup>\r\n    <!-- fin modal pagos -->\r\n\r\n    <!-- modal cuotas -->\r\n    <vs-popup title=\"Modificación de cuota\" :active.sync=\"modalCuotas\">\r\n        <div class=\"vx-row mb-base\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-3\">\r\n                <vs-input class=\"w-full\" label=\"Valor Cuota\" type=\"number\" v-model=\"val_cuota_edit\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-3\">\r\n                <vs-input class=\"w-full\" label=\"Valor Pendiente\" type=\"number\" v-model=\"val_pend_edit\" />\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"w-full\" align=\"center\">\r\n            <vs-button type=\"gradient\" class=\"mb-3\" icon-pack=\"feather\" icon=\"icon-save\" @click=\"editarCuota()\">Editar</vs-button>\r\n        </div>\r\n    </vs-popup>\r\n    <!-- fin modal cuotas -->\r\n\r\n\r\n    <!-- modal solicitud -->\r\n    <vs-popup title=\"Validación de pago\" :active.sync=\"modalSolicitud\">\r\n        <div align=\"center\">\r\n            <a v-if=\"comprobante_pago.url\" :href=\"$data_url+comprobante_pago.url.substring(1,comprobante_pago.url.length)\" target=\"_blank\">\r\n                <img :src=\"$data_url+comprobante_pago.url.substring(1,comprobante_pago.url.length)\" style=\"width: 350px; border-radius: 5px;\" class=\"mb-3\">\r\n            </a>\r\n\r\n            <vs-textarea v-model=\"comprobante_pago.comentario\" />\r\n\r\n        </div>\r\n\r\n    </vs-popup>\r\n    <!-- fin modal solicitud -->\r\n\r\n    <!-- modal beca -->\r\n    <vs-popup title=\"Aplicación de una beca\" :active.sync=\"modalBeca\">\r\n\r\n\r\n        <vs-collapse>\r\n        <vs-collapse-item icon-pack=\"feather\" icon-arrow=\"icon-arrow-down\">\r\n            <div slot=\"header\"> Aplicar beca a estudiantes seleccionados </div>\r\n\r\n            <div class=\"w-full mb-base\" style=\"color: orange; background-color: #FFF1E3; padding: 8px; border-radius: 5px;\">\r\n                <span>Recuerde <b>seleccionar</b> los estudiantes a los que desea aplicar la beca.</span><br>\r\n                <span>La beca <b>no</b> se aplicará para valores pendientes <b>anteriores</b> al periodo actual.</span>\r\n            </div>\r\n\r\n            <div class=\"vx-row mb-base\">\r\n                <div class=\"vx-col mb-4 sm:w-1/2 w-full\">\r\n                    <vs-input icon-pack=\"feather\" icon=\"icon-percent\" icon-after vs-icon-after=\"true\" label-placeholder=\"Porcentaje descuento\" class=\"w-full\" type=\"number\" v-model=\"porcentaje_beca\" />\r\n                </div>\r\n                <div class=\"vx-col mb-4 sm:w-1/2 w-full\">\r\n                    <div style=\"color: gray; font-size: 12px;\">Aplicación</div>\r\n                    <!-- {{aplicacion_beca}} -->\r\n                    <v-select :options=\"formas_beca\" :reduce=\"formas_beca => formas_beca\" label=\"label\" class=\"w-full\" v-model=\"aplicacion_beca\" />\r\n                </div>\r\n            </div>\r\n\r\n            <div align=\"center\" class=\"w-full\">\r\n                <vs-button @click=\"aplicarBeca();\" color=\"dark\" type=\"filled\" class=\"mb-2 w-full\">Aplicar beca</vs-button>\r\n            </div>\r\n\r\n        </vs-collapse-item>\r\n\r\n        <vs-collapse-item icon-pack=\"feather\" icon-arrow=\"icon-arrow-down\">\r\n            <div slot=\"header\"> Aplicar becas de un excel </div>\r\n\r\n            <importarexcelbeca style=\"z-index: 4;\"/>\r\n\r\n        </vs-collapse-item>\r\n        </vs-collapse>\r\n\r\n    </vs-popup>\r\n    <!-- fin modal beca -->\r\n\r\n    <!-- Modal Configuraciones-->\r\n    <vs-popup fullscreen title=\"Detalle\" :active.sync=\"modalMatricula\">\r\n\r\n        <vs-tabs alignment=\"fixed\">\r\n        <vs-tab label=\"Matricula\">\r\n            <div v-if=\"estudiante.matricula\" class=\"w-full\">\r\n                <vs-input disabled class=\"mb-3 w-full\" label=\"Nombres\" type=\"text\" v-model=\"estudiante.nombres_completos\" />\r\n\r\n                <div class=\"vx-row mb-3\">\r\n                    <div class=\"vx-col sm:w-1/2 w-full\">\r\n                        <vs-input disabled class=\"w-full\" label=\"Cédula\" type=\"text\" v-model=\"estudiante.matricula.cedula\" />\r\n                    </div>\r\n                    <div class=\"vx-col sm:w-1/2 w-full\">\r\n                        <vs-input disabled class=\"w-full\" label=\"Fecha matrícula\" type=\"text\" v-model=\"estudiante.matricula.fecha_matricula\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"vx-row mb-3\">\r\n                    <div class=\"vx-col sm:w-1/2 w-full\">\r\n                    <!-- {{estudiante.matricula}} -->\r\n                        <div style=\"font-size: 12px; color: gray;\">Nivel</div>\r\n                       \r\n                        <v-select :options=\"niveles\" :reduce=\"niveles => niveles\" label=\"nombrenivel\" class=\"w-full\" v-model=\"estudiante.matricula.nivel\" @input=\"modificarMatricula()\" />\r\n                    </div>\r\n                    <div class=\"vx-col sm:w-1/2 w-full\">\r\n                    <!-- {{estudiante.matricula.paralelo}} -->\r\n                        <div style=\"font-size: 12px; color: gray;\">Paralelo</div>\r\n                        <v-select :options=\"paralelos\" :reduce=\"paralelos => paralelos\" label=\"descripcion\" class=\"w-full\" v-model=\"estudiante.matricula.paralelo\" @input=\"modificarMatricula()\" />\r\n                    </div>\r\n                </div>\r\n\r\n                <vs-input disabled class=\"mb-6 w-full\" label=\"Observaciones\" type=\"text\" v-model=\"estudiante.matricula.observacion\" />\r\n\r\n                <div class=\"vx-row mb-3\">\r\n                    <div class=\"vx-col sm:w-1/2 w-full\" align=\"center\">\r\n                        <div style=\"font-size: 12px; color: gray;\">Comprobante de pago</div>\r\n                        <a v-if=\"estudiante.matricula.url\" :href=\"$data_url+estudiante.matricula.url.substring(1,estudiante.matricula.url.length)\" target=\"_blank\">\r\n                            <img :src=\"$data_url+estudiante.matricula.url.substring(1,estudiante.matricula.url.length)\" style=\"width: 130px; border-radius: 5px;\" class=\"mb-3\">\r\n                        </a>\r\n                    </div>\r\n                    <div class=\"vx-col sm:w-1/2 w-full pt-3\" align=\"center\">\r\n\r\n                        <vs-button v-if=\"estado_matricula != 1\" @click=\"estado_matricula = 1; modificarMatricula();\" color=\"primary\" type=\"border\" icon-pack=\"feather\" icon=\"icon-check\" class=\"m-2 w-full\" style=\"font-size: 12px;\" size=\"small\">Validar Matrícula</vs-button>\r\n\r\n                        <vs-button v-if=\"estado_matricula != 2\" @click=\"estado_matricula = 2; modificarMatricula();\" color=\"dark\" type=\"border\" icon-pack=\"feather\" icon=\"icon-home\" class=\"m-2 w-full\" style=\"font-size: 12px;\" size=\"small\">Cambiar a reservado</vs-button>\r\n\r\n                        <vs-button @click=\"estado_matricula = 3; modificarMatricula();\" color=\"danger\" type=\"border\" icon-pack=\"feather\" icon=\"icon-trash\" class=\"m-2 w-full\" style=\"font-size: 12px;\" size=\"small\">Anular matrícula</vs-button>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </vs-tab>\r\n\r\n        <vs-tab label=\"Pensión\">\r\n            <div v-if=\"cuotas_matricula\">\r\n\r\n                <vs-table stripe :data=\"cuotas_matricula\">\r\n\r\n                    <template slot=\"thead\">\r\n                        <vs-th>#</vs-th>\r\n                        <vs-th>Fecha</vs-th>\r\n                        <vs-th>Valor</vs-th>\r\n                        <vs-th>Abonado</vs-th>\r\n                        <vs-th>Pendiente</vs-th>\r\n                        <vs-th>Acción</vs-th>\r\n                    </template>\r\n\r\n                    <template slot-scope=\"{data}\">\r\n                    <vs-tr :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n\r\n                        <vs-td v-if=\"tr.num_cuota == 0\">Pendientes</vs-td>\r\n                        <vs-td v-if=\"tr.num_cuota == 1\">Matrícula</vs-td>\r\n                        <vs-td v-if=\"tr.num_cuota > 1\"> Cuota {{tr.num_cuota-1}} </vs-td>\r\n                        <vs-td> {{tr.fecha_a_pagar}} </vs-td>\r\n                        <vs-td> {{tr.valor_cuota}} </vs-td>\r\n                        <vs-td> {{(tr.valor_cuota - tr.valor_pendiente).toFixed(2)}} </vs-td>\r\n                        <vs-td> {{tr.valor_pendiente.toFixed(2)}} </vs-td>\r\n\r\n                        <vs-td>\r\n                            <vx-tooltip text=\"Ver\" position=\"top\" color=\"danger\" style=\"display: inline-block; z-index: 3;\">\r\n                                <vs-button v-if=\"tr.url\" size=\"large\" radius icon-pack=\"feather\" icon=\"icon-info\" @click=\"comprobante_pago='';modalSolicitud=true; comprobante_pago=tr\" color=\"danger\" type=\"line\"></vs-button>\r\n                            </vx-tooltip>\r\n\r\n                            <vx-tooltip v-if=\"tr.valor_pendiente > 0\" text=\"Pagar\" position=\"top\" color=\"primary\" style=\"display: inline-block; z-index: 3;\">\r\n                                <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-dollar-sign\" @click=\"forma_pago='';banco='';n_tr_ch='';val_pagado='';modalPagos=true; comprobante_pago=tr;\" color=\"primary\" type=\"line\"></vs-button>\r\n                            </vx-tooltip>\r\n\r\n                            <vx-tooltip text=\"Modificar cuota\" position=\"top\" color=\"warning\" style=\"display: inline-block; z-index: 3;\">\r\n                                <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-edit\" @click=\"val_cuota_edit=0;val_pend_edit=0; fillformPago(tr)\" color=\"warning\" type=\"line\"></vs-button>\r\n                            </vx-tooltip>\r\n                        </vs-td>\r\n\r\n                    </vs-tr>\r\n                    </template>\r\n                </vs-table>\r\n\r\n            </div>\r\n        </vs-tab>\r\n\r\n         <vs-tab label=\"Información Estudiante\">\r\n\r\n            <div>\r\n\r\n                <!---INFORMACION DEL ESTUDIANTE-->\r\n                <div>\r\n                    <div slot=\"header\" style=\"margin-top:20px;\">\r\n                        <p style=\"color:#2A9FF6;\"><i class=\"fa fa-pencil\" aria-hidden=\"true\"></i> <span> Datos del Estudiante</span> </p>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <vs-row>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Nombres\"   v-model=\"informacionEstudiantes.nombres\" style=\"width:90%;\" placeholder=\"Nombre\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Apellidos\"  v-model=\"informacionEstudiantes.apellidos\" style=\"width:90%;\" placeholder=\"Apellidos\"/>\r\n                            </vs-col>\r\n\r\n                                <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Cédula\" disabled  v-model=\"informacionEstudiantes.cedula\" style=\"width:90%;\" placeholder=\"Cédula\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Email\"   v-model=\"informacionEstudiantes.email\" style=\"width:90%;\" placeholder=\"Email\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Institución\" disabled v-model=\"informacionEstudiantes.nombreInstitucion\" style=\"width:90%;\" placeholder=\"Institución\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Curso actual\" disabled v-model=\"informacionEstudiantes.nombrenivel\" style=\"width:90%;\" placeholder=\"Curso actual\"/>\r\n                            </vs-col>\r\n\r\n                        </vs-row>\r\n\r\n                        <br>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <!---INFORMACION DEL Representante Economico-->\r\n\r\n                <div>\r\n                    <div slot=\"header\" style=\"margin-top:20px;\">\r\n                    <p style=\"color:#2A9FF6;\"><i class=\"fa fa-pencil\" aria-hidden=\"true\"></i> <span> Datos del Representante Económico</span> </p>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <vs-row>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Parentesco\"   v-model=\"informacionEstudiantes.parentesco_rc\" style=\"width:90%;\" placeholder=\"Parentesco\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Nombres\"   v-model=\"informacionEstudiantes.nombres_rc\" style=\"width:90%;\" placeholder=\"Nombres\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Apellidos\"  v-model=\"informacionEstudiantes.apellidos_rc\" style=\"width:90%;\" placeholder=\"Apellidos\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Cédula\"  v-model=\"informacionEstudiantes.cedula_rc\" style=\"width:90%;\" placeholder=\"Cédula\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input type=\"number\" label=\"Teléfono casa\"  v-model=\"informacionEstudiantes.telefono_casa_rc\" style=\"width:90%;\" placeholder=\"Teléfono casa\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input type=\"number\" label=\"Teléfono celular\"  v-model=\"informacionEstudiantes.telefono_celular_rc\" style=\"width:90%;\" placeholder=\"Celular\"/>\r\n                            </vs-col>\r\n\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input  label=\"Dirección\"  v-model=\"informacionEstudiantes.direccion_rc\" style=\"width:90%;\" placeholder=\"Dirección\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Empresa\"  v-model=\"informacionEstudiantes.empresa_rc\" style=\"width:90%;\" placeholder=\"Empresa\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Profesión\"  v-model=\"informacionEstudiantes.profesion_rc\" style=\"width:90%;\" placeholder=\"Profesión\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Dirección trabajo\"  v-model=\"informacionEstudiantes.direccion_trabajo_rc\" style=\"width:90%;\" placeholder=\"Dirección trabajo\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Email\"  v-model=\"informacionEstudiantes.email_rc\" style=\"width:90%;\" placeholder=\"Email\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Sexo\"  v-model=\"informacionEstudiantes.sexo_rc\" style=\"width:90%;\" placeholder=\"Sexo\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Nacionalidad\"  v-model=\"informacionEstudiantes.nacionalidad_rc\" style=\"width:90%;\" placeholder=\"Nacionalidad\"/>\r\n                            </vs-col>\r\n\r\n\r\n                        </vs-row>\r\n                        <br/>\r\n\r\n\r\n                    </div>\r\n                </div>\r\n\r\n                <!---INFORMACION DEL Representante Legal-->\r\n\r\n                <div>\r\n                    <div slot=\"header\">\r\n                        <p style=\"color:#2A9FF6;\"><i class=\"fa fa-pencil\" aria-hidden=\"true\"></i> <span> Datos del Representante legal</span> </p>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <vs-row>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Parentesco\"   v-model=\"informacionEstudiantes.parentesco_rl\" style=\"width:90%;\" placeholder=\"Parentesco\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Nombres\"   v-model=\"informacionEstudiantes.nombres_rl\" style=\"width:90%;\" placeholder=\"Nombres\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Apellidos\"  v-model=\"informacionEstudiantes.apellidos_rl\" style=\"width:90%;\" placeholder=\"Apellidos\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Cédula\"  v-model=\"informacionEstudiantes.cedula_rl\" style=\"width:90%;\" placeholder=\"Cédula\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input type=\"number\" label=\"Teléfono casa\"  v-model=\"informacionEstudiantes.telefono_casa_rl\" style=\"width:90%;\" placeholder=\"Teléfono casa\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input type=\"number\" label=\"Teléfono celular\"  v-model=\"informacionEstudiantes.telefono_celular_rl\" style=\"width:90%;\" placeholder=\"Celular\"/>\r\n                            </vs-col>\r\n\r\n\r\n                            <vs-col  vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input  label=\"Dirección\"  v-model=\"informacionEstudiantes.direccion_rl\" style=\"width:90%;\" placeholder=\"Dirección\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Empresa\"  v-model=\"informacionEstudiantes.empresa_rl\" style=\"width:90%;\" placeholder=\"Empresa\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Profesión\"  v-model=\"informacionEstudiantes.profesion_rl\" style=\"width:90%;\" placeholder=\"Profesión\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Dirección trabajo\"  v-model=\"informacionEstudiantes.direccion_trabajo_rl\" style=\"width:90%;\" placeholder=\"Dirección trabajo\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Email\"  v-model=\"informacionEstudiantes.email_rl\" style=\"width:90%;\" placeholder=\"Email\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Sexo\"  v-model=\"informacionEstudiantes.sexo_rl\" style=\"width:90%;\" placeholder=\"Sexo\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Nacionalidad\"  v-model=\"informacionEstudiantes.nacionalidad_rl\" style=\"width:90%;\" placeholder=\"Nacionalidad\"/>\r\n                            </vs-col>\r\n\r\n                            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"6\">\r\n                                <vs-input label=\"Email Institucional\"   v-model=\"informacionEstudiantes.email_institucional_rl\" style=\"width:90%;\" placeholder=\"Email Institucional\"/>\r\n                            </vs-col>\r\n                        </vs-row>\r\n                        <br/>\r\n\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <vs-row>\r\n                    <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"12\">\r\n                        <vs-button @click=\"actualizarData()\" id=\"btnUpdateDatos\" type=\"gradient\">Guardar datos</vs-button>\r\n\r\n                        <vs-button ref=\"loadableButton\" style=\"margin-left:20px;\" color=\"success\" @click=\"generarPassword()\" type=\"relief\">\r\n                                Resetear contraseña\r\n                        </vs-button>\r\n                    </vs-col>\r\n                </vs-row>\r\n\r\n\r\n            </div>\r\n\r\n        </vs-tab>\r\n\r\n        </vs-tabs>\r\n\r\n\r\n\r\n    </vs-popup>\r\n    <!----fin modal configuraciones-->\r\n\r\n\r\n    <vx-card>\r\n\r\n    <vs-tabs alignment=\"fixed\">\r\n    <vs-tab label=\"Matriculación\">\r\n    <!-----listado estudiantes--------->\r\n        <div v-if=\"estudiantes\">\r\n        <vs-table v-model=\"estudiantes_selected\" stripe pagination max-items=\"10\" search :data=\"estudiantes\">\r\n            <template slot=\"header\">\r\n                <!-- <div class=\"btn-group\">\r\n                    <vs-button color=\"success\" type=\"line\" @click=\"tipo_listado=1; getEstudiantes('no_excel')\" class=\"btn_filtro\">Matriculados</vs-button>\r\n                    <vs-button color=\"primary\" type=\"line\" @click=\"tipo_listado=2; getEstudiantes('no_excel')\" class=\"btn_filtro\">Reservados</vs-button>\r\n                    <vs-button color=\"warning\" type=\"line\" @click=\"tipo_listado='null'; getEstudiantes('no_excel')\" class=\"btn_filtro\">Todos</vs-button>\r\n                </div> -->\r\n\r\n                <vx-tooltip text=\"Descargar listado\" position=\"top\" color=\"success\">\r\n                    <vs-button radius class=\"ml-3\" color=\"success\" type=\"border\" icon-pack=\"feather\" icon=\"icon-download\" @click=\"activePrompt = true\"></vs-button>\r\n                </vx-tooltip>\r\n\r\n                <vx-tooltip v-if=\"tipo_listado==1 || tipo_listado==2\" text=\"Subir pagos de un excel\" position=\"top\" color=\"primary\">\r\n                    <vs-button @click=\"modalImportar=true\" radius class=\"ml-3\" color=\"primary\" type=\"border\" icon-pack=\"feather\" icon=\"icon-upload\"></vs-button>\r\n                </vx-tooltip>\r\n\r\n                <vx-tooltip v-if=\"tipo_listado==1 || tipo_listado==2\" text=\"Aplicar beca o descuento\" position=\"top\" color=\"warning\">\r\n                    <vs-button @click=\"porcentaje_beca=''; modalBeca=true\" radius class=\"ml-3\" color=\"warning\" type=\"border\" icon-pack=\"feather\" icon=\"icon-trending-down\"></vs-button>\r\n                </vx-tooltip>\r\n\r\n                <vx-tooltip v-if=\"tipo_listado==1 || tipo_listado==2\" text=\"Procesar matrículas\" position=\"top\" color=\"dark\" class=\"mr-2\">\r\n                    <vs-button @click=\"porcentaje_beca=''; modalProcesaMatricula=true\" radius class=\"ml-3\" color=\"dark\" type=\"border\" icon-pack=\"feather\" icon=\"icon-check\"></vs-button>\r\n                </vx-tooltip>\r\n\r\n                <vx-tooltip text=\"Para buscar de clíc fuera del campo de texto.\" position=\"top\" color=\"dark\" class=\"mr-2\">\r\n                <vs-dropdown class=\"ml-3\" vs-custom-content vs-trigger-click>\r\n                    <a class=\"flex items-center\" href.prevent>\r\n                    <span>Filtros</span>\r\n                    <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4 ml-1\" />\r\n                    </a>\r\n\r\n                    <vs-dropdown-menu class=\"dropdown-login\" align=\"center\">\r\n                        <vs-divider>Búsqueda individual</vs-divider>\r\n                        <div class=\"px-4 pb-3\">\r\n                            <vs-input type=\"text\" label-placeholder=\"Por nombres\" class=\"mb-base w-full\" v-model=\"value_filtro1\" @blur=\"filtro_busqueda(value_filtro1, 'nombres')\" />\r\n                            <vs-input type=\"text\" label-placeholder=\"Por apellidos\" class=\"mb-base w-full\" v-model=\"value_filtro2\" @blur=\"filtro_busqueda(value_filtro2, 'apellidos')\" />\r\n                            <vs-input type=\"number\" label-placeholder=\"Por cédula\" class=\"mb-base w-full\" v-model=\"value_filtro3\" @blur=\"filtro_busqueda(value_filtro3, 'cedula')\" />\r\n                            <vs-input type=\"email\" label-placeholder=\"Por email\" class=\"mb-4 w-full\" v-model=\"value_filtro4\" @blur=\"filtro_busqueda(value_filtro4, 'email')\" />\r\n\r\n                            <vs-divider>Búsqueda general</vs-divider>\r\n\r\n                            <vs-button color=\"success\" type=\"line\" @click=\"tipo_listado=1; getEstudiantes('no_excel')\" class=\"btn_filtro\">Matriculados</vs-button>\r\n                            <vs-button color=\"primary\" type=\"line\" @click=\"tipo_listado=2; getEstudiantes('no_excel')\" class=\"btn_filtro\">Reservados</vs-button>\r\n                            <vs-button color=\"warning\" type=\"line\" @click=\"tipo_listado='null'; getEstudiantes('no_excel')\" class=\"btn_filtro\">Todos</vs-button>\r\n\r\n\r\n                        </div>\r\n                    </vs-dropdown-menu>\r\n\r\n                </vs-dropdown>\r\n                </vx-tooltip>\r\n\r\n                <v-select :options=\"periodos\" :reduce=\"periodos => periodos\" label=\"periodoescolar\" style=\"width: 180px;\" v-model=\"periodo_selected\" />\r\n\r\n            </template>\r\n\r\n        <template slot=\"thead\">\r\n                <vs-th>Cédula</vs-th>\r\n                <vs-th>Nombres</vs-th>\r\n                <vs-th>Apellidos</vs-th>\r\n                <!-- <vs-th>Email</vs-th> -->\r\n                <vs-th>Teléfono</vs-th>\r\n                <vs-th>Fecha matrícula</vs-th>\r\n                <vs-th>Estado matrícula</vs-th>\r\n                <vs-th>Estado Pagos</vs-th>\r\n                <vs-th v-if=\"tipo_listado!='null'\">Acciones</vs-th>\r\n            </template>\r\n\r\n            <template slot-scope=\"{data}\">\r\n            <vs-tr :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n\r\n                <vs-td> {{tr.matricula.id_matricula}} - {{tr.matricula.cedula}} </vs-td>\r\n                <vs-td> {{tr.matricula.nombres}} </vs-td>\r\n                <vs-td> {{tr.matricula.apellidos}} </vs-td>\r\n                <!-- <vs-td> {{tr.matricula.email}} </vs-td> -->\r\n                <vs-td> {{tr.matricula.telefono}} </vs-td>\r\n                <vs-td> {{tr.matricula.fecha_matricula}} </vs-td>\r\n                <vs-td>\r\n                    <div v-if=\"tr.matricula.estado_matricula == 2\">Reservado</div>\r\n                    <div v-if=\"tr.matricula.estado_matricula == 1\">Matriculado</div>\r\n                    <div v-if=\"!tr.matricula.estado_matricula\">Pendiente</div>\r\n                </vs-td>\r\n                <vs-td>\r\n\r\n                    <div v-if=\"tr.cxc.length > 0\">\r\n\r\n                        <div hidden :key=\"index_cxc\" v-for=\"(item_cxc, index_cxc) in tr.cxc\" class=\"mb-base\">\r\n                            {{item_cxc.fecha_a_pagar.substr(0,10) +' - '+ fecha_actual+'  comprobante: '+item_cxc.url +' valor pend: '+item_cxc.valor_pendiente}}\r\n                            <div v-if=\"item_cxc.fecha_a_pagar.substr(0,10) <= fecha_actual && item_cxc.url && item_cxc.valor_pendiente > 0\">\r\n                                <div>{{ color_fila[indextr] = 'warning' }}</div>\r\n                                <div>{{ estado_pago[indextr] = 'Mora con solicitud de pago' }}</div>\r\n                            </div>\r\n\r\n                            <div v-if=\"item_cxc.fecha_a_pagar.substr(0,10) <= fecha_actual && !item_cxc.url && item_cxc.valor_pendiente > 0\">\r\n                                <div>{{ color_fila[indextr] = 'danger' }}</div>\r\n                                <div>{{ estado_pago[indextr] = 'Mora' }}</div>\r\n                            </div>\r\n\r\n                            <div v-if=\"item_cxc.fecha_a_pagar.substr(0,10) <= fecha_actual && item_cxc.valor_pendiente == 0\">\r\n                                <div>{{ color_fila[indextr] = 'dark' }}</div>\r\n                                <div>{{ estado_pago[indextr] = 'Al día - faltan cuotas' }}</div>\r\n                            </div>\r\n\r\n                            <div v-if=\"tr.cxc[tr.cxc.length-1].valor_pendiente == 0\">\r\n                                <div>{{ color_fila[indextr] = 'success' }}</div>\r\n                                <div>{{ estado_pago[indextr] = 'Al día' }}</div>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <vs-button v-if=\"estado_pago[indextr]\" :color=\"color_fila[indextr]\" type=\"filled\" style=\"width: 200px; padding: 5px; font-size: 14px;\"> {{estado_pago[indextr]}} </vs-button>\r\n\r\n                    </div>\r\n                    <div align=\"center\" v-else>No matriculado</div>\r\n                </vs-td>\r\n\r\n                <vs-td class=\"text-center\" v-if=\"tipo_listado!='null'\">\r\n\r\n                    <vx-tooltip style=\"display: inline-block;\" text=\"Ver\" position=\"top\" color=\"success\">\r\n                        <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-eye\" @click=\"verEstudiante(tr)\" color=\"success\" type=\"line\"></vs-button>\r\n                    </vx-tooltip>\r\n                </vs-td>\r\n\r\n            </vs-tr>\r\n            </template>\r\n        </vs-table>\r\n        </div>\r\n        <div class=\"btn-group\" v-else>\r\n            <!-- <vs-button color=\"success\" type=\"line\" @click=\"tipo_listado=1; getEstudiantes('no_excel')\" class=\"btn_filtro\">Matriculados</vs-button>\r\n            <vs-button color=\"primary\" type=\"line\" @click=\"tipo_listado=2; getEstudiantes('no_excel')\" class=\"btn_filtro\">Reservados</vs-button>\r\n            <vs-button color=\"warning\" type=\"line\" @click=\"tipo_listado='null'; getEstudiantes('no_excel')\" class=\"btn_filtro\">Todos</vs-button> -->\r\n\r\n            <vs-dropdown class=\"ml-3\" vs-custom-content vs-trigger-click>\r\n                <a class=\"flex items-center\" href.prevent>\r\n                <span>Filtros</span>\r\n                <feather-icon icon=\"ChevronDownIcon\" svgClasses=\"h-4 w-4 ml-1\" />\r\n                </a>\r\n\r\n                <vs-dropdown-menu class=\"dropdown-login\">\r\n                    <vs-divider>Búsqueda individual</vs-divider>\r\n                    <div class=\"px-4 pb-3\" align=\"center\">\r\n                        <vs-input type=\"text\" label-placeholder=\"Por nombres\" class=\"mb-base w-full\" v-model=\"value_filtro1\" @blur=\"filtro_busqueda(value_filtro1, 'nombres')\" />\r\n                        <vs-input type=\"text\" label-placeholder=\"Por apellidos\" class=\"mb-base w-full\" v-model=\"value_filtro2\" @blur=\"filtro_busqueda(value_filtro2, 'apellidos')\" />\r\n                        <vs-input type=\"number\" label-placeholder=\"Por cédula\" class=\"mb-base w-full\" v-model=\"value_filtro3\" @blur=\"filtro_busqueda(value_filtro3, 'cedula')\" />\r\n                        <vs-input type=\"email\" label-placeholder=\"Por email\" class=\"mb-4 w-full\" v-model=\"value_filtro4\" @blur=\"filtro_busqueda(value_filtro4, 'email')\" />\r\n\r\n                        <vs-divider>Búsqueda general</vs-divider>\r\n\r\n                        <vs-button color=\"success\" type=\"line\" @click=\"tipo_listado=1; getEstudiantes('no_excel')\" class=\"btn_filtro\">Matriculados</vs-button>\r\n                        <vs-button color=\"primary\" type=\"line\" @click=\"tipo_listado=2; getEstudiantes('no_excel')\" class=\"btn_filtro\">Reservados</vs-button>\r\n                        <vs-button color=\"warning\" type=\"line\" @click=\"tipo_listado='null'; getEstudiantes('no_excel')\" class=\"btn_filtro\">Todos</vs-button>\r\n\r\n                    </div>\r\n                </vs-dropdown-menu>\r\n\r\n                <v-select :options=\"periodos\" :reduce=\"periodos => periodos\" label=\"periodoescolar\" style=\"width: 180px;\" v-model=\"periodo_selected\" />\r\n\r\n            </vs-dropdown>\r\n\r\n        </div>\r\n        <!------fin listado estudiantes--------->\r\n    </vs-tab>\r\n\r\n    <vs-tab label=\"Configuración\">\r\n        <niveles/>\r\n    </vs-tab>\r\n\r\n    </vs-tabs>\r\n    </vx-card>\r\n       <div>\r\n           <img src=\"\" alt=\"\">\r\n       </div>\r\n    </div>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n    import axios from 'axios'\r\n    import vSelect from 'vue-select'\r\n    import flatPickr from 'vue-flatpickr-component'\r\n    import 'flatpickr/dist/flatpickr.css'\r\n    import moment from 'moment'\r\n    import niveles from './matricula_niveles.vue'\r\n    import importarexcel from './components/excel_pagos.vue'\r\n    import importarexcelbeca from './components/excel_becas.vue'\r\n    import procesarMatriculas from './components/excel_procesa_matriculas.vue'\r\n    import informacionEstudiante from './components/informacionEstudiante.vue'\r\n    export default {\r\n        data(){\r\n            return {\r\n                color_fila: [],\r\n                usuario: [],\r\n                estudiantes: [],\r\n                estudiante: {},\r\n                modalMatricula: false,\r\n                observaciones: '',\r\n                estado_matricula: 0,\r\n                modalPagos: false,\r\n                modalSolicitud: false,\r\n                niveles: [],\r\n                paralelos:[],\r\n                comprobante_pago: {},\r\n                forma_pago: '',\r\n                formas_pago: ['Efectivo', 'Transferencia', 'Cheque'],\r\n                banco: '',\r\n                bancos: ['Banco Pichincha', 'Banco Guayaquil', 'Produbanco', 'Coop. 29 Octubre'],\r\n                n_tr_ch: '',\r\n                val_pagado: 0,\r\n                tipo_listado: 1,\r\n                fecha_actual: '',\r\n                estado_pago: [],\r\n                activePrompt: false,\r\n                fileName: '',\r\n                estudiantes_selected: [],\r\n                modalImportar: false,\r\n                modalBeca: false,\r\n                porcentaje_beca: '',\r\n                aplicacion_beca: '',\r\n                formas_beca: [\r\n                    {id: 1, label: 'Solo a pensiones'},\r\n                    {id: 2, label: 'Solo a matrícula'},\r\n                    {id: 3, label: 'Matrícula y pensiones'}\r\n                ],\r\n                modalProcesaMatricula: false,\r\n                matricula_admin:'',\r\n                institucionAdmin:'',\r\n                modalCuotas: false,\r\n                val_cuota_edit: 0,\r\n                val_pend_edit: 0,\r\n                cuotas_matricula: [],\r\n                id_matricula_selected: '',\r\n                informacionEstudiantes:[],\r\n                emailuser:'',\r\n                periodos: [],\r\n                periodo_selected: {},\r\n                value_filtro1: '', value_filtro2: '', value_filtro3: '', value_filtro4: '',\r\n            }\r\n        },\r\n        components: {\r\n            'v-select': vSelect,\r\n            flatPickr,\r\n            niveles,\r\n            importarexcel,\r\n            importarexcelbeca,\r\n            procesarMatriculas,\r\n            informacionEstudiante\r\n        },\r\n        created(){\r\n            this.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n            this.matricula_admin = localStorage.getItem(\"matricula_admin\")\r\n            // this.getEstudiantes(2)// 2 carga todo pero no descarga excel\r\n            this.getCombos()\r\n        },\r\n        methods: {\r\n            getPeriodos(){\r\n              let me = this\r\n              this.$http.get(this.$server_url+'periodosXInstitucion/'+me.institucionAdmin)\r\n              .then(res => {\r\n                  me.periodos = res.data\r\n                  me.periodo_selected = me.periodos[0]\r\n              })\r\n            },\r\n            getCombos(){\r\n                let me = this\r\n                if(me.matricula_admin == \"yes\"){\r\n                    me.institucionAdmin = localStorage.getItem(\"matricula_institucion\")\r\n                }else{\r\n                    me.institucionAdmin = me.usuario.institucion_idInstitucion\r\n                }\r\n\r\n                me.getPeriodos()\r\n\r\n                this.$http.get(this.$server_url+'combos_matricula/'+me.institucionAdmin)\r\n                .then(res => {\r\n                    me.niveles = res.data.niveles\r\n                    me.paralelos = res.data.paralelos\r\n                })\r\n            },\r\n            getEstudiantes(excel){\r\n                let me = this\r\n                me.$vs.loading()\r\n\r\n                let descarga_excel = 'no_excel'\r\n                if( excel == 1 | excel == 2 ){ descarga_excel = 1 }\r\n\r\n                if(me.matricula_admin == \"yes\"){\r\n                    me.institucionAdmin = localStorage.getItem(\"matricula_institucion\")\r\n                }else{\r\n                    me.institucionAdmin = me.usuario.institucion_idInstitucion\r\n                }\r\n\r\n                this.$http.get(this.$server_url+'listado_matriculas/'+me.institucionAdmin+'/'+me.periodo_selected.idperiodoescolar+'/'+me.tipo_listado+'/'+descarga_excel)\r\n                .then(res => {\r\n\r\n                    let date_actual = new Date()\r\n                    me.fecha_actual = moment(date_actual, 'DD/MM/YYYY HH:mm:ss').format('YYYY-MM-DD');\r\n                    me.estudiantes = res.data.items\r\n\r\n                    if( excel == 1 ){\r\n                        me.estudiantes_selected = res.data.items\r\n                        me.exportToExcel()\r\n                    }\r\n\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n            },\r\n            getCuotas(id_matricula){\r\n                let me = this\r\n                me.$vs.loading()\r\n\r\n                this.$http.get(this.$server_url+'get_cuotas/'+id_matricula)\r\n                .then(res => {\r\n                    me.cuotas_matricula = res.data\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n            },\r\n            filtro_busqueda(value_filtro, tipo){\r\n                let me = this\r\n                if( value_filtro == '' ){ return }\r\n\r\n                me.$vs.loading()\r\n                this.$http.get(this.$server_url+'busqueda_estudiante_mat/'+me.periodo_selected.idperiodoescolar+'/'+me.institucionAdmin+'/'+tipo+'/'+value_filtro)\r\n                .then(res => {\r\n                    me.estudiantes = res.data.items\r\n                    me.$vs.loading.close()\r\n                    return\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                    return\r\n                })\r\n\r\n            },\r\n            getDataEstudiante() {\r\n                let me = this;\r\n                me.$vs.loading();\r\n\r\n            let cedula = localStorage.getItem(\"cedulaEstudiante\")\r\n            let institucion = localStorage.getItem(\"institucionEstudiante\")\r\n\r\n                this.$http.get(this.$server_url+'estudiante/matricula?cedula='+cedula+'&institucion_id='+institucion)\r\n                    .then(function (res) {\r\n                    me.informacionEstudiantes = res.data[0]\r\n\r\n                    me.$vs.loading.close()\r\n\r\n                    })\r\n                    .catch(function (error) {\r\n                        console.log(error + ' error');\r\n                        me.$vs.loading.close()\r\n\r\n                    })\r\n            },\r\n            verEstudiante(item){\r\n                let me = this\r\n                me.getCuotas(item.matricula.id_matricula)\r\n                me.modalMatricula = true\r\n                localStorage.setItem('emailEstudiante',item.matricula.email)\r\n                localStorage.setItem('cedulaEstudiante',item.matricula.cedula)\r\n                localStorage.setItem('institucionEstudiante',item.matricula.institucion_idInstitucion)\r\n\r\n                me.getDataEstudiante(item.matricula.cedula,item.matricula.institucion_idInstitucion)\r\n\r\n                me.estudiante = item\r\n                me.estado_matricula = item.matricula.estado_matricula\r\n\r\n                me.estudiante.matricula.nivel = { \"nombrenivel\": item.matricula.nombrenivel, \"nivel_id\": item.matricula.nivel_id}\r\n\r\n                me.estudiante.matricula.paralelo = { \"paralelo_id\": item.matricula.paralelo_id, \"descripcion\": item.matricula.descripcion}\r\n            },\r\n            modificarMatricula(){\r\n                let me = this\r\n                let formData = new FormData();\r\n                    formData.append('id_matricula', me.estudiante.matricula.id_matricula);\r\n                    formData.append('estado_matricula', me.estado_matricula);\r\n                    formData.append('nivel', me.estudiante.matricula.nivel.nivel_id);\r\n                    formData.append('paralelo', me.estudiante.matricula.paralelo.paralelo_id);\r\n                    formData.append('id_usuario', me.estudiante.matricula.idusuario);\r\n                    formData.append('id_director', me.usuario.idusuario);\r\n                    formData.append('cedulaEstudiante',localStorage.cedulaEstudiante);\r\n\r\n                me.$vs.loading()\r\n                this.$http.post(this.$server_url+'matriculas_admin', formData)\r\n                .then(res => {\r\n                    me.modalMatricula = false\r\n                    me.$vs.loading.close()\r\n                    me.getEstudiantes('no_excel')\r\n                    me.$vs.notify({\r\n                    text:'Matricula modificada exitosamente',\r\n                    color:'success',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n            },\r\n            guardarPago(){\r\n                let me = this\r\n\r\n                me.$vs.loading()\r\n                let formData = new FormData();\r\n                    formData.append('forma_pago', me.forma_pago);\r\n                    formData.append('banco', me.banco);\r\n                    formData.append('n_tr_ch', me.n_tr_ch);\r\n                    formData.append('val_pagado', me.val_pagado);\r\n                    formData.append('id_cuotas_id', me.comprobante_pago.id_cuotas_id);\r\n                    formData.append('id_matricula', me.comprobante_pago.id_matricula);\r\n                    formData.append('id_usuario', me.usuario.idusuario);\r\n                this.$http.post(this.$server_url+'guardar_pago_matricula', formData)\r\n                .then(res => {\r\n                    me.$vs.loading.close()\r\n                    if( res.data == 2 ){\r\n                        me.$vs.notify({\r\n                        text:'El valor ingresado excede el total pendiente de todas las cuotas faltantes.',\r\n                        color:'warning',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-alert-triangle'})\r\n                    }else{\r\n                        me.getCuotas(me.id_matricula_selected)\r\n                        me.modalPagos = false\r\n                        me.$vs.notify({\r\n                        text:'Cuota pagada exitosamente',\r\n                        color:'success',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-check'})\r\n                    }\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n\r\n            },\r\n            exportToExcel(){\r\n                let me = this\r\n\r\n                // let headerTitle = ['Cédula', 'Nombres', 'Apellidos', 'Teléfono','Fecha matriculación', 'Estado matrícula', 'Periodo', 'Valor cuota', 'valor pendiente', 'fecha pago', 'N. cuota', 'Solicitud de pago'];\r\n                let headerTitle = ['Cédula', 'Nombres', 'Apellidos', 'Teléfono','Fecha matriculación', 'Estado matrícula', 'Periodo', 'Nivel', 'Paralelo'];\r\n                // let headerVal = ['cedula', 'nombres', 'apellidos', 'telefono','fecha_matricula', 'estado_matricula', 'descripcion_periodo', 'valor_cuota', 'valor_pendiente', 'fecha_a_pagar', 'num_cuota', 'comentario'];\r\n                let headerVal = ['cedula', 'nombres', 'apellidos', 'telefono','fecha_matricula', 'estado_matricula', 'descripcion_periodo', 'nivel', 'paralelo'];\r\n\r\n                let estudiantes_filed = []\r\n                $.each(me.estudiantes_selected,function(key, value){\r\n                    // if(value.cxc.length > 0){\r\n                    //     $.each(value.cxc,function(key_1, value_1){\r\n                    //         estudiantes_filed.push({\r\n                    //             cedula: value.matricula.cedula,\r\n                    //             nombres: value.matricula.nombres,\r\n                    //             apellidos: value.matricula.apellidos,\r\n                    //             telefono: value.matricula.telefono,\r\n                    //             fecha_matricula: value.matricula.fecha_matricula,\r\n                    //             estado_matricula: value.matricula.estado_matricula,\r\n                    //             descripcion_periodo: value.matricula.descripcion_periodo,\r\n                    //             valor_cuota: value_1.valor_cuota,\r\n                    //             valor_pendiente: value_1.valor_pendiente,\r\n                    //             fecha_a_pagar: value_1.fecha_a_pagar,\r\n                    //             num_cuota: value_1.num_cuota,\r\n                    //             comentario: value_1.comentario,\r\n                    //         })\r\n                    //     });\r\n                    // }else{\r\n                    //     estudiantes_filed.push({\r\n                    //         cedula: value.matricula.cedula,\r\n                    //         nombres: value.matricula.nombres,\r\n                    //         apellidos: value.matricula.apellidos,\r\n                    //         telefono: value.matricula.telefono,\r\n                    //         fecha_matricula: value.matricula.fecha_matricula,\r\n                    //         estado_matricula: value.matricula.estado_matricula,\r\n                    //         descripcion_periodo: value.matricula.descripcion_periodo\r\n                    //     })\r\n                    // }\r\n\r\n                    estudiantes_filed.push({\r\n                        cedula: value.matricula.cedula,\r\n                        nombres: value.matricula.nombres,\r\n                        apellidos: value.matricula.apellidos,\r\n                        telefono: value.matricula.telefono,\r\n                        fecha_matricula: value.matricula.fecha_matricula,\r\n                        estado_matricula: value.matricula.estado_matricula,\r\n                        descripcion_periodo: value.matricula.descripcion_periodo,\r\n                        nivel: value.matricula.nivel,\r\n                        paralelo: value.matricula.paralelo\r\n                    })\r\n\r\n                });\r\n\r\n                // console.log('**********+')\r\n                // console.log({estudiantes_filed})\r\n                // console.log('**********+')\r\n\r\n                import('@/vendor/Export2Excel').then(excel => {\r\n                    const list = estudiantes_filed\r\n                    const data = this.formatJson(headerVal, list)\r\n                    excel.export_json_to_excel({\r\n                        header: headerTitle,\r\n                        data,\r\n                        filename: this.fileName,\r\n                        autoWidth: true,\r\n                        bookType: 'xlsx'\r\n                    })\r\n                })\r\n            },\r\n            formatJson(filterVal, jsonData) {\r\n                return jsonData.map(v => filterVal.map(j => {\r\n                    return v[j]\r\n                }))\r\n            },\r\n            aplicarBeca(){\r\n                let me = this\r\n\r\n                let formData = new FormData();\r\n                    formData.append('estudiantes_selected', JSON.stringify(me.estudiantes_selected));\r\n                    formData.append('porcentaje_beca', me.porcentaje_beca);\r\n                    formData.append('aplicacion_beca', me.aplicacion_beca.id);\r\n                    formData.append('id_user_action', me.usuario.idusuario);\r\n\r\n                me.$vs.loading()\r\n                this.$http.post(this.$server_url+'aplicar_becas', formData)\r\n                .then(res => {\r\n                    me.modalBeca = false\r\n                    me.$vs.loading.close()\r\n                    me.getEstudiantes('no_excel')\r\n                    me.$vs.notify({\r\n                    text:'Becas aplicadas exitosamente',\r\n                    color:'success', iconPack: 'feather', icon:'icon-check'})\r\n                    me.estudiantes_selected = []\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                    me.estudiantes_selected = []\r\n                })\r\n\r\n            },\r\n            fillformPago(item){\r\n                let me = this\r\n\r\n                me.id_matricula_selected = item.id_matricula\r\n                me.id_cuota_edit = item.id_cuotas_id\r\n                me.val_cuota_edit = item.valor_cuota\r\n                me.val_pend_edit = item.valor_pendiente\r\n\r\n                me.modalCuotas = true\r\n            },\r\n            editarCuota(){\r\n                let me = this\r\n\r\n                let formData = new FormData();\r\n                    formData.append('id_cuota_edit', me.id_cuota_edit);\r\n                    formData.append('valor_cuota', me.val_cuota_edit);\r\n                    formData.append('valor_pendiente', me.val_pend_edit);\r\n                    formData.append('id_usuario', me.usuario.idusuario);\r\n\r\n                me.$vs.loading()\r\n                this.$http.post(this.$server_url+'editar_cuotas', formData)\r\n                .then(res => {\r\n                    me.modalCuotas = false\r\n                    me.$vs.loading.close()\r\n                    me.getCuotas(me.id_matricula_selected)\r\n                    me.$vs.notify({\r\n                    text:'Cuota modificada exitosamente.',\r\n                    color:'success', iconPack: 'feather', icon:'icon-check'})\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n\r\n            },\r\n            actualizarData(){\r\n                let me = this;\r\n\r\n                me.informacionEstudiantes.institucion = me.usuario.institucion\r\n                me.informacionEstudiantes.administrador = \"yes\";\r\n\r\n                me.$vs.loading()\r\n                this.$http.post(this.$server_url+'updateEstudianteAdministrador', me.informacionEstudiantes)\r\n                    .then(function (res) {\r\n                        me.$vs.loading.close()\r\n                        me.$vs.notify({\r\n                            text: res.data.message,\r\n                            color: 'primary',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                        me.getDataEstudiante()\r\n                    })\r\n                    .catch(function (error) {\r\n                        me.$vs.loading.close()\r\n                    })\r\n            },\r\n            generarPassword() {\r\n\r\n                let me = this;\r\n                let formData = new FormData();\r\n                this.$vs.loading({\r\n\r\n                })\r\n                me.emailuser = localStorage.getItem(\"emailEstudiante\")\r\n                formData.append('email', me.emailuser);\r\n                this.$http.post(this.$server_url + 'restaurarPassword', formData)\r\n                .then(function (response) {\r\n                    me.$vs.loading.close()\r\n                    me.$vs.notify({\r\n                        text: 'Use el número de cédula para acceder al perfil del usuario.',\r\n                        color: 'success',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-lock',\r\n                        time:8000\r\n                    })\r\n\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.notify({\r\n                        text: 'Error en el proceso',\r\n                        color: 'danger',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-lock'\r\n                    })\r\n                    me.$vs.loading.close()\r\n                })\r\n            },\r\n\r\n        },\r\n\r\n    }\r\n</script>\r\n\r\n<style>\r\n.btn_filtro{\r\n    font-size: 12px;\r\n    width: 100px;\r\n    height: 40px;\r\n    padding: 0px !important;\r\n}\r\n</style>\r\n"]}]}