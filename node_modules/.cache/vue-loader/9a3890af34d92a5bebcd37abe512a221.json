{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pages\\encuestaEscuela.vue?vue&type=style&index=0&id=55194aa2&lang=scss","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pages\\encuestaEscuela.vue","mtime":1712682816221},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n.banner{\r\n    background: #00B4DB;  /* fallback for old browsers */\r\nbackground: -webkit-linear-gradient(to right, #0083B0, #00B4DB);  /* Chrome 10-25, Safari 5.1-6 */\r\nbackground: linear-gradient(to right, #0083B0, #00B4DB); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\r\nbox-shadow: 5px 6px 5px #0083B0;\r\n}\r\n",{"version":3,"sources":["encuestaEscuela.vue"],"names":[],"mappings":";AA8VA;AACA;AACA;AACA;AACA;AACA","file":"encuestaEscuela.vue","sourceRoot":"src/views/pages","sourcesContent":["<template>\r\n    <div>\r\n        <vx-card\r\n            v-if=\"validate == false\"\r\n            title=\"Estimado padre de familia\"\r\n            title-color=\"primary\"\r\n            subtitle-color=\"warning\"\r\n            :subtitle=\"msgError\">\r\n            <p class=\"mb-3\">!Comuniquese a soporte@prolipa.com.ec para solventar el incoveniente</p>\r\n        </vx-card>\r\n        <div v-else style=\"padding:0px 40px;\">\r\n            <vx-card slot=\"no-body\" class=\"banner\">\r\n                <div style=\"display: flex;justify-content:center;\">   \r\n                    <div>\r\n                        <p style=\"color:white;font-size:25px;text-align:center;letter-spacing: 3px;\">Encuesta</p>\r\n                    </div>\r\n                </div>\r\n            </vx-card>\r\n            <vx-card class=\"mt-3\">\r\n                <p class=\"font-bold text-3xl text-warning\">Instrucciones:</p>\r\n                <span class=\"mt-1\">Conteste segun su criterio colocando si o no la respuesta de su elección</span>\r\n                <vs-divider></vs-divider>\r\n                <div class=\"vx-row mb-6 mt-5\">\r\n                    <div class=\"vx-col sm:w-1/2 w-full\">\r\n                        <vx-input-group class=\"mb-base\">\r\n                            <template slot=\"prepend\">\r\n                            <div class=\"prepend-text bg-primary\">\r\n                                <span>Ingrese su cédula</span>\r\n                            </div>\r\n                            </template>\r\n                            <vs-input v-model=\"user.cedula\" @blur=\"llenarCampos();\" />\r\n                        </vx-input-group>\r\n                    </div>\r\n                    <div class=\"vx-col sm:w-1/2 w-full mb-2\" style=\"margin-top:-15px;\">\r\n                        <vs-list>\r\n                            <vs-list-item title=\"Institución\"   :subtitle=\"user.nombreInstitucion\"></vs-list-item>\r\n                            <vs-list-item title=\"Período\"       :subtitle=\"user.periodoDescripcion\"></vs-list-item>\r\n                        </vs-list>\r\n                    </div>\r\n                </div>\r\n                <vs-divider>Ingrese sus datos</vs-divider>\r\n                <div class=\"vx-row\">\r\n                    <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                        <vs-input class=\"w-full\" icon-pack=\"feather\" icon=\"icon-user\" icon-no-border label=\"Nombres\" v-model=\"user.nombres\" />\r\n                    </div>\r\n                    <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                        <vs-input class=\"w-full\" icon-pack=\"feather\" icon=\"icon-user\" icon-no-border label=\"Apellidos\" v-model=\"user.apellidos\" />\r\n                    </div>\r\n                </div>\r\n                <div class=\"vx-row\">\r\n                    <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                        <vs-input type=\"email\" class=\"w-full\" icon-pack=\"feather\" icon=\"icon-mail\" icon-no-border label=\"Email\" v-model=\"user.email\" />\r\n                    </div>\r\n                    <div class=\"vx-col sm:w-1/2 w-full mb-2\">\r\n                        <vs-input class=\"w-full\" icon-pack=\"feather\" icon=\"icon-smartphone\" icon-no-border label=\"Telefono\" v-model=\"user.telefono\" />\r\n                    </div>\r\n                </div>\r\n            </vx-card>\r\n            <vx-card class=\"mt-3\" v-if=\"id == 0\">\r\n                <p  class=\"text-2xl font-medium\">Preguntas</p>\r\n                <small v-if=\"arregloPreguntas.length > 0 \">Lea detenidamente y complete toda la encuesta</small>\r\n                <small v-else class=\"text-warning font-bold\">Ingrese su cedula para validar su encuesta</small>\r\n                <vs-divider></vs-divider>\r\n                <div class=\"flex\" v-for=\"(tr,key) in arregloPreguntas\" :key=\"key\">\r\n                    <div style=\"width:50%\" class=\"mt-3\">\r\n                        <p class=\"text-primary text-2xl font-light\">{{key + 1}}. {{tr.pregunta}}</p>\r\n                    </div>\r\n                    <div style=\"width: 50%;\" class=\"mt-3\">\r\n                        <span>Si </span>  <input style=\"margin-top: -20px;\" class=\"ml-2\" type=\"radio\" id=\"html\" v-model=\"tr.valor\" :name=\"key\" value=\"1\">\r\n                        <span class=\"ml-5\">No </span> <input class=\"ml-2\" style=\"margin-top: -20px;\" type=\"radio\" id=\"html\" v-model=\"tr.valor\" :name=\"key\" value=\"0\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"flex mt-5\">\r\n                    <vs-button color=\"success\" v-if=\"getError == false\" icon=\"save\" class=\"mr-3 mb-2\" @click=\"openConfirm()\">Enviar encuesta</vs-button>\r\n                </div>\r\n            </vx-card>\r\n            <vs-card class=\"mt-3\" v-else>\r\n                <vs-alert title=\"MENSAJE\" active=\"true\" color=\"danger\">\r\n                    ! Usted ya ha llenado esta encuesta\r\n                </vs-alert>\r\n            </vs-card>\r\n            <!--FIN REGISTRO LIBROS DE AREAS BASICAS-->\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport historicoMixin from \"@/mixins/historicomix\";\r\nimport vSelect from 'vue-select'\r\nimport {FormWizard, TabContent} from 'vue-form-wizard'\r\nimport 'vue-form-wizard/dist/vue-form-wizard.min.css'\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport \"vue-select/dist/vue-select.css\";\r\nVue.use(axios)\r\nVue.component(\"v-select\", vSelect);\r\nimport $ from 'jquery'\r\nexport default {\r\n  data() {\r\n    return {\r\n      id:0,\r\n      arregloPreguntas:[],\r\n      validate:false,\r\n      msgError:'',\r\n      getError:false,\r\n      nuevoUser:\"si\",\r\n      parametros:{\r\n        id:'',\r\n        institucion:'',\r\n      },\r\n      user:{\r\n        idusuario:0,\r\n        cedula:'',\r\n        nombres:'',\r\n        apellidos:'',\r\n        email:'',\r\n        telefono:'',\r\n        periodoDescripcion:'',\r\n        nombreInstitucion:'',\r\n        periodo_id:'',\r\n        encuesta_id:'',\r\n      },\r\n      libro_docente_id:0,\r\n    }\r\n  },\r\n    mixins: [historicoMixin],\r\n  created(){\r\n    let me                      = this;\r\n    me.parametros.id            = this.$route.params.id;\r\n    me.parametros.institucion   = this.$route.params.institucion;\r\n    me.validateForm();\r\n  },\r\n  mounted() {\r\n        let me = this;\r\n        if (localStorage.tk != null) {\r\n            this.$router.push('/home');\r\n        } else {}\r\n        me.getSeries();\r\n    },\r\n    methods: {\r\n        //validate Form\r\n        validateForm(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'encuesta?validarEncuesta=yes&institucion_id='+me.parametros.institucion+'&id='+me.parametros.id)\r\n            .then(function (res) {\r\n                if(res.data.status == 0){\r\n                    me.validate = false;\r\n                    me.msgError = res.data.message\r\n                    return\r\n                }else{\r\n                    me.validate = true;\r\n                    me.user.periodoDescripcion = res.data.periodoDescripcion\r\n                    me.user.nombreInstitucion  = res.data.nombreInstitucion[0].nombreInstitucion\r\n                    me.user.periodo_id         = res.data.periodo_id\r\n                    me.user.encuesta_id        = res.data.encuesta_id\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n            })\r\n        },\r\n        //para obtener  la series\r\n        getSeries() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'traerSeries?docentes=yes&formulario_id='+me.parametros.id )\r\n                .then(function (res) {\r\n                    me.arregloManantial         = res.data.filter(p => p.id_serie == 1 || p.id_serie == 2)\r\n                    me.arregloRuta              = res.data.filter(p => p.id_serie == 3 || p.id_serie == 4)\r\n                    me.arregloComplementarias   = res.data.filter(p => p.id_serie == 5 || p.id_serie == 6 || p.id_serie == 7 || p.id_serie == 8 || p.id_serie == 9)\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        llenarCampos(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'verInfoCedulaEncuesta?cedula='+me.user.cedula+'&institucion_id='+me.parametros.institucion+'&periodo_id='+me.user.periodo_id+'&encuesta_id='+me.user.encuesta_id)\r\n                .then(function (res) {\r\n                   if(res.data.status == 3){\r\n                        me.$vs.notify({\r\n                        text:res.data.message,\r\n                        color:'success',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-check',\r\n                        time:10000\r\n                        })\r\n                        me.user.nombres   = \"\"\r\n                        me.user.apellidos = \"\"\r\n                        me.user.email     = \"\"\r\n                        me.user.telefono  = \"\"\r\n                        me.getError       = true\r\n                        me.nuevoUser      = \"si\"\r\n                        me.user.cedula    = \"\"\r\n                        me.id             = 0\r\n                        return\r\n                   }\r\n                   if(res.data.status == 1){\r\n                      me.user.idusuario = res.data.infoUsuario[0].idusuario\r\n                      me.user.nombres   = res.data.infoUsuario[0].nombres\r\n                      me.user.apellidos = res.data.infoUsuario[0].apellidos\r\n                      me.user.email     = res.data.infoUsuario[0].email\r\n                      me.user.telefono  = res.data.infoUsuario[0].telefono\r\n                      me.getError       = false\r\n                      me.nuevoUser      = \"no\"\r\n                      if(res.data.encuestaDocente.length > 0){\r\n                        me.id             = res.data.encuestaDocente[0].id \r\n                      }else{\r\n                        me.id             = 0\r\n                      }\r\n                   }else{\r\n                      me.user.nombres   = \"\"\r\n                      me.user.apellidos = \"\"\r\n                      me.user.email     = \"\"\r\n                      me.user.telefono  = \"\"\r\n                      me.getError       = false\r\n                      me.nuevoUser      = \"si\"\r\n                      me.id             = 0\r\n                   }\r\n                   me.arregloPreguntas = res.data.preguntas\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        openConfirm() {\r\n            let me = this;\r\n             //validacion de campos\r\n            if(me.user.cedula.trim() == \"\" || me.user.nombres.trim() == \"\" || me.user.apellidos.trim() == \"\" || me.user.email.trim() == \"\" || me.user.telefono.trim() == \"\"){\r\n                me.$vs.notify({\r\n                text:\"Debe llenar todos los campos\",\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return\r\n            }\r\n            let datos = me.arregloPreguntas;\r\n            let validaNulos = []\r\n            validaNulos = datos.filter(p => (p.valor == null) || (p.valor == \"\"))\r\n            if(validaNulos.length > 0){\r\n                me.$vs.notify({\r\n                text:\"Debe marcar todas las preguntas por favor\",\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return\r\n            }\r\n            this.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                acceptText:'Aceptar',\r\n                CancelText:'Cancelar',\r\n                text: 'Esta seguro de guardar la encuesta.',\r\n                accept: this.guardarFormulario\r\n            })\r\n        },\r\n        guardarFormulario(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('respuestas',           JSON.stringify(me.arregloPreguntas))\r\n            formData.append('institucion_id',       me.parametros.institucion)\r\n            formData.append('encuestas_escuela_id', me.parametros.id)\r\n            formData.append('periodo_id',           me.user.periodo_id)\r\n            formData.append('nuevoUser',            me.nuevoUser)\r\n            formData.append('idusuario',            me.user.idusuario)\r\n            formData.append('encuesta_id',          me.user.encuesta_id)\r\n            //Datos personales\r\n            formData.append('cedula',               me.user.cedula)\r\n            formData.append('nombres',              me.user.nombres)\r\n            formData.append('apellidos',            me.user.apellidos)\r\n            formData.append('email',                me.user.email)\r\n            formData.append('telefono',             me.user.telefono)\r\n            this.$http.post(this.$server_url+'guardarRespuestaEncuesta',formData)\r\n                .then(function (res) {\r\n                  if(res.data.status == 0){\r\n                    me.$vs.notify({\r\n                        text:res.data.message,\r\n                        color:'danger',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-check',\r\n                        time:6000\r\n                    })\r\n                    return\r\n                  }\r\n                  me.$vs.notify({\r\n                    text:res.data.message,\r\n                    color:'success',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check',\r\n                    time:6000\r\n                  })\r\n                  me.limpiar();\r\n                me.arregloPreguntas = [ ]\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        //cancelar libro\r\n        confirmCancelarLibro(tr){\r\n            let me = this;\r\n            me.libro_docente_id = tr.id\r\n            this.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                acceptText:'Aceptar',\r\n                CancelText:'Cancelar',\r\n                text: 'Esta seguro de cancelar este libro?.',\r\n                accept: this.CancelarLibro\r\n            })\r\n        },\r\n        CancelarLibro(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'formularioDocente?cancelarLibro=yes&id='+me.libro_docente_id)\r\n                .then(function (res) {\r\n                   me.$vs.notify({\r\n                    text:\"Se elimino correctamente\",\r\n                    color:'success',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check',\r\n                    })  \r\n                    me.llenarCampos() \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        limpiar(){\r\n            let me                          = this;\r\n            me.user.idusuario               = 0\r\n            me.user.cedula                  = \"\"\r\n            me.user.nombres                 = \"\"\r\n            me.user.apellidos               = \"\"\r\n            me.user.email                   = \"\"\r\n            me.user.telefono                = \"\"\r\n            me.id                           = 0\r\n        },\r\n        formSubmitted() {\r\n            alert(\"Form submitted!\");\r\n        },\r\n    },\r\n    components: {\r\n        FormWizard,\r\n        TabContent,\r\n        vSelect\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.banner{\r\n    background: #00B4DB;  /* fallback for old browsers */\r\nbackground: -webkit-linear-gradient(to right, #0083B0, #00B4DB);  /* Chrome 10-25, Safari 5.1-6 */\r\nbackground: linear-gradient(to right, #0083B0, #00B4DB); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\r\nbox-shadow: 5px 6px 5px #0083B0;\r\n}\r\n</style>\r\n"]}]}