{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\components\\distribuidores\\CrearDistribuidor.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\components\\distribuidores\\CrearDistribuidor.vue","mtime":1712682816291},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport vSelect from 'vue-select'\r\nexport default{\r\n    components:{\r\n        vSelect,\r\n    },\r\n    data(){\r\n        return{\r\n            arregloAsesores:[],\r\n            asignar:{\r\n                id:0,\r\n                asesor:'',\r\n                estado:1,\r\n            },\r\n            ifCrearAsesor:false,\r\n            beneficiario: { \r\n                num_identificacion:'',\r\n                nombres:'',\r\n                apellidos:'',\r\n                correo:'',\r\n            },\r\n        }\r\n    },\r\n    props:{\r\n        usuario:{\r\n            type:Object,\r\n            default:function(){\r\n                return {}\r\n            }\r\n        },\r\n        distribuidorSelect:{\r\n            type:Object,\r\n            default:function(){\r\n                return {}\r\n            }\r\n        },\r\n        editar:{\r\n            type:Number,\r\n            default:0\r\n        },\r\n    },\r\n    created(){\r\n        let me = this\r\n        me.getResponsables()    \r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        if(me.editar == 0) me.limpiar()\r\n        else               me.setEdit()\r\n    },\r\n    methods:{\r\n        getResponsables(){\r\n            let me = this\r\n            this.$http.get(this.$server_url+'distribuidor?getUserxRol=yes')\r\n            .then(res => {\r\n                me.arregloAsesores = res.data\r\n            })\r\n        },\r\n        save_distribuidor(){\r\n            let me  = this;\r\n            if(me.asignar.asesor == \"\" || me.asignar.asesor == null || me.asignar.asesor == undefined){\r\n                me.$vs.notify({ color: 'danger', title:'Error' , text: \"Debe completar seleccionar un asesor\", time:4000})\r\n                return\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('save_distribuidor',    'yes')\r\n            formData.append('id',                   me.asignar.id);\r\n            formData.append('user_created',         me.usuario.idusuario);\r\n            formData.append('idusuario',            me.asignar.asesor );\r\n            formData.append('estado',               me.asignar.estado);\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'distribuidor', formData)\r\n            .then(res => {\r\n            me.$vs.loading.close()\r\n            me.$vs.notify({ color: 'success', title:'Exito' , text: res.data.message, time:4000})\r\n            me.$emit('recharge',2)\r\n            })\r\n            .catch(function (error) {\r\n              me.$vs.loading.close()\r\n            })\r\n        },\r\n        guardarNuevoUser() {\r\n            let me = this\r\n            const { num_identificacion ,nombres, apellidos,correo} = this.beneficiario\r\n            if(num_identificacion == \"\" || nombres == \"\" || apellidos == \"\" || correo == \"\"){\r\n                me.$vs.notify({ color: 'danger', title:'Error' , text: \"Debe completar todos los campos\", time:4000})\r\n                return\r\n            }\r\n            const { institucion_idInstitucion, idusuario } = me.usuario\r\n            me.$vs.loading();\r\n            let formData = new FormData();\r\n            formData.append('save_user',                'yes')\r\n            formData.append('cedula',                   this.beneficiario.num_identificacion);\r\n            formData.append('nombres',                  this.beneficiario.nombres);\r\n            formData.append('apellidos',                this.beneficiario.apellidos);\r\n            formData.append('email',                    this.beneficiario.correo);\r\n            formData.append('telefono',                 0);\r\n            formData.append('id_group',                 11)\r\n            formData.append('institucion_idInstitucion',institucion_idInstitucion);\r\n            formData.append('idcreadorusuario',         idusuario);\r\n            this.$http.post(this.$server_url+'distribuidor', formData)\r\n            .then(function (response) {\r\n                me.$vs.loading.close();\r\n                if(response.data.status == 0){\r\n                    me.$vs.notify({ color: 'danger', title:'Error' , text: response.data.message, time:4000})\r\n                    return\r\n                }\r\n                me.ifCrearAsesor = false\r\n                me.$vs.notify({ color: 'success', title: 'Éxito', text: 'Usuario registrado correctamente.' })\r\n                me.getResponsables()\r\n                me.asignar.asesor = response.data.idusuario\r\n            })\r\n            .catch(function (error) {\r\n              me.$vs.loading.close()\r\n                if (error.response.status == 422) {\r\n                    try {\r\n                        me.$vs.notify({ color: 'warning', title: 'Alerta', text: error.response.data.errors.cedula[0] })\r\n                    } catch (error) {\r\n                    }\r\n                    try {\r\n                        me.$vs.notify({ color: 'warning', title: 'Alerta', text: error.response.data.errors.nombres[0] })\r\n                    } catch (error) {\r\n                    }\r\n                    try {\r\n                        me.$vs.notify({ color: 'warning', title: 'Alerta', text: error.response.data.errors.apellidos[0] })\r\n                    } catch (error) {\r\n                    }\r\n                    try {\r\n                        me.$vs.notify({ color: 'warning', title: 'Alerta', text: error.response.data.errors.email[0] })\r\n                    } catch (error) {\r\n                    }\r\n                    try {\r\n                        me.$vs.notify({ color: 'warning', title: 'Alerta', text: error.response.data.errors.password[0] })\r\n                    } catch (error) {\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        limpiar(){\r\n            let me = this\r\n            me.asignar={\r\n                id:0,\r\n                asesor:'',\r\n                estado:1\r\n            }\r\n            me.beneficiario= { \r\n                num_identificacion:'',\r\n                nombres:'',\r\n                apellidos:'',\r\n                correo:'',\r\n            }\r\n        },\r\n        setEdit(){\r\n            let me = this;\r\n            me.asignar.id     = me.distribuidorSelect.distribuidor_id\r\n            me.asignar.asesor = me.distribuidorSelect.idusuario\r\n            me.asignar.estado = me.distribuidorSelect.estado\r\n        }\r\n    }\r\n}\r\n",{"version":3,"sources":["CrearDistribuidor.vue"],"names":[],"mappings":";AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CrearDistribuidor.vue","sourceRoot":"src/views/pedidos/components/distribuidores","sourcesContent":["<template>\r\n    <div>\r\n        <div v-if=\"ifCrearAsesor == false\"> \r\n            <!---ASIGNAR COMO DISTRIBUIDOR-->\r\n            <div class=\"vx-row mb-6\" >\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Asesores:</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <v-select :options=\"arregloAsesores\" :reduce=\"arregloAsesores => arregloAsesores.idusuario\" label=\"nombre_completo\" class=\"w-full\" v-model=\"asignar.asesor\" />\r\n                </div>\r\n            </div>\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                <span>Estado</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <ul class=\"flex\">\r\n                        <li>\r\n                        <vs-radio v-model=\"asignar.estado\" class=\"mr-2\" vs-name=\"radiosestado1\" vs-value=\"1\">Activo</vs-radio>\r\n                        </li>\r\n                        <li>\r\n                        <vs-radio v-model=\"asignar.estado\" vs-name=\"radiosestado1\" vs-value=\"0\">Desactivado</vs-radio>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class=\"flex justify-center\">\r\n                <vs-button color=\"success\" class=\"mr-3\" type=\"gradient\" @click=\"save_distribuidor()\">{{ editar == 1 ? 'Editar' : 'Asignar'}} Distribuidor</vs-button>\r\n                <vs-button color=\"success\" type=\"line\" v-if=\"editar == 0\" @click=\"ifCrearAsesor = true;\">Crear un nuevo Usuario</vs-button>\r\n            </div> \r\n        </div>\r\n        <!--CREAR USUARIO-->\r\n        <template v-if=\"ifCrearAsesor\">\r\n            <vs-button color=\"primary\" type=\"border\" @click=\"ifCrearAsesor=false;\">← Regresar</vs-button>\r\n            <!--REGISTRAR NUEVO USUARIO-->\r\n            <vs-divider>Registrar nuevo Usuario</vs-divider>\r\n            <div class=\"vx-col w-full mb-3\">\r\n                <span class=\"text-danger\" style=\"font-size: 12px;\">(obligatorio)</span>\r\n                <vs-input label=\"Registre la cédula\" v-model=\"beneficiario.num_identificacion\" class=\"w-full\" />\r\n            </div>\r\n            <div class=\"vx-col w-full mb-3\">\r\n                <span class=\"text-danger\" style=\"font-size: 12px;\">(obligatorio)</span>\r\n                <vs-input label=\"Nombres\" v-model=\"beneficiario.nombres\" class=\"w-full\" />\r\n            </div>\r\n            <div class=\"vx-col w-full mb-3\">\r\n                <span class=\"text-danger\" style=\"font-size: 12px;\">(obligatorio)</span>\r\n                <vs-input label=\"Apellidos\" v-model=\"beneficiario.apellidos\" class=\"w-full\" />\r\n            </div>\r\n            <div class=\"vx-col w-full mb-3\">\r\n                <span class=\"text-danger\" style=\"font-size: 12px;\">(obligatorio)</span>\r\n                <vs-input label=\"Correo\"  v-model=\"beneficiario.correo\" class=\"w-full\" />\r\n            </div>\r\n            <vs-divider></vs-divider>\r\n            <div class=\"w-full\" align=\"center\">\r\n                <vs-button color=\"success\" type=\"gradient\" @click=\"guardarNuevoUser()\">Crear Usuario</vs-button>\r\n            </div> \r\n        </template>\r\n        <br><br><br><br>\r\n    </div>\r\n</template>\r\n<script>\r\nimport vSelect from 'vue-select'\r\nexport default{\r\n    components:{\r\n        vSelect,\r\n    },\r\n    data(){\r\n        return{\r\n            arregloAsesores:[],\r\n            asignar:{\r\n                id:0,\r\n                asesor:'',\r\n                estado:1,\r\n            },\r\n            ifCrearAsesor:false,\r\n            beneficiario: { \r\n                num_identificacion:'',\r\n                nombres:'',\r\n                apellidos:'',\r\n                correo:'',\r\n            },\r\n        }\r\n    },\r\n    props:{\r\n        usuario:{\r\n            type:Object,\r\n            default:function(){\r\n                return {}\r\n            }\r\n        },\r\n        distribuidorSelect:{\r\n            type:Object,\r\n            default:function(){\r\n                return {}\r\n            }\r\n        },\r\n        editar:{\r\n            type:Number,\r\n            default:0\r\n        },\r\n    },\r\n    created(){\r\n        let me = this\r\n        me.getResponsables()    \r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        if(me.editar == 0) me.limpiar()\r\n        else               me.setEdit()\r\n    },\r\n    methods:{\r\n        getResponsables(){\r\n            let me = this\r\n            this.$http.get(this.$server_url+'distribuidor?getUserxRol=yes')\r\n            .then(res => {\r\n                me.arregloAsesores = res.data\r\n            })\r\n        },\r\n        save_distribuidor(){\r\n            let me  = this;\r\n            if(me.asignar.asesor == \"\" || me.asignar.asesor == null || me.asignar.asesor == undefined){\r\n                me.$vs.notify({ color: 'danger', title:'Error' , text: \"Debe completar seleccionar un asesor\", time:4000})\r\n                return\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('save_distribuidor',    'yes')\r\n            formData.append('id',                   me.asignar.id);\r\n            formData.append('user_created',         me.usuario.idusuario);\r\n            formData.append('idusuario',            me.asignar.asesor );\r\n            formData.append('estado',               me.asignar.estado);\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'distribuidor', formData)\r\n            .then(res => {\r\n            me.$vs.loading.close()\r\n            me.$vs.notify({ color: 'success', title:'Exito' , text: res.data.message, time:4000})\r\n            me.$emit('recharge',2)\r\n            })\r\n            .catch(function (error) {\r\n              me.$vs.loading.close()\r\n            })\r\n        },\r\n        guardarNuevoUser() {\r\n            let me = this\r\n            const { num_identificacion ,nombres, apellidos,correo} = this.beneficiario\r\n            if(num_identificacion == \"\" || nombres == \"\" || apellidos == \"\" || correo == \"\"){\r\n                me.$vs.notify({ color: 'danger', title:'Error' , text: \"Debe completar todos los campos\", time:4000})\r\n                return\r\n            }\r\n            const { institucion_idInstitucion, idusuario } = me.usuario\r\n            me.$vs.loading();\r\n            let formData = new FormData();\r\n            formData.append('save_user',                'yes')\r\n            formData.append('cedula',                   this.beneficiario.num_identificacion);\r\n            formData.append('nombres',                  this.beneficiario.nombres);\r\n            formData.append('apellidos',                this.beneficiario.apellidos);\r\n            formData.append('email',                    this.beneficiario.correo);\r\n            formData.append('telefono',                 0);\r\n            formData.append('id_group',                 11)\r\n            formData.append('institucion_idInstitucion',institucion_idInstitucion);\r\n            formData.append('idcreadorusuario',         idusuario);\r\n            this.$http.post(this.$server_url+'distribuidor', formData)\r\n            .then(function (response) {\r\n                me.$vs.loading.close();\r\n                if(response.data.status == 0){\r\n                    me.$vs.notify({ color: 'danger', title:'Error' , text: response.data.message, time:4000})\r\n                    return\r\n                }\r\n                me.ifCrearAsesor = false\r\n                me.$vs.notify({ color: 'success', title: 'Éxito', text: 'Usuario registrado correctamente.' })\r\n                me.getResponsables()\r\n                me.asignar.asesor = response.data.idusuario\r\n            })\r\n            .catch(function (error) {\r\n              me.$vs.loading.close()\r\n                if (error.response.status == 422) {\r\n                    try {\r\n                        me.$vs.notify({ color: 'warning', title: 'Alerta', text: error.response.data.errors.cedula[0] })\r\n                    } catch (error) {\r\n                    }\r\n                    try {\r\n                        me.$vs.notify({ color: 'warning', title: 'Alerta', text: error.response.data.errors.nombres[0] })\r\n                    } catch (error) {\r\n                    }\r\n                    try {\r\n                        me.$vs.notify({ color: 'warning', title: 'Alerta', text: error.response.data.errors.apellidos[0] })\r\n                    } catch (error) {\r\n                    }\r\n                    try {\r\n                        me.$vs.notify({ color: 'warning', title: 'Alerta', text: error.response.data.errors.email[0] })\r\n                    } catch (error) {\r\n                    }\r\n                    try {\r\n                        me.$vs.notify({ color: 'warning', title: 'Alerta', text: error.response.data.errors.password[0] })\r\n                    } catch (error) {\r\n                    }\r\n                }\r\n            })\r\n        },\r\n        limpiar(){\r\n            let me = this\r\n            me.asignar={\r\n                id:0,\r\n                asesor:'',\r\n                estado:1\r\n            }\r\n            me.beneficiario= { \r\n                num_identificacion:'',\r\n                nombres:'',\r\n                apellidos:'',\r\n                correo:'',\r\n            }\r\n        },\r\n        setEdit(){\r\n            let me = this;\r\n            me.asignar.id     = me.distribuidorSelect.distribuidor_id\r\n            me.asignar.asesor = me.distribuidorSelect.idusuario\r\n            me.asignar.estado = me.distribuidorSelect.estado\r\n        }\r\n    }\r\n}\r\n</script>"]}]}