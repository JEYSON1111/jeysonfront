{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\gestion_matricula\\estudiante\\components\\pensionesCobrar.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\gestion_matricula\\estudiante\\components\\pensionesCobrar.vue","mtime":1712682815950},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport axios from 'axios'\r\nexport default {\r\n    data() {\r\n      return{\r\n          IfImagen:true,\r\n          popupImagen:false,\r\n          counterDanger: false,\r\n          pensionesVer:true,\r\n          valores:[],\r\n          valor_cuota:'',\r\n          idcouta:'',\r\n         //para subir archivos,\r\n            attachments:[],\r\n            form: new FormData,\r\n            errorImage:'no',\r\n            tamanioError:\"no\",\r\n            archivoName:'',\r\n            cuota:{\r\n                idcouta:'',\r\n                comentario:'',\r\n                fecha_a_pagar:'',\r\n            },\r\n            usuario:[],\r\n            urlImage:'',\r\n            ifMatriculado:'',\r\n      }  \r\n    },\r\n\r\n    created(){\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n        me.getValoresPensiones();\r\n        me.getEstadoMatricula();\r\n    \r\n    },\r\n\r\n    methods:{\r\n\r\n         //para cambiar de grupo al estudiante\r\n         cambiarGrupoMatricula(grupo){\r\n             let me = this;\r\n        \r\n            this.$http.get(this.$server_url+'cambiarEstadoMatricula?grupo='+grupo+'&idusuario='+me.usuario.idusuario)\r\n                .then(function (res) {\r\n                \r\n                    location.reload();\r\n                     me.$router.push('/')\r\n                    \r\n                    localStorage.clear();\r\n               \r\n\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                   \r\n\r\n                })\r\n         },\r\n\r\n        getEstadoMatricula() {\r\n            let me = this;\r\n           \r\n            let periodo = localStorage.getItem('periodo_id')\r\n            let idusuario = me.usuario.idusuario\r\n           \r\n            this.$http.get(this.$server_url+'valores/pensiones?periodo_id='+periodo+'&idusuario='+idusuario)\r\n                .then(function (res) {\r\n\r\n                   \r\n                     me.ifMatriculado = res.data.buscarEstudianteReserva[0].estado_matricula\r\n\r\n                    if(me.usuario.id_group == 4){\r\n\r\n                        if(me.ifMatriculado == '2'){\r\n                        me.cambiarGrupoMatricula(14)\r\n                        }\r\n                        if(me.ifMatriculado == '3'){\r\n                            me.cambiarGrupoMatricula(14)\r\n                        }\r\n                     }\r\n\r\n                      if(me.usuario.id_group == 14){\r\n\r\n                        if(me.ifMatriculado == '1'){\r\n                            me.cambiarGrupoMatricula(4)\r\n                         }\r\n                      }\r\n               \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                \r\n\r\n                })\r\n        },\r\n\r\n        vistaComprobante(tr,id,data){\r\n            return false;\r\n            let me = this;\r\n           \r\n            if(tr.url == null){\r\n                me.IfImagen = false;\r\n            }else{\r\n                let image = tr.url\r\n                me.urlImage = image.slice(1)\r\n                me.IfImagen = true;\r\n            }\r\n         \r\n           \r\n            let valor_anterior = id -1\r\n            let valor=  data[valor_anterior].valor_pendiente\r\n            if(valor == 0){\r\n              \r\n            \r\n                me.valor_cuota = tr.valor_cuota\r\n                me.pensionesVer = false;\r\n                me.cuota.idcouta = tr.id_cuotas_id\r\n                me.cuota.fecha_a_pagar = tr.fecha_a_pagar\r\n               \r\n            }else{\r\n                 me.$vs.notify({\r\n                    color: 'primary',\r\n                    title: 'Mensaje',\r\n                    text: 'Aun no esta habilitada para pagar esta cuota'\r\n                    })\r\n                return false;\r\n            }\r\n          \r\n            \r\n        },\r\n          //para obtener los valores de las pensiones del estudiante\r\n        getValoresPensiones() {\r\n            let me = this;\r\n            me.$vs.loading();\r\n\r\n\r\n\r\n            let periodo_id = localStorage.getItem(\"periodo_id\")\r\n        \r\n            this.$http.get(this.$server_url+'valores/pensiones?idusuario='+me.usuario.idusuario+'&periodo_id='+periodo_id)\r\n                .then(function (res) {\r\n                    me.valores = res.data.traerPensiones\r\n               \r\n                    me.$vs.loading.close()\r\n                    \r\n                    if(res.data.message){\r\n                        me.$vs.notify({\r\n                                text: res.data.message,\r\n                                color: 'warning',\r\n                                iconPack: 'feather',\r\n                                icon: 'icon-alert-triangle'\r\n                            })\r\n                        return false;\r\n                        }\r\n\r\n\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n\r\n                })\r\n        },\r\n\r\n\r\n         guardarComprobate(){\r\n            let me = this;\r\n        \r\n           \r\n      \r\n        \r\n              if(me.cuota.comentario.length >= 100){\r\n                me.$vs.notify({\r\n                    color: 'primary',\r\n                    title: 'Mensaje',\r\n                    text: 'El comentario no puede exceder los 100  caracteres'\r\n                    })\r\n                return false;\r\n            }\r\n\r\n\r\n            if(me.attachments.length == 0){\r\n                 me.$vs.notify({\r\n                    text:'Seleccione una imagen antes de enviar',\r\n                    color:'warning',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})  \r\n                    return false; \r\n            }\r\n\r\n            if(me.tamanioError == 'yes'){\r\n                me.$vs.notify({\r\n                    text:'El tamaño de la imagen excede 1MB',\r\n                    color:'warning',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})  \r\n                    return false;  \r\n            }\r\n           \r\n            if(me.errorImage == 'yes'){\r\n                me.$vs.notify({\r\n                    text:'El formato de la imagen solo se acepta jpg/png/jpeg',\r\n                    color:'warning',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})  \r\n                    return false;      \r\n            }     \r\n            let formData = new FormData();\r\n\r\n            //Si se envia imagenes\r\n            for(let i=0; i<this.attachments.length;i++){\r\n                \r\n                formData.append('periodo_id', localStorage.getItem('periodo_id')); \r\n                formData.append('descripcion_periodo',localStorage.getItem('descripcion_periodo'));\r\n                formData.append('nombreInstitucion',localStorage.getItem(\"nombreInstitucion\"));\r\n\r\n                formData.append('idcouta', me.cuota.idcouta);\r\n                formData.append('comentarioCuota', me.cuota.comentario); \r\n                formData.append('fecha_a_pagar',me.cuota.fecha_a_pagar);\r\n                formData.append('archivo[]',this.attachments[i]);\r\n                \r\n \r\n            }\r\n\r\n            const config = { headers: { 'Content-Type': 'multipart/form-data' } };\r\n            document.querySelectorAll('.upload-file').value=[];\r\n            me.$vs.loading()\r\n            axios.post(this.$data_url+'api/guardarComprobantepension',formData, config)\r\n            \r\n                .then(function (res) {\r\n                    me.$vs.loading.close();\r\n                    me.$vs.notify({\r\n                        text: res.data.message,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n\r\n                    me.getValoresPensiones();\r\n                    me.attachments = [];\r\n                    me.archivoName='',\r\n                    me.cuota.fecha_a_pagar = \"\"\r\n                    me.cuota.comentario = \"\"\r\n                    me.pensionesVer = true;\r\n                \r\n                  \r\n                  \r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close();\r\n                })\r\n\r\n\r\n       \r\n        },\r\n\r\n        \r\n         //para subir archivos\r\n        fieldChange(e){\r\n            let me = this;\r\n                me.errorImage = 'no'\r\n                me.tamanioError=\"no\"\r\n                this.attachments = [];\r\n                let selectedFiles=e.target.files;\r\n                let validar = e.target.files[0].type;\r\n\r\n                let tamanio = e.target.files[0].size;\r\n                \r\n                if(tamanio > 1000000){\r\n                    me.tamanioError=\"yes\"\r\n                    me.$vs.notify({\r\n                        text:'El tamaño de la imagen excede 1MB',\r\n                        color:'warning',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-check'})  \r\n                        return false;  \r\n                }\r\n                \r\n            \r\n                if(validar == 'image/png' || validar == 'image/jpg' || validar == 'image/jpeg'){\r\n                    for(let i=0;i<selectedFiles.length;i++){\r\n\r\n                      this.attachments.push(selectedFiles[i]);\r\n                      localStorage.setItem('nameArchivo',this.attachments[0].name)\r\n                      me.archivoName = localStorage.getItem(\"nameArchivo\")\r\n                     }\r\n                     me.errorImage = 'no'\r\n                }else{\r\n                  me.errorImage = 'yes'\r\n                  me.$vs.notify({\r\n                    text:'Formato de imagen no aceptada solo se acepta png/jpg/jpeg',\r\n                    color:'success',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})\r\n                    return false;\r\n                  \r\n                \r\n                }\r\n\r\n          \r\n               \r\n        },\r\n\r\n    }\r\n}\r\n",{"version":3,"sources":["pensionesCobrar.vue"],"names":[],"mappings":";AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;;;AAIA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;AAIA;;AAEA;AACA","file":"pensionesCobrar.vue","sourceRoot":"src/views/gestion_matricula/estudiante/components","sourcesContent":["<template>\r\n    <div>\r\n        <vs-card>\r\n         \r\n            <div class=\"header\" v-if=\"pensionesVer == true\">\r\n                 <div v-if=\"valores.length >0 \">\r\n                    <br/>  <br/>\r\n                    <vs-table max-items=\"20\" search pagination :data=\"valores\" style=\"margin-top:-40px\">\r\n                        <template slot=\"thead\">\r\n                            \r\n                            <vs-th>Cuota</vs-th>\r\n                            <vs-th>Valor cuota</vs-th>\r\n                            <vs-th>Valor pendiente</vs-th>\r\n                            <vs-th>Fecha pago</vs-th>\r\n                            <vs-th>Acción</vs-th>\r\n                        </template>\r\n                        <template slot-scope=\"{data}\">\r\n                            <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                                \r\n                                <vs-td>\r\n                                   \r\n                                    {{indextr +1 }}<br>\r\n                                    \r\n                                </vs-td>\r\n                                <vs-td>\r\n                                    {{data[indextr].valor_cuota}}<br>\r\n                                </vs-td>\r\n                                <vs-td>\r\n                                    {{data[indextr].valor_pendiente}}<br>\r\n                                </vs-td>\r\n                                <vs-td>\r\n                                    {{data[indextr].fecha_a_pagar}}<br>\r\n                                </vs-td>\r\n                                <vs-td>\r\n                                    \r\n                                    <div v-if=\"tr.valor_pendiente == '0'\">\r\n                                        <vx-tooltip style=\"display: inline-block;\" text=\"Pagado\" position=\"top\" color=\"warning\">\r\n                                            <vs-button class=\"modal-default-button\" color=\"success\" size=\"small\" type=\"filled\" icon-pack=\"feather\" icon=\"icon-dollar-sign\"> </vs-button>\r\n                                        </vx-tooltip> &nbsp;\r\n                                    </div>\r\n\r\n                                 \r\n                                    <div v-else>\r\n                                        <vx-tooltip style=\"display: inline-block;\" text=\"Pago pendiente\" position=\"top\" color=\"primary\">\r\n                                            <vs-button class=\"modal-default-button\" @click=\"vistaComprobante(tr,indextr,data)\" color=\"primary\" size=\"small\" type=\"filled\" icon-pack=\"feather\" icon=\"icon-edit\"> </vs-button>\r\n                                        </vx-tooltip> &nbsp;\r\n                                    </div>\r\n                                \r\n\r\n                                    \r\n                             \r\n\r\n                                </vs-td>\r\n                          \r\n                                \r\n                            </vs-tr>\r\n                        </template>\r\n                    </vs-table>   \r\n                </div>\r\n                \r\n                <div v-else class=\"p-3\">\r\n                    <p> No existe valores para las pensiones aun. </p>\r\n                </div>\r\n            </div>\r\n\r\n            <div v-if=\"pensionesVer == false\">\r\n                <!--Boton para regresar-->\r\n                <br/>\r\n                <vs-button color=\"primary\" @click=\"pensionesVer= true;\" size=\"small\" type=\"filled\" icon=\"arrow_back\">Regresar</vs-button> \r\n                <br/>\r\n                \r\n                 <div>\r\n                    <vs-row>  \r\n                        <vs-card>\r\n                            <vs-alert active=\"true\">\r\n                            \r\n                                <p style=\"color:#2A9FF6;\"><i class=\"fa fa-exclamation\" aria-hidden=\"true\"></i> <span> Suba una foto del comprobante del pago efecutado para legalizar la pensión ${{valor_cuota}}</span> </p> \r\n                            </vs-alert>\r\n                            <div slot=\"header\">\r\n                                <p style=\"color:#2A9FF6;\"><i class=\"fa fa-usd\" aria-hidden=\"true\"></i> <span> Validar pago de pensión</span> </p>\r\n                            </div> \r\n\r\n                            <div>\r\n                                <vs-row>\r\n                                    <br/>     \r\n\r\n                                   <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"12\">\r\n\r\n                                        <div style=\"display:flex;flex-direction: column;margin-top: 30px;\">\r\n                                            <div>\r\n                                                <vs-chip color=\"warning\" v-if=\"IfImagen == true\">\r\n                                                    comprobante actual\r\n                                                </vs-chip>    \r\n                                            </div>\r\n\r\n                                             <div v-if=\"IfImagen == true\">\r\n                                                 <br/>\r\n                                                   <img :src=\"$data_url+urlImage\" width=\"150\" @click=\"popupImagen =true\" class=\"image1\"/>\r\n                                            </div>\r\n\r\n\r\n                                        </div>\r\n                                     \r\n\r\n                                    </vs-col>  \r\n\r\n                                    <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"12\">\r\n\r\n                                        <label class=\"form-block-input\">\r\n                                            <input type=\"file\" class=\"upload-file form-file-span\" hidden @change=\"fieldChange\" />\r\n                                            \r\n                                                <span class=\"form-file-span\"><i class=\"fa fa-cloud-upload\"   aria-hidden=\"true\"></i> Selecciona un archivo</span>\r\n                                        </label>\r\n                                    </vs-col>   \r\n\r\n                                   \r\n                                    <vs-row style=\"margin-top:20px;\">\r\n                                        \r\n                                        <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"12\">\r\n                                        <vs-textarea counter=\"100\" style=\"width:95%;\" label=\"Comentario\" :counter-danger.sync=\"counterDanger\" v-model=\"cuota.comentario\" />\r\n                                        </vs-col>\r\n                                    </vs-row>\r\n\r\n                                   <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"12\">\r\n                                        <vs-button @click=\"guardarComprobate()\"  color=\"success\" style=\"margin:50px 50px 0px 0px;\" type=\"gradient\">Subir  Comprobante</vs-button>\r\n                                    </vs-col>\r\n                                </vs-row>\r\n                                <br/>\r\n                            </div>    \r\n                        </vs-card>  \r\n                    </vs-row>\r\n                \r\n                    \r\n                </div>\r\n\r\n            </div>\r\n        </vs-card>\r\n         <vs-popup class=\"holamundo\"  title=\"Imagen del comprobante\" :active.sync=\"popupImagen\">\r\n             <img :src=\"$data_url+urlImage\" width=\"500\"  class=\"image1\"/>\r\n          </vs-popup>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n    data() {\r\n      return{\r\n          IfImagen:true,\r\n          popupImagen:false,\r\n          counterDanger: false,\r\n          pensionesVer:true,\r\n          valores:[],\r\n          valor_cuota:'',\r\n          idcouta:'',\r\n         //para subir archivos,\r\n            attachments:[],\r\n            form: new FormData,\r\n            errorImage:'no',\r\n            tamanioError:\"no\",\r\n            archivoName:'',\r\n            cuota:{\r\n                idcouta:'',\r\n                comentario:'',\r\n                fecha_a_pagar:'',\r\n            },\r\n            usuario:[],\r\n            urlImage:'',\r\n            ifMatriculado:'',\r\n      }  \r\n    },\r\n\r\n    created(){\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n        me.getValoresPensiones();\r\n        me.getEstadoMatricula();\r\n    \r\n    },\r\n\r\n    methods:{\r\n\r\n         //para cambiar de grupo al estudiante\r\n         cambiarGrupoMatricula(grupo){\r\n             let me = this;\r\n        \r\n            this.$http.get(this.$server_url+'cambiarEstadoMatricula?grupo='+grupo+'&idusuario='+me.usuario.idusuario)\r\n                .then(function (res) {\r\n                \r\n                    location.reload();\r\n                     me.$router.push('/')\r\n                    \r\n                    localStorage.clear();\r\n               \r\n\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                   \r\n\r\n                })\r\n         },\r\n\r\n        getEstadoMatricula() {\r\n            let me = this;\r\n           \r\n            let periodo = localStorage.getItem('periodo_id')\r\n            let idusuario = me.usuario.idusuario\r\n           \r\n            this.$http.get(this.$server_url+'valores/pensiones?periodo_id='+periodo+'&idusuario='+idusuario)\r\n                .then(function (res) {\r\n\r\n                   \r\n                     me.ifMatriculado = res.data.buscarEstudianteReserva[0].estado_matricula\r\n\r\n                    if(me.usuario.id_group == 4){\r\n\r\n                        if(me.ifMatriculado == '2'){\r\n                        me.cambiarGrupoMatricula(14)\r\n                        }\r\n                        if(me.ifMatriculado == '3'){\r\n                            me.cambiarGrupoMatricula(14)\r\n                        }\r\n                     }\r\n\r\n                      if(me.usuario.id_group == 14){\r\n\r\n                        if(me.ifMatriculado == '1'){\r\n                            me.cambiarGrupoMatricula(4)\r\n                         }\r\n                      }\r\n               \r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                \r\n\r\n                })\r\n        },\r\n\r\n        vistaComprobante(tr,id,data){\r\n            return false;\r\n            let me = this;\r\n           \r\n            if(tr.url == null){\r\n                me.IfImagen = false;\r\n            }else{\r\n                let image = tr.url\r\n                me.urlImage = image.slice(1)\r\n                me.IfImagen = true;\r\n            }\r\n         \r\n           \r\n            let valor_anterior = id -1\r\n            let valor=  data[valor_anterior].valor_pendiente\r\n            if(valor == 0){\r\n              \r\n            \r\n                me.valor_cuota = tr.valor_cuota\r\n                me.pensionesVer = false;\r\n                me.cuota.idcouta = tr.id_cuotas_id\r\n                me.cuota.fecha_a_pagar = tr.fecha_a_pagar\r\n               \r\n            }else{\r\n                 me.$vs.notify({\r\n                    color: 'primary',\r\n                    title: 'Mensaje',\r\n                    text: 'Aun no esta habilitada para pagar esta cuota'\r\n                    })\r\n                return false;\r\n            }\r\n          \r\n            \r\n        },\r\n          //para obtener los valores de las pensiones del estudiante\r\n        getValoresPensiones() {\r\n            let me = this;\r\n            me.$vs.loading();\r\n\r\n\r\n\r\n            let periodo_id = localStorage.getItem(\"periodo_id\")\r\n        \r\n            this.$http.get(this.$server_url+'valores/pensiones?idusuario='+me.usuario.idusuario+'&periodo_id='+periodo_id)\r\n                .then(function (res) {\r\n                    me.valores = res.data.traerPensiones\r\n               \r\n                    me.$vs.loading.close()\r\n                    \r\n                    if(res.data.message){\r\n                        me.$vs.notify({\r\n                                text: res.data.message,\r\n                                color: 'warning',\r\n                                iconPack: 'feather',\r\n                                icon: 'icon-alert-triangle'\r\n                            })\r\n                        return false;\r\n                        }\r\n\r\n\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n\r\n                })\r\n        },\r\n\r\n\r\n         guardarComprobate(){\r\n            let me = this;\r\n        \r\n           \r\n      \r\n        \r\n              if(me.cuota.comentario.length >= 100){\r\n                me.$vs.notify({\r\n                    color: 'primary',\r\n                    title: 'Mensaje',\r\n                    text: 'El comentario no puede exceder los 100  caracteres'\r\n                    })\r\n                return false;\r\n            }\r\n\r\n\r\n            if(me.attachments.length == 0){\r\n                 me.$vs.notify({\r\n                    text:'Seleccione una imagen antes de enviar',\r\n                    color:'warning',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})  \r\n                    return false; \r\n            }\r\n\r\n            if(me.tamanioError == 'yes'){\r\n                me.$vs.notify({\r\n                    text:'El tamaño de la imagen excede 1MB',\r\n                    color:'warning',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})  \r\n                    return false;  \r\n            }\r\n           \r\n            if(me.errorImage == 'yes'){\r\n                me.$vs.notify({\r\n                    text:'El formato de la imagen solo se acepta jpg/png/jpeg',\r\n                    color:'warning',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})  \r\n                    return false;      \r\n            }     \r\n            let formData = new FormData();\r\n\r\n            //Si se envia imagenes\r\n            for(let i=0; i<this.attachments.length;i++){\r\n                \r\n                formData.append('periodo_id', localStorage.getItem('periodo_id')); \r\n                formData.append('descripcion_periodo',localStorage.getItem('descripcion_periodo'));\r\n                formData.append('nombreInstitucion',localStorage.getItem(\"nombreInstitucion\"));\r\n\r\n                formData.append('idcouta', me.cuota.idcouta);\r\n                formData.append('comentarioCuota', me.cuota.comentario); \r\n                formData.append('fecha_a_pagar',me.cuota.fecha_a_pagar);\r\n                formData.append('archivo[]',this.attachments[i]);\r\n                \r\n \r\n            }\r\n\r\n            const config = { headers: { 'Content-Type': 'multipart/form-data' } };\r\n            document.querySelectorAll('.upload-file').value=[];\r\n            me.$vs.loading()\r\n            axios.post(this.$data_url+'api/guardarComprobantepension',formData, config)\r\n            \r\n                .then(function (res) {\r\n                    me.$vs.loading.close();\r\n                    me.$vs.notify({\r\n                        text: res.data.message,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n\r\n                    me.getValoresPensiones();\r\n                    me.attachments = [];\r\n                    me.archivoName='',\r\n                    me.cuota.fecha_a_pagar = \"\"\r\n                    me.cuota.comentario = \"\"\r\n                    me.pensionesVer = true;\r\n                \r\n                  \r\n                  \r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close();\r\n                })\r\n\r\n\r\n       \r\n        },\r\n\r\n        \r\n         //para subir archivos\r\n        fieldChange(e){\r\n            let me = this;\r\n                me.errorImage = 'no'\r\n                me.tamanioError=\"no\"\r\n                this.attachments = [];\r\n                let selectedFiles=e.target.files;\r\n                let validar = e.target.files[0].type;\r\n\r\n                let tamanio = e.target.files[0].size;\r\n                \r\n                if(tamanio > 1000000){\r\n                    me.tamanioError=\"yes\"\r\n                    me.$vs.notify({\r\n                        text:'El tamaño de la imagen excede 1MB',\r\n                        color:'warning',\r\n                        iconPack: 'feather',\r\n                        icon:'icon-check'})  \r\n                        return false;  \r\n                }\r\n                \r\n            \r\n                if(validar == 'image/png' || validar == 'image/jpg' || validar == 'image/jpeg'){\r\n                    for(let i=0;i<selectedFiles.length;i++){\r\n\r\n                      this.attachments.push(selectedFiles[i]);\r\n                      localStorage.setItem('nameArchivo',this.attachments[0].name)\r\n                      me.archivoName = localStorage.getItem(\"nameArchivo\")\r\n                     }\r\n                     me.errorImage = 'no'\r\n                }else{\r\n                  me.errorImage = 'yes'\r\n                  me.$vs.notify({\r\n                    text:'Formato de imagen no aceptada solo se acepta png/jpg/jpeg',\r\n                    color:'success',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})\r\n                    return false;\r\n                  \r\n                \r\n                }\r\n\r\n          \r\n               \r\n        },\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Formato de etiqueta */\r\n\r\n.image1{\r\n filter: drop-shadow(0 0 5px coral);\r\n border-radius: 20px;\r\n cursor: pointer;\r\n opacity: 0.7;\r\n}\r\n.image1:hover{\r\n opacity:1\r\n}\r\n.form-block-input {\r\n    \r\n  display:flex;\r\n  max-width:450px;\r\n  overflow:hidden;\r\n  font-size:0.9em;\r\n  color:#777;\r\n\r\n  border:1px #25a solid;\r\n  margin:30px 40px 2px  2px;\r\n  padding:0;\r\n  border-radius:3px;\r\n  border: none;\r\n}\r\n/* Ocultar campo tipo file */\r\ninput[type=\"file\"].form-file {\r\n  display:none;\r\n}\r\n/* Botón para seleccionar archivos */\r\nbutton.form-file-button {\r\n  vertical-align:middle;\r\n  color:#fff;\r\n  background:#24A6F6;\r\n  margin:0;\r\n  border:0;\r\n  width: 50px;\r\n  padding:2px 8px;\r\n  transform:scaleX(-1); /* Invertir botón horizontalmente */\r\n}\r\n/* Lista de archivos */\r\nspan.form-file-span {\r\n  flex:1;\r\n  display:inline-block;\r\n  text-align:left;\r\n  padding:4px 10px;\r\n  background: #24A6F6;\r\n  color:#fff;\r\n  padding: 10px;\r\n   border-radius:5px 15px;\r\n   cursor: pointer;\r\n   font-size: 20px;\r\n  \r\n}\r\n/* Arhchivos en lista */\r\nspan.form-files {\r\n  display:inline-block;\r\n  color:#555;\r\n  background:#ccf;\r\n  \r\n  margin:2px 8px 2px 0;\r\n  padding:2px 5px;\r\n  white-space:nowrap;\r\n  border-radius:3px;\r\n}\r\n/* Quitar margen horizontal al último elemento en la lista */\r\nspan.form-block-span:last-child {\r\n  margin:2px 0;\r\n}\r\n</style>"]}]}