{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\gerencia\\reportes\\ReporteTrasabilidad.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\gerencia\\reportes\\ReporteTrasabilidad.vue","mtime":1712682816340},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport flatPickr from 'vue-flatpickr-component';\r\nimport 'flatpickr/dist/flatpickr.css';\r\nimport ReporteTrazabilidadDetalleVue from './ReporteTrasabilidadDetalle.vue'\r\nexport default{\r\n    data(){\r\n        return{\r\n            arregloPedidos:[],\r\n            pedido:{},\r\n            popupReporte:false,\r\n            //variables para el export a excel\r\n            activePrompt:false,\r\n            codigoSelected: [],\r\n            reportesActivo: 0,\r\n            fileName: null,\r\n            formats: ['xls', 'xlsx', 'csv', 'txt'],\r\n            cellAutoWidth: true,\r\n            selectedFormat: 'xls',\r\n        }\r\n    },\r\n    components:{\r\n        flatPickr,\r\n        ReporteTrazabilidadDetalleVue,\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.getPedidos()\r\n        me.fromDate = new Date();\r\n    },\r\n    methods:{\r\n        getPedidos(){\r\n            let me = this\r\n            me.popupUpload = false;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'getPedidosGerencia')\r\n            .then(res => {\r\n                me.$vs.loading.close();\r\n                me.arregloPedidos = res.data\r\n            })\r\n        },\r\n          //METODOS PARA EXCEL\r\n        //para limipiar los campos del excel\r\n        clearFields() {\r\n            this.fileName = ''\r\n            this.cellAutoWidth = true\r\n            this.selectedFormat = 'xls'\r\n        },\r\n        //metodo par descargar el excel\r\n        exportToExcel() {\r\n            let headerTitle = [\r\n                'Vendedor',\r\n                'Institución',\r\n                'Ciudad',\r\n                'Contrato',\r\n                'Creacion pedido',\r\n                'Anticipo aprobado',\r\n                'Contabilidad recibe',\r\n                'Contabilidad sube cheque sin firmar',\r\n                'Contabilidad sube cheque firmado',\r\n                'Facturador recibe cheque',\r\n                'Facturador envia cheque asesor',\r\n                'Asesor sube pagaré firmado',\r\n                'Facturador recibe orden firmada fisico',\r\n                'Contabilidad reciben orden firmada fisico'\r\n                ];\r\n            let headerVal = [\r\n                'responsable',\r\n                'nombreInstitucion',\r\n                'nombre_ciudad',\r\n                'contrato_generado',\r\n                'f_creacionPedido',\r\n                'fecha_contabilidad_recibe',\r\n                'fecha_contabilidad_sube_cheque_sin_firmar',\r\n                'fecha_subir_cheque',\r\n                'fecha_facturador_recibe_cheque',\r\n                'fecha_envio_cheque_for_asesor',\r\n                'fecha_orden_firmada',\r\n                'fecha_que_recibe_orden_firmada',\r\n                'fecha_que_recibe_orden_firmada_contabilidad'\r\n            ];  \r\n            let codigoSelectedMayus = this.codigoSelected\r\n            for (var i = 0; i < codigoSelectedMayus.length; i++) {\r\n                for (var key in codigoSelectedMayus[i]) {\r\n                    if (typeof codigoSelectedMayus[i][key] == \"string\") {\r\n                        codigoSelectedMayus[i][key] = codigoSelectedMayus[i][key].toUpperCase();\r\n                    }\r\n                }\r\n            }\r\n            import('@/vendor/Export2Excel').then(excel => {\r\n                const list = codigoSelectedMayus\r\n                const data = this.formatJson(headerVal, list)\r\n                excel.export_json_to_excel({\r\n                    header: headerTitle,\r\n                    data,\r\n                    filename: this.fileName,\r\n                    autoWidth: this.cellAutoWidth,\r\n                    bookType: this.selectedFormat\r\n                })\r\n                this.clearFields()\r\n                this.guardarActivo = '';\r\n                this.generarActivo = ' ';\r\n                this.textAlertCant = '';\r\n                this.cantidad = '';\r\n                this.codigoSelected = [];\r\n            })\r\n        },\r\n        formatJson(filterVal, jsonData) {\r\n            return jsonData.map(v => filterVal.map(j => {\r\n                return v[j]\r\n            }))\r\n        },\r\n    }\r\n}\r\n",{"version":3,"sources":["ReporteTrasabilidad.vue"],"names":[],"mappings":";AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReporteTrasabilidad.vue","sourceRoot":"src/views/pedidos/gerencia/reportes","sourcesContent":["<template>\r\n    <vx-card>\r\n        <vs-table multiple v-model=\"codigoSelected\" max-items=\"10\" stripe search pagination :data=\"arregloPedidos\">\r\n            <template slot=\"header\">\r\n                <vs-chip  color=\"primary\">Cantidad:  {{ arregloPedidos.length }} </vs-chip>\r\n                <span class=\"cursor-pointer\" @click=\"activePrompt=true;\"><vs-chip  color=\"success\" ><b><ion-icon name=\"download-outline\"></ion-icon> Exportar</b></vs-chip></span>\r\n            </template>\r\n            <template slot=\"thead\">\r\n                <vs-th>#</vs-th>\r\n                <vs-th>Asesor</vs-th>\r\n                <vs-th>Acciones</vs-th>\r\n            </template>\r\n            <template slot-scope=\"{data}\">\r\n                <vs-tr  :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                    <vs-td>\r\n                        {{ tr.id_pedido }}\r\n                    </vs-td>\r\n                    <vs-td>\r\n                        <b>Asesor:</b>\r\n                        <p> {{data[indextr].responsable}}</p>\r\n                        <b>Institución:</b>\r\n                        <p> {{data[indextr].nombreInstitucion}}<br> </p>\r\n                        <b>Ciudad:</b>\r\n                        <p>{{ tr.nombre_ciudad }}</p>\r\n                        <b>Fecha aprobado por gerencia</b>\r\n                        <p> {{data[indextr].fecha_aprobacion_anticipo_gerencia}}<br> </p>\r\n                        <b>Fecha generación contrato</b>\r\n                        <p> {{data[indextr].fecha_generar_contrato}}<br> </p>\r\n                        <b>Contrato:</b>\r\n                        <p> {{data[indextr].contrato_generado}}<br> </p>\r\n                    </vs-td>\r\n                    <vs-td>\r\n                        <div style=\"display: flex;\">\r\n                            <div>\r\n                                <!--COLOCAR RECIBIDAS-->\r\n                                <vx-tooltip style=\"display: inline-block;\" text=\"Reporte Trazabilidad\" position=\"top\" color=\"primary\">\r\n                                    <vs-button class=\"modal-default-button\" size=\"small\" color=\"primary\" @click=\"pedido= tr;popupReporte = true;\" type=\"filled\" icon-pack=\"feather\" icon=\"icon-credit-card\"> Reporte trazabilidad </vs-button>\r\n                                </vx-tooltip> &nbsp;\r\n                            </div>\r\n                        </div>\r\n                    </vs-td> \r\n                </vs-tr>\r\n            </template>\r\n        </vs-table>\r\n        <!--MODAL PARA VER  EL REPORTE -->\r\n        <vs-popup class=\"holamundo\" fullscreen title=\"Reporte de trazabilidad\" :active.sync=\"popupReporte\">\r\n            <div v-if=\"popupReporte\">\r\n                <ReporteTrazabilidadDetalleVue :pedido=\"pedido\"/>\r\n            </div>\r\n        </vs-popup>\r\n        <!--MODAL PARA EXPORTAR A EXCEL-->\r\n        <vs-prompt title=\"Exportar a Excel\" class=\"export-options\" @cancle=\"clearFields\" @accept=\"exportToExcel\" accept-text=\"Exportar\" @close=\"clearFields\" :active.sync=\"activePrompt\">\r\n            <vs-alert class=\"mb-3\" color=\"danger\" icon-pack=\"feather\" icon=\"icon-info\">\r\n                <span>Recuerde <b>seleccionar</b> los registros que desea exportar.</span>\r\n            </vs-alert>\r\n            <vs-input v-model=\"fileName\" placeholder=\"Ingrese el nombre del archivo\" class=\"w-full\" />\r\n            <v-select v-model=\"selectedFormat\" :options=\"formats\" class=\"my-4\" />\r\n            <div class=\"flex\">\r\n            </div>\r\n         </vs-prompt>\r\n    </vx-card>\r\n</template>\r\n<script>\r\nimport flatPickr from 'vue-flatpickr-component';\r\nimport 'flatpickr/dist/flatpickr.css';\r\nimport ReporteTrazabilidadDetalleVue from './ReporteTrasabilidadDetalle.vue'\r\nexport default{\r\n    data(){\r\n        return{\r\n            arregloPedidos:[],\r\n            pedido:{},\r\n            popupReporte:false,\r\n            //variables para el export a excel\r\n            activePrompt:false,\r\n            codigoSelected: [],\r\n            reportesActivo: 0,\r\n            fileName: null,\r\n            formats: ['xls', 'xlsx', 'csv', 'txt'],\r\n            cellAutoWidth: true,\r\n            selectedFormat: 'xls',\r\n        }\r\n    },\r\n    components:{\r\n        flatPickr,\r\n        ReporteTrazabilidadDetalleVue,\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.getPedidos()\r\n        me.fromDate = new Date();\r\n    },\r\n    methods:{\r\n        getPedidos(){\r\n            let me = this\r\n            me.popupUpload = false;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'getPedidosGerencia')\r\n            .then(res => {\r\n                me.$vs.loading.close();\r\n                me.arregloPedidos = res.data\r\n            })\r\n        },\r\n          //METODOS PARA EXCEL\r\n        //para limipiar los campos del excel\r\n        clearFields() {\r\n            this.fileName = ''\r\n            this.cellAutoWidth = true\r\n            this.selectedFormat = 'xls'\r\n        },\r\n        //metodo par descargar el excel\r\n        exportToExcel() {\r\n            let headerTitle = [\r\n                'Vendedor',\r\n                'Institución',\r\n                'Ciudad',\r\n                'Contrato',\r\n                'Creacion pedido',\r\n                'Anticipo aprobado',\r\n                'Contabilidad recibe',\r\n                'Contabilidad sube cheque sin firmar',\r\n                'Contabilidad sube cheque firmado',\r\n                'Facturador recibe cheque',\r\n                'Facturador envia cheque asesor',\r\n                'Asesor sube pagaré firmado',\r\n                'Facturador recibe orden firmada fisico',\r\n                'Contabilidad reciben orden firmada fisico'\r\n                ];\r\n            let headerVal = [\r\n                'responsable',\r\n                'nombreInstitucion',\r\n                'nombre_ciudad',\r\n                'contrato_generado',\r\n                'f_creacionPedido',\r\n                'fecha_contabilidad_recibe',\r\n                'fecha_contabilidad_sube_cheque_sin_firmar',\r\n                'fecha_subir_cheque',\r\n                'fecha_facturador_recibe_cheque',\r\n                'fecha_envio_cheque_for_asesor',\r\n                'fecha_orden_firmada',\r\n                'fecha_que_recibe_orden_firmada',\r\n                'fecha_que_recibe_orden_firmada_contabilidad'\r\n            ];  \r\n            let codigoSelectedMayus = this.codigoSelected\r\n            for (var i = 0; i < codigoSelectedMayus.length; i++) {\r\n                for (var key in codigoSelectedMayus[i]) {\r\n                    if (typeof codigoSelectedMayus[i][key] == \"string\") {\r\n                        codigoSelectedMayus[i][key] = codigoSelectedMayus[i][key].toUpperCase();\r\n                    }\r\n                }\r\n            }\r\n            import('@/vendor/Export2Excel').then(excel => {\r\n                const list = codigoSelectedMayus\r\n                const data = this.formatJson(headerVal, list)\r\n                excel.export_json_to_excel({\r\n                    header: headerTitle,\r\n                    data,\r\n                    filename: this.fileName,\r\n                    autoWidth: this.cellAutoWidth,\r\n                    bookType: this.selectedFormat\r\n                })\r\n                this.clearFields()\r\n                this.guardarActivo = '';\r\n                this.generarActivo = ' ';\r\n                this.textAlertCant = '';\r\n                this.cantidad = '';\r\n                this.codigoSelected = [];\r\n            })\r\n        },\r\n        formatJson(filterVal, jsonData) {\r\n            return jsonData.map(v => filterVal.map(j => {\r\n                return v[j]\r\n            }))\r\n        },\r\n    }\r\n}\r\n</script>"]}]}