{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\docentes\\agregarTareas.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\docentes\\agregarTareas.vue","mtime":1712682815745},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nimport 'vue-select/dist/vue-select.css';\r\nimport Datepicker from 'vuejs-datepicker';\r\nimport flatPickr from 'vue-flatpickr-component';\r\nimport 'flatpickr/dist/flatpickr.css';\r\nVue.use(axios)\r\nexport default {\r\n    components: {\r\n        'v-select': vSelect,\r\n        flatPickr\r\n    },\r\n    data() {\r\n        return {\r\n            datei: null,\r\n            datef: null,\r\n            activePrompt: false,\r\n            activePrompt2: false,\r\n            tmpListaTareas: [],\r\n            listaTareas: [],\r\n            usuario: [],\r\n            datetime: null,\r\n            configdateTimePicker: {\r\n                enableTime: true,\r\n                dateFormat: 'Y-m-d H:i:ss'\r\n            },\r\n            idcontenido: '',\r\n            fecha_inicio: '',\r\n            fecha_final: '',\r\n            descripcion: '',\r\n            opcion: 0,\r\n            idTareaEditar: '',\r\n            editarActivo: 0,\r\n            listaEstudiantes: [],\r\n            estudiantesSelect: [],\r\n            popupActiveConfirm: false,\r\n            tipo_asignatura: '',\r\n            id_asignatura: 0,\r\n        }\r\n    },\r\n    created() {\r\n        this.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n\r\n        if (localStorage.idtarea != '' || localStorage.idtarea != null) {\r\n            this.cargarFormulario();\r\n        } else {\r\n            this.editarActivo = 0;\r\n            this.fecha_inicio = '';\r\n            this.fecha_final = '';\r\n            this.descripcion = '';\r\n            this.idTareaEditar = '';\r\n            localStorage.idtarea = '';\r\n        }\r\n        //console.log('localStorage.idcurso: ' + localStorage.idcurso);\r\n    },\r\n    computed: {\r\n\r\n    },\r\n    mounted() {\r\n        this.tipo_asignatura = localStorage.getItem('tipo_asignatura');\r\n        this.id_asignatura = localStorage.getItem('idasignatura');\r\n        this.wasSidebarOpen = this.$store.state.reduceButton\r\n        this.$store.commit('TOGGLE_REDUCE_BUTTON', false)\r\n        this.getArchivos();\r\n        this.getEstudiantes();\r\n    },\r\n    methods: {\r\n        async getteletareas() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            me.listaTareas = []\r\n            me.idcontenido = ''\r\n            // var url = this.$server_url+\"getContenidoTodo?idusuario=\" + me.usuario.idusuario;\r\n            var url = this.$server_url+\"teletarea_asignatura/\" + me.id_asignatura;\r\n            this.$http.get(url).then(function (response) {\r\n                    // console.log(response.data);\r\n                    me.listaTareas = response.data;\r\n                    // for (let index = 0; index < me.tmpListaTareas.length; index++) {\r\n                    //     if (me.tmpListaTareas[index].idasignatura === parseInt(me.id_asignatura)) {\r\n                    //         me.listaTareas.push(me.tmpListaTareas[index])\r\n                    //     }\r\n                    // }\r\n                    console.log( me.listaTareas )\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                    me.$vs.loading.close()\r\n                });\r\n        },\r\n        async getArchivos() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            me.listaTareas = []\r\n            me.idcontenido = ''\r\n            var url = this.$server_url+\"getContenido?idcurso=\" + localStorage.idcurso + \"&idasignatura=\";\r\n            this.$http.get(url).then(function (response) {\r\n                    var respuesta = response.data;\r\n                    me.listaTareas = response.data;\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                });\r\n        },\r\n        enviar() {\r\n            let idestudiantes = [];\r\n            for (var i = 0; i < this.estudiantesSelect.length; i++) {\r\n                idestudiantes.push(this.estudiantesSelect[i]);\r\n            }\r\n\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('idestudiantes', idestudiantes);\r\n            formData.append('finicial', me.fecha_inicio);\r\n            formData.append('ffinal', me.fecha_final);\r\n            formData.append('descripcion', me.descripcion);\r\n            formData.append('idcontenido', me.idcontenido);\r\n            formData.append('idcurso', localStorage.idcurso);\r\n            this.$http.post(this.$server_url+\"guardarTarea\", formData)\r\n                .then(function (response) {\r\n                    //me.$router.push('/docente/curso/virtual');\r\n                    me.$router.go(-1);\r\n                })\r\n                .catch(function (error) {\r\n                    //alert('error');\r\n                })\r\n        },\r\n        cargarFormulario() {\r\n            if (localStorage.idtarea != '') {\r\n                this.editarActivo = 1;\r\n                this.fecha_inicio = localStorage.fecha_inicio;\r\n                this.fecha_final = localStorage.fecha_final;\r\n                this.descripcion = localStorage.descripcion;\r\n                this.idTareaEditar = localStorage.idtarea;\r\n            }\r\n        },\r\n        editarTarea() {\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('finicial', me.fecha_inicio);\r\n            formData.append('ffinal', me.fecha_final);\r\n            formData.append('descripcion', me.descripcion);\r\n            formData.append('idcontenido', me.idcontenido);\r\n            formData.append('idtarea', localStorage.idtarea);\r\n            formData.append('idcurso', localStorage.idcurso);\r\n            this.$http.post(this.$server_url+\"guardarTarea\", formData)\r\n                .then(function (response) {\r\n                    if (response.data === 1) {\r\n                        //alert(response.data);\r\n                        me.fecha_inicio = '';\r\n                        me.fecha_final = '';\r\n                        me.descripcion = '';\r\n                        me.idTareaEditar = '';\r\n                        localStorage.idtarea = '';\r\n                        me.editarActivo = 0;\r\n                        me.idTareaEditar = '';\r\n                        me.$vs.notify({\r\n                            // title: 'Éxito',\r\n                            text: 'Tarea modificada exitosamente',\r\n                            color: 'success'\r\n                        })\r\n                        me.$router.go(-1);\r\n                    } else {\r\n                        //alert('error if: '+response.data);\r\n                    }\r\n                })\r\n                .catch(function (error) {\r\n                    //alert('error catch: ' + error);\r\n                })\r\n        },\r\n        getEstudiantes() {\r\n            //console.log(localStorage.codigo);\r\n            let me = this;\r\n            var url = this.$server_url+\"getEstudiantes?codigo=\" + localStorage.codigo;\r\n            this.$http.get(url).then(function (response) {\r\n                    me.listaEstudiantes = response.data;\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                });\r\n        },\r\n\r\n    },\r\n}\r\n",{"version":3,"sources":["agregarTareas.vue"],"names":[],"mappings":";AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"agregarTareas.vue","sourceRoot":"src/views/docentes","sourcesContent":["<template>\r\n<div>\r\n\r\n    <vs-popup title=\"Confirmar\" :active.sync=\"popupActiveConfirm\">\r\n        <div align=\"center\">\r\n            <div v-if=\"estudiantesSelect===null || estudiantesSelect==='' || estudiantesSelect.length == 0\">\r\n                La tarea será agregada para todo el curso.<br>\r\n            </div>\r\n            <div v-else>\r\n                La Tarea será agregada únicamente para los estudiantes seleccionados.<br>\r\n            </div>\r\n            <vs-button class=\"mt-5\" color=\"warning\" @click=\"popupActiveConfirm=false; enviar()\" type=\"filled\">Aceptar</vs-button>\r\n        </div>\r\n    </vs-popup>\r\n\r\n    <vx-card title=\"\">\r\n        <div class=\"vx-row mb-6 text-center\">\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-4\">\r\n                <b>Mis Archivos </b>\r\n                <br>\r\n                <vs-radio @input=\"getArchivos\" v-model=\"opcion\" vs-value=\"0\"></vs-radio>\r\n                <!-- <input type=\"radio\" id=\"radioPerfiles1\" @input=\"getArchivos\" v-bind:value=\"'0'\" v-model=\"opcion\" class=\"option-input radio\"> -->\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 w-full mb-4\" v-if=\"tipo_asignatura == 'prolipa' \">\r\n                <b>Teletareas </b>\r\n                <br>\r\n                <vs-radio @input=\"getteletareas\" v-model=\"opcion\" vs-value=\"1\"></vs-radio>\r\n                <!-- <input type=\"radio\" id=\"radioPerfiles2\" @input=\"getteletareas\" v-bind:value=\"'1'\" v-model=\"opcion\" class=\"option-input radio\"> -->\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row mb-6\">\r\n            <div class=\"vx-col w-full\">\r\n                <v-select :options=\"listaTareas\" :reduce=\"listaTareas => listaTareas.idcontenido\" label=\"nombre\" v-model=\"idcontenido\"></v-select>\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row mb-6\">\r\n            <div class=\"vx-col sm:w-1/3 w-full\">\r\n                <span>Fecha de Inicio *</span>\r\n            </div>\r\n            <div class=\"vx-col sm:w-2/3 w-full\">\r\n                <flat-pickr class=\"w-full\" :config=\"configdateTimePicker\" v-model=\"fecha_inicio\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row mb-6\">\r\n            <div class=\"vx-col sm:w-1/3 w-full\">\r\n                <span>Fecha de Entrega *</span>\r\n            </div>\r\n            <div class=\"vx-col sm:w-2/3 w-full\">\r\n                <flat-pickr class=\"w-full\" :config=\"configdateTimePicker\" v-model=\"fecha_final\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row mb-3\">\r\n            <div class=\"vx-col sm:w-1/3 w-full\">\r\n                <span>Descripción *</span>\r\n            </div>\r\n            <div class=\"vx-col sm:w-2/3 w-full\">\r\n                <vs-textarea v-model=\"descripcion\" height=\"150px\" />\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"vx-row mb-6\">\r\n            <div class=\"vx-col sm:w-1/3 w-full\">\r\n                <b>Estudiante: </b><br>\r\n            </div>\r\n            <div class=\"vx-col sm:w-2/3 w-full\">\r\n                <v-select multiple :closeOnSelect=\"false\" :options=\"listaEstudiantes\" :reduce=\"listaEstudiantes => listaEstudiantes.idusuario\" label=\"nombre_completo\" v-model=\"estudiantesSelect\"></v-select>\r\n                <span style=\"font-size: 12px;\">Si desea agregar la tarea para <b>todo</b> el curso, deje este campo <b>vacío</b>.</span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"vx-row mt-2\">\r\n            <div class=\"vx-col sm:w-2/3 w-full ml-auto\">\r\n\r\n                <vs-button v-if=\"editarActivo===0\" class=\"mr-3 mb-2\" @click=\"popupActiveConfirm=true;\">Agregar</vs-button>\r\n\r\n                <vs-button v-else class=\"mr-3 mb-2\" @click=\"editarTarea()\">Editar</vs-button>\r\n\r\n                <!--<vs-button color=\"danger\" type=\"border\" to=\"/docente/curso/tarea\">Cancelar</vs-button>-->\r\n                <vs-button color=\"danger\" type=\"border\" @click=\"$router.go(-1)\">Cancelar</vs-button>\r\n            </div>\r\n        </div>\r\n    </vx-card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nimport 'vue-select/dist/vue-select.css';\r\nimport Datepicker from 'vuejs-datepicker';\r\nimport flatPickr from 'vue-flatpickr-component';\r\nimport 'flatpickr/dist/flatpickr.css';\r\nVue.use(axios)\r\nexport default {\r\n    components: {\r\n        'v-select': vSelect,\r\n        flatPickr\r\n    },\r\n    data() {\r\n        return {\r\n            datei: null,\r\n            datef: null,\r\n            activePrompt: false,\r\n            activePrompt2: false,\r\n            tmpListaTareas: [],\r\n            listaTareas: [],\r\n            usuario: [],\r\n            datetime: null,\r\n            configdateTimePicker: {\r\n                enableTime: true,\r\n                dateFormat: 'Y-m-d H:i:ss'\r\n            },\r\n            idcontenido: '',\r\n            fecha_inicio: '',\r\n            fecha_final: '',\r\n            descripcion: '',\r\n            opcion: 0,\r\n            idTareaEditar: '',\r\n            editarActivo: 0,\r\n            listaEstudiantes: [],\r\n            estudiantesSelect: [],\r\n            popupActiveConfirm: false,\r\n            tipo_asignatura: '',\r\n            id_asignatura: 0,\r\n        }\r\n    },\r\n    created() {\r\n        this.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n\r\n        if (localStorage.idtarea != '' || localStorage.idtarea != null) {\r\n            this.cargarFormulario();\r\n        } else {\r\n            this.editarActivo = 0;\r\n            this.fecha_inicio = '';\r\n            this.fecha_final = '';\r\n            this.descripcion = '';\r\n            this.idTareaEditar = '';\r\n            localStorage.idtarea = '';\r\n        }\r\n        //console.log('localStorage.idcurso: ' + localStorage.idcurso);\r\n    },\r\n    computed: {\r\n\r\n    },\r\n    mounted() {\r\n        this.tipo_asignatura = localStorage.getItem('tipo_asignatura');\r\n        this.id_asignatura = localStorage.getItem('idasignatura');\r\n        this.wasSidebarOpen = this.$store.state.reduceButton\r\n        this.$store.commit('TOGGLE_REDUCE_BUTTON', false)\r\n        this.getArchivos();\r\n        this.getEstudiantes();\r\n    },\r\n    methods: {\r\n        async getteletareas() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            me.listaTareas = []\r\n            me.idcontenido = ''\r\n            // var url = this.$server_url+\"getContenidoTodo?idusuario=\" + me.usuario.idusuario;\r\n            var url = this.$server_url+\"teletarea_asignatura/\" + me.id_asignatura;\r\n            this.$http.get(url).then(function (response) {\r\n                    // console.log(response.data);\r\n                    me.listaTareas = response.data;\r\n                    // for (let index = 0; index < me.tmpListaTareas.length; index++) {\r\n                    //     if (me.tmpListaTareas[index].idasignatura === parseInt(me.id_asignatura)) {\r\n                    //         me.listaTareas.push(me.tmpListaTareas[index])\r\n                    //     }\r\n                    // }\r\n                    console.log( me.listaTareas )\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                    me.$vs.loading.close()\r\n                });\r\n        },\r\n        async getArchivos() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            me.listaTareas = []\r\n            me.idcontenido = ''\r\n            var url = this.$server_url+\"getContenido?idcurso=\" + localStorage.idcurso + \"&idasignatura=\";\r\n            this.$http.get(url).then(function (response) {\r\n                    var respuesta = response.data;\r\n                    me.listaTareas = response.data;\r\n                    me.$vs.loading.close()\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                });\r\n        },\r\n        enviar() {\r\n            let idestudiantes = [];\r\n            for (var i = 0; i < this.estudiantesSelect.length; i++) {\r\n                idestudiantes.push(this.estudiantesSelect[i]);\r\n            }\r\n\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('idestudiantes', idestudiantes);\r\n            formData.append('finicial', me.fecha_inicio);\r\n            formData.append('ffinal', me.fecha_final);\r\n            formData.append('descripcion', me.descripcion);\r\n            formData.append('idcontenido', me.idcontenido);\r\n            formData.append('idcurso', localStorage.idcurso);\r\n            this.$http.post(this.$server_url+\"guardarTarea\", formData)\r\n                .then(function (response) {\r\n                    //me.$router.push('/docente/curso/virtual');\r\n                    me.$router.go(-1);\r\n                })\r\n                .catch(function (error) {\r\n                    //alert('error');\r\n                })\r\n        },\r\n        cargarFormulario() {\r\n            if (localStorage.idtarea != '') {\r\n                this.editarActivo = 1;\r\n                this.fecha_inicio = localStorage.fecha_inicio;\r\n                this.fecha_final = localStorage.fecha_final;\r\n                this.descripcion = localStorage.descripcion;\r\n                this.idTareaEditar = localStorage.idtarea;\r\n            }\r\n        },\r\n        editarTarea() {\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('finicial', me.fecha_inicio);\r\n            formData.append('ffinal', me.fecha_final);\r\n            formData.append('descripcion', me.descripcion);\r\n            formData.append('idcontenido', me.idcontenido);\r\n            formData.append('idtarea', localStorage.idtarea);\r\n            formData.append('idcurso', localStorage.idcurso);\r\n            this.$http.post(this.$server_url+\"guardarTarea\", formData)\r\n                .then(function (response) {\r\n                    if (response.data === 1) {\r\n                        //alert(response.data);\r\n                        me.fecha_inicio = '';\r\n                        me.fecha_final = '';\r\n                        me.descripcion = '';\r\n                        me.idTareaEditar = '';\r\n                        localStorage.idtarea = '';\r\n                        me.editarActivo = 0;\r\n                        me.idTareaEditar = '';\r\n                        me.$vs.notify({\r\n                            // title: 'Éxito',\r\n                            text: 'Tarea modificada exitosamente',\r\n                            color: 'success'\r\n                        })\r\n                        me.$router.go(-1);\r\n                    } else {\r\n                        //alert('error if: '+response.data);\r\n                    }\r\n                })\r\n                .catch(function (error) {\r\n                    //alert('error catch: ' + error);\r\n                })\r\n        },\r\n        getEstudiantes() {\r\n            //console.log(localStorage.codigo);\r\n            let me = this;\r\n            var url = this.$server_url+\"getEstudiantes?codigo=\" + localStorage.codigo;\r\n            this.$http.get(url).then(function (response) {\r\n                    me.listaEstudiantes = response.data;\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                });\r\n        },\r\n\r\n    },\r\n}\r\n</script>\r\n"]}]}