{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\codigos\\components\\gestionCodigos.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\codigos\\components\\gestionCodigos.vue","mtime":1712682815632},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport gestionCodigosCrear from './utils/gestionCodigosCrear.vue'\r\nimport gestionCodigosLista from './utils/gestionCodigosLista.vue'\r\nexport default {\r\n    data() {\r\n        return{\r\n            usuario:[],\r\n            id:0,\r\n            razonBusqueda:'',\r\n            arregloCodigos:[],\r\n            codigosEdit:[],\r\n            nuevo:false,\r\n            editar:0,\r\n             //variables para el export a excel\r\n            activePrompt:false,\r\n            codigoSelected: [],\r\n            reportesActivo: 0,\r\n            fileName: null,\r\n            formats: ['xls', 'xlsx', 'csv', 'txt'],\r\n            cellAutoWidth: true,\r\n            selectedFormat: 'xlsx',\r\n            //fin variables para el export a excel\r\n        }\r\n\r\n    },\r\n    created(){\r\n        let me = this\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n    },\r\n    components:{\r\n        gestionCodigosCrear,\r\n        gestionCodigosLista,\r\n    },\r\n    methods:{\r\n        change(e){\r\n            let me = this;\r\n            me.nuevo = e\r\n            me.filterCodes()\r\n        },\r\n        changeCode(e){\r\n            let me = this;\r\n            me.razonBusqueda = e\r\n        },\r\n        changeHandle(e){\r\n            let me = this;\r\n            if(e.eliminar == 1){\r\n                me.openConfirm(e.id)\r\n            }else{\r\n                me.codigosEdit  = e.codigosEdit\r\n                me.editar       = e.editar\r\n                me.nuevo        = e.nuevo\r\n            }\r\n        },\r\n        filterCodes(){\r\n            let me = this;\r\n            me.arregloCodigos = [];\r\n            if(me.razonBusqueda.length < 4){\r\n                me.$vs.notify({\r\n                text:'Minimo 4 caracteres de busqueda',\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return false;\r\n            }\r\n\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'gestionCodigos?codigo='+me.razonBusqueda)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                me.arregloCodigos =res.data\r\n                if(res.data.status == '0'){\r\n                    me.$vs.notify({\r\n                    text:'No se encontro codigos',\r\n                    color:'warning',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})\r\n                    return false;\r\n                }\r\n\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n                me.$vs.loading.close()\r\n            })\r\n        },\r\n        openConfirm(codigo){\r\n            let me = this;\r\n            me.id = codigo\r\n            this.$vs.dialog({\r\n                type:'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                text: 'Esta seguro de eliminar este codigo de la base de datos?.',\r\n                accept:this.eliminarCodigo\r\n            })\r\n        },\r\n        eliminarCodigo(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('codigo',           me.id)\r\n            formData.append('idusuario',        me.usuario.idusuario)\r\n            formData.append('institucion_id',   me.usuario.institucion_idInstitucion)\r\n            formData.append('periodo_id',       localStorage.periodo_id)\r\n            this.$http.post(this.$server_url+'eliminarCode?codigo=',formData)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                me.$vs.notify({\r\n                text:res.data.message,\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check',\r\n                time:4000,\r\n            })\r\n                if(res.data.status == '1'){\r\n                    me.filterCodes()\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n                me.$vs.loading.close()\r\n            })\r\n        },\r\n\r\n    }\r\n}\r\n",{"version":3,"sources":["gestionCodigos.vue"],"names":[],"mappings":";AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"gestionCodigos.vue","sourceRoot":"src/views/codigos/components","sourcesContent":["<template>\r\n    <div>\r\n        <vs-card v-if=\"nuevo\">\r\n            <vs-button radius color=\"success\" type=\"gradient\" @click=\"nuevo = false;\" icon=\"reply\"></vs-button>\r\n            <gestionCodigosCrear @regresar=\"change\" @code=\"changeCode\" :codigosEdit=\"codigosEdit\" :editar=\"editar\"/>\r\n        </vs-card>\r\n        <vx-card\r\n        v-else\r\n        title=\"Filtro de busqueda de códigos\"\r\n        title-color=\"success\"\r\n        >\r\n            <vs-row vs-justify=\"flex-start\">\r\n                <vs-col type=\"flex\" vs-justify=\"flex-start\" vs-align=\"flex-start\" class=\"m-2\" vs-w=\"12\">\r\n                    <vs-button type=\"border\" icon-pack=\"feather\" icon=\"icon-code\" @click=\"nuevo=true;editar=0;\">\r\n                        Agregar código\r\n                    </vs-button>\r\n                    <br/>\r\n                    <p>Filtro de busqueda</p>\r\n                    <br>\r\n                    <vs-card>\r\n                        <div style=\"\">\r\n                            <vs-input class=\"w-full\" icon-after=\"true\" @keyup.enter=\"filterCodes()\" label-placeholder=\"icon-after\" style=\"margin:0px 0px 20px 0px;\"  icon=\"search\" placeholder=\"Ingrese el criterio de busqueda\"  v-model=\"razonBusqueda\"/>\r\n                        </div>\r\n                    </vs-card>\r\n                </vs-col>\r\n            </vs-row>\r\n            <vs-divider></vs-divider>\r\n            <gestionCodigosLista\r\n            :arregloCodigos=\"arregloCodigos\"\r\n            btnEditar=\"1\"\r\n            btnEliminar=\"1\"\r\n            btnEstudiante=\"0\"\r\n            btnBloquear=\"0\"\r\n            @crud=\"changeHandle\"/>\r\n        </vx-card>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\nimport gestionCodigosCrear from './utils/gestionCodigosCrear.vue'\r\nimport gestionCodigosLista from './utils/gestionCodigosLista.vue'\r\nexport default {\r\n    data() {\r\n        return{\r\n            usuario:[],\r\n            id:0,\r\n            razonBusqueda:'',\r\n            arregloCodigos:[],\r\n            codigosEdit:[],\r\n            nuevo:false,\r\n            editar:0,\r\n             //variables para el export a excel\r\n            activePrompt:false,\r\n            codigoSelected: [],\r\n            reportesActivo: 0,\r\n            fileName: null,\r\n            formats: ['xls', 'xlsx', 'csv', 'txt'],\r\n            cellAutoWidth: true,\r\n            selectedFormat: 'xlsx',\r\n            //fin variables para el export a excel\r\n        }\r\n\r\n    },\r\n    created(){\r\n        let me = this\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n    },\r\n    components:{\r\n        gestionCodigosCrear,\r\n        gestionCodigosLista,\r\n    },\r\n    methods:{\r\n        change(e){\r\n            let me = this;\r\n            me.nuevo = e\r\n            me.filterCodes()\r\n        },\r\n        changeCode(e){\r\n            let me = this;\r\n            me.razonBusqueda = e\r\n        },\r\n        changeHandle(e){\r\n            let me = this;\r\n            if(e.eliminar == 1){\r\n                me.openConfirm(e.id)\r\n            }else{\r\n                me.codigosEdit  = e.codigosEdit\r\n                me.editar       = e.editar\r\n                me.nuevo        = e.nuevo\r\n            }\r\n        },\r\n        filterCodes(){\r\n            let me = this;\r\n            me.arregloCodigos = [];\r\n            if(me.razonBusqueda.length < 4){\r\n                me.$vs.notify({\r\n                text:'Minimo 4 caracteres de busqueda',\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return false;\r\n            }\r\n\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'gestionCodigos?codigo='+me.razonBusqueda)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                me.arregloCodigos =res.data\r\n                if(res.data.status == '0'){\r\n                    me.$vs.notify({\r\n                    text:'No se encontro codigos',\r\n                    color:'warning',\r\n                    iconPack: 'feather',\r\n                    icon:'icon-check'})\r\n                    return false;\r\n                }\r\n\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n                me.$vs.loading.close()\r\n            })\r\n        },\r\n        openConfirm(codigo){\r\n            let me = this;\r\n            me.id = codigo\r\n            this.$vs.dialog({\r\n                type:'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                text: 'Esta seguro de eliminar este codigo de la base de datos?.',\r\n                accept:this.eliminarCodigo\r\n            })\r\n        },\r\n        eliminarCodigo(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('codigo',           me.id)\r\n            formData.append('idusuario',        me.usuario.idusuario)\r\n            formData.append('institucion_id',   me.usuario.institucion_idInstitucion)\r\n            formData.append('periodo_id',       localStorage.periodo_id)\r\n            this.$http.post(this.$server_url+'eliminarCode?codigo=',formData)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                me.$vs.notify({\r\n                text:res.data.message,\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check',\r\n                time:4000,\r\n            })\r\n                if(res.data.status == '1'){\r\n                    me.filterCodes()\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n                me.$vs.loading.close()\r\n            })\r\n        },\r\n\r\n    }\r\n}\r\n</script>\r\n"]}]}