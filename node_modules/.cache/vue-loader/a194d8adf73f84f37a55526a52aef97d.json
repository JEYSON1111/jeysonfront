{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\admin\\webinar\\components\\GestionWebinar.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\admin\\webinar\\components\\GestionWebinar.vue","mtime":1712682815496},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport {FormWizard, TabContent} from 'vue-form-wizard'\r\nimport 'vue-form-wizard/dist/vue-form-wizard.min.css'\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport \"vue-select/dist/vue-select.css\";\r\nimport vSelect from \"vue-select\";\r\nVue.use(axios)\r\nVue.component(\"v-select\", vSelect);\r\nexport default {\r\n  data() {\r\n    return {\r\n        estadoWebinar:'registro',\r\n        user:[],\r\n        cedulaExiste:1,\r\n        estadoInstitucion:'0',\r\n        documento:\"\",\r\n        cedulaVerificar:\"\",\r\n      firstName: \"\",\r\n        email: \"\",\r\n        // password: \"\",\r\n        checkbox_remember_me: false,\r\n        errors: {\r\n            cedula: '',\r\n            nombres: '',\r\n            apellidos: '',\r\n            email: '',\r\n            // password: '',\r\n            paralelo: '',\r\n            grado: '',\r\n        },\r\n        ciudad: [],\r\n        institucion: [],\r\n        instituciones: [],\r\n        idregion: '',\r\n        idciudad: '',\r\n        estudiante: {\r\n            cedula: '',\r\n            nombres: '',\r\n            apellidos: '',\r\n            email: '',\r\n            idinstitucion: '',\r\n            // password: '',\r\n            paralelo: '',\r\n            grado: '',\r\n        },\r\n        linkEvaluacion: '',\r\n        vectorLink: '',\r\n        registroEvaluacion: false,\r\n        numero:'',\r\n        validacionCedula:false,\r\n        seminarios:[],\r\n        //VARIABLES PARA MIS WEBINAR\r\n        mis_seminarios: [],\r\n        id_seminario: '',\r\n        seminario_has_usuario_id:0,\r\n        //VARIABLES PARA CAPACITACION\r\n        tipoWebinar:'1',\r\n        tituloTipo:'',\r\n        estado_institucion_temporal:0,\r\n    }\r\n  },\r\n  created(){\r\n      let me = this;\r\n       me.user = JSON.parse(localStorage.getItem(\"userWebinar\"))\r\n       me.estado_institucion_temporal = me.user[0].estado_institucion_temporal\r\n       me.estudiante.cedula = me.user[0].cedula\r\n       if(localStorage.getItem(\"estadoWebinar\") == \"mantenimiento\"){\r\n           me.estadoWebinar = \"mantenimiento\"\r\n       }\r\n       if(localStorage.getItem(\"tipoWebinar\") == \"2\"){\r\n           me.tipoWebinar = \"2\"\r\n       }\r\n        if(localStorage.getItem(\"tipoWebinar\") == \"1\"){\r\n           me.tipoWebinar = \"1\"\r\n       }\r\n  },\r\n  mounted() {\r\n        let me = this;\r\n        me.getSeminarios();\r\n        this.linkEvaluacion = localStorage.getItem('evaluacionxLink')\r\n        if (this.linkEvaluacion != '' && this.linkEvaluacion != null) {\r\n            this.registroEvaluacion = true\r\n            this.vectorLink = (this.linkEvaluacion).split('-')\r\n        }\r\n        this.getCiudadSelect();\r\n        this.getInstitucion();\r\n        this.getMisSeminarios()\r\n        if (localStorage.tk != null) {\r\n            this.$router.push('/home');\r\n        } else {}\r\n    },\r\n    methods: {\r\n        menu(){\r\n            let me = this;\r\n            if(me.estadoWebinar = \"mantenimiento\"){\r\n                localStorage.setItem('estadoWebinar',me.estadoWebinar)\r\n            }else{\r\n                localStorage.setItem('estadoWebinar',me.estadoWebinar)\r\n            }\r\n        },\r\n        formSubmitted() {\r\n            alert(\"Form submitted!\");\r\n        },\r\n        guardar(item) { \r\n            let me = this\r\n            me.cedulaVerificar = \"\";\r\n            let formData = new FormData();\r\n            me.errors = {\r\n                cedula: '',\r\n                nombres: '',\r\n                apellidos: '',\r\n                email: '',\r\n                idinstitucion: '',\r\n                // password: '',\r\n                paralelo: '',\r\n                grado: '',\r\n            }\r\n            let institucionID = item.idinstitucion;\r\n            let paraveloEval = item.paralelo;\r\n            let gradoEval = item.grado;\r\n            if (me.registroEvaluacion === true) {\r\n                institucionID = me.vectorLink[2]\r\n                paraveloEval = '-'\r\n                gradoEval = '-'\r\n            }\r\n            formData.append('cedula', item.cedula)\r\n            formData.append('nombres', item.nombres)\r\n            formData.append('apellidos', item.apellidos)\r\n            formData.append('email', item.email)\r\n            formData.append('name_usuario', item.email)\r\n            formData.append('cedulaExiste', me.cedulaExiste)\r\n            if(me.estadoInstitucion == '0'){\r\n                formData.append('institucion', institucionID)\r\n            }else{\r\n                formData.append('institucion_nombre', item.institucion_nombre)\r\n            }\r\n            formData.append('seminario', item.seminario.id_seminario)\r\n            this.$http.post(this.$server_url+\"register\", formData)\r\n                .then(function (response) {\r\n                    if(response.data.message){\r\n                        me.$vs.notify({\r\n                        text: response.data.message,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-user'\r\n                        })\r\n                        return false;\r\n                    }\r\n                    else{\r\n                        me.$vs.notify({\r\n                        text: 'Webinar  asignado',\r\n                        color: 'success',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-user'\r\n                        })\r\n                        me.estadoWebinar = \"mantenimiento\"\r\n                        me.getMisSeminarios();         \r\n                    } \r\n                })\r\n                .catch(function (error) {\r\n                    if (error.response.status == 422) {\r\n                        try {\r\n                                me.$vs.notify({\r\n                                    text: error.response.data.errors.cedula[0] ,\r\n                                    color: 'warning',\r\n                                    iconPack: 'feather',\r\n                                    icon: 'icon-check',\r\n                                    time:8000\r\n                            })     \r\n                            // me.errors.cedula = error.response.data.errors.cedula[0]\r\n                        } catch (error) {\r\n\r\n                        }\r\n                        try {\r\n                            me.$vs.notify({\r\n                                text: error.response.data.errors.seminario[0] ,\r\n                                color: 'warning',\r\n                                iconPack: 'feather',\r\n                                icon: 'icon-check',\r\n                                time:8000\r\n                            })  \r\n                            // me.errors.institucion = error.response.data.errors.institucion[0]\r\n                        } catch (error) {\r\n\r\n                        }\r\n                    }\r\n                })\r\n        },\r\n        getInstitucion() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'selectInstitucion?idregion=' + me.idregion + '&idciudad=' + me.idciudad)\r\n                .then(function (response) {\r\n                    me.instituciones = response.data;\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        async getCiudadSelect() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"ciudad\").then(function (response) {\r\n                me.ciudad = response.data\r\n            });\r\n        },\r\n\r\n        getSeminarios() {\r\n            let me = this;\r\n            me.seminarios = []\r\n            //para traer los webinars\r\n            if(me.tipoWebinar == 1){\r\n                me.$vs.loading()\r\n                this.$http.get(this.$server_url+'obtenerWebinars')\r\n                .then(function (res) {\r\n                    me.$vs.loading.close()\r\n                    me.seminarios = res.data\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n            //para traer las capacitaciones\r\n            }else{\r\n                 if(me.estado_institucion_temporal == 1){\r\n                    me.$vs.loading()\r\n                    this.$http.get(this.$server_url+'obtenerWebinars?capacitaciones=yes')\r\n                    .then(function (res) {\r\n                        me.$vs.loading.close()\r\n                        me.seminarios = res.data\r\n                    })\r\n                    .catch(function (error) {\r\n                        me.$vs.loading.close()\r\n                    })\r\n                }else{     \r\n                    me.$vs.loading()\r\n                    this.$http.get(this.$server_url+'obtenerWebinars?capacitacionInstitucion=yes'+'&institucion_id='+me.user[0].institucion_idInstitucion)\r\n                    .then(function (res) {\r\n                        me.$vs.loading.close()\r\n                        me.seminarios = res.data\r\n                    })\r\n                    .catch(function (error) {\r\n                        me.$vs.loading.close()\r\n                    })\r\n                }\r\n             \r\n            } \r\n\r\n            \r\n        },\r\n        //VALIDACION CEDULA\r\n        validarDocumento () {          \r\n            let me = this;\r\n            me.numero = me.estudiante.cedula;\r\n            var suma = 0;      \r\n            var residuo = 0;      \r\n            var pri = false;      \r\n            var pub = false;            \r\n            var nat = false;      \r\n            var numeroProvincias = 22;                  \r\n            var modulo = 11;\r\n            var d1 = null;\r\n            var d2 = null;\r\n            var d3 = null;\r\n            var d4 = null;\r\n            var d5 = null;\r\n            var d6 = null;\r\n            var d7 = null;\r\n            var d8 = null;\r\n            var d9 = null;\r\n            var d10 = null;  \r\n            \r\n            var    p1 = null;\r\n            var    p2 = null;\r\n            var    p3 = null;\r\n            var    p4 = null;\r\n            var    p5 = null;\r\n            var    p6 = null;\r\n            var    p7 = null;\r\n            var    p8 = null;\r\n            var    p9 = null;   \r\n            var digitoVerificador  = null;\r\n            var suma    = null;\r\n            var residuo = null;\r\n            var modulo  = null;\r\n            var pub     = null;\r\n            var pri     = null;\r\n            var nat     = null;\r\n                        \r\n            /* Verifico que el campo no contenga letras */                  \r\n            var ok=1;\r\n            let i =0;\r\n            for (i=0; i<me.numero.length && ok==1 ; i++){\r\n                var n = parseInt(this.numero.charAt(i));\r\n                if (isNaN(n)) ok=0;\r\n            }\r\n            if (ok==0){\r\n               \r\n                 me.$vs.notify({\r\n                        text: 'No puede ingresar caracteres a la cedula',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                 })     \r\n                me.validacionCedula = false; \r\n                return false;\r\n            }\r\n                        \r\n            if (me.numero.length < 10 ){         \r\n                  me.$vs.notify({\r\n                        text: 'La cedula ingresada no es válida',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                 })       \r\n                me.validacionCedula = false;             \r\n                return false;\r\n            }\r\n\r\n            me.cedulaVerificar = \"\";\r\n            \r\n            let provincia = null;\r\n            /* Los primeros dos digitos corresponden al codigo de la provincia */\r\n            provincia = me.numero.substr(0,2);      \r\n            if (provincia < 1 || provincia > me.numeroProvincias){   \r\n                  me.$vs.notify({\r\n                        text: 'El código de la provincia (dos primeros dígitos) es inválido',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                 })         \r\n                me.validacionCedula = false; \r\n                return false;       \r\n            }\r\n\r\n            /* Aqui almacenamos los digitos de la cedula en variables. */\r\n            d1  = me.numero.substr(0,1);         \r\n            d2  = me.numero.substr(1,1);         \r\n            d3  = me.numero.substr(2,1);         \r\n            d4  = me.numero.substr(3,1);         \r\n            d5  = me.numero.substr(4,1);         \r\n            d6  = me.numero.substr(5,1);         \r\n            d7  = me.numero.substr(6,1);         \r\n            d8  = me.numero.substr(7,1);         \r\n            d9  = me.numero.substr(8,1);         \r\n            d10 = me.numero.substr(9,1);                \r\n                \r\n            /* El tercer digito es: */                           \r\n            /* 9 para sociedades privadas y extranjeros   */         \r\n            /* 6 para sociedades publicas */         \r\n            /* menor que 6 (0,1,2,3,4,5) para personas naturales */ \r\n\r\n            if (d3==7 || d3==8){   \r\n                 me.$vs.notify({\r\n                        text: 'El tercer dígito ingresado es inválido',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                 })         \r\n                me.validacionCedula = false;                  \r\n                return false;\r\n            }         \r\n                \r\n            /* Solo para personas naturales (modulo 10) */         \r\n            if (d3 < 6){           \r\n                nat = true;            \r\n                p1 = d1 * 2;  if (p1 >= 10) p1 -= 9;\r\n                p2 = d2 * 1;  if (p2 >= 10) p2 -= 9;\r\n                p3 = d3 * 2;  if (p3 >= 10) p3 -= 9;\r\n                p4 = d4 * 1;  if (p4 >= 10) p4 -= 9;\r\n                p5 = d5 * 2;  if (p5 >= 10) p5 -= 9;\r\n                p6 = d6 * 1;  if (p6 >= 10) p6 -= 9; \r\n                p7 = d7 * 2;  if (p7 >= 10) p7 -= 9;\r\n                p8 = d8 * 1;  if (p8 >= 10) p8 -= 9;\r\n                p9 = d9 * 2;  if (p9 >= 10) p9 -= 9;             \r\n                modulo = 10;\r\n            }         \r\n\r\n            /* Solo para sociedades publicas (modulo 11) */                  \r\n            /* Aqui el digito verficador esta en la posicion 9, en las otras 2 en la pos. 10 */\r\n            else if(d3 == 6){           \r\n                pub = true;             \r\n                p1 = d1 * 3;\r\n                p2 = d2 * 2;\r\n                p3 = d3 * 7;\r\n                p4 = d4 * 6;\r\n                p5 = d5 * 5;\r\n                p6 = d6 * 4;\r\n                p7 = d7 * 3;\r\n                p8 = d8 * 2;            \r\n                p9 = 0;            \r\n            }            \r\n            /* Solo para entidades privadas (modulo 11) */         \r\n            else if(d3 == 9) {           \r\n                pri = true;                                   \r\n                p1 = d1 * 4;\r\n                p2 = d2 * 3;\r\n                p3 = d3 * 2;\r\n                p4 = d4 * 7;\r\n                p5 = d5 * 6;\r\n                p6 = d6 * 5;\r\n                p7 = d7 * 4;\r\n                p8 = d8 * 3;\r\n                p9 = d9 * 2;            \r\n            }\r\n                        \r\n            suma = p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8 + p9;                \r\n            residuo = suma % modulo;                                         \r\n\r\n            /* Si residuo=0, dig.ver.=0, caso contrario 10 - residuo*/\r\n            digitoVerificador = residuo==0 ? 0: modulo - residuo;                \r\n\r\n            /* ahora comparamos el elemento de la posicion 10 con el dig. ver.*/                         \r\n            if (pub==true){           \r\n                if (digitoVerificador != d9){                   \r\n                    me.$vs.notify({\r\n                        text: 'El ruc de la empresa del sector público es incorrecto.',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })         \r\n                    \r\n                    me.validacionCedula = false; \r\n                    return false;\r\n                }                  \r\n                /* El ruc de las empresas del sector publico terminan con 0001*/         \r\n                if ( me.numero.substr(9,4) != '0001' ){      \r\n                      me.$vs.notify({\r\n                        text: 'El ruc de la empresa del sector público debe terminar con 0001.',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })                \r\n                    me.validacionCedula = false; \r\n                    return false;\r\n                }\r\n            }         \r\n            else if(pri == true){         \r\n                if (digitoVerificador != d10){    \r\n                      me.$vs.notify({\r\n                        text: 'El ruc de la empresa del sector privado es incorrecto.',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })                         \r\n                    me.validacionCedula = false;  \r\n                    return false;\r\n                }         \r\n                if ( me.numero.substr(10,3) != '001' ){ \r\n                    me.$vs.notify({\r\n                        text: 'El ruc de la empresa del sector privado debe terminar con 001',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })                       \r\n                    \r\n                    me.validacionCedula = false; \r\n                    return false;\r\n                }\r\n            }      \r\n            else if(nat == true){         \r\n                if (digitoVerificador != d10){  \r\n                     me.$vs.notify({\r\n                        text: 'El número de cédula de la persona natural es incorrecto.',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })                           \r\n                    \r\n                    me.validacionCedula = false; \r\n                    return false;\r\n                }         \r\n                if (me.numero.length >10 && me.numero.substr(10,3) != '001' ){  \r\n                     me.$vs.notify({\r\n                        text: 'El ruc de la persona natural debe terminar con 001',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })                     \r\n                    \r\n                    me.validacionCedula = false; \r\n                    return false;\r\n                 }\r\n      }   \r\n      me.validacionCedula = true;    \r\n      return true;   \r\n   } ,\r\n   \r\n//metodos para MIS WEBINAR\r\n    getMisSeminarios() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url+'get_webinars?idusuario='+me.user[0].idusuario)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                let datos = res.data\r\n                if(me.tipoWebinar == 1){\r\n                    localStorage.setItem('tipoWebinar','1')\r\n                    me.tituloTipo = \"Webinar\"\r\n                    me.mis_seminarios = datos.filter(p => p.tipo_webinar == \"1\")\r\n                }else{\r\n                    localStorage.setItem('tipoWebinar','2')\r\n                    me.tituloTipo = \"Capacitación\"\r\n                    me.mis_seminarios = datos.filter(p => p.tipo_webinar == \"2\")\r\n                } \r\n            })\r\n            .catch(function (error) {\r\n                me.$vs.loading.close()\r\n            })\r\n        },\r\n         openConfirm(tr){\r\n              let me = this;\r\n                me.seminario_has_usuario_id = tr.seminario_has_usuario_id\r\n                this.$vs.dialog({\r\n                    acceptText:'Si, asistí a'+me.tituloTipo,\r\n                    cancelText:'Cancelar',\r\n                    type:'confirm',\r\n                    color: 'warning',\r\n                    title: `Tomar Asistencia`,\r\n                    text: 'Estas seguro de registrar la asistencia?',\r\n                    accept:this.RegistrarAsistencia\r\n                })\r\n            },\r\n\r\n        RegistrarAsistencia(){\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'webinarAsistencia?seminario_has_usuario_id='+me.seminario_has_usuario_id)\r\n                .then(function (res) {\r\n                    me.estudiante = res.data[0]\r\n\r\n                    me.$vs.loading.close()\r\n                     if(res.data.message){\r\n                            me.$vs.notify({\r\n                            text: res.data.message,\r\n                            color: 'primary',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                    }\r\n                    me.getMisSeminarios();\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        irEncuesta(item){\r\n            let me = this\r\n            localStorage.data_seminario = JSON.stringify(item);\r\n            localStorage.setItem('estadoWebinar','mantenimiento')\r\n            me.$router.push('/webinar/encuesta')\r\n        },\r\n        irSeminario(item){\r\n            let me = this\r\n            // validar horario permitido con js, href _blank\r\n            window.open(item.link_reunion, '_blank');\r\n        },\r\n        descargarCertificado(item){\r\n            let me = this\r\n            me.ContarCertificados(item.id_seminario,item.usuario_id)\r\n            localStorage.data_seminario = JSON.stringify(item);\r\n            window.open('/webinar/certificado', '_blank');\r\n            // validar respuestas en respuestas_seminairos y permitir descarga con datos del docente y seminario seleccionado\r\n        },\r\n\r\n        ContarCertificados(webinar,usuario) {\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'sumarEncuestasDescargadas?seminario_id='+webinar+'&usuario_id='+usuario)\r\n                .then(function (res) {\r\n                    me.$vs.loading.close()\r\n\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n    },\r\n    components: {\r\n        FormWizard,\r\n        TabContent\r\n    }\r\n}\r\n",{"version":3,"sources":["GestionWebinar.vue"],"names":[],"mappings":";AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GestionWebinar.vue","sourceRoot":"src/views/admin/webinar/components","sourcesContent":["<template>\r\n    <div>\r\n   \r\n        <div style=\"display:flex;justify-content: center;padding: 10px 10px 20px 10px;\">\r\n            <div>\r\n                <vs-button type=\"relief\" icon=\"settings\" @click=\"estadoWebinar = 'registro';tipoWebinar = '1';getSeminarios();\">Registro eventos </vs-button>\r\n            </div>\r\n            <div style=\"margin-left:20px;\">\r\n                 <vs-button color=\"success\" type=\"relief\" icon=\"calendar_today\"  @click=\"estadoWebinar = 'mantenimiento';menu()\">Mis eventos</vs-button>\r\n            </div>    \r\n        </div>\r\n    \r\n        <!--VISTA DE REGISTRO DE WEBINAR-->\r\n        <div  v-if=\"estadoWebinar == 'registro'\" style=\"display: flex;width: 100%;justify-content: center;\">               \r\n            <vx-card title=\"Registro del evento\" style=\"margin-top: 20px;width: 80%;\">\r\n                <div slot=\"no-body\" class=\"full-page-bg-color-black\">\r\n                    <div class=\"vx-col sm:w-full md:w-full\">\r\n                        <div class=\"p-8 login-tabs-container\">\r\n                            <vs-alert active=\"true\" >\r\n                                Desea  participar en otro evento, por favor seleccione de la lista inferior\r\n                            </vs-alert>\r\n                                <br/>                                         \r\n                            <div class=\"vx-row mb-6\"  v-if=\"registroEvaluacion==false\">\r\n                                <div style=\"width: 97%;margin-left:15px;margin-top:10px;\">\r\n                                    <p style=\"color:red;font-size:10px;\">{{cedulaVerificar}}</p>\r\n                                    <vs-input class=\"w-full\" style=\"padding-bottom: 10px;\" label=\"Cédula\" disabled icon-pack=\"feather\" icon=\"icon-code\" icon-no-border v-model=\"estudiante.cedula\" />  \r\n                                    <span class=\"text-success text-sm\" style=\"margin-top:20px;font-weight: 600;\">Usuario : {{ user[0].nombres }} {{ user[0].apellidos }}</span>\r\n                                </div>\r\n                            </div> \r\n                            <div v-if=\"registroEvaluacion==false\">\r\n                                <vs-row>\r\n                                    <vs-col  vs-type=\"flex\" vs-justify=\"left\" vs-align=\"center\" vs-w=\"12\">\r\n                                        <span>Seleccione el webinar</span>\r\n                                        <ul class=\"flex\">\r\n                                            <li>\r\n                                            <vs-radio v-model=\"tipoWebinar\" class=\"ml-2\" @input=\"getSeminarios();\" vs-name=\"radiosTipo\" vs-value=\"1\">Webinar</vs-radio>\r\n                                            </li>\r\n                                            <li>\r\n                                            <vs-radio v-model=\"tipoWebinar\" class=\"ml-2\" @input=\"getSeminarios();\" vs-name=\"radiosTipo\" vs-value=\"2\">Capacitación</vs-radio>\r\n                                            </li>\r\n                                        </ul>\r\n                                    </vs-col>\r\n                                </vs-row>\r\n                                <br/>\r\n                                <vs-row>\r\n                                    <vs-col  vs-type=\"flex\" vs-justify=\"left\" vs-align=\"center\" vs-w=\"12\">\r\n                                            <v-select :options=\"seminarios\" :reduce=\"seminarios => seminarios\" label=\"webinar\" class=\"w-full\" v-model=\"estudiante.seminario\" />\r\n                                        <span class=\"text-danger text-sm\">{{ errors.seminario }}</span>\r\n                                    </vs-col>\r\n                                </vs-row>\r\n                            </div>\r\n                                <br/><br/><br/><br/>\r\n                                <br/><br/><br/><br/> \r\n                            <vs-button type=\"relief\" @click=\"guardar(estudiante)\">Enviar</vs-button> \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </vx-card>     \r\n        </div>\r\n        <!--VISTA DE REGISTRO DE MIS WEBINARS -->\r\n        <div v-if=\"estadoWebinar == 'mantenimiento'\">  \r\n            <vx-card class=\"w-full\">\r\n                <vs-table stripe pagination max-items=\"5\" search :data=\"mis_seminarios\">\r\n                    <template slot=\"header\">\r\n                        <vs-chip color=\"primary\">Cantidad: {{mis_seminarios.length}}</vs-chip>\r\n                        <ul class=\"flex ml-3\">\r\n                            <li>\r\n                            <vs-radio v-model=\"tipoWebinar\"  @input=\"getMisSeminarios()\" vs-name=\"radioMisEventos\" vs-value=\"1\">Mis webinars</vs-radio>\r\n                            </li>\r\n                            <li>\r\n                            <vs-radio v-model=\"tipoWebinar\" @input=\"getMisSeminarios()\" class=\"ml-2\" vs-name=\"radioMisEventos\" vs-value=\"2\">Mis capacitaciones</vs-radio>\r\n                            </li> \r\n                        </ul>\r\n                    </template>\r\n                    <template slot=\"thead\">\r\n                        <vs-th style=\"width: 60px;\">#</vs-th>\r\n                        <vs-th sort-key=\"nombre\">{{ tituloTipo }}</vs-th>               \r\n                        <vs-th>Link reunión</vs-th>\r\n                        <vs-th>Asistencia</vs-th>\r\n                        <vs-th>Acciones</vs-th>\r\n                    </template>\r\n                    <template slot-scope=\"{data}\">\r\n                    <vs-tr :data=\"tr\" :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                        <vs-td>                          \r\n                            {{indextr+1}} \r\n                            </vs-td>\r\n                        <vs-td> {{tr.nombre}} <br> {{tr.descripcion}} <br> ({{ tr.institucionFinal }}) </vs-td>               \r\n                        <vs-td>\r\n                            <a :href=\"tr.link_reunion\" target=\"_blank\"> {{tr.link_reunion}}\r\n                            </a>\r\n                        </vs-td>\r\n                        <vs-td>\r\n                            <div v-if=\"tr.asistencia == '1'\">\r\n                                <vs-chip color=\"success\">\r\n                                    asistió\r\n                                </vs-chip>                          \r\n                            </div>\r\n                            <div v-else>\r\n                                <vs-chip color=\"danger\">\r\n                                    No asistió\r\n                                </vs-chip>\r\n                            </div>\r\n                        </vs-td>\r\n                        <vs-td align=\"center\">\r\n                            <div style=\"display:flex;\">                         \r\n                                <div v-if=\"tr.asistencia == '0'\">\r\n                                    <div v-if=\"tr.asistencia_activa == '1'\">\r\n                                        <vx-tooltip v-if=\"tr.respuestas == null\" style=\"display: inline-block;\"  text=\"Registrar asistencia\" position=\"top\" color=\"primary\">\r\n                                            <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-thumbs-up\"  @click=\"openConfirm(tr)\" color=\"success\" type=\"line\"></vs-button>\r\n                                        </vx-tooltip>\r\n                                    </div>\r\n                                </div>                          \r\n                                <div v-if=\"tr.asistencia == '1'\">                                \r\n                                    <vx-tooltip v-if=\"tr.respuestas == null\" style=\"display: inline-block;\" text=\"Responder encuesta\" position=\"top\" color=\"primary\">\r\n                                        <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-file-text\" @click=\"irEncuesta(tr)\" color=\"primary\" type=\"line\"></vs-button>\r\n                                    </vx-tooltip>\r\n                                </div>\r\n                                <vx-tooltip v-if=\"tr.respuestas == null\" style=\"display: inline-block;\" text=\"Ir al seminario.\" position=\"top\" color=\"success\">\r\n                                    <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-video\" @click=\"irSeminario(tr)\" color=\"success\" type=\"line\"></vs-button>\r\n                                </vx-tooltip>\r\n                                <vx-tooltip v-if=\"tr.respuestas\" style=\"display: inline-block;\" text=\"Descargar certificado\" position=\"top\" color=\"warning\">\r\n                                    <vs-button size=\"large\" radius icon-pack=\"feather\" icon=\"icon-printer\" @click=\"descargarCertificado(tr)\" color=\"warning\" type=\"line\"></vs-button>\r\n                                </vx-tooltip>\r\n                            </div>                           \r\n                        </vs-td>\r\n                    </vs-tr>\r\n                    </template>\r\n                </vs-table>\r\n            </vx-card>\r\n        </div>\r\n    </div>   \r\n</template>\r\n<script type=\"text/javascript\">\r\n</script>\r\n<script>\r\nimport {FormWizard, TabContent} from 'vue-form-wizard'\r\nimport 'vue-form-wizard/dist/vue-form-wizard.min.css'\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport \"vue-select/dist/vue-select.css\";\r\nimport vSelect from \"vue-select\";\r\nVue.use(axios)\r\nVue.component(\"v-select\", vSelect);\r\nexport default {\r\n  data() {\r\n    return {\r\n        estadoWebinar:'registro',\r\n        user:[],\r\n        cedulaExiste:1,\r\n        estadoInstitucion:'0',\r\n        documento:\"\",\r\n        cedulaVerificar:\"\",\r\n      firstName: \"\",\r\n        email: \"\",\r\n        // password: \"\",\r\n        checkbox_remember_me: false,\r\n        errors: {\r\n            cedula: '',\r\n            nombres: '',\r\n            apellidos: '',\r\n            email: '',\r\n            // password: '',\r\n            paralelo: '',\r\n            grado: '',\r\n        },\r\n        ciudad: [],\r\n        institucion: [],\r\n        instituciones: [],\r\n        idregion: '',\r\n        idciudad: '',\r\n        estudiante: {\r\n            cedula: '',\r\n            nombres: '',\r\n            apellidos: '',\r\n            email: '',\r\n            idinstitucion: '',\r\n            // password: '',\r\n            paralelo: '',\r\n            grado: '',\r\n        },\r\n        linkEvaluacion: '',\r\n        vectorLink: '',\r\n        registroEvaluacion: false,\r\n        numero:'',\r\n        validacionCedula:false,\r\n        seminarios:[],\r\n        //VARIABLES PARA MIS WEBINAR\r\n        mis_seminarios: [],\r\n        id_seminario: '',\r\n        seminario_has_usuario_id:0,\r\n        //VARIABLES PARA CAPACITACION\r\n        tipoWebinar:'1',\r\n        tituloTipo:'',\r\n        estado_institucion_temporal:0,\r\n    }\r\n  },\r\n  created(){\r\n      let me = this;\r\n       me.user = JSON.parse(localStorage.getItem(\"userWebinar\"))\r\n       me.estado_institucion_temporal = me.user[0].estado_institucion_temporal\r\n       me.estudiante.cedula = me.user[0].cedula\r\n       if(localStorage.getItem(\"estadoWebinar\") == \"mantenimiento\"){\r\n           me.estadoWebinar = \"mantenimiento\"\r\n       }\r\n       if(localStorage.getItem(\"tipoWebinar\") == \"2\"){\r\n           me.tipoWebinar = \"2\"\r\n       }\r\n        if(localStorage.getItem(\"tipoWebinar\") == \"1\"){\r\n           me.tipoWebinar = \"1\"\r\n       }\r\n  },\r\n  mounted() {\r\n        let me = this;\r\n        me.getSeminarios();\r\n        this.linkEvaluacion = localStorage.getItem('evaluacionxLink')\r\n        if (this.linkEvaluacion != '' && this.linkEvaluacion != null) {\r\n            this.registroEvaluacion = true\r\n            this.vectorLink = (this.linkEvaluacion).split('-')\r\n        }\r\n        this.getCiudadSelect();\r\n        this.getInstitucion();\r\n        this.getMisSeminarios()\r\n        if (localStorage.tk != null) {\r\n            this.$router.push('/home');\r\n        } else {}\r\n    },\r\n    methods: {\r\n        menu(){\r\n            let me = this;\r\n            if(me.estadoWebinar = \"mantenimiento\"){\r\n                localStorage.setItem('estadoWebinar',me.estadoWebinar)\r\n            }else{\r\n                localStorage.setItem('estadoWebinar',me.estadoWebinar)\r\n            }\r\n        },\r\n        formSubmitted() {\r\n            alert(\"Form submitted!\");\r\n        },\r\n        guardar(item) { \r\n            let me = this\r\n            me.cedulaVerificar = \"\";\r\n            let formData = new FormData();\r\n            me.errors = {\r\n                cedula: '',\r\n                nombres: '',\r\n                apellidos: '',\r\n                email: '',\r\n                idinstitucion: '',\r\n                // password: '',\r\n                paralelo: '',\r\n                grado: '',\r\n            }\r\n            let institucionID = item.idinstitucion;\r\n            let paraveloEval = item.paralelo;\r\n            let gradoEval = item.grado;\r\n            if (me.registroEvaluacion === true) {\r\n                institucionID = me.vectorLink[2]\r\n                paraveloEval = '-'\r\n                gradoEval = '-'\r\n            }\r\n            formData.append('cedula', item.cedula)\r\n            formData.append('nombres', item.nombres)\r\n            formData.append('apellidos', item.apellidos)\r\n            formData.append('email', item.email)\r\n            formData.append('name_usuario', item.email)\r\n            formData.append('cedulaExiste', me.cedulaExiste)\r\n            if(me.estadoInstitucion == '0'){\r\n                formData.append('institucion', institucionID)\r\n            }else{\r\n                formData.append('institucion_nombre', item.institucion_nombre)\r\n            }\r\n            formData.append('seminario', item.seminario.id_seminario)\r\n            this.$http.post(this.$server_url+\"register\", formData)\r\n                .then(function (response) {\r\n                    if(response.data.message){\r\n                        me.$vs.notify({\r\n                        text: response.data.message,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-user'\r\n                        })\r\n                        return false;\r\n                    }\r\n                    else{\r\n                        me.$vs.notify({\r\n                        text: 'Webinar  asignado',\r\n                        color: 'success',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-user'\r\n                        })\r\n                        me.estadoWebinar = \"mantenimiento\"\r\n                        me.getMisSeminarios();         \r\n                    } \r\n                })\r\n                .catch(function (error) {\r\n                    if (error.response.status == 422) {\r\n                        try {\r\n                                me.$vs.notify({\r\n                                    text: error.response.data.errors.cedula[0] ,\r\n                                    color: 'warning',\r\n                                    iconPack: 'feather',\r\n                                    icon: 'icon-check',\r\n                                    time:8000\r\n                            })     \r\n                            // me.errors.cedula = error.response.data.errors.cedula[0]\r\n                        } catch (error) {\r\n\r\n                        }\r\n                        try {\r\n                            me.$vs.notify({\r\n                                text: error.response.data.errors.seminario[0] ,\r\n                                color: 'warning',\r\n                                iconPack: 'feather',\r\n                                icon: 'icon-check',\r\n                                time:8000\r\n                            })  \r\n                            // me.errors.institucion = error.response.data.errors.institucion[0]\r\n                        } catch (error) {\r\n\r\n                        }\r\n                    }\r\n                })\r\n        },\r\n        getInstitucion() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'selectInstitucion?idregion=' + me.idregion + '&idciudad=' + me.idciudad)\r\n                .then(function (response) {\r\n                    me.instituciones = response.data;\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        async getCiudadSelect() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"ciudad\").then(function (response) {\r\n                me.ciudad = response.data\r\n            });\r\n        },\r\n\r\n        getSeminarios() {\r\n            let me = this;\r\n            me.seminarios = []\r\n            //para traer los webinars\r\n            if(me.tipoWebinar == 1){\r\n                me.$vs.loading()\r\n                this.$http.get(this.$server_url+'obtenerWebinars')\r\n                .then(function (res) {\r\n                    me.$vs.loading.close()\r\n                    me.seminarios = res.data\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n            //para traer las capacitaciones\r\n            }else{\r\n                 if(me.estado_institucion_temporal == 1){\r\n                    me.$vs.loading()\r\n                    this.$http.get(this.$server_url+'obtenerWebinars?capacitaciones=yes')\r\n                    .then(function (res) {\r\n                        me.$vs.loading.close()\r\n                        me.seminarios = res.data\r\n                    })\r\n                    .catch(function (error) {\r\n                        me.$vs.loading.close()\r\n                    })\r\n                }else{     \r\n                    me.$vs.loading()\r\n                    this.$http.get(this.$server_url+'obtenerWebinars?capacitacionInstitucion=yes'+'&institucion_id='+me.user[0].institucion_idInstitucion)\r\n                    .then(function (res) {\r\n                        me.$vs.loading.close()\r\n                        me.seminarios = res.data\r\n                    })\r\n                    .catch(function (error) {\r\n                        me.$vs.loading.close()\r\n                    })\r\n                }\r\n             \r\n            } \r\n\r\n            \r\n        },\r\n        //VALIDACION CEDULA\r\n        validarDocumento () {          \r\n            let me = this;\r\n            me.numero = me.estudiante.cedula;\r\n            var suma = 0;      \r\n            var residuo = 0;      \r\n            var pri = false;      \r\n            var pub = false;            \r\n            var nat = false;      \r\n            var numeroProvincias = 22;                  \r\n            var modulo = 11;\r\n            var d1 = null;\r\n            var d2 = null;\r\n            var d3 = null;\r\n            var d4 = null;\r\n            var d5 = null;\r\n            var d6 = null;\r\n            var d7 = null;\r\n            var d8 = null;\r\n            var d9 = null;\r\n            var d10 = null;  \r\n            \r\n            var    p1 = null;\r\n            var    p2 = null;\r\n            var    p3 = null;\r\n            var    p4 = null;\r\n            var    p5 = null;\r\n            var    p6 = null;\r\n            var    p7 = null;\r\n            var    p8 = null;\r\n            var    p9 = null;   \r\n            var digitoVerificador  = null;\r\n            var suma    = null;\r\n            var residuo = null;\r\n            var modulo  = null;\r\n            var pub     = null;\r\n            var pri     = null;\r\n            var nat     = null;\r\n                        \r\n            /* Verifico que el campo no contenga letras */                  \r\n            var ok=1;\r\n            let i =0;\r\n            for (i=0; i<me.numero.length && ok==1 ; i++){\r\n                var n = parseInt(this.numero.charAt(i));\r\n                if (isNaN(n)) ok=0;\r\n            }\r\n            if (ok==0){\r\n               \r\n                 me.$vs.notify({\r\n                        text: 'No puede ingresar caracteres a la cedula',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                 })     \r\n                me.validacionCedula = false; \r\n                return false;\r\n            }\r\n                        \r\n            if (me.numero.length < 10 ){         \r\n                  me.$vs.notify({\r\n                        text: 'La cedula ingresada no es válida',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                 })       \r\n                me.validacionCedula = false;             \r\n                return false;\r\n            }\r\n\r\n            me.cedulaVerificar = \"\";\r\n            \r\n            let provincia = null;\r\n            /* Los primeros dos digitos corresponden al codigo de la provincia */\r\n            provincia = me.numero.substr(0,2);      \r\n            if (provincia < 1 || provincia > me.numeroProvincias){   \r\n                  me.$vs.notify({\r\n                        text: 'El código de la provincia (dos primeros dígitos) es inválido',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                 })         \r\n                me.validacionCedula = false; \r\n                return false;       \r\n            }\r\n\r\n            /* Aqui almacenamos los digitos de la cedula en variables. */\r\n            d1  = me.numero.substr(0,1);         \r\n            d2  = me.numero.substr(1,1);         \r\n            d3  = me.numero.substr(2,1);         \r\n            d4  = me.numero.substr(3,1);         \r\n            d5  = me.numero.substr(4,1);         \r\n            d6  = me.numero.substr(5,1);         \r\n            d7  = me.numero.substr(6,1);         \r\n            d8  = me.numero.substr(7,1);         \r\n            d9  = me.numero.substr(8,1);         \r\n            d10 = me.numero.substr(9,1);                \r\n                \r\n            /* El tercer digito es: */                           \r\n            /* 9 para sociedades privadas y extranjeros   */         \r\n            /* 6 para sociedades publicas */         \r\n            /* menor que 6 (0,1,2,3,4,5) para personas naturales */ \r\n\r\n            if (d3==7 || d3==8){   \r\n                 me.$vs.notify({\r\n                        text: 'El tercer dígito ingresado es inválido',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                 })         \r\n                me.validacionCedula = false;                  \r\n                return false;\r\n            }         \r\n                \r\n            /* Solo para personas naturales (modulo 10) */         \r\n            if (d3 < 6){           \r\n                nat = true;            \r\n                p1 = d1 * 2;  if (p1 >= 10) p1 -= 9;\r\n                p2 = d2 * 1;  if (p2 >= 10) p2 -= 9;\r\n                p3 = d3 * 2;  if (p3 >= 10) p3 -= 9;\r\n                p4 = d4 * 1;  if (p4 >= 10) p4 -= 9;\r\n                p5 = d5 * 2;  if (p5 >= 10) p5 -= 9;\r\n                p6 = d6 * 1;  if (p6 >= 10) p6 -= 9; \r\n                p7 = d7 * 2;  if (p7 >= 10) p7 -= 9;\r\n                p8 = d8 * 1;  if (p8 >= 10) p8 -= 9;\r\n                p9 = d9 * 2;  if (p9 >= 10) p9 -= 9;             \r\n                modulo = 10;\r\n            }         \r\n\r\n            /* Solo para sociedades publicas (modulo 11) */                  \r\n            /* Aqui el digito verficador esta en la posicion 9, en las otras 2 en la pos. 10 */\r\n            else if(d3 == 6){           \r\n                pub = true;             \r\n                p1 = d1 * 3;\r\n                p2 = d2 * 2;\r\n                p3 = d3 * 7;\r\n                p4 = d4 * 6;\r\n                p5 = d5 * 5;\r\n                p6 = d6 * 4;\r\n                p7 = d7 * 3;\r\n                p8 = d8 * 2;            \r\n                p9 = 0;            \r\n            }            \r\n            /* Solo para entidades privadas (modulo 11) */         \r\n            else if(d3 == 9) {           \r\n                pri = true;                                   \r\n                p1 = d1 * 4;\r\n                p2 = d2 * 3;\r\n                p3 = d3 * 2;\r\n                p4 = d4 * 7;\r\n                p5 = d5 * 6;\r\n                p6 = d6 * 5;\r\n                p7 = d7 * 4;\r\n                p8 = d8 * 3;\r\n                p9 = d9 * 2;            \r\n            }\r\n                        \r\n            suma = p1 + p2 + p3 + p4 + p5 + p6 + p7 + p8 + p9;                \r\n            residuo = suma % modulo;                                         \r\n\r\n            /* Si residuo=0, dig.ver.=0, caso contrario 10 - residuo*/\r\n            digitoVerificador = residuo==0 ? 0: modulo - residuo;                \r\n\r\n            /* ahora comparamos el elemento de la posicion 10 con el dig. ver.*/                         \r\n            if (pub==true){           \r\n                if (digitoVerificador != d9){                   \r\n                    me.$vs.notify({\r\n                        text: 'El ruc de la empresa del sector público es incorrecto.',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })         \r\n                    \r\n                    me.validacionCedula = false; \r\n                    return false;\r\n                }                  \r\n                /* El ruc de las empresas del sector publico terminan con 0001*/         \r\n                if ( me.numero.substr(9,4) != '0001' ){      \r\n                      me.$vs.notify({\r\n                        text: 'El ruc de la empresa del sector público debe terminar con 0001.',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })                \r\n                    me.validacionCedula = false; \r\n                    return false;\r\n                }\r\n            }         \r\n            else if(pri == true){         \r\n                if (digitoVerificador != d10){    \r\n                      me.$vs.notify({\r\n                        text: 'El ruc de la empresa del sector privado es incorrecto.',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })                         \r\n                    me.validacionCedula = false;  \r\n                    return false;\r\n                }         \r\n                if ( me.numero.substr(10,3) != '001' ){ \r\n                    me.$vs.notify({\r\n                        text: 'El ruc de la empresa del sector privado debe terminar con 001',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })                       \r\n                    \r\n                    me.validacionCedula = false; \r\n                    return false;\r\n                }\r\n            }      \r\n            else if(nat == true){         \r\n                if (digitoVerificador != d10){  \r\n                     me.$vs.notify({\r\n                        text: 'El número de cédula de la persona natural es incorrecto.',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })                           \r\n                    \r\n                    me.validacionCedula = false; \r\n                    return false;\r\n                }         \r\n                if (me.numero.length >10 && me.numero.substr(10,3) != '001' ){  \r\n                     me.$vs.notify({\r\n                        text: 'El ruc de la persona natural debe terminar con 001',\r\n                        color: 'warning',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check',\r\n                        time:8000\r\n                    })                     \r\n                    \r\n                    me.validacionCedula = false; \r\n                    return false;\r\n                 }\r\n      }   \r\n      me.validacionCedula = true;    \r\n      return true;   \r\n   } ,\r\n   \r\n//metodos para MIS WEBINAR\r\n    getMisSeminarios() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url+'get_webinars?idusuario='+me.user[0].idusuario)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                let datos = res.data\r\n                if(me.tipoWebinar == 1){\r\n                    localStorage.setItem('tipoWebinar','1')\r\n                    me.tituloTipo = \"Webinar\"\r\n                    me.mis_seminarios = datos.filter(p => p.tipo_webinar == \"1\")\r\n                }else{\r\n                    localStorage.setItem('tipoWebinar','2')\r\n                    me.tituloTipo = \"Capacitación\"\r\n                    me.mis_seminarios = datos.filter(p => p.tipo_webinar == \"2\")\r\n                } \r\n            })\r\n            .catch(function (error) {\r\n                me.$vs.loading.close()\r\n            })\r\n        },\r\n         openConfirm(tr){\r\n              let me = this;\r\n                me.seminario_has_usuario_id = tr.seminario_has_usuario_id\r\n                this.$vs.dialog({\r\n                    acceptText:'Si, asistí a'+me.tituloTipo,\r\n                    cancelText:'Cancelar',\r\n                    type:'confirm',\r\n                    color: 'warning',\r\n                    title: `Tomar Asistencia`,\r\n                    text: 'Estas seguro de registrar la asistencia?',\r\n                    accept:this.RegistrarAsistencia\r\n                })\r\n            },\r\n\r\n        RegistrarAsistencia(){\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'webinarAsistencia?seminario_has_usuario_id='+me.seminario_has_usuario_id)\r\n                .then(function (res) {\r\n                    me.estudiante = res.data[0]\r\n\r\n                    me.$vs.loading.close()\r\n                     if(res.data.message){\r\n                            me.$vs.notify({\r\n                            text: res.data.message,\r\n                            color: 'primary',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-alert-triangle'\r\n                        })\r\n                    }\r\n                    me.getMisSeminarios();\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n        irEncuesta(item){\r\n            let me = this\r\n            localStorage.data_seminario = JSON.stringify(item);\r\n            localStorage.setItem('estadoWebinar','mantenimiento')\r\n            me.$router.push('/webinar/encuesta')\r\n        },\r\n        irSeminario(item){\r\n            let me = this\r\n            // validar horario permitido con js, href _blank\r\n            window.open(item.link_reunion, '_blank');\r\n        },\r\n        descargarCertificado(item){\r\n            let me = this\r\n            me.ContarCertificados(item.id_seminario,item.usuario_id)\r\n            localStorage.data_seminario = JSON.stringify(item);\r\n            window.open('/webinar/certificado', '_blank');\r\n            // validar respuestas en respuestas_seminairos y permitir descarga con datos del docente y seminario seleccionado\r\n        },\r\n\r\n        ContarCertificados(webinar,usuario) {\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'sumarEncuestasDescargadas?seminario_id='+webinar+'&usuario_id='+usuario)\r\n                .then(function (res) {\r\n                    me.$vs.loading.close()\r\n\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n    },\r\n    components: {\r\n        FormWizard,\r\n        TabContent\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n#page-login {\r\n    height: 100vh;\r\n    // background-image: linear-gradient(-20deg, #e9defa 0%, #fbfcdb 100%);\r\n    background-image: linear-gradient(to top, #f3e7e9 0%, #e3eeff 99%, #e3eeff 100%);\r\n    // background-image: linear-gradient(to top, #dad4ec 0%, #dad4ec 1%, #f3e7e9 100%);\r\n}\r\n</style>\r\n"]}]}