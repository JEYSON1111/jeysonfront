{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\home\\docentes\\formulario\\components\\verSolicitudes.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\home\\docentes\\formulario\\components\\verSolicitudes.vue","mtime":1712682815984},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nexport default {\r\n    data() {\r\n        return{\r\n            arregloSolicitudes:[],\r\n            arregloLibrosSolicitud:[],\r\n            arregloLibrosAprobados:[],\r\n            maestro:{\r\n                id:'',\r\n                idusuario:'',\r\n                nombre:''\r\n            },\r\n            itemEliminar:{\r\n                id:'',\r\n                nombreasignatura:'',\r\n                idusuario:'',\r\n            }\r\n        }\r\n    },\r\n    props:{\r\n        id:{\r\n            type:Number,\r\n            default:0\r\n        }\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.getSolicitudes();\r\n    },\r\n    methods:{\r\n        //para obtener las solicitudes de los docentes\r\n        getSolicitudes() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'formularioDocente?maestroSolicitudes=yes&id='+me.id)\r\n                .then(function (res) {\r\n                   me.arregloSolicitudes = res.data\r\n                //    me.arregloAprobado    = res.data.filter(p => p.estado != '1')\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        traerLibros(tr){\r\n            let me = this;\r\n            me.maestro.id        = tr.id\r\n            me.maestro.nombre    = tr.profesor\r\n            me.maestro.idusuario = tr.idusuario\r\n            this.$http.get(this.$server_url+'formularioDocente?getMaestroLibros=yes&id='+tr.id)\r\n                .then(function (res) {\r\n                    me.arregloLibrosSolicitud = res.data\r\n                //    me.arregloLibrosSolicitud = res.data.filter(p => p.estado == '0')\r\n                   me.getLibrosAprobados(tr.idusuario)\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        getLibrosAprobados(idusuario){\r\n            let me = this;\r\n            me.arregloLibrosAprobados = []\r\n            this.$http.get(this.$server_url+'formularioDocente?getLibrosAprobados=yes&idusuario='+idusuario)\r\n                .then(function (res) {\r\n                   me.arregloLibrosAprobados = res.data\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        agregaAsignacion(item) {\r\n            let me = this;\r\n            let data = new FormData();\r\n            me.$vs.loading()\r\n            data.append('usuario_idusuario', me.maestro.idusuario)\r\n            data.append('asignatura_idasignatura', item.asignatura_idasignatura)\r\n            this.$http.post(this.$server_url + \"asignar_asignatura_docentes\", data)\r\n                .then(function (res) {\r\n                        me.$vs.notify({\r\n                            text: 'Asignatura agregada',\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check'\r\n                        })\r\n                        me.getActualizarLibro(item.id);\r\n                        me.getLibrosAprobados(me.maestro.idusuario)\r\n                        me.getSolicitudes()\r\n                        me.getLibros(me.maestro.id)\r\n                    me.$vs.loading.close();\r\n                })\r\n                .catch(function (error) {\r\n                     me.$vs.loading.close();\r\n                });\r\n        },\r\n        openConfirm(tr){\r\n            let me = this;\r\n            me.itemEliminar.id               = tr.idasiguser\r\n            me.itemEliminar.nombreasignatura = tr.nombreasignatura\r\n            me.itemEliminar.idusuario        = tr.usuario_idusuario\r\n            this.$vs.dialog({\r\n                type:'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                text: 'Estas seguro de eliminar este libro?',\r\n                accept:this.eliminaAsignacion\r\n            })\r\n        },\r\n        eliminaAsignacion() {\r\n            let me = this;\r\n            // console.log(item)\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url + \"eliminaAsignacion/\" + me.itemEliminar.id)\r\n                .then(function (res) {\r\n                    me.$vs.notify({\r\n                        text: me.itemEliminar.nombreasignatura + ' eliminada',\r\n                        color: 'success',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check'\r\n                    })\r\n                    me.getLibrosAprobados(me.itemEliminar.idusuario);\r\n                    me.$vs.loading.close();\r\n                });\r\n        },\r\n        getActualizarLibro(id){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'formularioDocente?actualizarLibro=yes&id='+id+'&solicitud_id='+me.maestro.id)\r\n                .then(function (res) {\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n            \r\n        },\r\n        getLibros(id){\r\n            let me = this;\r\n            me.arregloLibrosSolicitud = []\r\n            this.$http.get(this.$server_url+'formularioDocente?getMaestroLibros=yes&id='+id)\r\n                .then(function (res) {\r\n                   me.arregloLibrosSolicitud = res.data\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n    }\r\n}\r\n",{"version":3,"sources":["verSolicitudes.vue"],"names":[],"mappings":";AAwGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"verSolicitudes.vue","sourceRoot":"src/views/home/docentes/formulario/components","sourcesContent":["<template>\r\n    <div>\r\n        <p class=\"mt-2 ml-2 font-medium text-2xl text-opacity-25\">Solicitudes</p>\r\n        <vs-divider></vs-divider>\r\n        <div class=\"flex\" style=\"flex-wrap:wrap;\">\r\n            <div class=\"sm:w-full md:w-1/2  p-2 bg-gray-400 text-center\">\r\n                <vs-list>\r\n                    <vs-list-header icon-pack=\"feather\" icon=\"icon-users\" title=\"Docentes\"></vs-list-header>\r\n                    <vs-list-item class=\"docente\" v-for=\"(item,key) in arregloSolicitudes\" :key=\"key\" icon-pack=\"feather\" :icon=\"item.estado == 1?'icon-bell':''\" :title=\"item.profesor\" :subtitle=\"item.nombreInstitucion\">\r\n                        <vs-button color=\"rgb(11, 189, 135)\" class=\"ml-2\" size=\"small\" @click=\"traerLibros(item)\" type=\"border\">\r\n                            REVISAR\r\n                        </vs-button>\r\n                    </vs-list-item> \r\n                </vs-list>\r\n            </div>\r\n            <div class=\" sm:w-full md:w-1/2   p-2 bg-gray-500 text-left \">\r\n                <vs-table search :data=\"arregloLibrosSolicitud\" stripe pagination max-items=\"5\">\r\n                    <template>\r\n                    <div slot=\"header\">\r\n                       <vs-alert><small>Docente:</small> <span class=\"font-bold\" style=\"font-size:12px;\">{{ maestro.nombre }}</span></vs-alert>\r\n                    </div>\r\n                    </template>\r\n                    <template slot=\"thead\">\r\n                        <vs-th sort-key=\"nombrelibro\">Libro</vs-th>\r\n                        <vs-th sort-key=\"nombrelibro\">Serie</vs-th>\r\n                        <vs-th sort-key=\"nombrelibro\">Estado</vs-th>\r\n                        <vs-th sort-key=\"nombrelibro\">Acciones</vs-th>\r\n                    </template>\r\n                    <template slot-scope=\"{data}\">\r\n                    <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                        <vs-td :data=\"data[indextr].nombrelibro\">\r\n                            <span>{{ tr.nombrelibro }}</span>\r\n                        </vs-td>\r\n                        <vs-td :data=\"data[indextr].serie\">\r\n                            <span>{{ tr.serie }}</span><br>\r\n                        </vs-td>\r\n                        <vs-td>\r\n                            <vs-chip color=\"warning\" v-if=\"tr.estado == 0\">\r\n                            Sin aprobar\r\n                            </vs-chip>\r\n                            <vs-chip color=\"success\" v-if=\"tr.estado == 1\">\r\n                            Aprobado\r\n                            </vs-chip>\r\n                        </vs-td>\r\n                        <vs-td>\r\n                        <div class=\"flex\"> \r\n                            <vx-tooltip v-if=\"tr.estado !=1\" style=\"display: inline-block;\" text=\"Aprobar libro\" position=\"top\" color=\"success\">\r\n                                <vs-button size=\"small\" class=\"modal-default-button\" color=\"success\" @click=\"agregaAsignacion(data[indextr])\" type=\"line\" icon-pack=\"feather\" icon=\"icon-check\">\r\n                                </vs-button>\r\n                            </vx-tooltip>\r\n                        </div>\r\n                        </vs-td>\r\n                    </vs-tr>\r\n                    </template>\r\n                </vs-table>\r\n            </div>\r\n        </div>\r\n        <p class=\"mt-2 ml-2 font-medium text-2xl\">Libros aprobados</p>\r\n        <vs-divider></vs-divider>\r\n            <div class=\"w-full p-2 bg-gray-400 text-left\">\r\n                <vx-card\r\n                :title=\"maestro.nombre\"\r\n                title-color=\"success\"\r\n                :subtitle=\"'Cantidad: '+arregloLibrosAprobados.length\"\r\n                 class=\"w-full p-2 bg-gray-500 text-left ml-2\"\r\n                 >\r\n                    <vs-table search :data=\"arregloLibrosAprobados\" stripe pagination max-items=\"20\">\r\n                        <template>\r\n                        </template>\r\n                        <template slot=\"thead\">\r\n                            <vs-th sort-key=\"nombrelibro\">Libro</vs-th>\r\n                            <vs-th sort-key=\"nombrelibro\">Fecha de aprobacion</vs-th>\r\n                            <vs-th sort-key=\"nombrelibro\">Acciones</vs-th>\r\n                        </template>\r\n                        <template slot-scope=\"{data}\">\r\n                        <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                            <vs-td :data=\"data[indextr].nombreasignatura\">\r\n                                <span>{{ tr.nombreasignatura }}</span>\r\n                            </vs-td>\r\n                            <vs-td :data=\"data[indextr].created_at\">\r\n                                <span>{{ tr.created_at }}</span><br>\r\n                            </vs-td>\r\n                            <vs-td>\r\n                                <vx-tooltip class=\"ml-3\" style=\"display: inline-block;\" text=\"Eliminar\" position=\"top\" color=\"success\">\r\n                                    <vs-button size=\"small\" class=\"modal-default-button\" color=\"danger\" @click=\"openConfirm(data[indextr])\" type=\"line\" icon-pack=\"feather\" icon=\"icon-trash\">\r\n                                    </vs-button>\r\n                                </vx-tooltip>\r\n                            </vs-td>\r\n                            <!-- <vs-td>\r\n                                <vs-chip color=\"warning\" v-if=\"tr.estado == 0\">\r\n                                Sin aprobar\r\n                                </vs-chip>\r\n                                <vs-chip color=\"success\" v-if=\"tr.estado == 1\">\r\n                                Aprobado\r\n                                </vs-chip>\r\n                            </vs-td> -->\r\n                        </vs-tr>\r\n                        </template>\r\n                    </vs-table>\r\n                </vx-card>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data() {\r\n        return{\r\n            arregloSolicitudes:[],\r\n            arregloLibrosSolicitud:[],\r\n            arregloLibrosAprobados:[],\r\n            maestro:{\r\n                id:'',\r\n                idusuario:'',\r\n                nombre:''\r\n            },\r\n            itemEliminar:{\r\n                id:'',\r\n                nombreasignatura:'',\r\n                idusuario:'',\r\n            }\r\n        }\r\n    },\r\n    props:{\r\n        id:{\r\n            type:Number,\r\n            default:0\r\n        }\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.getSolicitudes();\r\n    },\r\n    methods:{\r\n        //para obtener las solicitudes de los docentes\r\n        getSolicitudes() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'formularioDocente?maestroSolicitudes=yes&id='+me.id)\r\n                .then(function (res) {\r\n                   me.arregloSolicitudes = res.data\r\n                //    me.arregloAprobado    = res.data.filter(p => p.estado != '1')\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        traerLibros(tr){\r\n            let me = this;\r\n            me.maestro.id        = tr.id\r\n            me.maestro.nombre    = tr.profesor\r\n            me.maestro.idusuario = tr.idusuario\r\n            this.$http.get(this.$server_url+'formularioDocente?getMaestroLibros=yes&id='+tr.id)\r\n                .then(function (res) {\r\n                    me.arregloLibrosSolicitud = res.data\r\n                //    me.arregloLibrosSolicitud = res.data.filter(p => p.estado == '0')\r\n                   me.getLibrosAprobados(tr.idusuario)\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        getLibrosAprobados(idusuario){\r\n            let me = this;\r\n            me.arregloLibrosAprobados = []\r\n            this.$http.get(this.$server_url+'formularioDocente?getLibrosAprobados=yes&idusuario='+idusuario)\r\n                .then(function (res) {\r\n                   me.arregloLibrosAprobados = res.data\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        agregaAsignacion(item) {\r\n            let me = this;\r\n            let data = new FormData();\r\n            me.$vs.loading()\r\n            data.append('usuario_idusuario', me.maestro.idusuario)\r\n            data.append('asignatura_idasignatura', item.asignatura_idasignatura)\r\n            this.$http.post(this.$server_url + \"asignar_asignatura_docentes\", data)\r\n                .then(function (res) {\r\n                        me.$vs.notify({\r\n                            text: 'Asignatura agregada',\r\n                            color: 'success',\r\n                            iconPack: 'feather',\r\n                            icon: 'icon-check'\r\n                        })\r\n                        me.getActualizarLibro(item.id);\r\n                        me.getLibrosAprobados(me.maestro.idusuario)\r\n                        me.getSolicitudes()\r\n                        me.getLibros(me.maestro.id)\r\n                    me.$vs.loading.close();\r\n                })\r\n                .catch(function (error) {\r\n                     me.$vs.loading.close();\r\n                });\r\n        },\r\n        openConfirm(tr){\r\n            let me = this;\r\n            me.itemEliminar.id               = tr.idasiguser\r\n            me.itemEliminar.nombreasignatura = tr.nombreasignatura\r\n            me.itemEliminar.idusuario        = tr.usuario_idusuario\r\n            this.$vs.dialog({\r\n                type:'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                text: 'Estas seguro de eliminar este libro?',\r\n                accept:this.eliminaAsignacion\r\n            })\r\n        },\r\n        eliminaAsignacion() {\r\n            let me = this;\r\n            // console.log(item)\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url + \"eliminaAsignacion/\" + me.itemEliminar.id)\r\n                .then(function (res) {\r\n                    me.$vs.notify({\r\n                        text: me.itemEliminar.nombreasignatura + ' eliminada',\r\n                        color: 'success',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-check'\r\n                    })\r\n                    me.getLibrosAprobados(me.itemEliminar.idusuario);\r\n                    me.$vs.loading.close();\r\n                });\r\n        },\r\n        getActualizarLibro(id){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'formularioDocente?actualizarLibro=yes&id='+id+'&solicitud_id='+me.maestro.id)\r\n                .then(function (res) {\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n            \r\n        },\r\n        getLibros(id){\r\n            let me = this;\r\n            me.arregloLibrosSolicitud = []\r\n            this.$http.get(this.$server_url+'formularioDocente?getMaestroLibros=yes&id='+id)\r\n                .then(function (res) {\r\n                   me.arregloLibrosSolicitud = res.data\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.docente:hover{\r\n    background-color: #E4EAF1;\r\n    transition: 3s ease;\r\n    cursor: pointer;\r\n}\r\n</style>"]}]}