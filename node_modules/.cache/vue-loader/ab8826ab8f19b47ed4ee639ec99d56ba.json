{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\materialapoyo\\material_subir\\components\\upload.vue?vue&type=style&index=0&id=dd2e39d4&lang=scss&scoped=true","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\materialapoyo\\material_subir\\components\\upload.vue","mtime":1712682816156},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n.add-new-data-sidebar {\r\n    ::v-deep .vs-sidebar--background {\r\n        z-index: 52010;\r\n    }\r\n\r\n    ::v-deep .vs-sidebar {\r\n        z-index: 52010;\r\n        width: 60%;\r\n        max-width: 60%;\r\n\r\n        .img-upload {\r\n            margin-top: 2rem;\r\n\r\n            .con-img-upload {\r\n                padding: 0;\r\n            }\r\n\r\n            .con-input-upload {\r\n                width: 100%;\r\n                margin: 0;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.scroll-area--data-list-add-new {\r\n    // height: calc(var(--vh, 1vh) * 100 - 4.3rem);\r\n    height: calc(var(--vh, 1vh) * 100 - 16px - 45px - 82px);\r\n\r\n    &:not(.ps) {\r\n        overflow-y: auto;\r\n    }\r\n}\r\n",{"version":3,"sources":["upload.vue"],"names":[],"mappings":";AA6IA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"upload.vue","sourceRoot":"src/views/materialapoyo/material_subir/components","sourcesContent":["<template>\r\n<div>\r\n    <div class=\"m-4 w-full\">\r\n        <template v-if=\"!arch.nombre\">\r\n            <vue-dropzone class=\"vx-card\" ref=\"dropzone\" id=\"drop1\" @vdropzone-complete=\"guardar\" :options=\"dropzoneOptions\"></vue-dropzone>\r\n        </template>\r\n        <img v-if=\"arch.nombre\" :src=\"get_ext_img(arch.file_ext)\" :alt=\"arch.nombre\" style=\"witch:70px\" class=\"mt-4\">\r\n        <p>\r\n            {{arch.nombre}}\r\n        </p>\r\n        <vs-button v-if=\"arch.nombre\" @click=\"quitarArchivo()\" size=\"small\">Cambiar archivo</vs-button>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport vue2Dropzone from 'vue2-dropzone'\r\nimport 'vue2-dropzone/dist/vue2Dropzone.min.css'\r\nexport default {\r\n    components: {\r\n        vueDropzone: vue2Dropzone,\r\n    },\r\n    props:{\r\n        id:Number,\r\n        name:String,\r\n        tipo:Number,\r\n    },\r\n    data() {\r\n        return {\r\n            file: [],\r\n            dropzoneOptions: {\r\n                url: this.$data_url + 'api/upload/file',\r\n                dictDefaultMessage: \"<i class='fa fa-cloud-upload'></i> Click o arrastra un archivo aquÃ­.\",\r\n                chunking: true,\r\n                thumbnailWidth: 150,\r\n                maxFilesize: 200.5,\r\n                addRemoveLinks: true,\r\n                headers: {\r\n                    \"My-Awesome-Header\": \"header value\"\r\n                },\r\n                init: function() {\r\n                    this.on(\"success\", function(file, responseText) {\r\n                        // localStorage.setItem('imagenContenido',responseText.url)\r\n                    });\r\n                },\r\n            },\r\n            errors: [],\r\n            arch: {},\r\n            material_id:'',\r\n            usuario:[],\r\n        }\r\n    },\r\n    mounted() {\r\n        this.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n        if(this.name){\r\n            console.log(this.name)\r\n            this.arch.nombre = this.name\r\n            this.arch.file_ext = '.doc'\r\n        }\r\n        if(this.tipo == 1){\r\n            this.material_id = this.id\r\n        }\r\n    },\r\n    computed: {\r\n        get_ext_img() {\r\n            return (ext) => {\r\n                if (ext === 'doc') return require('@/assets/images/file-icons/doc.png')\r\n                else if (ext === 'jpg' || ext === 'JPG'  ||  ext == 'PNG' || ext == 'png') return require('@/assets/images/file-icons/jpg.png')\r\n                else if (ext === 'xls') return require('@/assets/images/file-icons/xls.png')\r\n                else if (ext === 'pdf') return require('@/assets/images/file-icons/pdf.png')\r\n                else return require('@/assets/images/file-icons/doc.png')\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        successUpload() {\r\n            this.$vs.notify({\r\n                color: 'success',\r\n                title: 'Upload Success',\r\n                text: 'Lorem ipsum dolor sit amet, consectetur'\r\n            })\r\n        },\r\n        onUploadProgress: uploadEvent => {\r\n            var pocentaje = Math.round(uploadEvent.loaded / uploadEvent.total * 100);\r\n            console.log(pocentaje)\r\n        },\r\n        async quitarArchivo() {\r\n            let me = this;\r\n            this.arch = {}\r\n            me.eliminarArchivo()\r\n        },\r\n\r\n        async eliminarArchivo() {\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('material_url',   localStorage.material_url);\r\n            formData.append('id',             localStorage.material_id)\r\n            axios.post(this.$data_url + 'api/eliminar/material/subir', formData, this.onUploadProgress)\r\n                .then(function (response) {\r\n                   me.material_id = \"\"\r\n                   me.$emit('file',response.data)\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n\r\n        async guardar(file) {\r\n            let me = this\r\n            me.$vs.loading({\r\n                color: '#046AE7'\r\n            })\r\n            let formData = new FormData();\r\n            formData.append('archivo', file);\r\n            formData.append('usuario',me.usuario.idusuario)\r\n            if(me.material_id){\r\n                formData.append('id', me.material_id);\r\n            }\r\n            axios.post(this.$data_url + 'api/agregarMaterial', formData, this.onUploadProgress)\r\n                .then(function (response) {\r\n                    me.arch = response.data;\r\n                    localStorage.setItem('material_id',response.data.id)\r\n                    localStorage.setItem('material_url',response.data.url)\r\n                    localStorage.setItem('material_nombre',response.data.nombre)\r\n                    me.material_id = response.data.id;\r\n                    me.$refs.dropzone.removeAllFiles();\r\n                    me.$vs.loading.close();\r\n                    me.setButton = false;\r\n                    me.$emit('file',response.data)\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-new-data-sidebar {\r\n    ::v-deep .vs-sidebar--background {\r\n        z-index: 52010;\r\n    }\r\n\r\n    ::v-deep .vs-sidebar {\r\n        z-index: 52010;\r\n        width: 60%;\r\n        max-width: 60%;\r\n\r\n        .img-upload {\r\n            margin-top: 2rem;\r\n\r\n            .con-img-upload {\r\n                padding: 0;\r\n            }\r\n\r\n            .con-input-upload {\r\n                width: 100%;\r\n                margin: 0;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.scroll-area--data-list-add-new {\r\n    // height: calc(var(--vh, 1vh) * 100 - 4.3rem);\r\n    height: calc(var(--vh, 1vh) * 100 - 16px - 45px - 82px);\r\n\r\n    &:not(.ps) {\r\n        overflow-y: auto;\r\n    }\r\n}\r\n</style>\r\n"]}]}