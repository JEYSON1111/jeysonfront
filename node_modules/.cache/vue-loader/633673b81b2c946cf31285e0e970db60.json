{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\obsequios\\ScreenObsequiosFacturador.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\obsequios\\ScreenObsequiosFacturador.vue","mtime":1712682816356},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport { mapState } from \"vuex\";\r\nimport vSelect from 'vue-select';\r\nimport crearPedidoVue from './asesor/mantenimiento/crearPedido.vue';\r\nimport listadoObsequioVue from './asesor/mantenimiento/listadoObsequio'\r\nexport default{\r\n    components:{\r\n        crearPedidoVue,\r\n        listadoObsequioVue,\r\n        vSelect,\r\n    },\r\n    data(){\r\n        return{\r\n            id:0,\r\n            tipo:0,\r\n            periodo_id:0,\r\n            usuario:[],\r\n            arregloObsequios:[],\r\n            arregloPeriodo:[],\r\n            pedido:{},\r\n            periodoSelect:'',\r\n            changePeriodo:false,\r\n            userAdmin:false,\r\n            userFacturador:false,\r\n        }\r\n    },\r\n    watch:{\r\n        periodoSelect(results){\r\n            let me = this;\r\n            if(results == null || results == null || results == undefined){\r\n                me.changePeriodo = false\r\n                localStorage.removeItem('oid')\r\n                localStorage.removeItem('onombre')\r\n            }else{\r\n                me.changePeriodo = true\r\n                localStorage.setItem('oid',    results.idperiodoescolar)\r\n                localStorage.setItem('onombre',results.periodoescolar)\r\n                me.getObsequios()\r\n                me.getInfoPeriodo()\r\n            }\r\n        }\r\n    },\r\n    props:{\r\n        arregloPeriodos:{\r\n            type:Array,\r\n            default:function(){\r\n                return []\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n      ...mapState([\"auth\", \"userRoot\", \"susuario\", \"groupFacturador\", \"groupBodega\",\"userAsesor\",\"ObjectGuia\"]),\r\n    },\r\n    created(){\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.getObsequios();\r\n        //mantener el periodo seleccionado aunque recarge la pagina\r\n        let searchPeriodoActive = localStorage.oid\r\n        let searchPeriodoName   = localStorage.onombre\r\n        if(searchPeriodoActive){\r\n        me.periodoSelect = { idperiodoescolar:searchPeriodoActive, periodoescolar:searchPeriodoName }\r\n        }\r\n        if(me.usuario.id_group == 1) { me.userAdmin = true }\r\n        //user facturador\r\n        if(me.usuario.id_group == 22 || me.usuario.id_group == 23){ me.userFacturador = true }\r\n    },\r\n    methods:{\r\n      changeEdit(e){\r\n          let me      = this;\r\n          me.pedido   = {}\r\n          me.id       = e.id\r\n          me.pedido   = e\r\n          me.tipo     = 1\r\n      },\r\n      changeRecharge(e){\r\n          let me  = this;\r\n          me.tipo = 0\r\n          me.getObsequios()\r\n      },\r\n      getObsequios() {\r\n          let me = this;\r\n          me.$vs.loading();\r\n          this.$http.get(this.$server_url+'obsequio?listadoObsequioAsesor=yes&periodo_id='+me.periodoSelect.idperiodoescolar)\r\n              .then(function (res) {\r\n                 let datos = res.data\r\n                  if(me.userAsesor) {\r\n                    me.arregloObsequios = datos.filter(p => p.asesor_id == me.usuario.idusuario)\r\n                  }else{\r\n                    me.arregloObsequios = datos\r\n                  }\r\n                  me.$vs.loading.close()\r\n              })\r\n              .catch(function (error) {\r\n                  console.log(error + ' error');\r\n                  me.$vs.loading.close()\r\n              })\r\n      },\r\n      getInfoPeriodo(){\r\n        let me = this;\r\n        me.arregloPeriodo = ''\r\n        this.$http.get(this.$server_url+'periodo/'+me.periodoSelect.idperiodoescolar)\r\n            .then(function (res) {\r\n                me.arregloPeriodo = res.data\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n            })\r\n      }\r\n    }\r\n}\r\n",{"version":3,"sources":["ScreenObsequiosFacturador.vue"],"names":[],"mappings":";AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ScreenObsequiosFacturador.vue","sourceRoot":"src/views/pedidos/obsequios","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"flex mt-5\">\r\n            <div style=\"width: 40%;\">\r\n                <p> <ion-icon name=\"contract-outline\"></ion-icon>  Filtro de pedidos por período</p>\r\n            </div>\r\n            <div style=\"width: 60%;\">\r\n                <!-- idperiodoescolar -->\r\n                <v-select :options=\"arregloPeriodos\" :reduce=\"arregloPeriodos => arregloPeriodos\" label=\"periodoescolar\" class=\"w-full\" v-model=\"periodoSelect\" />\r\n            </div>\r\n        </div>\r\n        <vs-divider>\r\n            <vs-button color=\"warning\" v-if=\"changePeriodo == false\" type=\"flat\" icon=\"star\">Ningun período Seleccionado</vs-button>\r\n            <vs-button  v-else color=\"success\" type=\"flat\" icon=\"star\">Periodo seleccionado: <b>{{ periodoSelect.periodoescolar }}</b></vs-button>\r\n        </vs-divider>\r\n        <div v-if=\"changePeriodo\">\r\n            <div v-if=\"tipo != 0\">\r\n                <vs-button color=\"primary\" type=\"border\" @click=\"tipo = 0;getObsequios()\">← Regresar</vs-button>\r\n            </div>\r\n            <div v-if=\"tipo == 1\"><crearPedidoVue :userRoot=\"userRoot\" :userAdmin=\"userAdmin\" :userAsesor=\"userAsesor\" :userFacturador=\"userFacturador\" :arregloPeriodo=\"arregloPeriodo\" :periodo_id=\"periodoSelect.idperiodoescolar\" @changeRecharge=\"changeRecharge\" :id=\"id\" :pedido=\"pedido\"/></div>\r\n            <div v-if=\"tipo == 0\">\r\n                <vs-button class=\"btn_lg p-2 ml-1\" @click=\"tipo = 1;id = 0; pedido={};\" color=\"warning\" type=\"line\" icon-pack=\"feather\" icon=\"icon-plus\" icon-after>Solicitar obsequios</vs-button>\r\n                <listadoObsequioVue :userRoot=\"userRoot\" :userAdmin=\"userAdmin\" :periodo_id=\"periodoSelect.idperiodoescolar\" :arregloObsequios=\"arregloObsequios\" @changeRecharge=\"changeRecharge\" @changeEdit=\"changeEdit\"/>\r\n            </div>\r\n        </div>\r\n        <br><br><br>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport vSelect from 'vue-select';\r\nimport crearPedidoVue from './asesor/mantenimiento/crearPedido.vue';\r\nimport listadoObsequioVue from './asesor/mantenimiento/listadoObsequio'\r\nexport default{\r\n    components:{\r\n        crearPedidoVue,\r\n        listadoObsequioVue,\r\n        vSelect,\r\n    },\r\n    data(){\r\n        return{\r\n            id:0,\r\n            tipo:0,\r\n            periodo_id:0,\r\n            usuario:[],\r\n            arregloObsequios:[],\r\n            arregloPeriodo:[],\r\n            pedido:{},\r\n            periodoSelect:'',\r\n            changePeriodo:false,\r\n            userAdmin:false,\r\n            userFacturador:false,\r\n        }\r\n    },\r\n    watch:{\r\n        periodoSelect(results){\r\n            let me = this;\r\n            if(results == null || results == null || results == undefined){\r\n                me.changePeriodo = false\r\n                localStorage.removeItem('oid')\r\n                localStorage.removeItem('onombre')\r\n            }else{\r\n                me.changePeriodo = true\r\n                localStorage.setItem('oid',    results.idperiodoescolar)\r\n                localStorage.setItem('onombre',results.periodoescolar)\r\n                me.getObsequios()\r\n                me.getInfoPeriodo()\r\n            }\r\n        }\r\n    },\r\n    props:{\r\n        arregloPeriodos:{\r\n            type:Array,\r\n            default:function(){\r\n                return []\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n      ...mapState([\"auth\", \"userRoot\", \"susuario\", \"groupFacturador\", \"groupBodega\",\"userAsesor\",\"ObjectGuia\"]),\r\n    },\r\n    created(){\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.getObsequios();\r\n        //mantener el periodo seleccionado aunque recarge la pagina\r\n        let searchPeriodoActive = localStorage.oid\r\n        let searchPeriodoName   = localStorage.onombre\r\n        if(searchPeriodoActive){\r\n        me.periodoSelect = { idperiodoescolar:searchPeriodoActive, periodoescolar:searchPeriodoName }\r\n        }\r\n        if(me.usuario.id_group == 1) { me.userAdmin = true }\r\n        //user facturador\r\n        if(me.usuario.id_group == 22 || me.usuario.id_group == 23){ me.userFacturador = true }\r\n    },\r\n    methods:{\r\n      changeEdit(e){\r\n          let me      = this;\r\n          me.pedido   = {}\r\n          me.id       = e.id\r\n          me.pedido   = e\r\n          me.tipo     = 1\r\n      },\r\n      changeRecharge(e){\r\n          let me  = this;\r\n          me.tipo = 0\r\n          me.getObsequios()\r\n      },\r\n      getObsequios() {\r\n          let me = this;\r\n          me.$vs.loading();\r\n          this.$http.get(this.$server_url+'obsequio?listadoObsequioAsesor=yes&periodo_id='+me.periodoSelect.idperiodoescolar)\r\n              .then(function (res) {\r\n                 let datos = res.data\r\n                  if(me.userAsesor) {\r\n                    me.arregloObsequios = datos.filter(p => p.asesor_id == me.usuario.idusuario)\r\n                  }else{\r\n                    me.arregloObsequios = datos\r\n                  }\r\n                  me.$vs.loading.close()\r\n              })\r\n              .catch(function (error) {\r\n                  console.log(error + ' error');\r\n                  me.$vs.loading.close()\r\n              })\r\n      },\r\n      getInfoPeriodo(){\r\n        let me = this;\r\n        me.arregloPeriodo = ''\r\n        this.$http.get(this.$server_url+'periodo/'+me.periodoSelect.idperiodoescolar)\r\n            .then(function (res) {\r\n                me.arregloPeriodo = res.data\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n            })\r\n      }\r\n    }\r\n}\r\n</script>\r\n"]}]}