{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\institucion\\nuevo.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\institucion\\nuevo.vue","mtime":1712682816035},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar'\r\nimport \"vue-select/dist/vue-select.css\";\r\nimport vSelect from \"vue-select\";\r\nexport default {\r\n    props: {\r\n        isSidebarActive: {\r\n            type: Boolean,\r\n            required: true\r\n        },\r\n        numero:'',\r\n        data: {\r\n            type: Object,\r\n            default: () => {}\r\n        }\r\n    },\r\n    components: {\r\n        'v-select': vSelect,\r\n        VuePerfectScrollbar\r\n    },\r\n    data() {\r\n        return {\r\n            institucion: {\r\n                'idInstitucion': '',\r\n                'nombreInstitucion': '',\r\n                'telefonoInstitucion': '',\r\n                'direccionInstitucion': '',\r\n                'solicitudInstitucion': '',\r\n                'vendedorInstitucion': '',\r\n                'periodoescolar': '',\r\n                'ciudad_id': '',\r\n                'region_idregion': '',\r\n            },\r\n            errors: {\r\n                'nombreInstitucion': '',\r\n                'telefonoInstitucion': '',\r\n                'direccionInstitucion': '',\r\n                'solicitudInstitucion': '',\r\n                'vendedorInstitucion': '',\r\n                'periodoescolar': '',\r\n                'ciudad_id': '',\r\n                'region_idregion': '',\r\n            },\r\n            titulo: '',\r\n            ciudad: [],\r\n            region: [],\r\n            periodo: [],\r\n            vendedor: []\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getCiudadSelect();\r\n        this.getRegionSelect();\r\n        this.getPeriodoSelect();\r\n        this.getVendedor();\r\n        if (!this.$route.params.id) {\r\n            this.titulo = \"Nueva Institución\";\r\n        } else {\r\n            this.titulo = \"Editar Institución\";\r\n            this.getInstitucion(this.$route.params.id);\r\n        }\r\n    },\r\n    computed: {\r\n        isSidebarActiveLocal: {\r\n            get() {\r\n                return this.isSidebarActive\r\n            },\r\n            set(val) {\r\n                if (!val) {\r\n                    this.$emit('closeSidebar')\r\n                }\r\n            }\r\n        },\r\n        // isFormValid() {\r\n        //     return !this.errors.any() && this.dataName && this.dataCategory && this.dataPrice > 0\r\n        // },\r\n        scrollbarTag() {\r\n            return this.$store.getters.scrollbarTag\r\n        }\r\n    },\r\n    methods: {\r\n        async getCiudadSelect() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"ciudad\").then(function (response) {\r\n                me.ciudad = response.data;\r\n                // console.log(me.ciudad);\r\n            });\r\n        },\r\n        async getRegionSelect() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"region\").then(function (response) {\r\n                me.region = response.data;\r\n            });\r\n        },\r\n        async getPeriodoSelect() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"periodo\").then(function (response) {\r\n                me.periodo = response.data;\r\n            });\r\n        },\r\n        async getInstitucion(idinstitucion) {\r\n            let me = this;\r\n            console.log(idinstitucion);\r\n            this.$http.get(this.$server_url+\"institucion/\" + idinstitucion)\r\n                .then(function (response) {\r\n                    // console.log(response.data);\r\n                    me.institucion = response.data;\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        guardar(data) {\r\n            let me = this;\r\n            this.errors = {\r\n                'idInstitucion': '',\r\n                'nombreInstitucion': '',\r\n                'telefonoInstitucion': '',\r\n                'direccionInstitucion': '',\r\n                'solicitudInstitucion': '',\r\n                'vendedorInstitucion': '',\r\n                'periodoescolar': '',\r\n                'ciudad_id': '',\r\n                'region_idregion': '',\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('idInstitucion', me.institucion.idInstitucion);\r\n            formData.append('nombreInstitucion', me.institucion.nombreInstitucion);\r\n            formData.append('telefonoInstitucion', me.institucion.telefonoInstitucion);\r\n            formData.append('direccionInstitucion', me.institucion.direccionInstitucion);\r\n            formData.append('solicitudInstitucion', me.institucion.solicitudInstitucion);\r\n            formData.append('vendedorInstitucion', me.institucion.vendedorInstitucion);\r\n            formData.append('periodoescolar', me.institucion.periodoescolar);\r\n            formData.append('ciudad_id', me.institucion.ciudad_id);\r\n            formData.append('region_idregion', me.institucion.region_idregion);\r\n            this.$http.post(this.$server_url+\"institucion\", formData)\r\n                .then(function (response) {\r\n                    me.isSidebarActiveLocal = false\r\n                })\r\n                .catch(function (error) {\r\n                    if (error.response.status == '422') {\r\n                        console.log(error.response.data);\r\n                        me.errors.nombreInstitucion = error.response.data.errors.nombreInstitucion[0];\r\n                        me.errors.telefonoInstitucion = error.response.data.errors.telefonoInstitucion[0];\r\n                        me.errors.direccionInstitucion = error.response.data.errors.direccionInstitucion[0];\r\n                        me.errors.solicitudInstitucion = error.response.data.errors.solicitudInstitucion[0];\r\n                        me.errors.vendedorInstitucion = error.response.data.errors.vendedorInstitucion[0];\r\n                        me.errors.periodoescolar = error.response.data.errors.periodoescolar[0];\r\n                        me.errors.ciudad_id = error.response.data.errors.ciudad_id[0];\r\n                        me.errors.region_idregion = error.response.data.errors.region_idregion[0];\r\n                    }\r\n                })\r\n        },\r\n        async getVendedor() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'vendedor')\r\n                .then(function (response) {\r\n                    me.vendedor = response.data;\r\n                    // console.log(me.vendedor);\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n    },\r\n}\r\n",{"version":3,"sources":["nuevo.vue"],"names":[],"mappings":";AAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"nuevo.vue","sourceRoot":"src/views/institucion","sourcesContent":["<template>\r\n<vs-sidebar click-not-close position-right parent=\"body\" default-index=\"1\" color=\"primary\" class=\"add-new-data-sidebar items-no-padding\" spacer v-model=\"isSidebarActiveLocal\">\r\n    <div class=\"mt-6 flex items-center justify-between px-6\">\r\n        <!-- <h4>{{ Object.entries(this.data).length === 0 ? \"ADD NEW\" : \"UPDATE\" }} ITEM</h4> -->\r\n        <h4>Nueva Institución</h4>\r\n        <feather-icon icon=\"XIcon\" @click.stop=\"isSidebarActiveLocal = false\" class=\"cursor-pointer\"></feather-icon>\r\n    </div>\r\n    <vs-divider class=\"mb-0\"></vs-divider>\r\n\r\n    <component :is=\"scrollbarTag\" class=\"scroll-area--data-list-add-new\" :key=\"$vs.rtl\">\r\n\r\n        <div class=\"p-6\">\r\n            <div class=\"vx-row mb-6\">\r\n                <input type=\"text\" v-model=\"institucion.idInstitucion\" hidden>\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Nombre</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <vs-input class=\"w-full\" icon-no-border v-model=\"institucion.nombreInstitucion\" />\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.nombreInstitucion\">{{ errors.nombreInstitucion }}</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Dirección</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <vs-input class=\"w-full\" icon-no-border v-model=\"institucion.direccionInstitucion\" />\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.direccionInstitucion\">{{ errors.direccionInstitucion }}</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Teléfono</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <vs-input class=\"w-full\" icon-no-border v-model=\"institucion.telefonoInstitucion\" />\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.telefonoInstitucion\">{{ errors.telefonoInstitucion }}</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Solicitud</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <vs-input class=\"w-full\" icon-no-border v-model=\"institucion.solicitudInstitucion\" />\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.solicitudInstitucion\">{{ errors.solicitudInstitucion }}</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Región</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <ul class=\"demo-alignment\">\r\n                        <li>\r\n                            <vs-radio v-model=\"institucion.region_idregion\" vs-value=\"2\">Costa</vs-radio>\r\n                        </li>\r\n                        <li>\r\n                            <vs-radio v-model=\"institucion.region_idregion\" vs-value=\"1\">Sierra</vs-radio>\r\n                        </li>\r\n                    </ul>\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.region_idregion\">{{ errors.region_idregion }}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Ciudad</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <v-select :options=\"ciudad\" :reduce=\"ciudad => ciudad.idciudad\" label=\"nombre\" v-model=\"institucion.ciudad_id\"></v-select>\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.ciudad_id\">{{ errors.ciudad_id }}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"vx-row mb-6\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Vendedor</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <v-select :options=\"vendedor\" :reduce=\"vendedor => vendedor.cedula\" label=\"nombres\" v-model=\"institucion.vendedorInstitucion\"></v-select>\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.vendedorInstitucion\">{{ errors.vendedorInstitucion }}</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"vx-row mb-6\" v-if=\"!institucion.idInstitucion\">\r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Período Escolar</span>\r\n                </div>\r\n                <div class=\"vx-col sm:w-2/3 w-full\">\r\n                    <v-select :options=\"periodo\" :reduce=\"periodo => periodo.idperiodoescolar\" label=\"descripcion\" v-model=\"institucion.periodoescolar\"></v-select>\r\n                    <span class=\"text-danger text-sm\" v-show=\"errors.periodoescolar\">{{ errors.periodoescolar }}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </component>\r\n\r\n    <div class=\"p-2 text-center\" slot=\"footer\">\r\n        <div class=\"flex flex-wrap mt-4\">\r\n            <div class=\"w-1/3 ml-auto\">\r\n                <vs-button color=\"danger\" type=\"border\" class=\"mb-2\" @click.stop=\"isSidebarActiveLocal = false\">Cancelar</vs-button>\r\n            </div>\r\n            <div class=\"w-1/3 ml-auto\">\r\n                <vs-button color=\"success\" type=\"border\" @click=\"guardar(institucion)\" class=\"mb-2\">Registrar institución</vs-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</vs-sidebar>\r\n</template>\r\n\r\n<script>\r\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar'\r\nimport \"vue-select/dist/vue-select.css\";\r\nimport vSelect from \"vue-select\";\r\nexport default {\r\n    props: {\r\n        isSidebarActive: {\r\n            type: Boolean,\r\n            required: true\r\n        },\r\n        numero:'',\r\n        data: {\r\n            type: Object,\r\n            default: () => {}\r\n        }\r\n    },\r\n    components: {\r\n        'v-select': vSelect,\r\n        VuePerfectScrollbar\r\n    },\r\n    data() {\r\n        return {\r\n            institucion: {\r\n                'idInstitucion': '',\r\n                'nombreInstitucion': '',\r\n                'telefonoInstitucion': '',\r\n                'direccionInstitucion': '',\r\n                'solicitudInstitucion': '',\r\n                'vendedorInstitucion': '',\r\n                'periodoescolar': '',\r\n                'ciudad_id': '',\r\n                'region_idregion': '',\r\n            },\r\n            errors: {\r\n                'nombreInstitucion': '',\r\n                'telefonoInstitucion': '',\r\n                'direccionInstitucion': '',\r\n                'solicitudInstitucion': '',\r\n                'vendedorInstitucion': '',\r\n                'periodoescolar': '',\r\n                'ciudad_id': '',\r\n                'region_idregion': '',\r\n            },\r\n            titulo: '',\r\n            ciudad: [],\r\n            region: [],\r\n            periodo: [],\r\n            vendedor: []\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getCiudadSelect();\r\n        this.getRegionSelect();\r\n        this.getPeriodoSelect();\r\n        this.getVendedor();\r\n        if (!this.$route.params.id) {\r\n            this.titulo = \"Nueva Institución\";\r\n        } else {\r\n            this.titulo = \"Editar Institución\";\r\n            this.getInstitucion(this.$route.params.id);\r\n        }\r\n    },\r\n    computed: {\r\n        isSidebarActiveLocal: {\r\n            get() {\r\n                return this.isSidebarActive\r\n            },\r\n            set(val) {\r\n                if (!val) {\r\n                    this.$emit('closeSidebar')\r\n                }\r\n            }\r\n        },\r\n        // isFormValid() {\r\n        //     return !this.errors.any() && this.dataName && this.dataCategory && this.dataPrice > 0\r\n        // },\r\n        scrollbarTag() {\r\n            return this.$store.getters.scrollbarTag\r\n        }\r\n    },\r\n    methods: {\r\n        async getCiudadSelect() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"ciudad\").then(function (response) {\r\n                me.ciudad = response.data;\r\n                // console.log(me.ciudad);\r\n            });\r\n        },\r\n        async getRegionSelect() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"region\").then(function (response) {\r\n                me.region = response.data;\r\n            });\r\n        },\r\n        async getPeriodoSelect() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"periodo\").then(function (response) {\r\n                me.periodo = response.data;\r\n            });\r\n        },\r\n        async getInstitucion(idinstitucion) {\r\n            let me = this;\r\n            console.log(idinstitucion);\r\n            this.$http.get(this.$server_url+\"institucion/\" + idinstitucion)\r\n                .then(function (response) {\r\n                    // console.log(response.data);\r\n                    me.institucion = response.data;\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n        guardar(data) {\r\n            let me = this;\r\n            this.errors = {\r\n                'idInstitucion': '',\r\n                'nombreInstitucion': '',\r\n                'telefonoInstitucion': '',\r\n                'direccionInstitucion': '',\r\n                'solicitudInstitucion': '',\r\n                'vendedorInstitucion': '',\r\n                'periodoescolar': '',\r\n                'ciudad_id': '',\r\n                'region_idregion': '',\r\n            }\r\n            let formData = new FormData();\r\n            formData.append('idInstitucion', me.institucion.idInstitucion);\r\n            formData.append('nombreInstitucion', me.institucion.nombreInstitucion);\r\n            formData.append('telefonoInstitucion', me.institucion.telefonoInstitucion);\r\n            formData.append('direccionInstitucion', me.institucion.direccionInstitucion);\r\n            formData.append('solicitudInstitucion', me.institucion.solicitudInstitucion);\r\n            formData.append('vendedorInstitucion', me.institucion.vendedorInstitucion);\r\n            formData.append('periodoescolar', me.institucion.periodoescolar);\r\n            formData.append('ciudad_id', me.institucion.ciudad_id);\r\n            formData.append('region_idregion', me.institucion.region_idregion);\r\n            this.$http.post(this.$server_url+\"institucion\", formData)\r\n                .then(function (response) {\r\n                    me.isSidebarActiveLocal = false\r\n                })\r\n                .catch(function (error) {\r\n                    if (error.response.status == '422') {\r\n                        console.log(error.response.data);\r\n                        me.errors.nombreInstitucion = error.response.data.errors.nombreInstitucion[0];\r\n                        me.errors.telefonoInstitucion = error.response.data.errors.telefonoInstitucion[0];\r\n                        me.errors.direccionInstitucion = error.response.data.errors.direccionInstitucion[0];\r\n                        me.errors.solicitudInstitucion = error.response.data.errors.solicitudInstitucion[0];\r\n                        me.errors.vendedorInstitucion = error.response.data.errors.vendedorInstitucion[0];\r\n                        me.errors.periodoescolar = error.response.data.errors.periodoescolar[0];\r\n                        me.errors.ciudad_id = error.response.data.errors.ciudad_id[0];\r\n                        me.errors.region_idregion = error.response.data.errors.region_idregion[0];\r\n                    }\r\n                })\r\n        },\r\n        async getVendedor() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'vendedor')\r\n                .then(function (response) {\r\n                    me.vendedor = response.data;\r\n                    // console.log(me.vendedor);\r\n                })\r\n                .catch(function (error) {})\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.add-new-data-sidebar {\r\n    ::v-deep .vs-sidebar--background {\r\n        z-index: 52010;\r\n    }\r\n\r\n    ::v-deep .vs-sidebar {\r\n        z-index: 52010;\r\n        width: 50%;\r\n        max-width: 50%;\r\n\r\n        .img-upload {\r\n            margin-top: 2rem;\r\n\r\n            .con-img-upload {\r\n                padding: 0;\r\n            }\r\n\r\n            .con-input-upload {\r\n                width: 100%;\r\n                margin: 0;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.scroll-area--data-list-add-new {\r\n    // height: calc(var(--vh, 1vh) * 100 - 4.3rem);\r\n    height: calc(var(--vh, 1vh) * 100 - 16px - 45px - 82px);\r\n\r\n    &:not(.ps) {\r\n        overflow-y: auto;\r\n    }\r\n}\r\n</style>\r\n"]}]}