{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\diagnostico\\admin\\ResultadoPreguntas.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\diagnostico\\admin\\ResultadoPreguntas.vue","mtime":1712682815723},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n  import TableSelectInstitucion from '../../usuarios/GestionEstudiantes/components/TableSelectInstitucion.vue'\r\n  import TableUsuario from './components/TableUsuario.vue'\r\n  import TableMateria from './components/TableMateria.vue'\r\n  import vSelect from 'vue-select'\r\n  export default {\r\n    components: {\r\n      vSelect,\r\n      TableSelectInstitucion,\r\n      TableUsuario,\r\n      TableMateria,\r\n    },\r\n    data () {\r\n      return {\r\n        changeInstitucion:false,\r\n        institucion_id:0,\r\n        error:false,\r\n        statusPeriodo:0,\r\n        periodo_id:0,\r\n        arregloEstudiantes:[],\r\n        libros:[],\r\n        arreglocodigosMateria:[],\r\n        datosExportar:[],\r\n        menu:0,\r\n        title:'Filtro general',\r\n        txtlibro:'',\r\n      }\r\n    },\r\n    created(){\r\n      let me = this\r\n      this.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n      me.getLibros()\r\n      if(me.usuario.id_group == 6) {\r\n        me.institucion_id = me.usuario.institucion_idInstitucion\r\n        me.periodo_id     = localStorage.periodo_id\r\n      }\r\n    },\r\n    mounted(){\r\n      let me = this;\r\n      if(me.usuario.id_group == 6) me.getEstudiantes()\r\n    },\r\n    watch:{\r\n      institucion_id(results){\r\n        let me = this\r\n        me.arregloEstudiantes = []\r\n        me.datosExportar = []\r\n        me.arreglocodigosMateria = []\r\n        if(results > 0){\r\n          this.getEstudiantes()\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      changeHandle(e){\r\n        let me = this\r\n        let valor = e.change\r\n        if(valor == 'institucion')  me.institucion_id   = e.value\r\n        if(valor == 'noPeriodo')    me.error            = e.value\r\n        if(valor == 'periodo')      me.statusPeriodo    = e.value\r\n        if(valor == 'periodo_id')   me.periodo_id       = e.value\r\n        me.changeInstitucion = false\r\n      },\r\n      getLibros() {\r\n        let me = this;\r\n        var url = \"\"\r\n        if(me.usuario.id_group == 6){\r\n          url = this.$server_url + 'listaLibro?getLibrosDocente=yes&docente_id='+me.usuario.idusuario\r\n        }else{\r\n          url = this.$server_url + 'listaLibro'\r\n        }\r\n        this.$http.get(url)\r\n          .then(function (res) {\r\n            if(me.usuario.id_group == 6){\r\n              me.libros = res.data.filter(p => p.periodo_id == localStorage.periodo_id)\r\n              console.log(\"ee\",me.libros)\r\n            }else{\r\n              me.libros = res.data.libros\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error + ' error');\r\n          })\r\n      },\r\n      getEstudiantes() {\r\n        let me = this;\r\n        me.$vs.loading();\r\n        this.$http.get(this.$server_url+'gestionEstudiante?getEstudiantesInstitucion=yes&institucion_id='+me.institucion_id+'&periodo_id='+me.periodo_id)\r\n        .then(function (res) {\r\n          me.$vs.loading.close()\r\n          me.arregloEstudiantes = res.data\r\n          //GENERAR FORMATO PARA EXPORTAR\r\n          me.arregloEstudiantes.forEach(element => {\r\n            var cal = new Object();\r\n            cal.estudiante                = element.estudiante\r\n            cal.cedula                    = element.cedula\r\n            cal.email                     = element.email\r\n            cal.nombreInstitucion         = element.nombreInstitucion\r\n            cal.contador                  = element.contador\r\n            var contador = 1;\r\n            for (let index = 0; index < element.codigos.length; index++) {\r\n                try {\r\n                  let valor = element.codigos[index].codigo\r\n                  //cal.codigo[contador] = valor\r\n                  eval(\"cal.codigo\" + contador + \"=\" + 'valor');\r\n                } catch (error) {\r\n                  //cal.codigo[contador] = 0\r\n                  eval(\"cal.codigo\" + contador + \"=\" + 0);\r\n                }\r\n                contador++;\r\n            }\r\n            me.datosExportar.push(cal)\r\n          });\r\n        \r\n        })\r\n        .catch(function (error) {\r\n          console.log(error + ' error');\r\n          me.$vs.loading.close()\r\n        })\r\n      },\r\n      verLibrosCodigosMateria(){\r\n        let me = this;\r\n        me.arreglocodigosMateria = []\r\n        if(me.txtlibro == \"\" || me.txtlibro == undefined || me.txtlibro == undefined ){\r\n          me.$vs.notify({\r\n          text:'Debe seleccionar una materia para filtrar',\r\n          color:'warning',\r\n          iconPack: 'feather',\r\n          icon:'icon-check'})\r\n          return\r\n        }\r\n        me.$vs.loading();\r\n        this.$http.get(this.$server_url+'gestionEstudiante?getEstudiantesxMateria=yes&institucion_id='+me.institucion_id+'&periodo_id='+me.periodo_id+'&libro_id='+me.txtlibro)\r\n        .then(function (res) {\r\n          me.$vs.loading.close()\r\n          if(res.data.status == 0){\r\n            me.$vs.notify({\r\n            text:res.data.message,\r\n            color:'warning',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n          }\r\n          me.arreglocodigosMateria = res.data\r\n\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error + ' error');\r\n          me.$vs.loading.close()\r\n        })\r\n      },\r\n    }\r\n  }\r\n  ",{"version":3,"sources":["ResultadoPreguntas.vue"],"names":[],"mappings":";AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResultadoPreguntas.vue","sourceRoot":"src/views/diagnostico/admin","sourcesContent":["<template>\r\n    <vx-card\r\n    v-if=\"usuario.id_group == 1 || usuario.id_group == 11  || usuario.id_group == 6\"\r\n    style=\"min-height: 100vh;\"\r\n    title=\"Gestión de códigos y pruebas de diagnóstico\"\r\n    title-color=\"primary\"\r\n    subtitle=\"Aqui podra ver cuantos códigos ha ingresado el estudiante y cuales son\"\r\n    >\r\n      <div style=\"margin-top:-20px;\" align=\"left\" v-if=\"usuario.id_group != 6\">\r\n        <vs-divider></vs-divider>\r\n        <small  v-if=\"usuario.id_group == 1\" align=\"left\">Ruta: /diagnostico/preguntas</small>\r\n        <vs-list-header icon=\"supervisor_account\" title=\"Seleccione una institución para filtrar los estudiantes\"></vs-list-header>\r\n        <TableSelectInstitucion @change=\"changeHandle\" class=\"mt-1\"/>\r\n      </div>\r\n      <div class=\"btn-group\" style=\"margin-top: -40px;\" v-if=\"usuario.id_group != 6\">\r\n        <vs-button @click=\"menu = 0;title='Filtro general'\"><i class=\"fa-solid fa-filter\"></i> Filtro general</vs-button>\r\n        <vs-button @click=\"menu = 1;title='Filtro por materia'\"><i class=\"fa-regular fa-file-lines\"></i> Filtro por materia</vs-button>\r\n      </div>\r\n      <div class=\"btn-group\" v-if=\"usuario.id_group == 6\">\r\n        <vs-button @click=\"menu = 0;title='Filtro general'\"><i class=\"fa-solid fa-filter\"></i> Filtro general</vs-button>\r\n        <vs-button @click=\"menu = 1;title='Filtro por materia'\"><i class=\"fa-regular fa-file-lines\"></i> Filtro por materia</vs-button>\r\n      </div>\r\n      <vs-divider>{{ title }}</vs-divider>\r\n      <div v-if=\"menu == 0\">\r\n        <TableUsuario :datosExportar=\"datosExportar\" :arregloEstudiantes=\"arregloEstudiantes\" :institucion_id=\"institucion_id\" :periodo_id=\"periodo_id\"/>\r\n      </div>\r\n      <div v-if=\"menu == 1\">\r\n        <div class=\"vx-row mb-6\">\r\n          <div class=\"vx-col sm:w-1/3 w-full\">\r\n            <span>Seleccione la materia</span>\r\n          </div>\r\n          <div class=\"vx-col sm:w-2/3 w-full\">\r\n            <v-select :options=\"libros\" @input=\"verLibrosCodigosMateria()\" :disabled=\"books\" id=\"books\" :reduce=\"libros => libros.idlibro\" label=\"nombrelibro\" class=\"w-full\" v-model=\"txtlibro\" />\r\n          </div>\r\n        </div>\r\n        <TableMateria :arregloCodigos=\"arreglocodigosMateria\"/>\r\n      </div>\r\n    </vx-card>\r\n  </template>\r\n  <script>\r\n  import TableSelectInstitucion from '../../usuarios/GestionEstudiantes/components/TableSelectInstitucion.vue'\r\n  import TableUsuario from './components/TableUsuario.vue'\r\n  import TableMateria from './components/TableMateria.vue'\r\n  import vSelect from 'vue-select'\r\n  export default {\r\n    components: {\r\n      vSelect,\r\n      TableSelectInstitucion,\r\n      TableUsuario,\r\n      TableMateria,\r\n    },\r\n    data () {\r\n      return {\r\n        changeInstitucion:false,\r\n        institucion_id:0,\r\n        error:false,\r\n        statusPeriodo:0,\r\n        periodo_id:0,\r\n        arregloEstudiantes:[],\r\n        libros:[],\r\n        arreglocodigosMateria:[],\r\n        datosExportar:[],\r\n        menu:0,\r\n        title:'Filtro general',\r\n        txtlibro:'',\r\n      }\r\n    },\r\n    created(){\r\n      let me = this\r\n      this.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n      me.getLibros()\r\n      if(me.usuario.id_group == 6) {\r\n        me.institucion_id = me.usuario.institucion_idInstitucion\r\n        me.periodo_id     = localStorage.periodo_id\r\n      }\r\n    },\r\n    mounted(){\r\n      let me = this;\r\n      if(me.usuario.id_group == 6) me.getEstudiantes()\r\n    },\r\n    watch:{\r\n      institucion_id(results){\r\n        let me = this\r\n        me.arregloEstudiantes = []\r\n        me.datosExportar = []\r\n        me.arreglocodigosMateria = []\r\n        if(results > 0){\r\n          this.getEstudiantes()\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      changeHandle(e){\r\n        let me = this\r\n        let valor = e.change\r\n        if(valor == 'institucion')  me.institucion_id   = e.value\r\n        if(valor == 'noPeriodo')    me.error            = e.value\r\n        if(valor == 'periodo')      me.statusPeriodo    = e.value\r\n        if(valor == 'periodo_id')   me.periodo_id       = e.value\r\n        me.changeInstitucion = false\r\n      },\r\n      getLibros() {\r\n        let me = this;\r\n        var url = \"\"\r\n        if(me.usuario.id_group == 6){\r\n          url = this.$server_url + 'listaLibro?getLibrosDocente=yes&docente_id='+me.usuario.idusuario\r\n        }else{\r\n          url = this.$server_url + 'listaLibro'\r\n        }\r\n        this.$http.get(url)\r\n          .then(function (res) {\r\n            if(me.usuario.id_group == 6){\r\n              me.libros = res.data.filter(p => p.periodo_id == localStorage.periodo_id)\r\n              console.log(\"ee\",me.libros)\r\n            }else{\r\n              me.libros = res.data.libros\r\n            }\r\n          })\r\n          .catch(function (error) {\r\n            console.log(error + ' error');\r\n          })\r\n      },\r\n      getEstudiantes() {\r\n        let me = this;\r\n        me.$vs.loading();\r\n        this.$http.get(this.$server_url+'gestionEstudiante?getEstudiantesInstitucion=yes&institucion_id='+me.institucion_id+'&periodo_id='+me.periodo_id)\r\n        .then(function (res) {\r\n          me.$vs.loading.close()\r\n          me.arregloEstudiantes = res.data\r\n          //GENERAR FORMATO PARA EXPORTAR\r\n          me.arregloEstudiantes.forEach(element => {\r\n            var cal = new Object();\r\n            cal.estudiante                = element.estudiante\r\n            cal.cedula                    = element.cedula\r\n            cal.email                     = element.email\r\n            cal.nombreInstitucion         = element.nombreInstitucion\r\n            cal.contador                  = element.contador\r\n            var contador = 1;\r\n            for (let index = 0; index < element.codigos.length; index++) {\r\n                try {\r\n                  let valor = element.codigos[index].codigo\r\n                  //cal.codigo[contador] = valor\r\n                  eval(\"cal.codigo\" + contador + \"=\" + 'valor');\r\n                } catch (error) {\r\n                  //cal.codigo[contador] = 0\r\n                  eval(\"cal.codigo\" + contador + \"=\" + 0);\r\n                }\r\n                contador++;\r\n            }\r\n            me.datosExportar.push(cal)\r\n          });\r\n        \r\n        })\r\n        .catch(function (error) {\r\n          console.log(error + ' error');\r\n          me.$vs.loading.close()\r\n        })\r\n      },\r\n      verLibrosCodigosMateria(){\r\n        let me = this;\r\n        me.arreglocodigosMateria = []\r\n        if(me.txtlibro == \"\" || me.txtlibro == undefined || me.txtlibro == undefined ){\r\n          me.$vs.notify({\r\n          text:'Debe seleccionar una materia para filtrar',\r\n          color:'warning',\r\n          iconPack: 'feather',\r\n          icon:'icon-check'})\r\n          return\r\n        }\r\n        me.$vs.loading();\r\n        this.$http.get(this.$server_url+'gestionEstudiante?getEstudiantesxMateria=yes&institucion_id='+me.institucion_id+'&periodo_id='+me.periodo_id+'&libro_id='+me.txtlibro)\r\n        .then(function (res) {\r\n          me.$vs.loading.close()\r\n          if(res.data.status == 0){\r\n            me.$vs.notify({\r\n            text:res.data.message,\r\n            color:'warning',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n          }\r\n          me.arreglocodigosMateria = res.data\r\n\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error + ' error');\r\n          me.$vs.loading.close()\r\n        })\r\n      },\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style scoped>\r\n  </style>\r\n  "]}]}