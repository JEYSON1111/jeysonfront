{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\documentosMinisterio\\nuevoDocumento.vue?vue&type=style&index=0&id=6a4ede18&lang=css","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\documentosMinisterio\\nuevoDocumento.vue","mtime":1712682815809},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n/* input[type=\"file\"] {\r\n    display: none;\r\n} */\r\n\r\n.text-danger {\r\n    font-size: 11px;\r\n}\r\n\r\n.borde-unidad {\r\n    border: 1px dashed rgb(32, 32, 32);\r\n    /* display: inline-block; */\r\n    padding: 6px;\r\n    cursor: pointer;\r\n}\r\n",{"version":3,"sources":["nuevoDocumento.vue"],"names":[],"mappings":";AA+KA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"nuevoDocumento.vue","sourceRoot":"src/views/documentosMinisterio","sourcesContent":["<template>\r\n<div class=\"vx-col md:w-full w-full mb-base h-screen\">\r\n    <vx-card class=\"h-full\">\r\n        <div class=\"vx-row mt-4\">\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Nombre: </div>\r\n                <vs-input type=\"text\" class=\"inputx w-full mb-6\" v-model=\"documento.nombre\" maxlength=\"100\" placeholder=\"Nombre del documento\" />\r\n            </div>\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Descripción: </div>\r\n                <vs-input type=\"text\" class=\"inputx w-full mb-6\" v-model=\"documento.descripcion\" maxlength=\"100\" placeholder=\"Descripción del documento\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row mb-4\">\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Asignaturas: </div>\r\n                <v-select multiple class=\"w-full\" v-model=\"asignatura\" :options=\"asignaturas\" :dir=\"$vs.rtl ? 'rtl' : 'ltr'\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row mb-4\">\r\n            <div class=\"vx-col sm:w-1/2 lg:w-1/2 w-full\" align=\"left\">\r\n                <div style=\"font-size: 12px; \">Estado: </div>\r\n                <vs-switch v-model=\"documento.status\"></vs-switch>\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-col w-full h-64 borde-unidad\">\r\n            <FilePond class=\"h-64\" label-idle=\"Suelta los archivos aquí...\" max-files=\"4\" v-bind:allow-multiple=\"true\" :chunkUploads=\"false\" :chunkForce=\"false\" :onprocessfilestart=\"onprocessfilestart\" chunkRetryDelays=\"[100,100,100]\" chunkSize=\"100\" @onUpdateFiles=\"onUpdateFiles\" @progressfiles=\"resp\" :server=\"$data_url+'api/uploadDocuemntos'\" @init=\"handleFilePondInit\" :storeAsFile=\"true\" :onprocessfile=\"onprocessfile\" />\r\n        </div>\r\n        <vs-button class=\"mt-12\" color=\"success\" @click=\"agregarDocumento()\">Guardar</vs-button>\r\n    </vx-card>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport historicoMixin from \"@/mixins/historicomix\";\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nimport vueFilePond from \"vue-filepond\";\r\nimport \"filepond/dist/filepond.min.css\";\r\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css\";\r\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type\";\r\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview\";\r\nconst FilePond = vueFilePond(\r\n    FilePondPluginFileValidateType,\r\n    FilePondPluginImagePreview\r\n);\r\nexport default {\r\n    components: {\r\n        FilePond,\r\n        'v-select': vSelect,\r\n    },\r\n    mixins: [historicoMixin],\r\n    data() {\r\n        return {\r\n            myFiles: [],\r\n            formData: {\r\n                company: null\r\n            },\r\n            asignatura:[],\r\n            long_name_file: 25, //longitud del nombre de archivo a mostrar\r\n            limiteMegas: 5, //maximo de megas permitido a subir en cada archivo\r\n            bytes: 1048576,\r\n            msjError: 'El peso del archivo excede el limite permitido, verifique antes de continuar',\r\n            tipo_archivo: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/msword',\r\n            porcentaje: '',\r\n            pesoArchivo: '',\r\n            muyPesado: '',\r\n            file: '',\r\n            msj: '',\r\n            documento: {\r\n                'nombre': '',\r\n                'descripcion': '',\r\n                'asignaturas': [],\r\n                'status': false,\r\n            },\r\n            archivos: [],\r\n            usuario: [],\r\n            asignaturas: [],\r\n            grupo_usuario: '',\r\n            miusuario: '',\r\n        }\r\n    },\r\n    mounted() {\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n        me.miusuario = me.usuario\r\n        me.grupo_usuario = me.miusuario.id_group;\r\n        this.getAsignaturas()\r\n    },\r\n    methods: {\r\n        onprocessfile(error, file) {\r\n            this.myFiles.push(JSON.parse(file.serverId))\r\n            console.log(this.myFiles)\r\n        },\r\n        onprocessfilestart(file) {\r\n            console.log(\"upload\");\r\n            this.disable = true\r\n            this.isActive = true\r\n        },\r\n        onUpdateFiles(file) {\r\n            this.formData.image = file;\r\n        },\r\n        handleFilePondInit: function () {\r\n            console.log(\"FilePond has initialized\");\r\n        },\r\n        resp(r) {\r\n            console.log(r)\r\n            console.log(\"hi\")\r\n        },\r\n        getAsignaturas(){\r\n            let me = this\r\n            this.$http.get(this.$server_url+'asignaturasDoc/0').then(res => {\r\n                me.asignaturas = res.data;\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n        },\r\n        cargaArchivo() {\r\n            let me = this;\r\n            me.msj = '';\r\n            me.porcentaje = 0;\r\n            me.pesoArchivo = 0;\r\n            me.muyPesado = false;\r\n            me.file = me.$refs.file.files[0];\r\n            me.pesoArchivo = (me.file.size / me.bytes).toFixed(2);\r\n            if (me.pesoArchivo > me.limiteMegas) {\r\n                me.muyPesado = true;\r\n                me.msj = me.msjError;\r\n            }\r\n        },\r\n        agregarDocumento() {\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.documento.files = this.myFiles\r\n            this.documento.asignaturas = this.asignatura\r\n            this.$http.post(this.$server_url + 'document', this.documento)\r\n                .then(function (response) {\r\n                    console.log(response.data)\r\n                    me.$vs.loading.close()\r\n                    let id_created = response.data.id \r\n                    let tipo = \"Documento Ministerial\"\r\n                    let descripcion = me.documento.nombre +' creado'\r\n                    me.saveNotifications(me.usuario.idusuario,id_created,tipo,descripcion)\r\n                    me.$router.push('/admin/documentosAdmin');\r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n\r\n                })\r\n\r\n        },\r\n        openConfirmEliminar(item) {\r\n            let me = this;\r\n            console.log(item)\r\n            me.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                text: '¿Está seguro en eliminar este archivo?',\r\n                acceptText: 'Aceptar',\r\n                cancelText: 'Cancelar',\r\n                accept: me.eliminarAdaptacion\r\n            })\r\n        },\r\n        voler() {\r\n            let me = this;\r\n            me.$router.go(-1);\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* input[type=\"file\"] {\r\n    display: none;\r\n} */\r\n\r\n.text-danger {\r\n    font-size: 11px;\r\n}\r\n\r\n.borde-unidad {\r\n    border: 1px dashed rgb(32, 32, 32);\r\n    /* display: inline-block; */\r\n    padding: 6px;\r\n    cursor: pointer;\r\n}\r\n</style>\r\n"]}]}