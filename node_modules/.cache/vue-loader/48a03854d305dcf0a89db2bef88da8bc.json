{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\alcance\\listadoAlcance.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\alcance\\listadoAlcance.vue","mtime":1712682816246},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport {\r\n    mapState\r\n} from \"vuex\";\r\nconst resumenLibrosVue = () => import('./resumenLibros.vue')\r\nconst ScreenAlcanceVue = () => import('./ScreenAlcance.vue')\r\nconst exportAlcanceVue = () => import('@/views/temporadas/components/exportAlcance')\r\nimport PedidosRepository from \"../../../repositories/PedidosRepository\";\r\nexport default{\r\n    components:{\r\n        resumenLibrosVue,\r\n        ScreenAlcanceVue,\r\n        exportAlcanceVue,\r\n    },\r\n    data(){\r\n        return{\r\n          usuario:[],\r\n          arregloAlcance:[],\r\n          alcance:{},\r\n          pedido:{},\r\n          menu:0,\r\n          popupCarga:false,\r\n          popupReporteAlcance:false,\r\n          tipoFile:0,\r\n          sendPedido:'',\r\n        }\r\n    },\r\n    computed:{\r\n    ...mapState([\"auth\",'userRoot','susuario','ObjectPedido','groupFacturador','userAsesor']),\r\n    },\r\n    created(){\r\n        let me = this\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.sendPedido               = me.ObjectPedido\r\n        me.pedido.id_pedido         = me.sendPedido.id_pedido\r\n        me.getAlcance(0)\r\n    },\r\n    methods:{\r\n        getAlcance(tipo){\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'getAlcancePedido?id_pedido='+me.pedido.id_pedido)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                me.arregloAlcance = res.data\r\n                if(tipo == 1){\r\n                    let datos  = res.data.filter(p => p.estado_alcance == 0)\r\n                    me.alcance = datos[0]\r\n                    me.menu = 3\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n                me.$vs.loading.close()\r\n            })\r\n        },\r\n        mostrarResumen(tr){\r\n            let me = this;\r\n            me.menu = 2\r\n        },\r\n        eliminarAlcance(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('id',           me.alcance.id);\r\n            formData.append('id_pedido',    me.pedido.id_pedido);\r\n            me.$vs.loading();\r\n            this.$http.post(this.$server_url+'eliminarAlcance', formData)\r\n                .then(function (res) {\r\n                    me.$vs.loading.close()\r\n                    me.$vs.notify({\r\n                        text: 'Se elimino correctamente el alcance',\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    me.getAlcance()\r\n                    me.menu = 0\r\n                })\r\n                .catch(function (error) {  me.$vs.loading.close() })\r\n        },\r\n        async guardarAlcance(){\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('id',                 0)\r\n            formData.append('id_periodo',         me.sendPedido.id_periodo);\r\n            formData.append('id_pedido',          me.pedido.id_pedido);\r\n            formData.append('venta_bruta',        0);\r\n            formData.append('total_unidades',     0);\r\n            formData.append('pendiente_liquidar', 0);\r\n            this.$http.post(this.$server_url+'guardarValorAlcance', formData)\r\n            .then(function (res) {\r\n                if(res.data.status == 0){\r\n                    me.$vs.notify({\r\n                    text: res.data.message,\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle',\r\n                    time:7000,\r\n                    })\r\n                    return\r\n                }\r\n                me.$vs.notify({\r\n                text: 'Se guardo correctamente',\r\n                color: 'primary',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n                })\r\n                me.getAlcance(1)\r\n            })\r\n            .catch(function (error) {})\r\n        },\r\n        CambiarEstadoAlcance(tr,estado){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('id',      tr.id);\r\n            formData.append('estado_alcance', estado);\r\n            me.$vs.loading();\r\n            this.$http.post(this.$server_url+'changeEstadoAlcance', formData)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                if(res.data.status == 0){\r\n                me.$vs.notify({\r\n                    text: res.data.message,\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n                }\r\n                me.$vs.notify({\r\n                text: res.data.message,\r\n                color: 'primary',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n                })\r\n                me.getAlcance(0)\r\n            })\r\n            .catch(function (error) { me.$vs.loading.close() })\r\n        },\r\n        openConfirmAlcance(){\r\n        this.$vs.dialog({\r\n            type:'confirm',\r\n            color: 'danger',\r\n            title: `Confirmar`,\r\n            acceptText:'Si, deseo aceptar el alcance',\r\n            cancelText:'Cancelar',\r\n            text: 'Estas seguro de aceptar el alcance al hacerlo se guardara en facturación',\r\n            accept:this.aceptarAlcance\r\n        })\r\n        },\r\n        aceptarAlcance(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('id_alcance',   me.alcance.id);\r\n            formData.append('contrato',     me.alcance.contrato_generado);\r\n            formData.append('id_pedido',    me.alcance.id_pedido);\r\n            formData.append('ventaBruta',   me.alcance.venta_bruta);\r\n            formData.append('user_created', me.usuario.idusuario);\r\n            me.$vs.loading();\r\n            this.$http.post(this.$server_url+'AceptarAlcance', formData)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                if(res.data.status == 0){\r\n                me.$vs.notify({\r\n                    text: res.data.message,\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n                }\r\n                me.$vs.notify({\r\n                text: 'Se guardo correctamente',\r\n                color: 'primary',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n                })\r\n                me.getAlcance(0)\r\n                me.rechargePedido()\r\n            })\r\n            .catch(function (error) { me.$vs.loading.close() })\r\n        },\r\n        rechargePedido(){\r\n          let me = this\r\n          PedidosRepository.getPedidoXID(me.sendPedido.id_pedido).then(r => { this.$store.dispatch('setPedido',r.data[0]); })\r\n        },\r\n      realizarReporte(tipo){\r\n        let me = this;\r\n        me.tipoFile            = tipo\r\n        me.popupCarga          = true\r\n        me.popupReporteAlcance = true\r\n      },\r\n      changeHandle(e){\r\n        let me = this;\r\n        me.popupCarga             = false\r\n        me.popupReporteAlcance    = false\r\n      },\r\n    }\r\n\r\n}\r\n",{"version":3,"sources":["listadoAlcance.vue"],"names":[],"mappings":";AAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"listadoAlcance.vue","sourceRoot":"src/views/pedidos/alcance","sourcesContent":["<template>\r\n    <vx-card \r\n    :title=\"'Alcance del Pedido # '+pedido.id_pedido\"\r\n    class=\"mt-3\">\r\n        <div v-if=\"menu == 0\">\r\n            <div class=\"flex\">\r\n                <vs-button color=\"dark\" v-if=\"usuario.id_group == 11\" @click=\"guardarAlcance()\" size=\"small\"  icon=\"save\" type=\"filled\">Crear alcance</vs-button>\r\n            </div>\r\n            <vs-table max-items=\"10\" stripe search pagination :data=\"arregloAlcance\">\r\n                <template slot=\"header\">\r\n                    <vs-chip  color=\"primary\">Cantidad: {{ arregloAlcance.length }}</vs-chip>\r\n                </template>\r\n                <template slot=\"thead\">\r\n                    <vs-th>Alcance ID#</vs-th>\r\n                    <vs-th>Venta bruta</vs-th>\r\n                    <vs-th>Comentario</vs-th>\r\n                    <vs-th>Estado</vs-th>\r\n                    <vs-th>Acciones</vs-th>\r\n                </template>\r\n                <template slot-scope=\"{data}\">\r\n                    <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                        <vs-td width=\"15%\">\r\n                            #{{data[indextr].id}}<br>\r\n                            <small>{{ tr.contrato_generado }}</small>\r\n                            <br>\r\n                            <small>{{ tr.nombreInstitucion }}</small>\r\n                        </vs-td>\r\n                        <vs-td  width=\"20%\">\r\n                          <b>Venta bruta:</b>\r\n                          <p>{{data[indextr].venta_bruta}}</p>\r\n                          <br>\r\n                          <b>Total unidades:</b>\r\n                          <p>{{data[indextr].total_unidades}}</p>\r\n                        </vs-td>\r\n                        <vs-td height=\"40%\" width=\"40%\">\r\n                          <div class=\"overflow-y-auto h-24\">\r\n                             {{ tr.observacion_asesor }}\r\n                          </div>\r\n                        </vs-td>\r\n                        <vs-td width=\"10%\">\r\n                            <div v-if=\"tr.estado_alcance == 0\">\r\n                                <vs-chip color=\"primary\" transparent>Abierto</vs-chip>\r\n                            </div>\r\n                            <div v-if=\"tr.estado_alcance == 1\">\r\n                                <vs-chip color=\"success\" transparent>Cerrado/aceptado</vs-chip>\r\n                            </div>\r\n                            <div v-if=\"tr.estado_alcance == 2\">\r\n                                <vs-chip color=\"danger\" transparent>Rechazado</vs-chip>\r\n                            </div>\r\n                        </vs-td>\r\n                        <vs-td width=\"30%\">\r\n                          <vs-dropdown vs-custom-content vs-trigger-click>\r\n                            <vs-button class=\"a-icons\" href.prevent icon=\"more_vert\" type=\"border\"></vs-button>\r\n                            <vs-dropdown-menu style=\"width: 250px;\" class=\"cursor\">\r\n                              <div>\r\n                                <vs-dropdown-item v-if=\"tr.estado_alcance == 0 && ( usuario.id_group == 22 ||  usuario.id_group == 23 )\">\r\n                                  <!--ACEPTAR ALCANCE-->\r\n                                  <vs-button class=\"w-full\" color=\"success\" @click=\"alcance=tr;openConfirmAlcance(tr)\"  icon-pack=\"feather\" icon=\"icon-check\" type=\"line\" > Aceptar alcance </vs-button>\r\n                                </vs-dropdown-item>\r\n                                <vs-dropdown-item v-if=\"tr.estado_alcance == 0 && ( usuario.id_group == 22 ||  usuario.id_group == 23 )\">\r\n                                  <!--RECHAZAR ALCANCE-->\r\n                                  <vs-button  color=\"warning\" type=\"line\"  icon-pack=\"feather\" icon=\"icon-x\" @click=\"CambiarEstadoAlcance(tr,2)\" class=\"w-full text-normal p-2\">Rechazar alcance</vs-button>\r\n                                </vs-dropdown-item>\r\n                                <vs-dropdown-item v-if=\"tr.estado_alcance == 0\">\r\n                                  <!--MOSTRAR /REGISTRAR LIBROS-->\r\n                                  <vs-button color=\"success\" type=\"line\" icon-pack=\"feather\" icon=\"icon-book\" class=\"w-full\" @click=\"alcance=tr;menu = 3\">{{ usuario.id_group == '11' ? 'Registrar':'Mostrar'}} libros</vs-button>\r\n                                </vs-dropdown-item>\r\n                                <vs-dropdown-item>\r\n                                  <!--RESUMEN LIBROS-->\r\n                                  <vs-button color=\"primary\" type=\"line\"  icon-pack=\"feather\" icon=\"icon-bookmark\" class=\"w-full\" @click=\"alcance=tr;mostrarResumen(tr)\">Resumen libros</vs-button>\r\n                                </vs-dropdown-item>\r\n                                <vs-dropdown-item>\r\n                                  <!--REPORTE PDF-->\r\n                                  <vs-button color=\"dark\" type=\"line\" icon-pack=\"feather\" icon=\"icon-printer\" class=\"w-full\" @click=\"alcance=tr;realizarReporte(1)\">Reporte Pdf</vs-button>\r\n                                </vs-dropdown-item>\r\n                                <vs-dropdown-item v-if=\"tr.estado_alcance == 0\">\r\n                                  <!--ELIMINAR-->\r\n                                  <vs-button color=\"danger\" icon-pack=\"feather\" icon=\"icon-trash\" type=\"line\" class=\"w-full\" @click=\"alcance=tr;menu = 1\" v-if=\"usuario.id_group == 11 && (tr.estado_alcance == 0 || tr.estado_alcance == 2)\">Eliminar</vs-button>\r\n                                </vs-dropdown-item>\r\n                              </div>\r\n                            </vs-dropdown-menu>\r\n                          </vs-dropdown>\r\n                        </vs-td>\r\n                    </vs-tr>\r\n                </template>\r\n            </vs-table>\r\n        </div>\r\n        <div v-if=\"menu == 1\">\r\n            <p class=\"text-danger font-bold text-center\">Estas seguro de  querer eliminar el alcance?</p>\r\n            <div class=\"flex justify-center\">\r\n                <p class=\"mt-1\"></p>\r\n                <vs-button color=\"danger\" @click=\"eliminarAlcance()\" type=\"border\" icon=\"delete\">Si deseo, eliminar</vs-button>\r\n                <vs-button color=\"primary\" @click=\"menu = 0;\" class=\"ml-3\" type=\"filled\" icon=\"close\">Cancelar</vs-button>\r\n            </div>\r\n        </div>\r\n        <!--RESUMEN LIBROS-->\r\n        <div v-if=\"menu == 2\">\r\n            <vs-button color=\"primary\" type=\"border\" @click=\"menu = 0;\">← Regresar</vs-button>\r\n            <resumenLibrosVue :alcance=\"alcance\"/>\r\n        </div>\r\n        <!--REGISTRAR LIBROS-->\r\n        <div v-if=\"menu == 3\">\r\n            <vs-button color=\"primary\" type=\"border\" @click=\"menu = 0;getAlcance(0)\">← Regresar</vs-button>\r\n            <ScreenAlcanceVue :alcance=\"alcance\" class=\"mt-2\" :sendPedido=\"sendPedido\" :userRoot=\"Boolean(userRoot)\"/>\r\n        </div>\r\n        <!--REPORTE-->\r\n        <div v-if=\"popupReporteAlcance\">\r\n          <exportAlcanceVue  style=\"display:none;\" :tipoFile=\"tipoFile\" :alcance=\"alcance\" @change=\"changeHandle\" />\r\n        </div>\r\n        <!--MODALES-->\r\n        <vs-popup class=\"holamundo\" title=\"Cargando\" :active.sync=\"popupCarga\">\r\n          <p class=\"text-warning text-3xl bg-dark\"><i class=\"fa-solid fa-cloud\"></i> <b class=\"ml-2\">Espere mientras se descarga el archivo</b></p>\r\n          <img  class=\"mt-2\"  style=\"margin-left: 35px;\" src=\"https://cdn-icons-png.flaticon.com/512/4578/4578845.png\"/>\r\n        </vs-popup>\r\n    </vx-card>\r\n</template>\r\n<script>\r\nimport {\r\n    mapState\r\n} from \"vuex\";\r\nconst resumenLibrosVue = () => import('./resumenLibros.vue')\r\nconst ScreenAlcanceVue = () => import('./ScreenAlcance.vue')\r\nconst exportAlcanceVue = () => import('@/views/temporadas/components/exportAlcance')\r\nimport PedidosRepository from \"../../../repositories/PedidosRepository\";\r\nexport default{\r\n    components:{\r\n        resumenLibrosVue,\r\n        ScreenAlcanceVue,\r\n        exportAlcanceVue,\r\n    },\r\n    data(){\r\n        return{\r\n          usuario:[],\r\n          arregloAlcance:[],\r\n          alcance:{},\r\n          pedido:{},\r\n          menu:0,\r\n          popupCarga:false,\r\n          popupReporteAlcance:false,\r\n          tipoFile:0,\r\n          sendPedido:'',\r\n        }\r\n    },\r\n    computed:{\r\n    ...mapState([\"auth\",'userRoot','susuario','ObjectPedido','groupFacturador','userAsesor']),\r\n    },\r\n    created(){\r\n        let me = this\r\n        me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.sendPedido               = me.ObjectPedido\r\n        me.pedido.id_pedido         = me.sendPedido.id_pedido\r\n        me.getAlcance(0)\r\n    },\r\n    methods:{\r\n        getAlcance(tipo){\r\n            let me = this;\r\n            me.$vs.loading();\r\n            this.$http.get(this.$server_url+'getAlcancePedido?id_pedido='+me.pedido.id_pedido)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                me.arregloAlcance = res.data\r\n                if(tipo == 1){\r\n                    let datos  = res.data.filter(p => p.estado_alcance == 0)\r\n                    me.alcance = datos[0]\r\n                    me.menu = 3\r\n                }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error + ' error');\r\n                me.$vs.loading.close()\r\n            })\r\n        },\r\n        mostrarResumen(tr){\r\n            let me = this;\r\n            me.menu = 2\r\n        },\r\n        eliminarAlcance(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('id',           me.alcance.id);\r\n            formData.append('id_pedido',    me.pedido.id_pedido);\r\n            me.$vs.loading();\r\n            this.$http.post(this.$server_url+'eliminarAlcance', formData)\r\n                .then(function (res) {\r\n                    me.$vs.loading.close()\r\n                    me.$vs.notify({\r\n                        text: 'Se elimino correctamente el alcance',\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    me.getAlcance()\r\n                    me.menu = 0\r\n                })\r\n                .catch(function (error) {  me.$vs.loading.close() })\r\n        },\r\n        async guardarAlcance(){\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('id',                 0)\r\n            formData.append('id_periodo',         me.sendPedido.id_periodo);\r\n            formData.append('id_pedido',          me.pedido.id_pedido);\r\n            formData.append('venta_bruta',        0);\r\n            formData.append('total_unidades',     0);\r\n            formData.append('pendiente_liquidar', 0);\r\n            this.$http.post(this.$server_url+'guardarValorAlcance', formData)\r\n            .then(function (res) {\r\n                if(res.data.status == 0){\r\n                    me.$vs.notify({\r\n                    text: res.data.message,\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle',\r\n                    time:7000,\r\n                    })\r\n                    return\r\n                }\r\n                me.$vs.notify({\r\n                text: 'Se guardo correctamente',\r\n                color: 'primary',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n                })\r\n                me.getAlcance(1)\r\n            })\r\n            .catch(function (error) {})\r\n        },\r\n        CambiarEstadoAlcance(tr,estado){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('id',      tr.id);\r\n            formData.append('estado_alcance', estado);\r\n            me.$vs.loading();\r\n            this.$http.post(this.$server_url+'changeEstadoAlcance', formData)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                if(res.data.status == 0){\r\n                me.$vs.notify({\r\n                    text: res.data.message,\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n                }\r\n                me.$vs.notify({\r\n                text: res.data.message,\r\n                color: 'primary',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n                })\r\n                me.getAlcance(0)\r\n            })\r\n            .catch(function (error) { me.$vs.loading.close() })\r\n        },\r\n        openConfirmAlcance(){\r\n        this.$vs.dialog({\r\n            type:'confirm',\r\n            color: 'danger',\r\n            title: `Confirmar`,\r\n            acceptText:'Si, deseo aceptar el alcance',\r\n            cancelText:'Cancelar',\r\n            text: 'Estas seguro de aceptar el alcance al hacerlo se guardara en facturación',\r\n            accept:this.aceptarAlcance\r\n        })\r\n        },\r\n        aceptarAlcance(){\r\n            let me = this;\r\n            let formData = new FormData();\r\n            formData.append('id_alcance',   me.alcance.id);\r\n            formData.append('contrato',     me.alcance.contrato_generado);\r\n            formData.append('id_pedido',    me.alcance.id_pedido);\r\n            formData.append('ventaBruta',   me.alcance.venta_bruta);\r\n            formData.append('user_created', me.usuario.idusuario);\r\n            me.$vs.loading();\r\n            this.$http.post(this.$server_url+'AceptarAlcance', formData)\r\n            .then(function (res) {\r\n                me.$vs.loading.close()\r\n                if(res.data.status == 0){\r\n                me.$vs.notify({\r\n                    text: res.data.message,\r\n                    color: 'warning',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return\r\n                }\r\n                me.$vs.notify({\r\n                text: 'Se guardo correctamente',\r\n                color: 'primary',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n                })\r\n                me.getAlcance(0)\r\n                me.rechargePedido()\r\n            })\r\n            .catch(function (error) { me.$vs.loading.close() })\r\n        },\r\n        rechargePedido(){\r\n          let me = this\r\n          PedidosRepository.getPedidoXID(me.sendPedido.id_pedido).then(r => { this.$store.dispatch('setPedido',r.data[0]); })\r\n        },\r\n      realizarReporte(tipo){\r\n        let me = this;\r\n        me.tipoFile            = tipo\r\n        me.popupCarga          = true\r\n        me.popupReporteAlcance = true\r\n      },\r\n      changeHandle(e){\r\n        let me = this;\r\n        me.popupCarga             = false\r\n        me.popupReporteAlcance    = false\r\n      },\r\n    }\r\n\r\n}\r\n</script>\r\n"]}]}