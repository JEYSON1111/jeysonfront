{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\salle\\administrador\\evaluaciones\\components\\reporte\\detalle\\ReporteAsignaturaSalle.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\salle\\administrador\\evaluaciones\\components\\reporte\\detalle\\ReporteAsignaturaSalle.vue","mtime":1712682816526},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n  import flatPickr from 'vue-flatpickr-component';\r\n  import 'flatpickr/dist/flatpickr.css';\r\n  import vSelect from 'vue-select'\r\n  import ECharts from 'vue-echarts/components/ECharts'\r\n  import 'echarts/lib/component/tooltip'\r\n  import 'echarts/lib/component/legend'\r\n  import 'echarts/lib/chart/bar'\r\n  import 'echarts/lib/chart/radar'\r\n  import 'echarts/lib/chart/pie'\r\n  import theme from '../../../theme.json'\r\n  import VueApexCharts from 'vue-apexcharts'\r\n  ECharts.registerTheme('ovilia-green', theme)\r\nexport default{\r\n  data(){\r\n    return{\r\n      colores: ['#FF9F43','#28C76F','#EA5455','#87ceeb','#7367F0','#28C76F','#EA5455','#87ceeb','#7367F0','#28C76F','#EA5455','#87ceeb','#7367F0','#28C76F','#EA5455','#87ceeb','#7367F0', '#FF9F43','#28C76F','#EA5455','#87ceeb','#7367F0','#28C76F'],\r\n      area_selected:'',\r\n      data_docentes_asignaturas: [],\r\n      key_asignaturas:[],\r\n      barChart: {},\r\n      asignatura_selected:'',\r\n      //variables para exportar a excel\r\n      fileName: null,\r\n      formats: ['xls', 'xlsx', 'csv', 'txt'],\r\n      selectedFormat: 'xls',\r\n      fileNameAs: '',\r\n      activePromptExcelAsignaturas: false,\r\n      //fin variables para exportar a excel\r\n    }\r\n  },\r\n  watch:{\r\n    institucion_selected(results){\r\n      let me = this;\r\n      me.data_docentes_asignaturas  = []\r\n      me.barChart                   = {}\r\n      me.key_asignaturas            = []\r\n    },\r\n    periodoSelect(results){\r\n      let me = this;\r\n      me.data_docentes_asignaturas  = []\r\n      me.barChart                   = {}\r\n      me.key_asignaturas            = []\r\n    }\r\n  },\r\n  props:{\r\n    key_areas:{\r\n      type:Array,\r\n      default:[]\r\n    },\r\n    institucion_selected:{\r\n      type:String,\r\n      default:''\r\n    },\r\n    periodoSelect:{\r\n      type:String,\r\n      default:''\r\n    },\r\n  },\r\n  components:{\r\n    'v-select': vSelect,\r\n    flatPickr,\r\n    ECharts,\r\n    VueApexCharts,\r\n  },\r\n  methods:{\r\n    getPromedioAsignaturas(area){\r\n      let me = this\r\n      me.data_docentes_asignaturas  = []\r\n      me.barChart                   = {}\r\n      me.area_selected              = area.nombre_area\r\n      me.$vs.loading()\r\n      this.$http.get(this.$server_url+'salle_promedio_asignatura/'+me.periodoSelect+'/'+me.institucion_selected.idInstitucion+'/'+area.id_area)\r\n      .then(res => {\r\n        me.data_docentes_asignaturas = res.data.items\r\n        if(me.data_docentes_asignaturas.length == 0){\r\n          return\r\n        }\r\n        me.data_docentes_asignaturas.sort((a, b) => {\r\n          return b.puntaje_evaluacion - a.puntaje_evaluacion;\r\n        });\r\n        let asignaturas = []\r\n        $.each(res.data.items,function(key, value){\r\n          $.each(value.asignaturas,function(keyA, valueA){\r\n              asignaturas.push({nombre_asignatura: valueA.nombre_asignatura, puntaje: valueA.puntaje })\r\n          });\r\n        });\r\n        let asignaturas_agrupadas = []\r\n        asignaturas_agrupadas     = me.groupArrayOfObjects(asignaturas, \"nombre_asignatura\")\r\n        me.key_asignaturas        = []\r\n        let key_asignaturas_1     = []\r\n        $.each(asignaturas_agrupadas,function(key, value){\r\n          //obtener las asignaturas\r\n          key_asignaturas_1.push(key)\r\n          //obtener las asignaturas pero para recorrer con un bucle\r\n          me.key_asignaturas.push(value[0])\r\n        });\r\n        var puntajes_asignaturas  = []\r\n        var nombre_asignaturas    = []\r\n        for( let i=0; i<key_asignaturas_1.length; i++){\r\n          let acum_puntaje = 0\r\n          $.each(asignaturas_agrupadas[key_asignaturas_1[i]],function(key, value){\r\n            acum_puntaje += value.puntaje\r\n          });\r\n          let porcentaje_asignatura = ((acum_puntaje) / ((asignaturas_agrupadas[key_asignaturas_1[i]].length)) ).toFixed(2)\r\n          puntajes_asignaturas.push(porcentaje_asignatura)\r\n          nombre_asignaturas.push(key_asignaturas_1[i])\r\n        }\r\n        me.barChart = {}\r\n        me.barChart = {\r\n          series: [{\r\n            data: puntajes_asignaturas\r\n          }],\r\n          chartOptions: {\r\n            colors: ['#60C1CF', '#28C76F', '#EA5455', '#FF9F43', '#1E1E1E','#7367F0', '#28C76F', '#EA5455', '#FF9F43', '#1E1E1E','#7367F0', '#28C76F', '#EA5455', '#FF9F43', '#1E1E1E'],\r\n            plotOptions: { bar: { horizontal: true, } },\r\n            dataLabels: { enabled: true },\r\n            xaxis: { categories: nombre_asignaturas, }\r\n          }\r\n        }\r\n        me.$vs.loading.close()\r\n      })\r\n      .catch(function (error) {\r\n        me.$vs.loading.close()\r\n        console.log(error);\r\n      })\r\n    },\r\n    groupArrayOfObjects(list, key) {\r\n      return list.reduce(function(rv, x) {\r\n          (rv[x[key]] = rv[x[key]] || []).push(x);\r\n          return rv;\r\n      }, {});\r\n    },\r\n    //METODOS PARA EXPORTAR EXCEL\r\n    exportToExcelAsignaturas() {\r\n      let me = this\r\n      let excel_asignaturas = []\r\n      $.each(me.data_docentes_asignaturas, function(key, value){\r\n        $.each(value.asignaturas,function(keyA, valueA){\r\n            excel_asignaturas.push({ nombre_docente: value.nombre_docente, nombre_asignatura: valueA.nombre_asignatura, puntaje: valueA.puntaje})\r\n        });\r\n      });\r\n      let headerTitle = ['Docente', 'Asignatura', 'Puntaje'];\r\n      let headerVal = ['nombre_docente', 'nombre_asignatura', 'puntaje'];\r\n      import('@/vendor/Export2Excel').then(excel => {\r\n        const list = excel_asignaturas\r\n        const data = this.formatJson(headerVal, list)\r\n        excel.export_json_to_excel({\r\n            header: headerTitle,\r\n            data,\r\n            filename: this.fileNameAs,\r\n            autoWidth: this.cellAutoWidth,\r\n            bookType: this.selectedFormat\r\n        })\r\n      })\r\n    },\r\n    clearFields() {\r\n      this.fileNameAs = ''\r\n      this.cellAutoWidth = true\r\n      this.selectedFormat = 'xls'\r\n    },\r\n    formatJson(filterVal, jsonData) {\r\n      return jsonData.map(v => filterVal.map(j => {\r\n          return v[j]\r\n      }))\r\n    },\r\n  }\r\n}\r\n",{"version":3,"sources":["ReporteAsignaturaSalle.vue"],"names":[],"mappings":";AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReporteAsignaturaSalle.vue","sourceRoot":"src/views/salle/administrador/evaluaciones/components/reporte/detalle","sourcesContent":["<template>\r\n  <div>\r\n    <vx-card class=\"mb-base\" :title=\"'Área: ' + area_selected\" subtitle=\"Seleccione una área para visualizar sus información\">\r\n      <!-- <div class=\"chips_selects\" :style=\"'cursor: pointer; color: white; margin: 3px; padding: 3px 6px 3px 2px; border-radius: 20px; display: inline-block; background-color: '+colores[index]\" :key=\"index\" v-for=\"(chip, index) in key_areas\" @click=\"getPromedioAsignaturas(chip)\">\r\n        <div style=\"font-size: 12px; display: inline-block; background-color: #d5d5d5; border-radius: 100%; width: 27px; padding-top: 5px; padding-bottom: 5px; text-align: center; margin-right: 2px;\"> {{(chip.nombre_area).substr(0,2).toUpperCase()}} </div>\r\n        {{chip.nombre_area}}\r\n      </div> -->\r\n      <div class=\"chips_selects\" :style=\"'cursor: pointer; color: white; margin: 3px; padding: 3px 6px 3px 2px; border-radius: 20px; display: inline-block; background-color: #99A4C9;'\" :key=\"index\" v-for=\"(chip, index) in key_areas\" @click=\"getPromedioAsignaturas(chip)\">\r\n        <div style=\"font-size: 12px; display: inline-block; background-color: #d5d5d5; border-radius: 100%; width: 27px; padding-top: 5px; padding-bottom: 5px; text-align: center; margin-right: 2px;\"> {{(chip.nombre_area).substr(0,2).toUpperCase()}} </div>\r\n        {{chip.nombre_area}}\r\n      </div>\r\n    </vx-card>\r\n    <!--PROMEDIO POR ASIGNATURAS-->\r\n    <vx-card v-if=\"area_selected\" title=\"Promedios por asignaturas\" subtitle=\"Comparación de asignaturas del área seleccionada\" class=\"mb-base\">\r\n      <vue-apex-charts type=\"bar\" height=\"350\" :options=\"barChart.chartOptions\" :series=\"barChart.series\"></vue-apex-charts>\r\n    </vx-card>\r\n    <!--SELECCIONAR REPORTE POR ASIGNATURAS-->\r\n    <!-- <vx-card class=\"mb-base\" :title=\"'Asignatura: ' + asignatura_selected\" subtitle=\"Seleccione una asignatura para visualizar sus información\">\r\n      <div class=\"chips_selects\" :style=\"'cursor: pointer; color: white; margin: 3px; padding: 3px 6px 3px 2px; border-radius: 20px; display: inline-block; background-color: #E1B64A;'\" :key=\"index\" v-for=\"(chip, index) in key_asignaturas\" @click=\"getPromedioPreguntas(chip)\">\r\n        <div style=\"font-size: 12px; display: inline-block; background-color: #d5d5d5; border-radius: 100%; width: 27px; padding-top: 5px; padding-bottom: 5px; text-align: center; margin-right: 2px;\"> {{(chip.nombre_asignatura).substr(0,2).toUpperCase()}} </div>\r\n        {{chip.nombre_asignatura}}\r\n      </div>\r\n    </vx-card> -->\r\n    <!---->\r\n    <!--MEJORES DOCENTES POR ASIGNATURA-->\r\n    <div class=\"vx-row mb-6\" v-if=\"area_selected\">\r\n      <div style=\"min-width: 400px;\" class=\"vx-col sm:w-1/2 w-1/2 md:w-1/2 mb-3\">\r\n        <vx-card title=\"Top docentes asignaturas\" subtitle=\"Docentes mejor puntuados por asignatura del área seleccionada\">\r\n          <div  style=\"overflow-y: scroll; overflow-x: hidden; height:450px;\" id=\"div_top_asignatura\">\r\n            <vs-button size=\"small\" style=\"padding: 7px; font-size: 12px; float: right; margin-right: 10px;\" icon-pack=\"feather\" icon=\"icon-download\" color=\"#0CBFBD\" @click=\"fileNameAs='reporte_docentes_asignaturas'; activePromptExcelAsignaturas=true\">Exportar</vs-button>\r\n            <br><br>\r\n            <div :key=\"index\" v-for=\"(evaluacion, index) in data_docentes_asignaturas\" class=\"mb-base\">\r\n              <b style=\"color: #E75AE3;\">{{evaluacion.nombre_docente.toUpperCase()}} </b> <b>{{evaluacion.puntaje_evaluacion}}%</b> <br>\r\n              <div :key=\"indexA\" v-for=\"(area, indexA) in evaluacion.asignaturas\">\r\n                <div style=\"width: 60%; display: inline-block;\"><b>Asignatura: </b> <span style=\"color: #AC5AE7;\"> {{area.nombre_asignatura}} </span></div>\r\n                <div style=\"width: 40%; display: inline-block;\"><b>Puntaje: </b> <span style=\"color: #3B76F7;\"> {{area.puntaje}}% </span></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </vx-card>\r\n      </div>\r\n    </div>\r\n    <!--MODALES-->\r\n    <!----modal exportar asignaturas--------->\r\n    <vs-prompt title=\"Exportar a Excel\" class=\"export-options\" @cancle=\"clearFields\" @accept=\"exportToExcelAsignaturas\" accept-text=\"Exportar\" :active.sync=\"activePromptExcelAsignaturas\">\r\n      <vs-input v-model=\"fileNameAs\" placeholder=\"Ingrese el nombre del archivo\" class=\"w-full\" />\r\n      <v-select v-model=\"selectedFormat\" :options=\"formats\" class=\"my-4\" />\r\n      <div class=\"flex\">\r\n      </div>\r\n    </vs-prompt>\r\n    <!----fin modal exportar--------->\r\n  </div>\r\n</template>\r\n<script>\r\n  import flatPickr from 'vue-flatpickr-component';\r\n  import 'flatpickr/dist/flatpickr.css';\r\n  import vSelect from 'vue-select'\r\n  import ECharts from 'vue-echarts/components/ECharts'\r\n  import 'echarts/lib/component/tooltip'\r\n  import 'echarts/lib/component/legend'\r\n  import 'echarts/lib/chart/bar'\r\n  import 'echarts/lib/chart/radar'\r\n  import 'echarts/lib/chart/pie'\r\n  import theme from '../../../theme.json'\r\n  import VueApexCharts from 'vue-apexcharts'\r\n  ECharts.registerTheme('ovilia-green', theme)\r\nexport default{\r\n  data(){\r\n    return{\r\n      colores: ['#FF9F43','#28C76F','#EA5455','#87ceeb','#7367F0','#28C76F','#EA5455','#87ceeb','#7367F0','#28C76F','#EA5455','#87ceeb','#7367F0','#28C76F','#EA5455','#87ceeb','#7367F0', '#FF9F43','#28C76F','#EA5455','#87ceeb','#7367F0','#28C76F'],\r\n      area_selected:'',\r\n      data_docentes_asignaturas: [],\r\n      key_asignaturas:[],\r\n      barChart: {},\r\n      asignatura_selected:'',\r\n      //variables para exportar a excel\r\n      fileName: null,\r\n      formats: ['xls', 'xlsx', 'csv', 'txt'],\r\n      selectedFormat: 'xls',\r\n      fileNameAs: '',\r\n      activePromptExcelAsignaturas: false,\r\n      //fin variables para exportar a excel\r\n    }\r\n  },\r\n  watch:{\r\n    institucion_selected(results){\r\n      let me = this;\r\n      me.data_docentes_asignaturas  = []\r\n      me.barChart                   = {}\r\n      me.key_asignaturas            = []\r\n    },\r\n    periodoSelect(results){\r\n      let me = this;\r\n      me.data_docentes_asignaturas  = []\r\n      me.barChart                   = {}\r\n      me.key_asignaturas            = []\r\n    }\r\n  },\r\n  props:{\r\n    key_areas:{\r\n      type:Array,\r\n      default:[]\r\n    },\r\n    institucion_selected:{\r\n      type:String,\r\n      default:''\r\n    },\r\n    periodoSelect:{\r\n      type:String,\r\n      default:''\r\n    },\r\n  },\r\n  components:{\r\n    'v-select': vSelect,\r\n    flatPickr,\r\n    ECharts,\r\n    VueApexCharts,\r\n  },\r\n  methods:{\r\n    getPromedioAsignaturas(area){\r\n      let me = this\r\n      me.data_docentes_asignaturas  = []\r\n      me.barChart                   = {}\r\n      me.area_selected              = area.nombre_area\r\n      me.$vs.loading()\r\n      this.$http.get(this.$server_url+'salle_promedio_asignatura/'+me.periodoSelect+'/'+me.institucion_selected.idInstitucion+'/'+area.id_area)\r\n      .then(res => {\r\n        me.data_docentes_asignaturas = res.data.items\r\n        if(me.data_docentes_asignaturas.length == 0){\r\n          return\r\n        }\r\n        me.data_docentes_asignaturas.sort((a, b) => {\r\n          return b.puntaje_evaluacion - a.puntaje_evaluacion;\r\n        });\r\n        let asignaturas = []\r\n        $.each(res.data.items,function(key, value){\r\n          $.each(value.asignaturas,function(keyA, valueA){\r\n              asignaturas.push({nombre_asignatura: valueA.nombre_asignatura, puntaje: valueA.puntaje })\r\n          });\r\n        });\r\n        let asignaturas_agrupadas = []\r\n        asignaturas_agrupadas     = me.groupArrayOfObjects(asignaturas, \"nombre_asignatura\")\r\n        me.key_asignaturas        = []\r\n        let key_asignaturas_1     = []\r\n        $.each(asignaturas_agrupadas,function(key, value){\r\n          //obtener las asignaturas\r\n          key_asignaturas_1.push(key)\r\n          //obtener las asignaturas pero para recorrer con un bucle\r\n          me.key_asignaturas.push(value[0])\r\n        });\r\n        var puntajes_asignaturas  = []\r\n        var nombre_asignaturas    = []\r\n        for( let i=0; i<key_asignaturas_1.length; i++){\r\n          let acum_puntaje = 0\r\n          $.each(asignaturas_agrupadas[key_asignaturas_1[i]],function(key, value){\r\n            acum_puntaje += value.puntaje\r\n          });\r\n          let porcentaje_asignatura = ((acum_puntaje) / ((asignaturas_agrupadas[key_asignaturas_1[i]].length)) ).toFixed(2)\r\n          puntajes_asignaturas.push(porcentaje_asignatura)\r\n          nombre_asignaturas.push(key_asignaturas_1[i])\r\n        }\r\n        me.barChart = {}\r\n        me.barChart = {\r\n          series: [{\r\n            data: puntajes_asignaturas\r\n          }],\r\n          chartOptions: {\r\n            colors: ['#60C1CF', '#28C76F', '#EA5455', '#FF9F43', '#1E1E1E','#7367F0', '#28C76F', '#EA5455', '#FF9F43', '#1E1E1E','#7367F0', '#28C76F', '#EA5455', '#FF9F43', '#1E1E1E'],\r\n            plotOptions: { bar: { horizontal: true, } },\r\n            dataLabels: { enabled: true },\r\n            xaxis: { categories: nombre_asignaturas, }\r\n          }\r\n        }\r\n        me.$vs.loading.close()\r\n      })\r\n      .catch(function (error) {\r\n        me.$vs.loading.close()\r\n        console.log(error);\r\n      })\r\n    },\r\n    groupArrayOfObjects(list, key) {\r\n      return list.reduce(function(rv, x) {\r\n          (rv[x[key]] = rv[x[key]] || []).push(x);\r\n          return rv;\r\n      }, {});\r\n    },\r\n    //METODOS PARA EXPORTAR EXCEL\r\n    exportToExcelAsignaturas() {\r\n      let me = this\r\n      let excel_asignaturas = []\r\n      $.each(me.data_docentes_asignaturas, function(key, value){\r\n        $.each(value.asignaturas,function(keyA, valueA){\r\n            excel_asignaturas.push({ nombre_docente: value.nombre_docente, nombre_asignatura: valueA.nombre_asignatura, puntaje: valueA.puntaje})\r\n        });\r\n      });\r\n      let headerTitle = ['Docente', 'Asignatura', 'Puntaje'];\r\n      let headerVal = ['nombre_docente', 'nombre_asignatura', 'puntaje'];\r\n      import('@/vendor/Export2Excel').then(excel => {\r\n        const list = excel_asignaturas\r\n        const data = this.formatJson(headerVal, list)\r\n        excel.export_json_to_excel({\r\n            header: headerTitle,\r\n            data,\r\n            filename: this.fileNameAs,\r\n            autoWidth: this.cellAutoWidth,\r\n            bookType: this.selectedFormat\r\n        })\r\n      })\r\n    },\r\n    clearFields() {\r\n      this.fileNameAs = ''\r\n      this.cellAutoWidth = true\r\n      this.selectedFormat = 'xls'\r\n    },\r\n    formatJson(filterVal, jsonData) {\r\n      return jsonData.map(v => filterVal.map(j => {\r\n          return v[j]\r\n      }))\r\n    },\r\n  }\r\n}\r\n</script>\r\n"]}]}