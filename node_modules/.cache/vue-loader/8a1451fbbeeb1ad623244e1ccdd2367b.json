{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\home\\asesorHome.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\home\\asesorHome.vue","mtime":1712682815958},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport seguimientoVue from '../asesor/seguimiento/seguimientoAsesor.vue'\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nimport reportePastelDocente from './components/docente/docentePastel.vue'\r\nimport screenNotificacionVue from '../pedidos/notificaciones/screenNotificacion.vue'\r\nexport default {\r\n    data() {\r\n       return{\r\n        usuario: [],\r\n        nombreInstitucion:'',\r\n        historicoDocenteArreglo:[],\r\n        individuald:[],\r\n        cant_escuelas:0,\r\n        cant_contratos:0,\r\n        estadisticaVisitas:0,\r\n        periodo_idSierra:0,\r\n        periodo_idCosta:0,\r\n        //variables para notificaciones pedidos comentarios\r\n        cantidadMensajes:0,\r\n        popupNotificaciones: false,\r\n        popupActivoEditar: false,\r\n        cambiarNotificacion: false,\r\n        showCloseButton: false,\r\n        zona: [],\r\n        popupZonas:false,\r\n        zona_insts:{\r\n            idInstitucion:'',\r\n            nombreInstitucion:'',\r\n            zona_id:''\r\n        },\r\n        //fin variables para notificaciones pedidos comentarios\r\n       }\r\n    },\r\n    components:{\r\n        reportePastelDocente,\r\n        seguimientoVue,\r\n        screenNotificacionVue,\r\n        vSelect\r\n    },\r\n    props:{\r\n        cantFormsDocente:{\r\n            type:Number,\r\n            default:0,\r\n        },\r\n        cantFormsSolicitudes:{\r\n            type:Number,\r\n            default:0,\r\n        },\r\n        cantTicketsAbiertos:{\r\n            type:Number,\r\n            default:0\r\n        },\r\n    },\r\n     methods: {\r\n        RecargarNotificaciones(){\r\n            let me = this;\r\n            me.cambiarNotificacion = !me.cambiarNotificacion\r\n        },\r\n        changeCantidadMensajes(e){\r\n            let me = this\r\n            me.cantidadMensajes = e\r\n        },\r\n        //para ir a las solicitudes del formulario de registro de libros de los docentes\r\n        verSolicitudFormulario(){\r\n            let me = this;\r\n            localStorage.setItem('formulario','todo')\r\n            me.$router.push('/formulario/solicitudes')\r\n        },\r\n        handleClose() {\r\n            let me = this;\r\n            me.popupZonas = true\r\n        },\r\n        changeRecarge(e) {\r\n            let me = this;\r\n            me.popupZonas = false\r\n        },\r\n        cerrarAsignacion(){\r\n            if(zona_insts.length > 0){\r\n                me.popupZonas = false\r\n            }\r\n        },\r\n        //actualizar idusuario en la isntituciona\r\n        updateIdAsesorInstitucion(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'actualizarIdusuarioInstitucion?cedula=' + me.usuario.cedula)\r\n                .then(function (response) {\r\n                })\r\n                .catch(function (error) {\r\n                })\r\n        },\r\n        guardar() {\r\n            let me = this;        \r\n            me.$vs.loading();\r\n            let formData = new FormData();\r\n            formData.append('idInstitucion',    me.zona_insts.idInstitucion);\r\n            formData.append('zona_id',          me.zona_insts.zona_id)            \r\n            this.$http.post(this.$server_url + \"institucion_zona\", formData)\r\n            .then(res => {\r\n                me.$vs.loading.close()\r\n                this.getInstituciones();\r\n                me.$vs.notify({\r\n                    text: 'Guardado con exito',\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-check'\r\n                })\r\n                this.popupActivoEditar = false;\r\n                this.popupZonas = true;\r\n            })\r\n            .catch(function () {\r\n                me.$vs.loading.close()\r\n                me.$vs.notify({\r\n                    text: 'La AsignaciÃ³n no se pudo guardar',\r\n                    color: 'danger',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-x'\r\n                })\r\n            })\r\n            \r\n        },\r\n        //  getVisitas() {\r\n        //     let me = this;\r\n        //     axios.get('https://foro.prolipadigital.com.ec/historico-recursos?idusuario='+me.usuario.idusuario+'&idinstitucion=' + me.usuario.institucion_idInstitucion + '&idgrupo=11&_limit=-1')\r\n        //         .then(res => {\r\n        //             //para guardar en localstorage el historico de docentes\r\n        //             this.individuald = res.data;\r\n        //             this.estadisticaVisitas = res.data.length;\r\n        //             localStorage.setItem(\"individuald\", JSON.stringify(this.individuald));\r\n        //         })\r\n        //         .catch(err => {\r\n        //             console.log(err)\r\n        //         })\r\n        // },\r\n        //cantidad de escuelas del asesor\r\n        async getEscuelas() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'escuelasAsesor?cedula=' + me.usuario.cedula+'&sierra='+me.periodo_idSierra+'&costa='+me.periodo_idCosta)\r\n                .then(function (response) {\r\n                    me.cant_escuelas = response.data[0].cantidad_instituciones;\r\n                })\r\n                .catch(function (error) {\r\n                })\r\n        },\r\n        async getInstituciones() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url+'institucionesAsesor?cedula=' + me.usuario.cedula)\r\n                .then(function (response) {\r\n                    me.zona_insts = response.data;\r\n                    if (me.zona_insts.length <= 0) {\r\n                        me.popupZonas = false; // Cerrar el popup si no hay elementos en me.zona_insts\r\n                    }                    \r\n                    me.$vs.loading.close()    \r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })           \r\n        },\r\n        getEditar(tr) {\r\n            this.popupActivoEditar = true\r\n            this.popupZonas = false\r\n            this.zona_insts.idInstitucion = tr.idInstitucion\r\n            this.zona_insts.nombreInstitucion = tr.nombreInstitucion\r\n        },\r\n        getCancelar(){\r\n            this.popupActivoEditar = false\r\n            this.popupZonas = true\r\n        },\r\n        async getZonaSelect() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url + \"zonas\")\r\n            .then(function (response) {\r\n                me.zona = response.data;\r\n                me.$vs.loading.close()\r\n            })\r\n            .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n            })\r\n        },\r\n        //cantidad de contratos del asesor\r\n        // async getContratos() {\r\n        //     let me = this;\r\n        //     this.$http.get(this.$server_url+'contratosAsesor?idusuario=' + me.usuario.idusuario+'&todo=yes')\r\n        //         .then(function (response) {\r\n        //             me.cant_contratos = response.data.length;\r\n        //         })\r\n        //         .catch(function (error) {\r\n        //         })\r\n        // },\r\n        //ir a al vistas de contratos\r\n        irContratos(){\r\n            let me = this;\r\n            me.$router.push('/contratos/asesor')\r\n        },\r\n        //ir a la vista de escuelas\r\n        irEscuelas(){\r\n            let me = this;\r\n            me.$router.push('/escuelas/asesor')\r\n        },\r\n        //ur a ka vista de planificaciones\r\n        irPlanificaciones(){\r\n            let me = this;\r\n            me.$router.push('/planificaciones')\r\n        },\r\n        //para ir al perfil\r\n        irPerfil(){\r\n            let me = this;\r\n            me.$router.push('/perfil');\r\n        },\r\n        async logout() {\r\n            await this.$store.dispatch('logout')\r\n            this.$router.push('/');\r\n        },\r\n        getPeriodoSierra(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'getPeriodoInvidivual?region=1')\r\n                .then(function (res) {\r\n                    me.periodo_idSierra = res.data\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        getPeriodoCosta(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'getPeriodoInvidivual?region=2')\r\n                .then(function (res) {\r\n                    me.periodo_idCosta = res.data\r\n                    me.getEscuelas();\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        }\r\n    },\r\n    created() {\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n        me.getPeriodoSierra();\r\n        me.getPeriodoCosta();\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.$http.get(me.$server_url+'traerInstitucion?institucion_idInstitucion='+me.usuario.institucion_idInstitucion)\r\n        .then(function (res) {\r\n            me.nombreInstitucion = res.data[0].nombreInstitucion;\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error + ' error');\r\n        });\r\n        //me.getContratos();\r\n        // me.getVisitas();\r\n        me.getZonaSelect();\r\n        me.updateIdAsesorInstitucion()\r\n        me.getInstituciones();    \r\n    }\r\n}\r\n",{"version":3,"sources":["asesorHome.vue"],"names":[],"mappings":";AA6LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"asesorHome.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\r\n    <div>\r\n        <div style=\"display: none;\">\r\n            <screenNotificacionVue :cambiarNotificacion=\"cambiarNotificacion\" @ChangecantidadMensajes = \"changeCantidadMensajes\"/>\r\n        </div>\r\n        <vx-card>\r\n            <div class=\"vx-row\">\r\n                <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/3 xl:w-1/3 mb-6\" @click=\"popupNotificaciones = true;\">\r\n                    <vs-card actionable class=\"p-5 vx-card alto\">\r\n                        <div class=\"padre padreb\">\r\n                            <div class=\"hijo1 hijo1b\">\r\n                                <h3 style=\"\">Comentarios - pedido</h3>\r\n                            </div>\r\n                            <div class=\"hijo2\">\r\n                                <img src=\"https://cdn-icons-png.flaticon.com/512/5602/5602848.png\" @click=\"popupNotificaciones = true;\"  style=\"transition:2s ease;\" width=\"80\" alt=\"login\" class=\"img-responsive mx-auto\">\r\n                                <p style=\"margin:0px 0px 10px 10px;font-weight:700;font-size:25px;color:#0A90F3;\">{{ cantidadMensajes }}</p>\r\n                            </div>\r\n                        </div>\r\n                    </vs-card>\r\n                </div>\r\n                <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/3 xl:w-1/3 mb-6\">\r\n                    <vs-card actionable class=\"p-5 vx-card alto\">\r\n                        <div class=\"padre padrea\">\r\n                            <div class=\"hijo1 hijo1a\">\r\n                                <h4 style=\"color:white;padding: 5px 0px;font-weight: 300;\">Solicitudes de docentes</h4>\r\n                            </div>\r\n                            <div class=\"w-full p-2 bg-gray-400 text-center\">\r\n                            </div>\r\n                            <div class=\"hijo2\">\r\n                                <img src=\"@/assets/images/home/asesorHome/forms.png\" @click=\"verSolicitudFormulario()\"  style=\"transition:2s ease;\" width=\"80\" alt=\"login\" class=\"img-responsive mx-auto\">\r\n                                <p style=\"margin:0px 0px 10px 10px;font-weight:700;font-size:25px;color:#0A90F3;\">{{cantFormsSolicitudes}}</p>\r\n                            </div>\r\n                        </div>\r\n                    </vs-card>\r\n                </div>\r\n                <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/3 xl:w-1/3 mb-6\">\r\n                    <vs-card actionable class=\"p-5 vx-card alto\">\r\n                        <div class=\"padre padreb\">\r\n                            <div class=\"hijo1 hijo1b\">\r\n                                <h3 style=\"\">Escuelas</h3>\r\n                            </div>\r\n                            <div class=\"hijo2\">\r\n                                <img src=\"@/assets/images/home/asesorHome/colegio.png\" @click=\"irEscuelas()\"  style=\"transition:2s ease;\" width=\"80\" alt=\"login\" class=\"img-responsive mx-auto\">\r\n                                <p style=\"margin:0px 0px 10px 10px;font-weight:700;font-size:25px;color:#0A90F3;\">{{cant_escuelas}}</p>\r\n                            </div>\r\n                        </div>\r\n                    </vs-card>\r\n                </div>\r\n                <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/3 xl:w-1/3 mb-6\">\r\n                    <vs-card actionable class=\"p-5 vx-card alto\">\r\n                        <div class=\"padre padrec\">\r\n                            <div class=\"hijo1 hijo1c\">\r\n                                <h3 style=\"\">Contratos</h3>\r\n                            </div>\r\n                            <div class=\"hijo2\">\r\n                                <img src=\"@/assets/images/home/docenteHome/exam.png\" @click=\"irContratos()\" style=\"transition:2s ease;\" width=\"80\" alt=\"login\" class=\"img-responsive mx-auto\">\r\n                                <!-- <p style=\"margin:0px 0px 10px 10px;font-weight:700;font-size:25px;color:#0A90F3;\">{{cant_contratos}}</p> -->\r\n                            </div>\r\n                        </div>\r\n                    </vs-card>\r\n                </div>\r\n                <!-- <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/3 xl:w-1/3 mb-6\">\r\n                    <vs-card actionable class=\"p-5 vx-card alto\">\r\n                        <div class=\"padre padrea\">\r\n                            <div class=\"hijo1 hijo1a\">\r\n                                <h3 style=\"\">Planificaciones</h3>\r\n                            </div>\r\n                            <div class=\"hijo2\">\r\n                                <img src=\"@/assets/images/home/docenteHome/meeting.png\" @click=\"irPlanificaciones()\"  style=\"transition:2s ease;\" width=\"80\" alt=\"login\" class=\"img-responsive mx-auto\">\r\n                                <p style=\"margin:0px 0px 10px 10px;font-weight:700;font-size:25px;color:#0A90F3;\">{{cant_planificaciones}}</p>\r\n                            </div>\r\n                        </div>\r\n                    </vs-card>\r\n                </div> -->\r\n                <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/3 xl:w-1/3 mb-6\">\r\n                    <vs-card actionable class=\"p-5 vx-card alto\">\r\n                        <div class=\"padre padrea\">\r\n                            <div class=\"hijo1 hijo1a\">\r\n                                <h3 style=\"\">Tickets abiertos</h3>\r\n                            </div>\r\n                            <div class=\"hijo2\">\r\n                                <router-link to=\"/soporte/asesor\">\r\n                                    <img src=\"@/assets/images/home/docenteHome/boleto.png\" style=\"transition:2s ease;\" width=\"80\" alt=\"login\" class=\"img-responsive mx-auto\">\r\n                                    <p style=\"margin:0px 0px 10px 10px;font-weight:700;font-size:25px;color:#0A90F3;\">{{cantTicketsAbiertos}}</p>\r\n                                </router-link>\r\n                            </div>\r\n                        </div>\r\n                    </vs-card>\r\n                </div>\r\n            </div>\r\n        </vx-card>\r\n        <vs-card>\r\n            <seguimientoVue/>\r\n        </vs-card>\r\n        <br/>\r\n        <vx-card>\r\n            <div class=\"vx-row\">\r\n                <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2 mb-base\">\r\n                    <vs-card actionable class=\"contenedor-perfil padreb\">\r\n                        <div class=\"hijo1 hijo1d\">\r\n                            <h3 style=\"\">Datos del usuario</h3>\r\n                        </div>\r\n                        <div class=\"hijo2 contenido-perfil\">\r\n                            <div style=\"width:20%\">\r\n                               <img src=\"@/assets/images/home/docenteHome/teacher.png\" style=\"transition:2s ease;\" width=\"80\" alt=\"login\" class=\"img-responsive mx-auto\">\r\n                            </div>\r\n                           <div style=\"width:62%\">\r\n                                <p class=\"titulo-perfil\">Nombres:     <span style=\"color:#000;opacity:0.7;\">{{usuario.nombres}}</span></p>\r\n                                <p class=\"titulo-perfil\">Apellidos:   <span style=\"color:#000;opacity:0.7;\">{{usuario.apellidos}}</span></p>\r\n                                <p class=\"titulo-perfil\">Email:       <span style=\"color:#000;opacity:0.7;\">{{usuario.email}}</span></p>\r\n                                <p class=\"titulo-perfil\">Usuario:     <span style=\"color:#000;opacity:0.7;\">{{usuario.name_usuario}}</span></p>\r\n                                <p class=\"titulo-perfil\">InstituciÃ³n:     <span style=\"color:#000;opacity:0.7;\">{{nombreInstitucion}}</span></p>\r\n                            </div>\r\n                            <div style=\"width:18%\">\r\n                                <div>\r\n                                    <vs-button color=\"success\"  icon=\"account_circle\" size=\"small\" @click=\"irPerfil()\"  type=\"relief\">Perfil</vs-button>\r\n                                </div>\r\n                                <br/>\r\n                                 <div>\r\n                                    <vs-button color=\"danger\" icon=\"close\" size=\"small\" @click=\"logout()\"  type=\"relief\">Salir</vs-button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </vs-card>\r\n                </div>\r\n                <div v-if=\"estadisticaVisitas > 0\" class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2 mb-base\">\r\n                    <reportePastelDocente/>\r\n                </div>\r\n            </div>\r\n        </vx-card>\r\n       <br/>\r\n       <!--MODAL NOTIFICACION MENSAJES PEDIDOS-->\r\n       <vs-popup classContent=\"popup-example\" fullscreen title=\"Mensajes asesor - facturador\" :active.sync=\"popupNotificaciones\" @close=\"RecargarNotificaciones()\">\r\n            <screenNotificacionVue :cambiarNotificacion=\"cambiarNotificacion\"/>\r\n        </vs-popup>\r\n       <!--MODAL ASIGNACION ZONA-->\r\n        <vs-popup class=\"crearZona\"  fullscreen title=\"AsignaciÃ³n de Zonas\" :active.sync=\"popupZonas\" @close=\"handleClose\" :class=\"{ 'hide-close': !showCloseButton }\" @changeRecarge=\"changeRecarge\" >            \r\n            <vs-col vs-align=\"center\" vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\" style=\"text-align: center;\"><b>Instituciones sin zonas</b></vs-col>\r\n            <vs-col vs-align=\"center\" vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\" style=\"text-align: center;\"><span>Cantidad: <b> {{ zona_insts.length }}</b></span></vs-col>\r\n            <vs-table max-items=\"10\" pagination :data=\"zona_insts\">\r\n                <template slot=\"thead\">\r\n                    <vs-th width=\"100\">\r\n                        CÃ³digo\r\n                    </vs-th>\r\n                    <vs-th width=\"500\">\r\n                        InformaciÃ³n InstituciÃ³n-Zona\r\n                    </vs-th>\r\n                    <vs-th width=\"50\"></vs-th>\r\n                </template>\r\n                <template slot-scope=\"{data}\">\r\n                    <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                        <vs-td :data=\"data[indextr].idInstitucion\">\r\n                            {{ data[indextr].idInstitucion }}\r\n                        </vs-td>\r\n                        <vs-td>\r\n                            <small><b>InstituciÃ³n:</b> {{tr.nombreInstitucion}}</small><br>\r\n                            <b style=\"color: red\">Sin Zona</b><br>\r\n                        </vs-td>\r\n                        <vs-td>\r\n                            <vs-button @click=\"popupActivo=true;getEditar(tr)\">Agregar Zona</vs-button>\r\n                        </vs-td>\r\n                    </vs-tr>\r\n                </template>\r\n            </vs-table>\r\n        </vs-popup>\r\n        <!-- SECCION EDITAR -->\r\n        <vs-popup class=\"editar\" :title=\"`InstituciÃ³n`\" :active.sync=\"popupActivoEditar\" @close=\"handleClose\" :class=\"{ 'hide-close': !showCloseButton }\" @changeRecarge=\"changeRecarge\">\r\n            <br>\r\n            <vs-col vs-justify=\"center\" vs-align=\"center\" vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\">\r\n                    <b>{{zona_insts.nombreInstitucion}}</b>\r\n                </vs-col> \r\n            <br>\r\n            <vs-row>                \r\n                <div class=\"vx-col sm:w-1/3 w-full\">\r\n                    <span>Zona</span>\r\n                </div>\r\n                <vs-col vs-justify=\"center\" vs-align=\"center\" vs-lg=\"12\" vs-sm=\"12\" vs-xs=\"12\">\r\n                    <v-select :options=\"zona\" :reduce=\"zona => zona.idzona\" label=\"zn_nombre\" v-model=\"zona_insts.zona_id\"></v-select>\r\n                </vs-col>  \r\n            </vs-row>\r\n            <br><br>\r\n            <vs-col vs-type=\"flex\" vs-justify=\"center\" vs-align=\"center\" vs-w=\"12\" class=\"mt-2\">\r\n                <vs-button @click=\"guardar()\" type=\"relief\">Guardar</vs-button>&emsp;\r\n                <vs-button @click=\"getCancelar()\" color=\"danger\" type=\"relief\">Cancelar</vs-button>\r\n            </vs-col>\r\n        </vs-popup>\r\n    </div>\r\n</template>\r\n<script>\r\nimport seguimientoVue from '../asesor/seguimiento/seguimientoAsesor.vue'\r\nimport axios from 'axios'\r\nimport vSelect from 'vue-select'\r\nimport reportePastelDocente from './components/docente/docentePastel.vue'\r\nimport screenNotificacionVue from '../pedidos/notificaciones/screenNotificacion.vue'\r\nexport default {\r\n    data() {\r\n       return{\r\n        usuario: [],\r\n        nombreInstitucion:'',\r\n        historicoDocenteArreglo:[],\r\n        individuald:[],\r\n        cant_escuelas:0,\r\n        cant_contratos:0,\r\n        estadisticaVisitas:0,\r\n        periodo_idSierra:0,\r\n        periodo_idCosta:0,\r\n        //variables para notificaciones pedidos comentarios\r\n        cantidadMensajes:0,\r\n        popupNotificaciones: false,\r\n        popupActivoEditar: false,\r\n        cambiarNotificacion: false,\r\n        showCloseButton: false,\r\n        zona: [],\r\n        popupZonas:false,\r\n        zona_insts:{\r\n            idInstitucion:'',\r\n            nombreInstitucion:'',\r\n            zona_id:''\r\n        },\r\n        //fin variables para notificaciones pedidos comentarios\r\n       }\r\n    },\r\n    components:{\r\n        reportePastelDocente,\r\n        seguimientoVue,\r\n        screenNotificacionVue,\r\n        vSelect\r\n    },\r\n    props:{\r\n        cantFormsDocente:{\r\n            type:Number,\r\n            default:0,\r\n        },\r\n        cantFormsSolicitudes:{\r\n            type:Number,\r\n            default:0,\r\n        },\r\n        cantTicketsAbiertos:{\r\n            type:Number,\r\n            default:0\r\n        },\r\n    },\r\n     methods: {\r\n        RecargarNotificaciones(){\r\n            let me = this;\r\n            me.cambiarNotificacion = !me.cambiarNotificacion\r\n        },\r\n        changeCantidadMensajes(e){\r\n            let me = this\r\n            me.cantidadMensajes = e\r\n        },\r\n        //para ir a las solicitudes del formulario de registro de libros de los docentes\r\n        verSolicitudFormulario(){\r\n            let me = this;\r\n            localStorage.setItem('formulario','todo')\r\n            me.$router.push('/formulario/solicitudes')\r\n        },\r\n        handleClose() {\r\n            let me = this;\r\n            me.popupZonas = true\r\n        },\r\n        changeRecarge(e) {\r\n            let me = this;\r\n            me.popupZonas = false\r\n        },\r\n        cerrarAsignacion(){\r\n            if(zona_insts.length > 0){\r\n                me.popupZonas = false\r\n            }\r\n        },\r\n        //actualizar idusuario en la isntituciona\r\n        updateIdAsesorInstitucion(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'actualizarIdusuarioInstitucion?cedula=' + me.usuario.cedula)\r\n                .then(function (response) {\r\n                })\r\n                .catch(function (error) {\r\n                })\r\n        },\r\n        guardar() {\r\n            let me = this;        \r\n            me.$vs.loading();\r\n            let formData = new FormData();\r\n            formData.append('idInstitucion',    me.zona_insts.idInstitucion);\r\n            formData.append('zona_id',          me.zona_insts.zona_id)            \r\n            this.$http.post(this.$server_url + \"institucion_zona\", formData)\r\n            .then(res => {\r\n                me.$vs.loading.close()\r\n                this.getInstituciones();\r\n                me.$vs.notify({\r\n                    text: 'Guardado con exito',\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-check'\r\n                })\r\n                this.popupActivoEditar = false;\r\n                this.popupZonas = true;\r\n            })\r\n            .catch(function () {\r\n                me.$vs.loading.close()\r\n                me.$vs.notify({\r\n                    text: 'La AsignaciÃ³n no se pudo guardar',\r\n                    color: 'danger',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-x'\r\n                })\r\n            })\r\n            \r\n        },\r\n        //  getVisitas() {\r\n        //     let me = this;\r\n        //     axios.get('https://foro.prolipadigital.com.ec/historico-recursos?idusuario='+me.usuario.idusuario+'&idinstitucion=' + me.usuario.institucion_idInstitucion + '&idgrupo=11&_limit=-1')\r\n        //         .then(res => {\r\n        //             //para guardar en localstorage el historico de docentes\r\n        //             this.individuald = res.data;\r\n        //             this.estadisticaVisitas = res.data.length;\r\n        //             localStorage.setItem(\"individuald\", JSON.stringify(this.individuald));\r\n        //         })\r\n        //         .catch(err => {\r\n        //             console.log(err)\r\n        //         })\r\n        // },\r\n        //cantidad de escuelas del asesor\r\n        async getEscuelas() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'escuelasAsesor?cedula=' + me.usuario.cedula+'&sierra='+me.periodo_idSierra+'&costa='+me.periodo_idCosta)\r\n                .then(function (response) {\r\n                    me.cant_escuelas = response.data[0].cantidad_instituciones;\r\n                })\r\n                .catch(function (error) {\r\n                })\r\n        },\r\n        async getInstituciones() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url+'institucionesAsesor?cedula=' + me.usuario.cedula)\r\n                .then(function (response) {\r\n                    me.zona_insts = response.data;\r\n                    if (me.zona_insts.length <= 0) {\r\n                        me.popupZonas = false; // Cerrar el popup si no hay elementos en me.zona_insts\r\n                    }                    \r\n                    me.$vs.loading.close()    \r\n                })\r\n                .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n                })           \r\n        },\r\n        getEditar(tr) {\r\n            this.popupActivoEditar = true\r\n            this.popupZonas = false\r\n            this.zona_insts.idInstitucion = tr.idInstitucion\r\n            this.zona_insts.nombreInstitucion = tr.nombreInstitucion\r\n        },\r\n        getCancelar(){\r\n            this.popupActivoEditar = false\r\n            this.popupZonas = true\r\n        },\r\n        async getZonaSelect() {\r\n            let me = this;\r\n            me.$vs.loading()\r\n            this.$http.get(this.$server_url + \"zonas\")\r\n            .then(function (response) {\r\n                me.zona = response.data;\r\n                me.$vs.loading.close()\r\n            })\r\n            .catch(function (error) {\r\n                    me.$vs.loading.close()\r\n            })\r\n        },\r\n        //cantidad de contratos del asesor\r\n        // async getContratos() {\r\n        //     let me = this;\r\n        //     this.$http.get(this.$server_url+'contratosAsesor?idusuario=' + me.usuario.idusuario+'&todo=yes')\r\n        //         .then(function (response) {\r\n        //             me.cant_contratos = response.data.length;\r\n        //         })\r\n        //         .catch(function (error) {\r\n        //         })\r\n        // },\r\n        //ir a al vistas de contratos\r\n        irContratos(){\r\n            let me = this;\r\n            me.$router.push('/contratos/asesor')\r\n        },\r\n        //ir a la vista de escuelas\r\n        irEscuelas(){\r\n            let me = this;\r\n            me.$router.push('/escuelas/asesor')\r\n        },\r\n        //ur a ka vista de planificaciones\r\n        irPlanificaciones(){\r\n            let me = this;\r\n            me.$router.push('/planificaciones')\r\n        },\r\n        //para ir al perfil\r\n        irPerfil(){\r\n            let me = this;\r\n            me.$router.push('/perfil');\r\n        },\r\n        async logout() {\r\n            await this.$store.dispatch('logout')\r\n            this.$router.push('/');\r\n        },\r\n        getPeriodoSierra(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'getPeriodoInvidivual?region=1')\r\n                .then(function (res) {\r\n                    me.periodo_idSierra = res.data\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        },\r\n        getPeriodoCosta(){\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'getPeriodoInvidivual?region=2')\r\n                .then(function (res) {\r\n                    me.periodo_idCosta = res.data\r\n                    me.getEscuelas();\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error + ' error');\r\n                })\r\n        }\r\n    },\r\n    created() {\r\n        let me = this;\r\n        me.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n        me.getPeriodoSierra();\r\n        me.getPeriodoCosta();\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.$http.get(me.$server_url+'traerInstitucion?institucion_idInstitucion='+me.usuario.institucion_idInstitucion)\r\n        .then(function (res) {\r\n            me.nombreInstitucion = res.data[0].nombreInstitucion;\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error + ' error');\r\n        });\r\n        //me.getContratos();\r\n        // me.getVisitas();\r\n        me.getZonaSelect();\r\n        me.updateIdAsesorInstitucion()\r\n        me.getInstituciones();    \r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.contenedor-perfil{\r\n    width: 100%;\r\n    border-radius: 20px 0px;\r\n    padding: 0px;\r\n\r\n}\r\n.padre{\r\n    width: 100%;\r\n\r\n    display: flex;\r\n    flex-direction: column;\r\n    height: 175px;\r\n    border: 1px solid none;\r\n    border-radius: 10px;\r\n    padding: 0px;\r\n\r\n}\r\n.padrea{\r\n    box-shadow: 1px  3px 5px rgba(73, 128, 150, 0.6);\r\n}\r\n.padreb{\r\n    box-shadow: 1px  3px 5px rgba(137, 182, 148, 0.6);\r\n}\r\n.padrec{\r\n    box-shadow: 1px  3px 5px rgba(79, 134, 218, 0.6);\r\n}\r\n.hijo1{\r\n    text-align: center;\r\n    border-radius: 10px;\r\n    width: 100%;\r\n\r\n}\r\n.hijo1a{\r\n    background: #2193b0;  /* fallback for old browsers */\r\n    background: -webkit-linear-gradient(to right, #6dd5ed, #2193b0);\r\n    background: linear-gradient(to right, #6dd5ed, #2193b0);\r\n}\r\n.hijo1b{\r\n   background: #FF416C;  /* fallback for old browsers */\r\n   background: -webkit-linear-gradient(to right, #FF4B2B, #FF416C);\r\n   background: linear-gradient(to right, #FF4B2B, #FF416C);\r\n}\r\n.hijo1c{\r\n    background: #11998e;  /* fallback for old browsers */\r\n    background: -webkit-linear-gradient(to right, #38ef7d, #11998e);  /* Chrome 10-25, Safari 5.1-6 */\r\n    background: linear-gradient(to right, #38ef7d, #11998e); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\r\n\r\n}\r\n.hijo1d{\r\nbackground: #56ab2f;  /* fallback for old browsers */\r\nbackground: -webkit-linear-gradient(to right, #a8e063, #56ab2f);  /* Chrome 10-25, Safari 5.1-6 */\r\nbackground: linear-gradient(to right, #a8e063, #56ab2f); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\r\n\r\n\r\n\r\n}\r\n.hijo1 > h3{\r\n    color: white;\r\n    font-weight: 300;\r\n    letter-spacing: 2px;\r\n    padding: 5px;\r\n\r\n\r\n}\r\n.hijo2{\r\n    margin-top: 10px;\r\n    cursor:pointer;\r\n\r\n    /* margin: auto; */\r\n\r\n}\r\n\r\n.contenido-perfil{\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    padding: 15px;\r\n    overflow: hidden;\r\n}\r\n.titulo-perfil{\r\n    color:#2A9FF6;\r\n    padding: 5px;\r\n}\r\n.crearZona .vs-popup .vs-popup--header .vs-icon {\r\n  display: none;\r\n}\r\n\r\n</style>\r\n"]}]}