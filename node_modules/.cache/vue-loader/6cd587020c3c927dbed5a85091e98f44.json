{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\components\\pedidosDetalle.vue?vue&type=style&index=0&id=30729ff9&lang=css","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\components\\pedidosDetalle.vue","mtime":1712682816617},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n.label_inputs{\n  font-size: 12px;\n  color: rgb(143, 143, 143);\n  margin-top: 4px;\n  padding-left: 4px;\n}\n",{"version":3,"sources":["pedidosDetalle.vue"],"names":[],"mappings":";AAiMA;AACA;AACA;AACA;AACA;AACA","file":"pedidosDetalle.vue","sourceRoot":"src/views/temporadas/components","sourcesContent":["<template>\r\n    <div>\r\n      <div v-if=\"confirmacion\">\r\n        <p class=\"bg-warning text-white p-2\">!Estas seguro de entregar el pedido?</p>\r\n        <div class=\"flex mt-4\">\r\n          <vs-button color=\"success\" @click=\"entregarPedido();confirmacion=false;\" type=\"filled\">Si, entregar pedido</vs-button>\r\n          <vs-button color=\"primary\" class=\"ml-2\" @click=\"confirmacion = false;\" type=\"border\">Cancelar</vs-button>\r\n        </div>\r\n      </div>\r\n      <div v-else>\r\n      <vs-table max-items=\"20\" search pagination :data=\"arregloLibros\">\r\n          <template slot=\"header\">\r\n            <span>Cantidad: {{arregloLibros.length}}</span>\r\n          </template>\r\n          <template slot=\"thead\">\r\n              <vs-th>Libro</vs-th>\r\n              <vs-th>Cant. unidades</vs-th>\r\n              <vs-th>Precio unitario</vs-th>\r\n          </template>\r\n          <template slot-scope=\"{data}\">\r\n              <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                  <vs-td>\r\n                    {{data[indextr].nombrelibro}}<br>\r\n                  </vs-td>\r\n                  <vs-td>\r\n                      {{data[indextr].valor}}<br>\r\n                  </vs-td>\r\n                  <vs-td>\r\n                    {{tr.precio}}\r\n                  </vs-td>\r\n              </vs-tr>\r\n          </template>\r\n      </vs-table>\r\n      <vs-list style=\"margin-top: -40px;\">\r\n        <vs-list-header icon=\"supervisor_account\" title=\"Datos\"></vs-list-header>\r\n        <vs-list-item icon=\"check\" title=\"Tipo de venta\">\r\n          <vs-chip color=\"primary\"><span class=\"font-bold ml-2\"> {{pedido.tipo_venta_descr.toUpperCase()}}</span></vs-chip>\r\n        </vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"InstituciÃ³n\" :subtitle=\"pedido.nombreInstitucion\">\r\n          <small>Periodo: {{pedido.periodoescolar}}</small>\r\n        </vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"Asesor\" :subtitle=\"pedido.responsable\"></vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"Fecha de envio\" :subtitle=\"pedido.fecha_envio.substring(0,10)\"></vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"Fecha de entrega\" :subtitle=\"pedido.fecha_entrega.substring(0,10)\"></vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"Total venta\" :subtitle=\"pedido.total_venta\"></vs-list-item>\r\n        <vs-list-item icon=\"check\" title=\"Total de unidades\" :subtitle=\"pedido.total_unidades\"></vs-list-item>\r\n      </vs-list>\r\n        <div class=\"vx-row\">\r\n          <div class=\"w-full p-2 bg-gray-400 text-center\" v-if=\"pedido.estado_entrega == 0\">\r\n            <vs-button color=\"success\" icon=\"save\" class=\"w-full\" v-if=\"usuario.id_group == 27 && (onlyVer == 0)\"  @click=\"confirmacion = true;\" type=\"gradient\">Entregar pedido</vs-button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </template>\r\n    <script>\r\n    import flatPickr from 'vue-flatpickr-component';\r\n    import 'flatpickr/dist/flatpickr.css';\r\n    import {FormWizard, TabContent} from 'vue-form-wizard'\r\n    import 'vue-form-wizard/dist/vue-form-wizard.min.css'\r\n    import vSelect from 'vue-select';\r\n    import registrar_beneficiariosVue from '../../pedidos/registrar_beneficiarios.vue';\r\n    export default {\r\n        components:{\r\n          FormWizard,\r\n          TabContent,\r\n          flatPickr,\r\n          'v-select': vSelect,\r\n          registrar_beneficiariosVue,\r\n        },\r\n        data: () => ({\r\n          confirmacion:false,\r\n          usuario:[],\r\n          arregloLibros:[],\r\n          mensaje:'',\r\n        }),\r\n        props:{\r\n          id_pedido:{\r\n            type:Number,\r\n            default:0\r\n          },\r\n          id_periodo:{\r\n            type:Number,\r\n            default:0\r\n          },\r\n          pedido:{\r\n            type:Object,\r\n            default:{}\r\n          },\r\n          onlyVer:{\r\n            type:Number,\r\n            default:1,\r\n          }\r\n        },\r\n        created(){\r\n          let me = this;\r\n          me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n        },\r\n        mounted() {\r\n          let me = this;\r\n          me.getLibros()\r\n          me.mensaje = 'Se entrego correctamente el pedido #'+me.pedido.id_pedido+' de '+me.pedido.nombreInstitucion\r\n        },\r\n        methods: {\r\n          getLibros(){\r\n            let me = this\r\n            me.arregloLibros = []\r\n            this.$http.get(this.$server_url+'get_val_pedidoInfoTodo/'+me.id_pedido)\r\n            .then(res => {\r\n              let datos = res.data\r\n              if(datos.length > 0){\r\n                let datos2 = datos.filter(p => p.valor > 0)\r\n                //setear ARRAY\r\n                let preSetear = []\r\n                datos2.forEach(element => {\r\n                  var cal = new Object();\r\n                  cal.idlibro     = element.idlibro\r\n                  cal.nombrelibro = element.nombrelibro\r\n                  cal.valor       = element.valor\r\n                  cal.precio      = element.precio\r\n                  preSetear.push(cal)\r\n                });\r\n                //Generate unique array\r\n                var preTemplate = []\r\n                datos2.forEach(element => {\r\n                  var cal = new Object();\r\n                  cal.idlibro     = element.idlibro\r\n                  cal.nombrelibro = element.nombrelibro\r\n                  cal.precio      = element.precio\r\n                  preTemplate.push(cal)\r\n                });\r\n                //CLEAR REPEAT\r\n                //quitar duplicados\r\n                let hash = {};\r\n                var preArrayUnico = []\r\n                let resultado = preTemplate.filter(o => hash[o.nombrelibro] ? false : hash[o.nombrelibro] = true);\r\n                preArrayUnico  = resultado\r\n                //////\r\n                //SUMAR VALORES PEDIDO + ALCANCES\r\n                const sumarValores = preSetear.reduce((acc,valor) =>{\r\n                  if(acc[valor.idlibro]){\r\n                    acc[valor.idlibro] += valor.valor\r\n                  }else{\r\n                    acc[valor.idlibro] = valor.valor\r\n                  }\r\n                  return acc\r\n                },{})\r\n                //PASAR AL AREGLO UNICO LOS VALORES SUMADOS POR  LIBRO\r\n                const result = preArrayUnico.map((obj) => {\r\n                    obj[\"valor\"] = sumarValores[obj.idlibro];\r\n                    return obj;\r\n                });\r\n                me.arregloLibros = result\r\n              }\r\n            })\r\n          },\r\n          entregarPedido(){\r\n            let me = this\r\n            let formData = new FormData();\r\n            formData.append('estado',               '2')\r\n            formData.append('entregaPedidoBodega',  'yes')\r\n            formData.append('id_pedido',            me.id_pedido);\r\n            me.$vs.loading();\r\n            this.$http.post(this.$server_url+'entregarPedido', formData)\r\n            .then(res => {\r\n              me.$vs.notify({\r\n                text: me.mensaje,\r\n                color: 'primary',\r\n                time:8000,\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n              })\r\n              this.$emit('changeRecarge',true)\r\n            })\r\n            .catch(err => {\r\n              console.log(err)\r\n                me.$vs.loading.close();\r\n            })\r\n          },\r\n        },\r\n    }\r\n    </script>\r\n\r\n    <style>\r\n    .label_inputs{\r\n      font-size: 12px;\r\n      color: rgb(143, 143, 143);\r\n      margin-top: 4px;\r\n      padding-left: 4px;\r\n    }\r\n    </style>\r\n"]}]}