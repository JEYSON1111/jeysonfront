{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\components\\exportGuias.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\components\\exportGuias.vue","mtime":1712682816611},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n    import flatPickr from 'vue-flatpickr-component';\r\n    import 'flatpickr/dist/flatpickr.css';\r\n    import {FormWizard, TabContent} from 'vue-form-wizard'\r\n    import 'vue-form-wizard/dist/vue-form-wizard.min.css'\r\n    import vSelect from 'vue-select';\r\n    import html2pdf from \"html2pdf.js\"\r\n    import moment from \"moment\";\r\n    export default {\r\n        components:{\r\n          FormWizard,\r\n          TabContent,\r\n          flatPickr,\r\n          'v-select': vSelect,\r\n        },\r\n        data: () => ({\r\n            usuario: [],\r\n            series: [],\r\n            periodos: [],\r\n            arregloPedidos:[],\r\n            series_plan_lector: [],\r\n            tipo_form: 'guias',\r\n            total_usd: 0,\r\n            total_unidades: 0,\r\n            total_unidades_guias:0,\r\n            porcentaje_descuento: 0,\r\n            porcentaje_descuento_series_basicas:0,\r\n            //variables para observacion y anticipo\r\n            disableAsesor:false,\r\n            pedido:{\r\n                id_pedido: 0, periodo: '', tipo_venta: '', fecha_envio: '', fecha_entrega: '', institucion: '', asesor: '', descuento: '', anticipo: '',ifanticipo:0,observacion:'', ruc:'', direccionInstitucion:'', nivel:'',tipo_descripcion:'', telefonoInstitucion:'',id_periodo:''\r\n            },\r\n            //fin variables para  observacion y anticipo\r\n            suma_bruta_series_b:0,\r\n            arregloSeriesBasicas:[],\r\n            pendienteLiquidar:0,\r\n            anticipo_aprobado:0,\r\n            contrato_generado:'',\r\n            multiplicacionPConfigurado:0,\r\n            RestaAutorizada:0,\r\n            resultadoComisionAsesor:0,\r\n            //variables de series basicas\r\n            //variables de cabecera\r\n            configdateTimePicker: {\r\n                enableTime: true,\r\n                dateFormat: 'Y-m-d'\r\n            },\r\n            nombrePeriodo:'',\r\n        }),\r\n        props:{\r\n            id_pedido:{\r\n                type:Number,\r\n                default:0\r\n            },\r\n            id_periodo:{\r\n                type:Number,\r\n                default:0\r\n            },\r\n        },\r\n        mounted() {\r\n            let me = this;\r\n            moment.locale(\"es\")\r\n            me.mes = moment().format('MMMM');\r\n            me.year = moment().format('YYYY')\r\n            this.pedido.periodo = {idperiodoescolar: localStorage.id_periodo_selected, periodoescolar: localStorage.nombre_periodo_selected}\r\n            this.usuario = JSON.parse(localStorage.getItem('usuario'))\r\n            this.nombrePeriodo = localStorage.nombre_periodo_selected\r\n            this.usuario_id = this.usuario.idusuario\r\n            this.getSeries()\r\n            this.getLibrosPlanLector()\r\n            me.getPedidos()\r\n            me.getPeriodos()\r\n            this.disableAsesor = true\r\n        },\r\n        methods: {\r\n            getPeriodos(){\r\n                let me = this\r\n                this.$http.get(this.$server_url+'get_periodos_activos')\r\n                .then(res => {\r\n                me.periodos = res.data\r\n                })\r\n            },\r\n            getPedidos(){\r\n                let me = this\r\n                me.$vs.loading();\r\n                this.$http.get(this.$server_url+'get_datos_pedido_guias/'+me.id_pedido)\r\n                    .then(res => {\r\n                    me.$vs.loading.close();\r\n                    me.pedido.id_pedido = res.data[0].id_pedido\r\n                    me.pedido.fecha_envio = res.data[0].fecha_envio\r\n                    me.pedido.asesor = {idusuario: res.data[0].id_asesor, nombres: res.data[0].nombres+' '+res.data[0].apellidos}\r\n                    me.cedula_asesor = res.data[0].cedula\r\n                    me.$vs.notify({\r\n                        text: \"Espere mientras se va generando el archivo...\",\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-file',\r\n                        time:3000\r\n                    })\r\n                    setTimeout(function() {me.imprimirEval()}, 2000)\r\n                })\r\n            },\r\n            imprimirEval(){\r\n                let me = this\r\n                var element = document.getElementById('seccionImprimir');\r\n                var opt = {\r\n                    margin:         [0, 0, 0.5, 0],\r\n                    filename:       \"ReporteGuias.pdf\",\r\n                    image:          { type: 'jpeg', quality: 0.98 },\r\n                    html2canvas:    {dpi: 192, scale: 2, letterRendering: true},\r\n                    pagebreak:      {mode: 'avoid-all'},\r\n                    //jsPDF:          { unit: 'in', format: 'letter', orientation: 'portrait' }\r\n                    jsPDF: {unit: 'pt', format: 'a4', orientation: 'portrait'}                };\r\n                html2pdf().from(element).set(opt).save();\r\n                me.arregloPedidos   = []\r\n                me.$vs.notify({\r\n                    text: \"Archivo descargado correctamente\",\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-file',\r\n                    time:2000\r\n                })\r\n                me.$emit('change',true)\r\n            },\r\n            getSeries(){\r\n                let me = this\r\n                this.$http.get(this.$server_url+'series_formato_periodo/'+me.id_periodo)\r\n                .then(res => {\r\n                    me.series = res.data\r\n                    me.getLibrosPlanLector()\r\n                })\r\n            },\r\n            getLibrosPlanLector(){\r\n                let me = this\r\n                this.$http.get(this.$server_url+'get_pvp_planes_periodo/'+me.id_periodo)\r\n                .then(res => {\r\n                    me.series_plan_lector = res.data\r\n                    me.get_val_pedido()\r\n                })\r\n            },\r\n            get_val_pedido(){\r\n                let me = this\r\n                if(!me.id_pedido){\r\n                return\r\n                }\r\n                this.$http.get(this.$server_url+'get_val_pedido/'+me.id_pedido)\r\n                .then(res => {\r\n                    me.porcentaje_descuento                = res.data[0].descuento\r\n                    me.porcentaje_descuento_series_basicas = res.data[0].porcentaje_descuento\r\n                    me.contrato_generado                   = res.data[0].contrato_generado\r\n                    $.each(res.data,function(key, value){\r\n                    try {\r\n                        // console.log(value.id_serie+'_'+value.id_area+'_'+value.tipo_val + ' == ' + value.valor)\r\n                        document.getElementById(value.id_serie+'_'+value.id_area+'_'+value.tipo_val).value = value.valor\r\n                    } catch (error) {\r\n                    }\r\n                    });\r\n                    me.activar_tipo()\r\n                    let array_series = []\r\n                    array_series = me.groupArrayOfObjects(res.data, \"id_serie\")\r\n                    me.total_usd = 0\r\n                    me.total_unidades = 0\r\n                    me.total_unidades_guias = 0\r\n                    $.each(array_series,function(key, value){\r\n                    let array_areas_serie = []\r\n                    array_areas_serie = me.groupArrayOfObjects(value, \"id_area\")\r\n                    let total_serie = 0;\r\n                    let total_libros = 0;\r\n                    let total_guias  = 0;\r\n                    var val_pvp_area = 0\r\n                    $.each(array_areas_serie,function(key_1, value_1){ // recorre las areas de cada serie\r\n                        let sum_celdas_area = 0;\r\n                        $.each(value_1,function(key_2, value_2){ // recorre las celdas de cada area; tipo_val = posicion celda\r\n                        // console.log('value_2.tipo_val: '+value_2.tipo_val+' value_2.valo: '+value_2.valor)\r\n                        if( parseInt(value_2.tipo_val) % 2 != 0 ){ //sumar solo cantidades de textos\r\n                            total_libros += value_2.valor\r\n                            sum_celdas_area += value_2.valor\r\n                        }\r\n                        if( parseInt(value_2.tipo_val) % 2 == 0 ){ //sumar solo cantidades de las guias\r\n                            total_guias += value_2.valor\r\n                        }\r\n                        });\r\n                        //valor de pvp de area\r\n                        val_pvp_area = document.getElementById(value[0].id_serie+'_'+value_1[0].id_area+'_'+20).value //obtiene el pvp de cada area\r\n                        // console.log('sum_celdas_area*val_pvp_area = '+sum_celdas_area+' * '+val_pvp_area)\r\n                        total_serie += (sum_celdas_area*val_pvp_area)\r\n                    });\r\n                    document.getElementById('total_textos_serie_'+value[0].id_serie).value = total_libros\r\n                    document.getElementById('total_textos_serie2_'+value[0].id_serie).value = total_guias\r\n                    document.getElementById('total_usd_serie_'+value[0].id_serie).value = total_serie\r\n                    me.total_usd = me.total_usd + parseFloat(total_serie);\r\n                    me.total_unidades = me.total_unidades + parseInt(total_libros);\r\n                    me.total_unidades_guias = me.total_unidades_guias + parseInt(total_guias)\r\n                    //me.guardarTotalPedido()\r\n                    });\r\n                    me.sumarAreasBasicas()\r\n                   // me.guardarTotalPedido()\r\n\r\n                })\r\n                .catch(err => {\r\n                })\r\n            },\r\n            sumarAreasBasicas(){\r\n                let me = this;\r\n                var resultado = 0\r\n                me.arregloSeriesBasicas.forEach(element => {\r\n                let valor = parseFloat(document.getElementById('total_usd_serie_'+element.id_serie).value)\r\n                if (!isNaN(valor)) {\r\n                    resultado += valor;\r\n                }\r\n                });\r\n                me.suma_bruta_series_b            = resultado\r\n                me.multiplicacionPConfigurado     =  ((me.suma_bruta_series_b*this.porcentaje_descuento_series_basicas)/100).toFixed(2)\r\n                me.RestaAutorizada                =  (( me.suma_bruta_series_b ) - ( me.multiplicacionPConfigurado ))\r\n                me.resultadoComisionAsesor         =  ((me.RestaAutorizada*me.porcentaje_descuento)/100).toFixed(2)\r\n                if(me.selectifanticipo){\r\n                //suma de series basica\r\n                //se mutltiplica * el porcentaje de configuracion\r\n                //se resta el valor sumas basica - la multiplicacion del porcentaje\r\n                //se multiplica el resultado de ese valor x la comision del asesor\r\n                //se multiplica el resultado de la comision del asesor * 0.50\r\n                let anticipoSugerido50            =  ((me.resultadoComisionAsesor*50)/100).toFixed(2)\r\n                me.pedido.anticipo                = anticipoSugerido50\r\n                me.pendienteLiquidar              = me.resultadoComisionAsesor - me.anticipoAprobado\r\n                }else{\r\n                me.pedido.anticipo = 0\r\n                me.pendienteLiquidar              = me.resultadoComisionAsesor - me.anticipoAprobado\r\n                }\r\n                let datos = {\r\n                anticipo:me.pedido.anticipo,\r\n                liquidar:me.pendienteLiquidar\r\n                }\r\n                me.$emit('changePedido',datos)\r\n            },\r\n            async guardar_valor(id, serie, index,libro){\r\n                let me = this\r\n                if( document.getElementById(serie+'_'+id+'_'+index).value == '' ){ // no guardar cuando no se digita algo\r\n                return;\r\n                }\r\n                let valor = document.getElementById(serie+'_'+id+'_'+index).value\r\n                if(valor == 0){\r\n                document.getElementById(serie+'_'+id+'_'+index).value = ''\r\n                }\r\n                me.$vs.loading();\r\n                let formData = new FormData();\r\n                formData.append('id_pedido', me.id_pedido);\r\n                formData.append('valor', document.getElementById(serie+'_'+id+'_'+index).value);\r\n                formData.append('tipo_val', index);\r\n                formData.append('id_serie', serie);\r\n                formData.append('id_area', id);\r\n                if(libro == '-1') {\r\n                    formData.append('plan_lector',id)\r\n                    formData.append('libro','0')\r\n                }else{\r\n                    formData.append('plan_lector','0')\r\n                    formData.append('libro',libro)\r\n                }\r\n                await this.$http.post(this.$server_url+'save_val_pedido', formData)\r\n                .then(res => {\r\n                    me.$vs.loading.close();\r\n                    if(res.data.status == 0){\r\n                    me.$vs.notify({ text: res.data.message, color: 'danger', iconPack: 'feather', icon: 'icon-check', time:8000 })\r\n                    me.getSeries()\r\n                    return\r\n                    }\r\n                    if(res.data.status == 2){\r\n                    me.getSeries()\r\n                    }\r\n                    me.$vs.notify({ text: 'Guardado correctamente', color: 'success', iconPack: 'feather', icon: 'icon-check' })\r\n                    me.get_val_pedido()\r\n                })\r\n\r\n            },\r\n            async guardarTotalPedido(){\r\n                let me = this\r\n                let total_usd_format = me.total_usd.toFixed(2)\r\n                await me.$http.get(me.$server_url+'guardar_total_pedido/' + me.id_pedido + '/' + total_usd_format + '/' + me.total_unidades+'/'+me.total_unidades_guias)\r\n                .then(res => {\r\n                // console.log('total actualizado: ' + total_usd_format)\r\n                })\r\n            },\r\n            groupArrayOfObjects(list, key) {\r\n                return list.reduce(function(rv, x) {\r\n                    (rv[x[key]] = rv[x[key]] || []).push(x);\r\n                    return rv;\r\n                }, {});\r\n            },\r\n            activar_tipo(){\r\n                if( this.tipo_form == 'textos' ){\r\n                $('.t_texto').css('display', 'block');\r\n                $('.t_guia').css('display', 'none');\r\n                }else{\r\n                $('.t_guia').css('display', 'block');\r\n                $('.t_texto').css('display', 'none');\r\n                }\r\n\r\n            }\r\n        },\r\n    }\r\n",{"version":3,"sources":["exportGuias.vue"],"names":[],"mappings":";AAgHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"exportGuias.vue","sourceRoot":"src/views/temporadas/components","sourcesContent":["<template>\r\n    <div>\r\n        <vx-card id=\"seccionImprimir\">\r\n            <p style=\"margin-left: 45px;color: red;\">Pedido #{{ id_pedido }}</p>\r\n            <div class=\"vx-row\" style=\"margin-left: 35px;\">\r\n                <div class=\"vx-col md:w-1/3 w-full mb-3\">\r\n                    <div class=\"label_inputs\">Asesor</div>\r\n                    <p style=\"font-weight: 500;\" class=\"text-primary\">{{pedido.asesor.nombres}}</p>\r\n                </div>\r\n                <div class=\"vx-col lg:w-1/3 md:w-full sm:w-full mb-3\">\r\n                    <div class=\"label_inputs\">Periodo</div>\r\n                    <p>{{ nombrePeriodo }}</p>\r\n                    <!-- <v-select disabled :options=\"periodos\" :reduce=\"periodos => periodos\" label=\"periodoescolar\" v-model=\"pedido.periodo\" class=\"w-full\" /> -->\r\n                </div>\r\n                <div class=\"vx-col lg:w-1/3 md:w-full sm:w-full mb-3\">\r\n                    <div class=\"label_inputs\">Fecha envío</div>\r\n                    <p>{{ pedido.fecha_envio.substring(0,10) }}</p>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <div :key=\"index\" v-for=\"(item, index) in series\">\r\n                    <div slot=\"header\" class=\"text-center\">\r\n                        <p v-if=\"index > 0\" style=\"height: 15px;\"></p>\r\n                        <b>SERIE {{item.nombre_serie.toUpperCase()}}</b>\r\n                    </div>\r\n                    <div class=\"w-full\" style=\"overflow-x:auto;\">\r\n                        <table class=\"table_pedidos\">\r\n                            <tr class=\"text-center\">\r\n                            <td rowspan=\"3\" style=\"width: 200px;\"><b>Áreas</b></td>\r\n                            <td colspan=\"20\"><b>Niveles</b></td>\r\n                            <td rowspan=\"3\" style=\"width: 70px;\" v-if=\"tipo_form == 'textos'\"><b>PVP</b></td>\r\n                            </tr>\r\n                            <tr class=\"text-center\">\r\n                            <td colspan=\"2\"><b>1</b></td> <td colspan=\"2\"><b>2</b></td> <td colspan=\"2\"><b>3</b></td> <td colspan=\"2\"><b>4</b></td> <td colspan=\"2\"><b>5</b></td> <td colspan=\"2\"><b>6</b></td> <td colspan=\"2\"><b>7</b></td> <td colspan=\"2\"><b>8</b></td> <td colspan=\"2\"><b>9</b></td> <td colspan=\"2\"><b>10</b></td>\r\n                            </tr>\r\n                            <tr class=\"text-center\">\r\n                            <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td> <td><b>GUÍA</b></td> <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td>\r\n                            </tr>\r\n                            <tr class=\"text-center\" align=\"center\" :key=\"indextr\" v-for=\"(tr, indextr) in item.areas\">\r\n                            <td style=\"background-color: #52C117;color:white;\"> <b>{{tr.nombrearea}}</b> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n1 == '' || tr.n1 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+0\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 0,1)\"  :hidden=\"!tr.n1\"  :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n1 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n1 == '' || tr.n1 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+1\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 1,1)\"         :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n1 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n2 == '' || tr.n2 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+2\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 2,2)\"   :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n2 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n2 == '' || tr.n2 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+3\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 3,2)\"         :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n2 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n3 == '' || tr.n3 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+4\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 4,3)\"   :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n3 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n3 == '' || tr.n3 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+5\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 5,3)\"         :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n3 : true\" /></td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n4 == '' || tr.n4 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+6\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 6,4)\"   :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n4 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n4 == '' || tr.n4 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+7\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 7,4)\"         :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n4 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n5 == '' || tr.n5 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+8\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 8,5)\"   :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n5 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n5 == '' || tr.n5 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+9\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 9,5)\"         :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n5 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n6 == '' || tr.n6 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+10\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 10,6)\" :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n6 : true\"/> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n6 == '' || tr.n6 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+11\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 11,6)\"       :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n6 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n7 == '' || tr.n7 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+12\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 12,7)\" :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n7 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n7 == '' || tr.n7 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+13\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 13,7)\"       :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n7 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n8 == '' || tr.n8 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+14\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 14,8)\" :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n8 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n8 == '' || tr.n8 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+15\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 15,8)\"       :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n8 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n9 == '' || tr.n9 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+16\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 16,9)\" :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n9 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n9 == '' || tr.n9 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+17\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 17,9)\"       :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n9 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_guia',  (tr.n10 == '' || tr.n10 == null) ?'': 'guiaEstilo']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+18\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 18,10)\"  :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n10 : true\" /> </td>\r\n                            <td> <input :class=\"['input_pvp_tabla t_texto', (tr.n10 == '' || tr.n10 == null) ?'': 'test']\" type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+19\" @blur=\"guardar_valor(tr.idarea, item.id_serie, 19,10)\" :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? !tr.n10 : true\" /> </td>\r\n                            <td><input class=\"input_pvp_tabla input_pvp\" v-show=\"tipo_form == 'textos'\" readonly type=\"number\" :id=\"item.id_serie+'_'+tr.idarea+'_'+20\" :value=\"tr.pvp\" /> </td>\r\n                            </tr>\r\n                            <tr class=\"text-center\">\r\n                            <td> <b style=\"font-size: 12px;\">{{tipo_form == 'textos' ? 'TOTAL TEXTOS' :'TOTAL GUIAS'}}</b> </td>\r\n                            <td colspan=\"7\" v-show=\"tipo_form == 'textos'\" class=\"input_totales\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_textos_serie_'+item.id_serie\" type=\"number\" /> </td>\r\n                            <td colspan=\"7\" v-show=\"tipo_form == 'guias'\" class=\"input_totales\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_textos_serie2_'+item.id_serie\" type=\"number\" /> </td>\r\n                            <td colspan=\"6\" style=\"font-size: 12px;\" v-show=\"tipo_form == 'textos'\"> <b>TOTAL USD</b> </td>\r\n                            <td colspan=\"8\" class=\"input_totales\" v-show=\"tipo_form == 'textos'\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_usd_serie_'+item.id_serie\" type=\"number\" /> </td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <p style=\"height: 15px;\"></p>\r\n                    <div slot=\"header\" class=\"text-center\"> <b>PLAN LECTOR</b> </div>\r\n                    <div class=\"w-full\" style=\"overflow-x:auto;\">\r\n                        <table class=\"table_pedidos\">\r\n                            <tr class=\"text-center\">\r\n                                <td><b>LIBRO</b></td>\r\n                                <td><b>GUÍA</b></td>\r\n                                <td>&nbsp;<b>TXT</b>&nbsp;&nbsp;</td>\r\n                                <td v-show=\"tipo_form == 'textos'\" style=\"width: 100px;\">&nbsp;<b>PVP</b>&nbsp;&nbsp;</td>\r\n                            </tr>\r\n                            <tr class=\"text-center\" align=\"center\" :key=\"index\" v-for=\"(item, index) in series_plan_lector\">\r\n                                <td  style=\"background-color: #52C117;color:white;\"> <b>{{item.nombrelibro}}</b> </td>\r\n                                <td> <input class=\"input_pvp_tabla t_guia\" type=\"number\" :id=\"6+'_'+item.id_libro+'_'+0\" @blur=\"guardar_valor(item.id_libro, 6, 0,-1)\"    :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? false:true\"/> </td>\r\n                                <td> <input class=\"input_pvp_tabla t_texto\" type=\"number\" :id=\"6+'_'+item.id_libro+'_'+1\" @blur=\"guardar_valor(item.id_libro, 6, 1,-1)\"   :disabled=\"usuario.id_group==11 && (contrato_generado == null || contrato_generado == '') ? false:true\" /> </td>\r\n                                <td v-show=\"tipo_form == 'textos'\"> <input class=\"input_pvp_tabla input_pvp\"  readonly type=\"number\" :value=\"item.pvp\" :id=\"6+'_'+item.id_libro+'_'+20\" /> </td>\r\n                            </tr>\r\n                            <tr class=\"text-center\">\r\n                                <td> <b style=\"font-size: 12px;\">{{tipo_form == 'textos' ? 'TOTAL TEXTOS' :'TOTAL GUIAS'}}</b> </td>\r\n                                <td colspan=\"2\" v-show=\"tipo_form == 'textos'\" style=\"font-size: 12px;\"> <b>TOTAL USD</b> </td>\r\n                                <td colspan=\"2\" v-show=\"tipo_form == 'textos'\"  class=\"input_totales\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_textos_serie_'+6\" type=\"number\" /> </td>\r\n                                <td colspan=\"2\" v-show=\"tipo_form == 'guias'\"  class=\"input_totales\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_textos_serie2_'+6\" type=\"number\" /> </td>\r\n                                <td colspan=\"2\" v-show=\"tipo_form == 'textos'\" class=\"input_totales\"> <input readonly class=\"input_totales input_pvp_tabla\" :id=\"'total_usd_serie_'+6\" type=\"number\" /> </td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n                <div class=\"w-full text-center\">\r\n                    <b class=\"text-warning ml-5\">\r\n                    CANTIDAD DE UNIDADES DE GUIAS TOTAL : <div style=\"display: inline-block;\">{{ total_unidades_guias }} </div><br>\r\n                    </b>\r\n                </div>\r\n            </div>\r\n        </vx-card>\r\n        <div class=\"w-full p-2 bg-gray-400 text-center\">\r\n            <vs-button color=\"primary\" @click=\"imprimirEval()\" type=\"border\">Imprimir</vs-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import flatPickr from 'vue-flatpickr-component';\r\n    import 'flatpickr/dist/flatpickr.css';\r\n    import {FormWizard, TabContent} from 'vue-form-wizard'\r\n    import 'vue-form-wizard/dist/vue-form-wizard.min.css'\r\n    import vSelect from 'vue-select';\r\n    import html2pdf from \"html2pdf.js\"\r\n    import moment from \"moment\";\r\n    export default {\r\n        components:{\r\n          FormWizard,\r\n          TabContent,\r\n          flatPickr,\r\n          'v-select': vSelect,\r\n        },\r\n        data: () => ({\r\n            usuario: [],\r\n            series: [],\r\n            periodos: [],\r\n            arregloPedidos:[],\r\n            series_plan_lector: [],\r\n            tipo_form: 'guias',\r\n            total_usd: 0,\r\n            total_unidades: 0,\r\n            total_unidades_guias:0,\r\n            porcentaje_descuento: 0,\r\n            porcentaje_descuento_series_basicas:0,\r\n            //variables para observacion y anticipo\r\n            disableAsesor:false,\r\n            pedido:{\r\n                id_pedido: 0, periodo: '', tipo_venta: '', fecha_envio: '', fecha_entrega: '', institucion: '', asesor: '', descuento: '', anticipo: '',ifanticipo:0,observacion:'', ruc:'', direccionInstitucion:'', nivel:'',tipo_descripcion:'', telefonoInstitucion:'',id_periodo:''\r\n            },\r\n            //fin variables para  observacion y anticipo\r\n            suma_bruta_series_b:0,\r\n            arregloSeriesBasicas:[],\r\n            pendienteLiquidar:0,\r\n            anticipo_aprobado:0,\r\n            contrato_generado:'',\r\n            multiplicacionPConfigurado:0,\r\n            RestaAutorizada:0,\r\n            resultadoComisionAsesor:0,\r\n            //variables de series basicas\r\n            //variables de cabecera\r\n            configdateTimePicker: {\r\n                enableTime: true,\r\n                dateFormat: 'Y-m-d'\r\n            },\r\n            nombrePeriodo:'',\r\n        }),\r\n        props:{\r\n            id_pedido:{\r\n                type:Number,\r\n                default:0\r\n            },\r\n            id_periodo:{\r\n                type:Number,\r\n                default:0\r\n            },\r\n        },\r\n        mounted() {\r\n            let me = this;\r\n            moment.locale(\"es\")\r\n            me.mes = moment().format('MMMM');\r\n            me.year = moment().format('YYYY')\r\n            this.pedido.periodo = {idperiodoescolar: localStorage.id_periodo_selected, periodoescolar: localStorage.nombre_periodo_selected}\r\n            this.usuario = JSON.parse(localStorage.getItem('usuario'))\r\n            this.nombrePeriodo = localStorage.nombre_periodo_selected\r\n            this.usuario_id = this.usuario.idusuario\r\n            this.getSeries()\r\n            this.getLibrosPlanLector()\r\n            me.getPedidos()\r\n            me.getPeriodos()\r\n            this.disableAsesor = true\r\n        },\r\n        methods: {\r\n            getPeriodos(){\r\n                let me = this\r\n                this.$http.get(this.$server_url+'get_periodos_activos')\r\n                .then(res => {\r\n                me.periodos = res.data\r\n                })\r\n            },\r\n            getPedidos(){\r\n                let me = this\r\n                me.$vs.loading();\r\n                this.$http.get(this.$server_url+'get_datos_pedido_guias/'+me.id_pedido)\r\n                    .then(res => {\r\n                    me.$vs.loading.close();\r\n                    me.pedido.id_pedido = res.data[0].id_pedido\r\n                    me.pedido.fecha_envio = res.data[0].fecha_envio\r\n                    me.pedido.asesor = {idusuario: res.data[0].id_asesor, nombres: res.data[0].nombres+' '+res.data[0].apellidos}\r\n                    me.cedula_asesor = res.data[0].cedula\r\n                    me.$vs.notify({\r\n                        text: \"Espere mientras se va generando el archivo...\",\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-file',\r\n                        time:3000\r\n                    })\r\n                    setTimeout(function() {me.imprimirEval()}, 2000)\r\n                })\r\n            },\r\n            imprimirEval(){\r\n                let me = this\r\n                var element = document.getElementById('seccionImprimir');\r\n                var opt = {\r\n                    margin:         [0, 0, 0.5, 0],\r\n                    filename:       \"ReporteGuias.pdf\",\r\n                    image:          { type: 'jpeg', quality: 0.98 },\r\n                    html2canvas:    {dpi: 192, scale: 2, letterRendering: true},\r\n                    pagebreak:      {mode: 'avoid-all'},\r\n                    //jsPDF:          { unit: 'in', format: 'letter', orientation: 'portrait' }\r\n                    jsPDF: {unit: 'pt', format: 'a4', orientation: 'portrait'}                };\r\n                html2pdf().from(element).set(opt).save();\r\n                me.arregloPedidos   = []\r\n                me.$vs.notify({\r\n                    text: \"Archivo descargado correctamente\",\r\n                    color: 'success',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-file',\r\n                    time:2000\r\n                })\r\n                me.$emit('change',true)\r\n            },\r\n            getSeries(){\r\n                let me = this\r\n                this.$http.get(this.$server_url+'series_formato_periodo/'+me.id_periodo)\r\n                .then(res => {\r\n                    me.series = res.data\r\n                    me.getLibrosPlanLector()\r\n                })\r\n            },\r\n            getLibrosPlanLector(){\r\n                let me = this\r\n                this.$http.get(this.$server_url+'get_pvp_planes_periodo/'+me.id_periodo)\r\n                .then(res => {\r\n                    me.series_plan_lector = res.data\r\n                    me.get_val_pedido()\r\n                })\r\n            },\r\n            get_val_pedido(){\r\n                let me = this\r\n                if(!me.id_pedido){\r\n                return\r\n                }\r\n                this.$http.get(this.$server_url+'get_val_pedido/'+me.id_pedido)\r\n                .then(res => {\r\n                    me.porcentaje_descuento                = res.data[0].descuento\r\n                    me.porcentaje_descuento_series_basicas = res.data[0].porcentaje_descuento\r\n                    me.contrato_generado                   = res.data[0].contrato_generado\r\n                    $.each(res.data,function(key, value){\r\n                    try {\r\n                        // console.log(value.id_serie+'_'+value.id_area+'_'+value.tipo_val + ' == ' + value.valor)\r\n                        document.getElementById(value.id_serie+'_'+value.id_area+'_'+value.tipo_val).value = value.valor\r\n                    } catch (error) {\r\n                    }\r\n                    });\r\n                    me.activar_tipo()\r\n                    let array_series = []\r\n                    array_series = me.groupArrayOfObjects(res.data, \"id_serie\")\r\n                    me.total_usd = 0\r\n                    me.total_unidades = 0\r\n                    me.total_unidades_guias = 0\r\n                    $.each(array_series,function(key, value){\r\n                    let array_areas_serie = []\r\n                    array_areas_serie = me.groupArrayOfObjects(value, \"id_area\")\r\n                    let total_serie = 0;\r\n                    let total_libros = 0;\r\n                    let total_guias  = 0;\r\n                    var val_pvp_area = 0\r\n                    $.each(array_areas_serie,function(key_1, value_1){ // recorre las areas de cada serie\r\n                        let sum_celdas_area = 0;\r\n                        $.each(value_1,function(key_2, value_2){ // recorre las celdas de cada area; tipo_val = posicion celda\r\n                        // console.log('value_2.tipo_val: '+value_2.tipo_val+' value_2.valo: '+value_2.valor)\r\n                        if( parseInt(value_2.tipo_val) % 2 != 0 ){ //sumar solo cantidades de textos\r\n                            total_libros += value_2.valor\r\n                            sum_celdas_area += value_2.valor\r\n                        }\r\n                        if( parseInt(value_2.tipo_val) % 2 == 0 ){ //sumar solo cantidades de las guias\r\n                            total_guias += value_2.valor\r\n                        }\r\n                        });\r\n                        //valor de pvp de area\r\n                        val_pvp_area = document.getElementById(value[0].id_serie+'_'+value_1[0].id_area+'_'+20).value //obtiene el pvp de cada area\r\n                        // console.log('sum_celdas_area*val_pvp_area = '+sum_celdas_area+' * '+val_pvp_area)\r\n                        total_serie += (sum_celdas_area*val_pvp_area)\r\n                    });\r\n                    document.getElementById('total_textos_serie_'+value[0].id_serie).value = total_libros\r\n                    document.getElementById('total_textos_serie2_'+value[0].id_serie).value = total_guias\r\n                    document.getElementById('total_usd_serie_'+value[0].id_serie).value = total_serie\r\n                    me.total_usd = me.total_usd + parseFloat(total_serie);\r\n                    me.total_unidades = me.total_unidades + parseInt(total_libros);\r\n                    me.total_unidades_guias = me.total_unidades_guias + parseInt(total_guias)\r\n                    //me.guardarTotalPedido()\r\n                    });\r\n                    me.sumarAreasBasicas()\r\n                   // me.guardarTotalPedido()\r\n\r\n                })\r\n                .catch(err => {\r\n                })\r\n            },\r\n            sumarAreasBasicas(){\r\n                let me = this;\r\n                var resultado = 0\r\n                me.arregloSeriesBasicas.forEach(element => {\r\n                let valor = parseFloat(document.getElementById('total_usd_serie_'+element.id_serie).value)\r\n                if (!isNaN(valor)) {\r\n                    resultado += valor;\r\n                }\r\n                });\r\n                me.suma_bruta_series_b            = resultado\r\n                me.multiplicacionPConfigurado     =  ((me.suma_bruta_series_b*this.porcentaje_descuento_series_basicas)/100).toFixed(2)\r\n                me.RestaAutorizada                =  (( me.suma_bruta_series_b ) - ( me.multiplicacionPConfigurado ))\r\n                me.resultadoComisionAsesor         =  ((me.RestaAutorizada*me.porcentaje_descuento)/100).toFixed(2)\r\n                if(me.selectifanticipo){\r\n                //suma de series basica\r\n                //se mutltiplica * el porcentaje de configuracion\r\n                //se resta el valor sumas basica - la multiplicacion del porcentaje\r\n                //se multiplica el resultado de ese valor x la comision del asesor\r\n                //se multiplica el resultado de la comision del asesor * 0.50\r\n                let anticipoSugerido50            =  ((me.resultadoComisionAsesor*50)/100).toFixed(2)\r\n                me.pedido.anticipo                = anticipoSugerido50\r\n                me.pendienteLiquidar              = me.resultadoComisionAsesor - me.anticipoAprobado\r\n                }else{\r\n                me.pedido.anticipo = 0\r\n                me.pendienteLiquidar              = me.resultadoComisionAsesor - me.anticipoAprobado\r\n                }\r\n                let datos = {\r\n                anticipo:me.pedido.anticipo,\r\n                liquidar:me.pendienteLiquidar\r\n                }\r\n                me.$emit('changePedido',datos)\r\n            },\r\n            async guardar_valor(id, serie, index,libro){\r\n                let me = this\r\n                if( document.getElementById(serie+'_'+id+'_'+index).value == '' ){ // no guardar cuando no se digita algo\r\n                return;\r\n                }\r\n                let valor = document.getElementById(serie+'_'+id+'_'+index).value\r\n                if(valor == 0){\r\n                document.getElementById(serie+'_'+id+'_'+index).value = ''\r\n                }\r\n                me.$vs.loading();\r\n                let formData = new FormData();\r\n                formData.append('id_pedido', me.id_pedido);\r\n                formData.append('valor', document.getElementById(serie+'_'+id+'_'+index).value);\r\n                formData.append('tipo_val', index);\r\n                formData.append('id_serie', serie);\r\n                formData.append('id_area', id);\r\n                if(libro == '-1') {\r\n                    formData.append('plan_lector',id)\r\n                    formData.append('libro','0')\r\n                }else{\r\n                    formData.append('plan_lector','0')\r\n                    formData.append('libro',libro)\r\n                }\r\n                await this.$http.post(this.$server_url+'save_val_pedido', formData)\r\n                .then(res => {\r\n                    me.$vs.loading.close();\r\n                    if(res.data.status == 0){\r\n                    me.$vs.notify({ text: res.data.message, color: 'danger', iconPack: 'feather', icon: 'icon-check', time:8000 })\r\n                    me.getSeries()\r\n                    return\r\n                    }\r\n                    if(res.data.status == 2){\r\n                    me.getSeries()\r\n                    }\r\n                    me.$vs.notify({ text: 'Guardado correctamente', color: 'success', iconPack: 'feather', icon: 'icon-check' })\r\n                    me.get_val_pedido()\r\n                })\r\n\r\n            },\r\n            async guardarTotalPedido(){\r\n                let me = this\r\n                let total_usd_format = me.total_usd.toFixed(2)\r\n                await me.$http.get(me.$server_url+'guardar_total_pedido/' + me.id_pedido + '/' + total_usd_format + '/' + me.total_unidades+'/'+me.total_unidades_guias)\r\n                .then(res => {\r\n                // console.log('total actualizado: ' + total_usd_format)\r\n                })\r\n            },\r\n            groupArrayOfObjects(list, key) {\r\n                return list.reduce(function(rv, x) {\r\n                    (rv[x[key]] = rv[x[key]] || []).push(x);\r\n                    return rv;\r\n                }, {});\r\n            },\r\n            activar_tipo(){\r\n                if( this.tipo_form == 'textos' ){\r\n                $('.t_texto').css('display', 'block');\r\n                $('.t_guia').css('display', 'none');\r\n                }else{\r\n                $('.t_guia').css('display', 'block');\r\n                $('.t_texto').css('display', 'none');\r\n                }\r\n\r\n            }\r\n        },\r\n    }\r\n</script>\r\n<style scoped>\r\n    @media print {\r\n        td,tr {page-break-before: always;}\r\n\r\n        table,td {page-break-after: always;}\r\n    }\r\n\r\n    *{\r\n        font-size: 7px;\r\n        font-weight: bold;\r\n    }\r\n    input[type=number].input_pvp_tabla::-webkit-inner-spin-button,\r\n    input[type=number].input_pvp_tabla::-webkit-outer-spin-button {\r\n        -webkit-appearance: none;\r\n        margin: 0;\r\n        }\r\n    input[type=number].input_pvp_tabla { -moz-appearance:textfield; }\r\n\r\n    input[type=number].input_pvp_tabla {\r\n      width: 100%;\r\n      height: 100%;\r\n      border: none;\r\n      font-size: 9px !important;\r\n      text-align: center;\r\n      color: rgb(60, 108, 192);\r\n      padding-top: -100px !important;\r\n    }\r\n    table.table_pedidos tr:hover {\r\n      background-color: #CCF7EF;\r\n      border: 2px solid rgb(118, 255, 177);\r\n      color: black!important;\r\n\r\n    }\r\n\r\n    input[type=number].input_pvp_tabla:hover {\r\n      background-color: #CCF7EF;\r\n      color: black!important;\r\n    }\r\n\r\n    table.table_pedidos td{\r\n      border: 1px solid rgb(227, 227, 227);\r\n      height: 18px;\r\n    }\r\n    table.table_pedidos th {\r\n      border: 1px solid rgb(227, 227, 227);\r\n      height: 18px;\r\n    }\r\n\r\n    table.table_pedidos {\r\n      width: 90%;\r\n      margin: 0 auto;\r\n      border-collapse: collapse;\r\n    }\r\n\r\n    .input_totales{\r\n      background-color:#31B10C;\r\n      color: white !important;\r\n      font-weight: bold;\r\n    }\r\n    .input_pvp{\r\n      background-color: #fcfcd9;\r\n      color: black!important;\r\n      border-radius: 0%;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .test{\r\n      color:black!important;\r\n      background-color: #fcfcd9;\r\n\r\n    }\r\n    .test{\r\n    /* color:white!important;\r\n    background-color: #6B97F5; */\r\n    }\r\n    .test:hover,.guiaEstilo:hover{\r\n    color:black;\r\n    }\r\n    .guiaEstilo{\r\n    color:#2559AD!important;\r\n    background-color: #BCF3AE;\r\n    }\r\n\r\n    .font1{\r\n        background-color: #fcfcd9;\r\n        color: black!important;;\r\n        font-weight: bold;\r\n    }\r\n</style>\r\n"]}]}