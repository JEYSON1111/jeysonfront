{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\capacitaciones\\components\\CapacitadoresComponents.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\capacitaciones\\components\\CapacitadoresComponents.vue","mtime":1712682815577},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nexport default {\r\n  components: {\r\n  },\r\n  props: {\r\n    capacitacionId: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    currentCapacitadores: {\r\n      type: Array,\r\n      default: () => ([]),\r\n    },\r\n    date: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    horaInicio: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    horaFin: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    handleEdit: {\r\n      type: Function,\r\n      default: () => { },\r\n    },\r\n  },\r\n  data: () => ({\r\n    isLoading: true,\r\n    capacitadores: [],\r\n    selectedCapacitadores: [],\r\n  }),\r\n  created() {\r\n    this.getCapacitadores();\r\n  },\r\n  methods: {\r\n    getCapacitadores() {\r\n      const me = this;\r\n      me.$http.get(`${me.$server_url}capacitadores/disponibles?fecha=${me.date}&hora_inicio=${me.horaInicio}&hora_fin=${me.horaFin}`).then((res) => {\r\n        me.capacitadores.push(...res.data);\r\n      }).catch((err) => {\r\n        me.$vs.notify({\r\n          title: 'Error',\r\n          text: err.message,\r\n          color: 'danger',\r\n        });\r\n      }).finally(() => {\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    updateSelection(item, isChecked) {\r\n      if (this.selectedCapacitadores.includes(item)) {\r\n        const index = this.selectedCapacitadores.indexOf(item);\r\n        this.selectedCapacitadores.splice(index, 1);\r\n      } else {\r\n        this.selectedCapacitadores.push(item);\r\n      }\r\n    },\r\n    updateCapacitacion() {\r\n      const me = this;\r\n      // check if already has capacitadores\r\n      if (me.selectedCapacitadores.length == 0) {\r\n        me.$vs.notify({\r\n          title: 'Warning',\r\n          text: 'Debe seleccionar al menos un capacitador',\r\n          color: 'warning',\r\n        });\r\n        return;\r\n      }\r\n\r\n      console.log(me.currentCapacitadores)\r\n\r\n      if (me.currentCapacitadores.length > 0) {\r\n        this.$vs.dialog({\r\n          type: 'confirm',\r\n          color: 'danger',\r\n          title: `Confirmar`,\r\n          text: `Ésta capacitacion ya tiene capacitadores asignados, ¿desea reemplazarlos?.\r\n          Si desea editar/ agregar capacitadores, presione \"Cancelar\" y luego \"Abrir formulario\"`,\r\n          accept: this.updateCapacitacionRequest\r\n        })\r\n      } else {\r\n        me.updateCapacitacionRequest();\r\n      }\r\n\r\n\r\n    },\r\n    updateCapacitacionRequest() {\r\n      const me = this;\r\n      me.$http.post(`${me.$server_url}capacitaciones/${me.capacitacionId}/capacitadores`, {\r\n        capacitadores: me.selectedCapacitadores,\r\n      }).then((res) => {\r\n        me.$vs.notify({\r\n          title: 'Éxito',\r\n          text: 'Capacitadores actualizados',\r\n          color: 'success',\r\n        });\r\n        // Emit event to update capacitadores in parent component\r\n        me.$emit('update-capacitadores');\r\n      }).catch((err) => {\r\n        me.$vs.notify({\r\n          title: 'Error',\r\n          text: err.message,\r\n          color: 'danger',\r\n        });\r\n      });\r\n    }\r\n  },\r\n  emits: ['update-capacitadores', 'edit-capacitacion'],\r\n}\r\n",{"version":3,"sources":["CapacitadoresComponents.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CapacitadoresComponents.vue","sourceRoot":"src/views/capacitaciones/components","sourcesContent":["<script>\r\nexport default {\r\n  components: {\r\n  },\r\n  props: {\r\n    capacitacionId: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    currentCapacitadores: {\r\n      type: Array,\r\n      default: () => ([]),\r\n    },\r\n    date: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    horaInicio: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    horaFin: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    handleEdit: {\r\n      type: Function,\r\n      default: () => { },\r\n    },\r\n  },\r\n  data: () => ({\r\n    isLoading: true,\r\n    capacitadores: [],\r\n    selectedCapacitadores: [],\r\n  }),\r\n  created() {\r\n    this.getCapacitadores();\r\n  },\r\n  methods: {\r\n    getCapacitadores() {\r\n      const me = this;\r\n      me.$http.get(`${me.$server_url}capacitadores/disponibles?fecha=${me.date}&hora_inicio=${me.horaInicio}&hora_fin=${me.horaFin}`).then((res) => {\r\n        me.capacitadores.push(...res.data);\r\n      }).catch((err) => {\r\n        me.$vs.notify({\r\n          title: 'Error',\r\n          text: err.message,\r\n          color: 'danger',\r\n        });\r\n      }).finally(() => {\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    updateSelection(item, isChecked) {\r\n      if (this.selectedCapacitadores.includes(item)) {\r\n        const index = this.selectedCapacitadores.indexOf(item);\r\n        this.selectedCapacitadores.splice(index, 1);\r\n      } else {\r\n        this.selectedCapacitadores.push(item);\r\n      }\r\n    },\r\n    updateCapacitacion() {\r\n      const me = this;\r\n      // check if already has capacitadores\r\n      if (me.selectedCapacitadores.length == 0) {\r\n        me.$vs.notify({\r\n          title: 'Warning',\r\n          text: 'Debe seleccionar al menos un capacitador',\r\n          color: 'warning',\r\n        });\r\n        return;\r\n      }\r\n\r\n      console.log(me.currentCapacitadores)\r\n\r\n      if (me.currentCapacitadores.length > 0) {\r\n        this.$vs.dialog({\r\n          type: 'confirm',\r\n          color: 'danger',\r\n          title: `Confirmar`,\r\n          text: `Ésta capacitacion ya tiene capacitadores asignados, ¿desea reemplazarlos?.\r\n          Si desea editar/ agregar capacitadores, presione \"Cancelar\" y luego \"Abrir formulario\"`,\r\n          accept: this.updateCapacitacionRequest\r\n        })\r\n      } else {\r\n        me.updateCapacitacionRequest();\r\n      }\r\n\r\n\r\n    },\r\n    updateCapacitacionRequest() {\r\n      const me = this;\r\n      me.$http.post(`${me.$server_url}capacitaciones/${me.capacitacionId}/capacitadores`, {\r\n        capacitadores: me.selectedCapacitadores,\r\n      }).then((res) => {\r\n        me.$vs.notify({\r\n          title: 'Éxito',\r\n          text: 'Capacitadores actualizados',\r\n          color: 'success',\r\n        });\r\n        // Emit event to update capacitadores in parent component\r\n        me.$emit('update-capacitadores');\r\n      }).catch((err) => {\r\n        me.$vs.notify({\r\n          title: 'Error',\r\n          text: err.message,\r\n          color: 'danger',\r\n        });\r\n      });\r\n    }\r\n  },\r\n  emits: ['update-capacitadores', 'edit-capacitacion'],\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"flex flex-col items-end\">\r\n    <div class=\"w-full grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n      <div v-if=\"isLoading\" class=\"\">Cargando...</div>\r\n      <div v-if=\"capacitadores.length > 0\" class=\"w-full flex items-center\" v-for=\"(item, index) in capacitadores\"\r\n        :key=\"index\">\r\n        <vs-checkbox :label=\"item.idusuario\" :val=\"item.idusuario\" @change=\"updateSelection(item.idusuario, $event)\" />\r\n        <span class=\"text-bold\">\r\n          {{ item.nombres }} {{ item.apellidos }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <div class=\"w-full flex justify-end space-x-2\">\r\n      <vs-button color=\"dark\" type=\"border\" @click=\"handleEdit(capacitacionId)\">\r\n        Abrir formulario\r\n      </vs-button>\r\n      <vs-button v-if=\"!isLoading\" @click=\"updateCapacitacion\">\r\n        Guardar\r\n      </vs-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n"]}]}