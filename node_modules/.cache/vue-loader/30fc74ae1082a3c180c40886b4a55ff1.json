{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\Estadisticas\\instituciones.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\Estadisticas\\instituciones.vue","mtime":1712682815345},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport \"vue-select/dist/vue-select.css\";\r\nimport vSelect from \"vue-select\";\r\nVue.use(axios)\r\nVue.component(\"v-select\", vSelect);\r\nexport default {\r\n    data() {\r\n        return {\r\n            usuario: [],\r\n            users: [],\r\n            docentes: [],\r\n            data: [],\r\n            instituciones: [],\r\n        }\r\n    },\r\n    created() {\r\n        this.usuario = JSON.parse(localStorage.getItem(\"usuario\"));\r\n    },\r\n    mounted() {\r\n        this.getInstituciones();\r\n    },\r\n    methods: {\r\n        getInstituciones() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"director-instituciones?idusuario=\" + me.usuario.idusuario)\r\n                .then(res => {\r\n                    console.log(res)\r\n                    res.data.forEach(element => {\r\n                        this.$http.get(this.$server_url+\"institucion/\" + element.idinstitucion)\r\n                            .then(function (response) {\r\n                                console.log(response.data)\r\n                                me.instituciones.push(response.data)\r\n                            })\r\n                            .catch(function (error) {})\r\n                    });\r\n                })\r\n                .catch(err => {\r\n                    console.error(err);\r\n                })\r\n        },\r\n        async getDatos(item) {\r\n            let me = this;\r\n            me.$vs.loading({\r\n                color: '#046AE7'\r\n            })\r\n            var conaccesos = 0;\r\n            var sinaccesos = 0;\r\n            await this.$http.get(this.$server_url+\"docentes?idInstitucion=\" + item.idInstitucion)\r\n                .then(function (response) {\r\n                    response.data.forEach(async (element) => {\r\n                        var usuario = new Object();\r\n                        usuario.idusuario = element.idusuario;\r\n                        usuario.cedula = element.cedula;\r\n                        usuario.nombres = element.nombres;\r\n                        usuario.apellidos = element.apellidos;\r\n                        await this.$http.get(this.$server_url+\"estudiantes?idusuario=\" + element.idusuario)\r\n                            .then(res => {\r\n                                if (res.data.length > 0) {\r\n                                    conaccesos++;\r\n                                    usuario.accesos = res.data.length;\r\n                                    var aux = res.data.length\r\n                                    me.data.push([element.nombres + \" \" + element.apellidos, res.data.length, element.idusuario, element.cedula])\r\n                                } else {\r\n                                    sinaccesos++;\r\n                                    me.data.push([element.nombres + \" \" + element.apellidos, 0, element.idusuario, element.cedula])\r\n                                    usuario.accesos = 0;\r\n                                }\r\n                                localStorage.setItem('data', JSON.stringify(me.data));\r\n                            })\r\n                            .catch(err => {\r\n                                console.error(err);\r\n                            })\r\n                        me.docentes.push(usuario);\r\n                    });\r\n                })\r\n                .catch(function (error) {})\r\n            await this.$http.get(this.$server_url+\"contenidos?idinstitucion=\" + item.idInstitucion)\r\n            .then(res => {\r\n                localStorage.setItem('contenidos', JSON.stringify(res.data));\r\n            })\r\n            .catch(err => {\r\n                console.error(err); \r\n            })\r\n            setTimeout(function () {\r\n                localStorage.sinaccesos = sinaccesos;\r\n                localStorage.conaccesos = conaccesos;\r\n                localStorage.setItem('docentes', JSON.stringify(me.docentes));\r\n                localStorage.setItem('institucion', JSON.stringify(item))\r\n                me.$vs.loading.close()\r\n                me.$router.push('/estadisticas');\r\n            }, 5000);\r\n        },\r\n        getDate(date) {\r\n            var d = new Date(date);\r\n            var datestring = d.getFullYear() + \"-\" + (d.getMonth() + 1) + \"-\" + d.getDate();\r\n            return datestring;\r\n        },\r\n    },\r\n}\r\n",{"version":3,"sources":["instituciones.vue"],"names":[],"mappings":";AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"instituciones.vue","sourceRoot":"src/views/Estadisticas","sourcesContent":["<template>\r\n<div>\r\n    <div class=\"vx-row\">\r\n        <div class=\"vx-col w-full lg:w-1/4 sm:w-1/2 mb-base\" v-for=\"(item,$index) in instituciones\" :key=\"$index\">\r\n            <vx-card class=\"p-2\" @click=\"getDatos(item)\">\r\n                <div class=\"text-center divinst\">\r\n                    <span class=\"textinst\">{{ item.nombreInstitucion }}</span>\r\n                </div>\r\n                <vs-avatar class=\"mx-auto my-6 block\" size=\"80px\" :src=\"$server_url+'uploads/pngtree_bankinstitutionmoneyireland_abstract_circle_background_fla_png_image_1484516_482e7303de.jpg'\" />\r\n            </vx-card>\r\n        </div>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport \"vue-select/dist/vue-select.css\";\r\nimport vSelect from \"vue-select\";\r\nVue.use(axios)\r\nVue.component(\"v-select\", vSelect);\r\nexport default {\r\n    data() {\r\n        return {\r\n            usuario: [],\r\n            users: [],\r\n            docentes: [],\r\n            data: [],\r\n            instituciones: [],\r\n        }\r\n    },\r\n    created() {\r\n        this.usuario = JSON.parse(localStorage.getItem(\"usuario\"));\r\n    },\r\n    mounted() {\r\n        this.getInstituciones();\r\n    },\r\n    methods: {\r\n        getInstituciones() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+\"director-instituciones?idusuario=\" + me.usuario.idusuario)\r\n                .then(res => {\r\n                    console.log(res)\r\n                    res.data.forEach(element => {\r\n                        this.$http.get(this.$server_url+\"institucion/\" + element.idinstitucion)\r\n                            .then(function (response) {\r\n                                console.log(response.data)\r\n                                me.instituciones.push(response.data)\r\n                            })\r\n                            .catch(function (error) {})\r\n                    });\r\n                })\r\n                .catch(err => {\r\n                    console.error(err);\r\n                })\r\n        },\r\n        async getDatos(item) {\r\n            let me = this;\r\n            me.$vs.loading({\r\n                color: '#046AE7'\r\n            })\r\n            var conaccesos = 0;\r\n            var sinaccesos = 0;\r\n            await this.$http.get(this.$server_url+\"docentes?idInstitucion=\" + item.idInstitucion)\r\n                .then(function (response) {\r\n                    response.data.forEach(async (element) => {\r\n                        var usuario = new Object();\r\n                        usuario.idusuario = element.idusuario;\r\n                        usuario.cedula = element.cedula;\r\n                        usuario.nombres = element.nombres;\r\n                        usuario.apellidos = element.apellidos;\r\n                        await this.$http.get(this.$server_url+\"estudiantes?idusuario=\" + element.idusuario)\r\n                            .then(res => {\r\n                                if (res.data.length > 0) {\r\n                                    conaccesos++;\r\n                                    usuario.accesos = res.data.length;\r\n                                    var aux = res.data.length\r\n                                    me.data.push([element.nombres + \" \" + element.apellidos, res.data.length, element.idusuario, element.cedula])\r\n                                } else {\r\n                                    sinaccesos++;\r\n                                    me.data.push([element.nombres + \" \" + element.apellidos, 0, element.idusuario, element.cedula])\r\n                                    usuario.accesos = 0;\r\n                                }\r\n                                localStorage.setItem('data', JSON.stringify(me.data));\r\n                            })\r\n                            .catch(err => {\r\n                                console.error(err);\r\n                            })\r\n                        me.docentes.push(usuario);\r\n                    });\r\n                })\r\n                .catch(function (error) {})\r\n            await this.$http.get(this.$server_url+\"contenidos?idinstitucion=\" + item.idInstitucion)\r\n            .then(res => {\r\n                localStorage.setItem('contenidos', JSON.stringify(res.data));\r\n            })\r\n            .catch(err => {\r\n                console.error(err); \r\n            })\r\n            setTimeout(function () {\r\n                localStorage.sinaccesos = sinaccesos;\r\n                localStorage.conaccesos = conaccesos;\r\n                localStorage.setItem('docentes', JSON.stringify(me.docentes));\r\n                localStorage.setItem('institucion', JSON.stringify(item))\r\n                me.$vs.loading.close()\r\n                me.$router.push('/estadisticas');\r\n            }, 5000);\r\n        },\r\n        getDate(date) {\r\n            var d = new Date(date);\r\n            var datestring = d.getFullYear() + \"-\" + (d.getMonth() + 1) + \"-\" + d.getDate();\r\n            return datestring;\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style>\r\n.textinst {\r\n    font-size: 13px;\r\n}\r\n\r\n.divinst {\r\n    height: 60px;\r\n}\r\n</style>\r\n"]}]}