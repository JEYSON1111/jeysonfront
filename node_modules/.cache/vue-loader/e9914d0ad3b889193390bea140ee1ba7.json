{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\juegos\\form_rompecabezas.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\juegos\\form_rompecabezas.vue","mtime":1712682816076},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n    import Vue from 'vue'\r\n    import axios from 'axios'\r\n    import vSelect from 'vue-select'\r\n    import $ from 'jquery'\r\n    Vue.use(axios)\r\n    export default {\r\n        data(){\r\n            return {\r\n                usuario: [],\r\n                juegos: {},\r\n                id_juego: '',\r\n                titulo: '',\r\n                img_portada: '',\r\n                src_imagen_juego: '',\r\n                img_old: '',\r\n                modal_juego: false,\r\n                tipo_juego: 'ROMPECABEZAS',\r\n                id_rompecabezas: '',\r\n            }\r\n        },\r\n        components: {\r\n                'v-select': vSelect,\r\n        },\r\n        created(){\r\n            let me = this\r\n            me.usuario = JSON.parse(localStorage.getItem('usuario'))\r\n            me.id_juego = localStorage.getItem('id_rompecabezas')\r\n\r\n        },\r\n        mounted() {\r\n          this.get_img_rompecabezas()\r\n        },\r\n        methods: {\r\n            get_img_rompecabezas(){\r\n                let me = this\r\n                axios.get(me.$server_url+'get_img_rompecabezas/'+me.id_juego)\r\n                .then(res => {\r\n                    me.juegos = res.data;\r\n                    me.$vs.loading.close()\r\n                })\r\n            },\r\n            mostrarImg(file, img){\r\n                let me = this;\r\n                me.src_imagen_juego = ' ';\r\n                var archivo = document.getElementById(\"file\"+file).files[0];\r\n                if( archivo.type != 'image/png' && archivo.type != 'image/jpeg' ){\r\n                   me.$vs.notify({ text:'Formato no permitido', color:'warning', iconPack: 'feather', icon:'icon-alert-triangle'})\r\n                   me.modal_juego = false\r\n                   window.$(\"#file\"+file).val('')\r\n                   return\r\n                }\r\n\r\n                var reader = new FileReader();\r\n                reader.readAsDataURL(archivo);\r\n                reader.onload = function (e) {\r\n                    var image = new Image();\r\n                    image.src = e.target.result;\r\n                    image.onload = function () {\r\n                        var height = this.height;\r\n                        var width = this.width;\r\n                        if (height != 600 || width != 600) {\r\n                            me.src_imagen_juego = ''\r\n                            window.$(\"#file\"+file).val('')\r\n                            me.$vs.notify({ text:'Tamaño de imagen no permitido, la medida recomendada es 600x600', color:'warning', iconPack: 'feather', icon:'icon-alert-triangle'})\r\n                            return\r\n                        }\r\n                    };\r\n\r\n                    // mostrar imagen\r\n                    var reader = new FileReader();\r\n                    if (me) {\r\n                        reader.readAsDataURL(archivo );\r\n                        reader.onloadend = function () {\r\n                            document.getElementById(\"img\"+img).src = reader.result;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            guardarJuego(){\r\n                let me = this;\r\n\r\n                if( me.titulo == '' || me.src_imagen_juego == '' ){\r\n                    me.$vs.notify({ text:'Debe completar todos los campos antes de continuar', color:'warning', iconPack: 'feather', icon:'icon-alert-triangle'})\r\n                    return\r\n                }\r\n\r\n                let fileImgPreg;\r\n                fileImgPreg = document.getElementById(\"file1\").files[0];\r\n                if(fileImgPreg === undefined ){\r\n                    fileImgPreg = me.imagen;\r\n                }\r\n\r\n                me.$vs.loading()\r\n                const formData = new FormData();\r\n                    formData.append('id', me.id_rompecabezas);\r\n                    formData.append('img_portada', fileImgPreg);\r\n                    formData.append('img_old', me.img_old);\r\n                    formData.append('titulo', me.titulo);\r\n                    formData.append('id_juego', me.id_juego);\r\n\r\n                axios.post(this.$data_url+'api/save_rompecabezas', formData)\r\n                .then(res => {\r\n                  me.$vs.loading.close()\r\n                      console.log('*************')\r\n                      console.log(res.data)\r\n                      console.log('*************')\r\n                      me.$vs.notify({ text:'Guardado correctamente', color:'success', iconPack: 'feather', icon:'icon-check'})\r\n                      me.get_img_rompecabezas()\r\n                })\r\n                .catch(function (error) {\r\n                  console.log('*********************')\r\n                  console.log(error)\r\n                  console.log('*********************')\r\n                  me.$vs.loading.close()\r\n                })\r\n            },\r\n            ver_form_juego(item){\r\n              let me = this\r\n                me.id_rompecabezas = item.id_contenido_juego\r\n                me.img_old = item.imagen\r\n                me.titulo = item.descripcion\r\n                me.src_imagen_juego = item.imagen\r\n                me.modal_juego = true\r\n            },\r\n            openConfirm() {\r\n              this.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                text: '¿Está seguro de eliminar este rompecabezas?',\r\n                accept: this.acceptEliminar\r\n              })\r\n            },\r\n            acceptEliminar() {\r\n              let me = this\r\n              axios.get(this.$data_url+'api/delete_rompecabezas/' + me.id_rompecabezas)\r\n              .then(res => {\r\n                me.$vs.loading.close()\r\n                this.$vs.notify({ color: 'danger', title: 'Rompecabezas eliminado', text: 'Ya no estará disponible.' })\r\n                me.get_img_rompecabezas()\r\n              })\r\n            },\r\n\r\n        },\r\n    }\r\n",{"version":3,"sources":["form_rompecabezas.vue"],"names":[],"mappings":";AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"form_rompecabezas.vue","sourceRoot":"src/views/juegos","sourcesContent":["<template>\r\n<div>\r\n\r\n  <vs-prompt @cancel=\"modal_juego=false;\" @accept=\"guardarJuego()\" @close=\"modal_juego=false;\" :active.sync=\"modal_juego\" color=\"primary\" title=\"Juego\" acceptText=\"Aceptar\" cancelText=\"Cancelar\">\r\n      <div class=\"w-full\">\r\n        <div style=\"border: 1px solid #d5d5d5; border-radius: 10px; padding: 5px 5px 5px 5px;\" align=\"center\" class=\"mb-2\">\r\n            <input type=\"file\" name=\"file1\" id=\"file1\" class=\"inputfile\" style=\"display: none;\" v-on:change=\"mostrarImg(1,1)\" accept=\"image/*\">\r\n            <label for=\"file1\" style=\"margin-bottom: -10px; cursor: pointer; color: gray; width: 100%; font-size: 11px; line-height: 80%;\">\r\n                Click aquí para subir una imagen <b>600x600</b>\r\n            </label>\r\n            <img v-if=\"src_imagen_juego != ''\" id=\"img1\" class=\"mb-2\" v-bind:src=\"$data_url + 'archivos/images/imagenes_juegos/rompecabezas/' + src_imagen_juego\" style=\"border-radius: 5px; width: 100%;\">\r\n        </div>\r\n\r\n        <vs-input label=\"Título juego\" v-model=\"titulo\" class=\"w-full\" />\r\n\r\n      </div>\r\n  </vs-prompt>\r\n\r\n\r\n  <div class=\"w-full mb-2\" align=\"left\">\r\n    <vs-button size=\"small\" class=\"px-4 py-3 text-sm\" color=\"black\" @click=\"id_rompecabezas=''; src_imagen_juego=''; titulo=''; img_old=''; modal_juego=true;\">Agregar imagen</vs-button>\r\n  </div>\r\n\r\n  <div class=\"vx-row\">\r\n      <div class=\"vx-col w-1/2 md:w-1/3 sm:1/2 xl:w-1/4 mt-3\" v-for=\"(item,$index) in juegos\" :key=\"$index\">\r\n          <vx-card class=\"text-center\">\r\n              <div slot=\"no-body\">\r\n                  <img class=\"responsive card-img-top\" v-bind:src=\"$data_url + 'archivos/images/imagenes_juegos/rompecabezas/' + item.imagen\">\r\n              </div>\r\n              <p class=\"font-bold\"> {{item.descripcion}} </p>\r\n              <div class=\"w-3/3 ml-auto mt-3\">\r\n                  <vs-button color=\"primary\" class=\"p-2 m-1\" type=\"border\" icon-pack=\"feather\" @click=\"ver_form_juego(item)\" icon=\"icon-edit\" style=\"display: inline-block; width: 100px;\"></vs-button>\r\n                  <vs-button color=\"danger\" class=\"p-2 m-1\" type=\"border\" icon-pack=\"feather\" @click=\"id_rompecabezas=item.id_contenido_juego;  openConfirm()\" icon=\"icon-trash\" style=\"display: inline-block; width: 100px;\"></vs-button>\r\n              </div>\r\n          </vx-card>\r\n      </div>\r\n  </div>\r\n\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\n    import Vue from 'vue'\r\n    import axios from 'axios'\r\n    import vSelect from 'vue-select'\r\n    import $ from 'jquery'\r\n    Vue.use(axios)\r\n    export default {\r\n        data(){\r\n            return {\r\n                usuario: [],\r\n                juegos: {},\r\n                id_juego: '',\r\n                titulo: '',\r\n                img_portada: '',\r\n                src_imagen_juego: '',\r\n                img_old: '',\r\n                modal_juego: false,\r\n                tipo_juego: 'ROMPECABEZAS',\r\n                id_rompecabezas: '',\r\n            }\r\n        },\r\n        components: {\r\n                'v-select': vSelect,\r\n        },\r\n        created(){\r\n            let me = this\r\n            me.usuario = JSON.parse(localStorage.getItem('usuario'))\r\n            me.id_juego = localStorage.getItem('id_rompecabezas')\r\n\r\n        },\r\n        mounted() {\r\n          this.get_img_rompecabezas()\r\n        },\r\n        methods: {\r\n            get_img_rompecabezas(){\r\n                let me = this\r\n                axios.get(me.$server_url+'get_img_rompecabezas/'+me.id_juego)\r\n                .then(res => {\r\n                    me.juegos = res.data;\r\n                    me.$vs.loading.close()\r\n                })\r\n            },\r\n            mostrarImg(file, img){\r\n                let me = this;\r\n                me.src_imagen_juego = ' ';\r\n                var archivo = document.getElementById(\"file\"+file).files[0];\r\n                if( archivo.type != 'image/png' && archivo.type != 'image/jpeg' ){\r\n                   me.$vs.notify({ text:'Formato no permitido', color:'warning', iconPack: 'feather', icon:'icon-alert-triangle'})\r\n                   me.modal_juego = false\r\n                   window.$(\"#file\"+file).val('')\r\n                   return\r\n                }\r\n\r\n                var reader = new FileReader();\r\n                reader.readAsDataURL(archivo);\r\n                reader.onload = function (e) {\r\n                    var image = new Image();\r\n                    image.src = e.target.result;\r\n                    image.onload = function () {\r\n                        var height = this.height;\r\n                        var width = this.width;\r\n                        if (height != 600 || width != 600) {\r\n                            me.src_imagen_juego = ''\r\n                            window.$(\"#file\"+file).val('')\r\n                            me.$vs.notify({ text:'Tamaño de imagen no permitido, la medida recomendada es 600x600', color:'warning', iconPack: 'feather', icon:'icon-alert-triangle'})\r\n                            return\r\n                        }\r\n                    };\r\n\r\n                    // mostrar imagen\r\n                    var reader = new FileReader();\r\n                    if (me) {\r\n                        reader.readAsDataURL(archivo );\r\n                        reader.onloadend = function () {\r\n                            document.getElementById(\"img\"+img).src = reader.result;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            guardarJuego(){\r\n                let me = this;\r\n\r\n                if( me.titulo == '' || me.src_imagen_juego == '' ){\r\n                    me.$vs.notify({ text:'Debe completar todos los campos antes de continuar', color:'warning', iconPack: 'feather', icon:'icon-alert-triangle'})\r\n                    return\r\n                }\r\n\r\n                let fileImgPreg;\r\n                fileImgPreg = document.getElementById(\"file1\").files[0];\r\n                if(fileImgPreg === undefined ){\r\n                    fileImgPreg = me.imagen;\r\n                }\r\n\r\n                me.$vs.loading()\r\n                const formData = new FormData();\r\n                    formData.append('id', me.id_rompecabezas);\r\n                    formData.append('img_portada', fileImgPreg);\r\n                    formData.append('img_old', me.img_old);\r\n                    formData.append('titulo', me.titulo);\r\n                    formData.append('id_juego', me.id_juego);\r\n\r\n                axios.post(this.$data_url+'api/save_rompecabezas', formData)\r\n                .then(res => {\r\n                  me.$vs.loading.close()\r\n                      console.log('*************')\r\n                      console.log(res.data)\r\n                      console.log('*************')\r\n                      me.$vs.notify({ text:'Guardado correctamente', color:'success', iconPack: 'feather', icon:'icon-check'})\r\n                      me.get_img_rompecabezas()\r\n                })\r\n                .catch(function (error) {\r\n                  console.log('*********************')\r\n                  console.log(error)\r\n                  console.log('*********************')\r\n                  me.$vs.loading.close()\r\n                })\r\n            },\r\n            ver_form_juego(item){\r\n              let me = this\r\n                me.id_rompecabezas = item.id_contenido_juego\r\n                me.img_old = item.imagen\r\n                me.titulo = item.descripcion\r\n                me.src_imagen_juego = item.imagen\r\n                me.modal_juego = true\r\n            },\r\n            openConfirm() {\r\n              this.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'danger',\r\n                title: `Confirmar`,\r\n                text: '¿Está seguro de eliminar este rompecabezas?',\r\n                accept: this.acceptEliminar\r\n              })\r\n            },\r\n            acceptEliminar() {\r\n              let me = this\r\n              axios.get(this.$data_url+'api/delete_rompecabezas/' + me.id_rompecabezas)\r\n              .then(res => {\r\n                me.$vs.loading.close()\r\n                this.$vs.notify({ color: 'danger', title: 'Rompecabezas eliminado', text: 'Ya no estará disponible.' })\r\n                me.get_img_rompecabezas()\r\n              })\r\n            },\r\n\r\n        },\r\n    }\r\n</script>\r\n"]}]}