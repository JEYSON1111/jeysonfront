{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\gerencia\\listado_de_Contratos.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos\\gerencia\\listado_de_Contratos.vue","mtime":1712682816336},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n  import vSelect from 'vue-select';\r\n  export default {\r\n      name: 'lista-de-contratos-gerencia',\r\n      components: {\r\n          'v-select': vSelect,\r\n      },\r\n      data() {\r\n          return {\r\n              listaPeriodos: [],\r\n              periodoSelect: {},\r\n              listaContratos: [],\r\n              listaContratosTmp: [],\r\n              noroot: '',\r\n              tipo_pedido: 0,\r\n              filtro: 0,\r\n              arregloLibros: [],\r\n              modalLibros: false,\r\n              totalLibros: 0,\r\n          }\r\n      },\r\n      mounted() {\r\n          let me = this;\r\n          me.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n          me.getPeriodos();\r\n      },\r\n      methods: {\r\n          getPeriodos() {\r\n              let me = this;\r\n              this.$http.get(this.$server_url + 'periodoActivo')\r\n                  .then((result) => {\r\n                      // console.log(result.data)\r\n                      me.listaPeriodos = result.data\r\n                  }).catch((err) => {\r\n                      console.log(err)\r\n                  });\r\n          },\r\n          f_pedidos(idperiodo) {\r\n              let me = this;\r\n              console.log(idperiodo)\r\n              if (idperiodo == null) {\r\n                  return\r\n              }\r\n              me.$vs.loading()\r\n              this.$http.get(this.$server_url + 'reportePedidosLibrosGuias/' + idperiodo)\r\n                  .then((result) => {\r\n                      console.log(result.data)\r\n                      me.listaContratosTmp = result.data\r\n                      me.filtroTipo();\r\n                      me.$vs.loading.close()\r\n                  }).catch((err) => {\r\n                      console.log(err)\r\n                      me.$vs.loading.close()\r\n                  });\r\n          },\r\n          filtroTipo() {\r\n              let me = this;\r\n              console.log(me.filtro)\r\n              if (me.filtro == 0) {\r\n                  let datos = me.listaContratosTmp.filter(p => (p.tipo == 0));\r\n                  me.listaContratos = datos\r\n                  return\r\n              }\r\n              if (me.filtro == 1) {\r\n                  let datos = me.listaContratosTmp.filter(p => (p.tipo == 1));\r\n                  me.listaContratos = datos\r\n                  return\r\n              }\r\n              if (me.filtro == 2) {\r\n                  let datos = me.listaContratosTmp.filter(p => (p.ph_tipo_pago == 1));\r\n                  me.listaContratos = datos\r\n                  return\r\n              }\r\n              if (me.filtro == 3) {\r\n                  let datos = me.listaContratosTmp.filter(p => (p.ph_tipo_pago == 0));\r\n                  me.listaContratos = datos\r\n                  return\r\n              }\r\n          },\r\n          f_detalle_libros(item) {\r\n              console.log(item)\r\n              let me = this\r\n              me.modalLibros = true;\r\n              me.$vs.loading()\r\n              this.$http.get(this.$server_url + 'get_val_pedidoInfo/' + item.id_pedido)\r\n                  .then(res => {\r\n                      console.log(res.data)\r\n                      let datos = res.data\r\n                      me.arregloLibros = datos.filter(p => p.valor > 0)\r\n                      me.totalLibros = datos.reduce((acc, valor) => {\r\n                          const respuesta = acc + valor.valor\r\n                          return respuesta\r\n                      }, 0)\r\n                      me.$vs.loading.close()\r\n                  })\r\n          },\r\n          f_notificaciones(msj, color, icono) {\r\n              let me = this;\r\n              me.$vs.notify({\r\n                  text: msj,\r\n                  color: color,\r\n                  iconPack: 'feather',\r\n                  icon: icono\r\n              })\r\n              return;\r\n          }\r\n      },\r\n  }\r\n  ",{"version":3,"sources":["listado_de_Contratos.vue"],"names":[],"mappings":";AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"listado_de_Contratos.vue","sourceRoot":"src/views/pedidos/gerencia","sourcesContent":["<template>\r\n  <div>\r\n      <div class=\"m-2 mb-4\">\r\n          <small>Seleccione un periodo: </small>\r\n          <v-select :options=\"listaPeriodos\" :reduce=\"listaPeriodos => listaPeriodos\" label=\"descripcion\" class=\"w-full\" v-model=\"periodoSelect\" @input=\"f_pedidos(periodoSelect.idperiodoescolar)\" />\r\n      </div>\r\n      <div v-if=\"periodoSelect.idperiodoescolar != null\">\r\n          <vs-radio class=\"m-3\" v-model=\"filtro\" @input=\"filtroTipo();\" vs-name=\"radios1tipo\" vs-value=\"1\"> Pedidos Guias</vs-radio>\r\n          <vs-radio class=\"m-3\" v-model=\"filtro\" @input=\"filtroTipo();\" vs-name=\"radios1tipo\" vs-value=\"0\">Pedidos Textos</vs-radio>\r\n          <vs-radio class=\"m-3\" v-model=\"filtro\" @input=\"filtroTipo();\" vs-name=\"radios1tipo\" vs-value=\"2\">Liquidados</vs-radio>\r\n          <vs-radio class=\"m-3\" v-model=\"filtro\" @input=\"filtroTipo();\" vs-name=\"radios1tipo\" vs-value=\"3\">Anticipos</vs-radio>\r\n      </div>\r\n      <div class=\"m-2 mb-4\">\r\n          <vs-table search :data=\"listaContratos\">\r\n              <template slot=\"header\">\r\n                  <vs-chip color=\"primary\" class=\"ml-1\">Cantidad: {{listaContratos.length}}</vs-chip>\r\n              </template>\r\n              <template slot=\"thead\">\r\n                  <vs-th width=\"25%\" sort-key=\"apellidos\">Asesor / Responsable</vs-th>\r\n                  <vs-th width=\"30%\" sort-key=\"total_venta\" v-if=\"filtro != 1 \">detalles</vs-th>\r\n                  <vs-th v-if=\"filtro != 1 \">Trazabilidad</vs-th>\r\n              </template>\r\n              <template slot-scope=\"{data}\">\r\n                  <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                      <vs-td> <small>id: </small> {{tr.id_pedido}} <br />\r\n                          <small><b>asesor:</b></small> {{tr.nombres}} {{tr.apellidos}}<br />\r\n                          <small><b>escuela:</b></small> {{tr.nombreInstitucion}} <br />\r\n                          <small><b>ciudad:</b></small> {{ tr.ciudad }}<br />\r\n                          <vs-button type=\"border\" @click=\"f_detalle_libros(tr)\">ver libros...</vs-button>\r\n                      </vs-td>\r\n                      <vs-td v-if=\"filtro != 1 \">\r\n                          <small><b>venta: </b></small> <span> {{tr.tipo_venta_descr}}</span><br />\r\n                          <small><b>convenio: </b></small> <span> {{tr.convenio_anios}}</span><br />\r\n                          <small><b>VENTA TOTAL: </b></small> <b class=\"text-success\"> {{tr.total_venta}}</b><br />\r\n                          <small><b>porcentaje: </b></small> <span> {{tr.porcentaje_descuento}}</span><br />\r\n                          <small><b>anticipo aprobado: </b></small> <span> {{tr.anticipo_aprobado}}</span><br />\r\n                          <small><b>pendiente liquidar: </b></small> <span> {{tr.pendiente_liquidar}}</span><br />\r\n                          <small><b>unidades: </b></small> <span> {{tr.total_unidades}}</span><br />\r\n                          <small><b>guias: </b></small> <span> {{tr.total_unidades_guias}}</span><br />\r\n                          <small><b>fecha envio: </b></small> <span> {{tr.fecha_envio.substring(0,10)}}</span><br />\r\n                          <small><b>fecha entrega: </b></small> <span> {{tr.fecha_entrega.substring(0,10)}}</span><br />\r\n                          <small><b>despacho bodega: </b></small> <span> {{tr.fecha_entrega_bodega != null ?  tr.fecha_entrega_bodega.substring(0,10) : ''}}</span><br />\r\n                      </vs-td>\r\n                      <vs-td v-if=\"filtro != 1 \">\r\n                          <small><b>pedido solicitado: </b></small> {{ tr.ph_fecha_creacion_pedido }}<br />\r\n                          <small><b>contrato generado:</b></small>{{ tr.fecha_generar_contrato }}<br />\r\n                          <small><b>contrato: </b></small><b><u class=\"text-primary\"> {{ tr.contrato_generado }}</u></b><br />\r\n                          <small><b>anticipo aprobado:</b></small>{{ tr.fecha_aprobacion_anticipo_gerencia }}<br />\r\n                          <small><b>anticipo rechazado:</b></small>{{ tr.fecha_rechazo_gerencia }}<br />\r\n                          <small><b>cheque generado:</b></small>{{ tr.fecha_subir_cheque }}<br />\r\n                          <small><b>cheque entregado al asesor:</b></small>{{ tr.fecha_envio_cheque_for_asesor }}<br />\r\n                          <small><b>pagaré firmado:</b></small>{{ tr.fecha_orden_firmada }}<br />\r\n                          <small><b>pagaré entregado en oficina:</b></small>{{ tr.fecha_que_recibe_orden_firmada }}<br />\r\n                          <small><b>tipo: </b></small> <i :class=\"tr.ph_tipo_pago == 0 ? 'text-warning' : 'text-success'\"> <b>{{ tr.ph_tipo_pago == '0' ? 'Anticipo' : 'Liquidado' }}</b></i><br />\r\n                      </vs-td>\r\n                  </vs-tr>\r\n\r\n              </template>\r\n          </vs-table>\r\n      </div>\r\n      <vs-popup title=\"Detalle de libros\" :active.sync=\"modalLibros\">\r\n          <vs-table max-items=\"100\" search pagination :data=\"arregloLibros\">\r\n              <template slot=\"header\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-12\">Total Libros: <b>{{totalLibros}}</b></div>\r\n                    <div class=\"col-12\">Items: <b>{{arregloLibros.length}}</b></div>\r\n                  </div>\r\n              </template>\r\n              <template slot=\"thead\">\r\n                  <vs-th>Libro</vs-th>\r\n                  <vs-th>Cant. unidades</vs-th>\r\n                  <vs-th>Precio unitario</vs-th>\r\n              </template>\r\n              <template slot-scope=\"{data}\">\r\n                  <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\">\r\n                      <vs-td>\r\n                          {{data[indextr].nombrelibro}}<br>\r\n                      </vs-td>\r\n                      <vs-td>\r\n                          {{data[indextr].valor}}<br>\r\n                      </vs-td>\r\n                      <vs-td>\r\n                          {{tr.precio}}\r\n                      </vs-td>\r\n                  </vs-tr>\r\n              </template>\r\n          </vs-table>\r\n      </vs-popup>\r\n  </div>\r\n  </template>\r\n\r\n  <script>\r\n  import vSelect from 'vue-select';\r\n  export default {\r\n      name: 'lista-de-contratos-gerencia',\r\n      components: {\r\n          'v-select': vSelect,\r\n      },\r\n      data() {\r\n          return {\r\n              listaPeriodos: [],\r\n              periodoSelect: {},\r\n              listaContratos: [],\r\n              listaContratosTmp: [],\r\n              noroot: '',\r\n              tipo_pedido: 0,\r\n              filtro: 0,\r\n              arregloLibros: [],\r\n              modalLibros: false,\r\n              totalLibros: 0,\r\n          }\r\n      },\r\n      mounted() {\r\n          let me = this;\r\n          me.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n          me.getPeriodos();\r\n      },\r\n      methods: {\r\n          getPeriodos() {\r\n              let me = this;\r\n              this.$http.get(this.$server_url + 'periodoActivo')\r\n                  .then((result) => {\r\n                      // console.log(result.data)\r\n                      me.listaPeriodos = result.data\r\n                  }).catch((err) => {\r\n                      console.log(err)\r\n                  });\r\n          },\r\n          f_pedidos(idperiodo) {\r\n              let me = this;\r\n              console.log(idperiodo)\r\n              if (idperiodo == null) {\r\n                  return\r\n              }\r\n              me.$vs.loading()\r\n              this.$http.get(this.$server_url + 'reportePedidosLibrosGuias/' + idperiodo)\r\n                  .then((result) => {\r\n                      console.log(result.data)\r\n                      me.listaContratosTmp = result.data\r\n                      me.filtroTipo();\r\n                      me.$vs.loading.close()\r\n                  }).catch((err) => {\r\n                      console.log(err)\r\n                      me.$vs.loading.close()\r\n                  });\r\n          },\r\n          filtroTipo() {\r\n              let me = this;\r\n              console.log(me.filtro)\r\n              if (me.filtro == 0) {\r\n                  let datos = me.listaContratosTmp.filter(p => (p.tipo == 0));\r\n                  me.listaContratos = datos\r\n                  return\r\n              }\r\n              if (me.filtro == 1) {\r\n                  let datos = me.listaContratosTmp.filter(p => (p.tipo == 1));\r\n                  me.listaContratos = datos\r\n                  return\r\n              }\r\n              if (me.filtro == 2) {\r\n                  let datos = me.listaContratosTmp.filter(p => (p.ph_tipo_pago == 1));\r\n                  me.listaContratos = datos\r\n                  return\r\n              }\r\n              if (me.filtro == 3) {\r\n                  let datos = me.listaContratosTmp.filter(p => (p.ph_tipo_pago == 0));\r\n                  me.listaContratos = datos\r\n                  return\r\n              }\r\n          },\r\n          f_detalle_libros(item) {\r\n              console.log(item)\r\n              let me = this\r\n              me.modalLibros = true;\r\n              me.$vs.loading()\r\n              this.$http.get(this.$server_url + 'get_val_pedidoInfo/' + item.id_pedido)\r\n                  .then(res => {\r\n                      console.log(res.data)\r\n                      let datos = res.data\r\n                      me.arregloLibros = datos.filter(p => p.valor > 0)\r\n                      me.totalLibros = datos.reduce((acc, valor) => {\r\n                          const respuesta = acc + valor.valor\r\n                          return respuesta\r\n                      }, 0)\r\n                      me.$vs.loading.close()\r\n                  })\r\n          },\r\n          f_notificaciones(msj, color, icono) {\r\n              let me = this;\r\n              me.$vs.notify({\r\n                  text: msj,\r\n                  color: color,\r\n                  iconPack: 'feather',\r\n                  icon: icono\r\n              })\r\n              return;\r\n          }\r\n      },\r\n  }\r\n  </script>\r\n"]}]}