{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\components\\Pedidos\\Configuracion\\Convenios\\CrearConvenio.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\components\\Pedidos\\Configuracion\\Convenios\\CrearConvenio.vue","mtime":1712682816559},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport vSelect from 'vue-select'\r\nexport default{\r\n    components:{\r\n        vSelect,\r\n    },\r\n    data(){\r\n        return{\r\n            arrayPeriod:[],\r\n            periodSelect:'',\r\n            convenio:{\r\n                anticipo_global:0,\r\n                anios:0,\r\n                observacion:'',\r\n            }\r\n        }\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.getPeriods()\r\n        me.periodSelect   = me.datosInstitucion.id_periodo\r\n        me.convenio.anios = me.ObjectPedido.convenio_anios\r\n    },\r\n    props:{\r\n        usuario:{\r\n            type:Object,\r\n            default:function(){\r\n                return {}\r\n            }\r\n        },\r\n        datosInstitucion:{\r\n            type:Object,\r\n            default:function(){\r\n                return {}\r\n            }\r\n        },\r\n        groupFacturador:{\r\n            type:Boolean,\r\n            default:false,\r\n        },\r\n        ObjectPedido:{\r\n          type:Object,\r\n          default:function(){\r\n              return {}\r\n          }\r\n        },\r\n    },\r\n    methods:{\r\n        getPeriods(){\r\n            let me = this\r\n            me.array = []\r\n            this.$http.get(this.$server_url+'get_periodos_pedidos')\r\n            .then(res => {\r\n                let datos = res.data\r\n                me.arrayPeriod = datos.filter(p => p.idperiodoescolar > 6 && p.idperiodoescolar !=18  && p.idperiodoescolar !=17 && p.idperiodoescolar !=15  && p.idperiodoescolar !=14  && p.idperiodoescolar !=9 && p.idperiodoescolar !=8)\r\n            })\r\n            .catch(function (error) {\r\n            })\r\n        },\r\n        saveGlobal(){\r\n            let me = this;\r\n            if(me.periodSelect == null || me.periodSelect == \"\" || me.periodSelect == undefined){\r\n                me.$vs.notify({\r\n                text:'Seleccione un período por favor',\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return\r\n            }\r\n            if( me.convenio.anios < 2 ){\r\n                me.$vs.notify({\r\n                text:'El convenio no puede ser menor a 2 años',\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return\r\n            }\r\n            const { id_institucion,id_periodo  }  = me.datosInstitucion\r\n            let formData = new FormData();\r\n            formData.append('saveGlobal',       \"yes\");\r\n            formData.append('anticipo_global',  me.convenio.anticipo_global);\r\n            formData.append('convenio_anios',   me.convenio.anios);\r\n            formData.append('institucion_id',   id_institucion);\r\n            formData.append('periodo_id',       me.periodSelect );\r\n            formData.append('user_created',     me.usuario.idusuario);\r\n            formData.append('observacion',      me.convenio.observacion);\r\n            formData.append('id_pedido',        me.ObjectPedido.id_pedido)\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'convenio', formData)\r\n            .then(res => {\r\n            me.$vs.loading.close()\r\n            if(res.data.status == 0){\r\n                me.$vs.notify({\r\n                text:res.data.message,\r\n                color:'danger',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return\r\n            }\r\n            me.$emit('changeRecharge',1)\r\n            me.$vs.notify({\r\n                text:res.data.message,\r\n                color:'success',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n            })\r\n            .catch((e)=>{\r\n                me.$vs.loading.close()\r\n            })\r\n        },\r\n    }\r\n}\r\n",{"version":3,"sources":["CrearConvenio.vue"],"names":[],"mappings":";AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CrearConvenio.vue","sourceRoot":"src/views/temporadas/components/Pedidos/Configuracion/Convenios","sourcesContent":["<template>\r\n    <div class=\"mt-5\">\r\n        <h3 class=\"font-semibold text-center text-success\">Agregar Convenio</h3>\r\n        <div class=\"vx-row mt-3\">\r\n            <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2 mb-2\" v-if=\"groupFacturador\">\r\n                <small>Seleccione el período origen del convenio:</small>\r\n                <v-select :options=\"arrayPeriod\"  :reduce=\"arrayPeriod => arrayPeriod.idperiodoescolar\" label=\"periodoescolar\" class=\"w-full\" v-model=\"periodSelect\" />\r\n            </div>\r\n            <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2 mb-2\" >\r\n                <vs-input class=\"w-full\" icon-pack=\"feather\" icon=\"icon-dollar-sign\" icon-no-border label=\"Cantidad de anticipo global\" v-model=\"convenio.anticipo_global\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"vx-row mt-3\">\r\n            <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2 mb-2\">\r\n                <vs-input class=\"w-full\" type=\"number\" icon-pack=\"feather\" icon=\"icon-calendar\" icon-no-border label=\"Convenio de años\" v-model=\"convenio.anios\" />\r\n            </div>\r\n            <div class=\"vx-col w-full sm:w-1/2 md:w-1/2 lg:w-1/2 xl:w-1/2 mb-2\">\r\n                <vs-input class=\"w-full\" icon-pack=\"feather\" icon=\"icon-message-square\" icon-no-border label=\"Observación\" v-model=\"convenio.observacion\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"flex justify-center\">\r\n            <vs-button type=\"gradient\" style=\"margin-top: 23px;\" icon=\"save\" class=\"p-2 \" @click=\"saveGlobal()\">Guardar convenio</vs-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport vSelect from 'vue-select'\r\nexport default{\r\n    components:{\r\n        vSelect,\r\n    },\r\n    data(){\r\n        return{\r\n            arrayPeriod:[],\r\n            periodSelect:'',\r\n            convenio:{\r\n                anticipo_global:0,\r\n                anios:0,\r\n                observacion:'',\r\n            }\r\n        }\r\n    },\r\n    mounted(){\r\n        let me = this;\r\n        me.getPeriods()\r\n        me.periodSelect   = me.datosInstitucion.id_periodo\r\n        me.convenio.anios = me.ObjectPedido.convenio_anios\r\n    },\r\n    props:{\r\n        usuario:{\r\n            type:Object,\r\n            default:function(){\r\n                return {}\r\n            }\r\n        },\r\n        datosInstitucion:{\r\n            type:Object,\r\n            default:function(){\r\n                return {}\r\n            }\r\n        },\r\n        groupFacturador:{\r\n            type:Boolean,\r\n            default:false,\r\n        },\r\n        ObjectPedido:{\r\n          type:Object,\r\n          default:function(){\r\n              return {}\r\n          }\r\n        },\r\n    },\r\n    methods:{\r\n        getPeriods(){\r\n            let me = this\r\n            me.array = []\r\n            this.$http.get(this.$server_url+'get_periodos_pedidos')\r\n            .then(res => {\r\n                let datos = res.data\r\n                me.arrayPeriod = datos.filter(p => p.idperiodoescolar > 6 && p.idperiodoescolar !=18  && p.idperiodoescolar !=17 && p.idperiodoescolar !=15  && p.idperiodoescolar !=14  && p.idperiodoescolar !=9 && p.idperiodoescolar !=8)\r\n            })\r\n            .catch(function (error) {\r\n            })\r\n        },\r\n        saveGlobal(){\r\n            let me = this;\r\n            if(me.periodSelect == null || me.periodSelect == \"\" || me.periodSelect == undefined){\r\n                me.$vs.notify({\r\n                text:'Seleccione un período por favor',\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return\r\n            }\r\n            if( me.convenio.anios < 2 ){\r\n                me.$vs.notify({\r\n                text:'El convenio no puede ser menor a 2 años',\r\n                color:'warning',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return\r\n            }\r\n            const { id_institucion,id_periodo  }  = me.datosInstitucion\r\n            let formData = new FormData();\r\n            formData.append('saveGlobal',       \"yes\");\r\n            formData.append('anticipo_global',  me.convenio.anticipo_global);\r\n            formData.append('convenio_anios',   me.convenio.anios);\r\n            formData.append('institucion_id',   id_institucion);\r\n            formData.append('periodo_id',       me.periodSelect );\r\n            formData.append('user_created',     me.usuario.idusuario);\r\n            formData.append('observacion',      me.convenio.observacion);\r\n            formData.append('id_pedido',        me.ObjectPedido.id_pedido)\r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'convenio', formData)\r\n            .then(res => {\r\n            me.$vs.loading.close()\r\n            if(res.data.status == 0){\r\n                me.$vs.notify({\r\n                text:res.data.message,\r\n                color:'danger',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n                return\r\n            }\r\n            me.$emit('changeRecharge',1)\r\n            me.$vs.notify({\r\n                text:res.data.message,\r\n                color:'success',\r\n                iconPack: 'feather',\r\n                icon:'icon-check'})\r\n            })\r\n            .catch((e)=>{\r\n                me.$vs.loading.close()\r\n            })\r\n        },\r\n    }\r\n}\r\n</script>\r\n"]}]}