{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\contratos.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\temporadas\\contratos.vue","mtime":1712682816618},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport axios from 'axios'\r\nimport moment from 'moment'\r\nimport vSelect from 'vue-select'\r\n\r\nexport default ({\r\n    data() {\r\n        return{\r\n            asesorarreglo:[],\r\n            cedula:'',\r\n            contratosarreglo:[],\r\n            //para la edicion\r\n            popupEditInstitucion:false,\r\n            \r\n            asesor:{\r\n              institucion:'',\r\n              cedula_asesor:'',\r\n              contrato:'',\r\n            \r\n            },\r\n            instituciones:[],\r\n\r\n        }\r\n        \r\n    },\r\n    components: {\r\n        'v-select': vSelect,\r\n            \r\n    },\r\n    methods:{\r\n        obtenerContratos(){\r\n        let me = this;\r\n        let formData = new FormData();\r\n\r\n        formData.append('cedula',this.cedula);\r\n    \r\n       \r\n        \r\n             \r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'temporadas/asesor/contratos', formData)\r\n            .then(res => {\r\n\r\n             console.log(res)\r\n\r\n         \r\n            this.contratosarreglo = res.data;\r\n          \r\n            me.$vs.loading.close()\r\n            me.$vs.notify({\r\n            text:'Listando contratos',\r\n            color:'success',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n        })  \r\n        },\r\n        //para realizar la edicion\r\n         //para guardar las areas\r\n\r\n         guardarInstitucion(){\r\n        \r\n            let me = this;\r\n\r\n            if( me.asesor.institucion.id === undefined ){\r\n                  me.$vs.notify({\r\n                      text:'Seleccione una Institucion',\r\n                      color:'warning',\r\n                      iconPack: 'feather',\r\n                      icon:'icon-check'})\r\n                  return;\r\n              }\r\n\r\n            let formData = new FormData();\r\n         \r\n                formData.append('idInstitucion', me.asesor.institucion.id);\r\n                formData.append('cedula_asesor', me.asesor.cedula_asesor);\r\n                formData.append('nombre_institucion', me.asesor.institucion.label);\r\n                formData.append('nombre_ciudad', me.asesor.institucion.nombre_ciudad);\r\n                formData.append('contrato', me.asesor.contrato);\r\n            this.$http.post(this.$server_url+'asesor-institucion', formData)\r\n                .then(function (res) {\r\n                    me.$vs.notify({\r\n                        text: res.data,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    me.obtenerContratos()\r\n                    \r\n                    me.popupEditInstitucion=false,\r\n                 \r\n                    limpiar();\r\n                  \r\n                })\r\n                .catch(function (error) {})\r\n\r\n           \r\n\r\n        },\r\n        limpiar(){\r\n          let me = this;\r\n          me.asesor.institucion = \"\";\r\n\r\n        },\r\n        //para abrir el popup de edicion\r\n       \r\n        openModalEditar(data={}){\r\n            let me = this;\r\n           \r\n            me.popupEditInstitucion = true;\r\n            \r\n            //llenar la data en los campos\r\n            me.asesor.contrato = data.contrato;\r\n            me.asesor.cedula_asesor = data.cedula_asesor;\r\n            //  me.area.nombrearea = data.nombrearea;\r\n             me.asesor.institucion = {id:data.idInstitucion, label:data.temporal_institucion};\r\n \r\n        },\r\n    },\r\n\r\n    created() {\r\n       let transformaraParse = JSON.parse(localStorage.getItem('usuario')); \r\n       this.asesorarreglo = transformaraParse;\r\n       this.cedula = this.asesorarreglo.cedula;\r\n      //traer las instituciones\r\n      this.$http.get(this.$server_url+'institucionesResportes').then(res => {\r\n            this.instituciones = res.data;\r\n        })\r\n    },\r\n\r\n    mounted() {\r\n      \r\n    \r\n \r\n   this.obtenerContratos();\r\n\r\n   \t\r\n}\r\n})\r\n",{"version":3,"sources":["contratos.vue"],"names":[],"mappings":";AAqGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;;;AAGA;AACA","file":"contratos.vue","sourceRoot":"src/views/temporadas","sourcesContent":["<template>\r\n<div>\r\n    \r\n\r\n  <!--Tabla para listar los contratos del asesor-->\r\n  <div>\r\n    <vs-table max-items=\"5\" search pagination :data=\"contratosarreglo\">\r\n      <template slot=\"header\">\r\n        <h3>\r\n          Listado de sus contratos\r\n        </h3>\r\n      </template>\r\n      <template slot=\"thead\">\r\n        <vs-th>\r\n          contrato\r\n        </vs-th>\r\n        <vs-th>\r\n          AÃ±o\r\n        </vs-th>\r\n        <vs-th>\r\n          Ciudad\r\n        </vs-th>\r\n        <vs-th>\r\n          Temporada\r\n        </vs-th>\r\n        <vs-th>\r\n          Profesor\r\n        </vs-th>\r\n\r\n        <vs-th>\r\n          Asesor\r\n        </vs-th>\r\n\r\n        <vs-th>\r\n          Institucion\r\n        </vs-th>\r\n\r\n        \r\n        <vs-th>\r\n          Accion\r\n        </vs-th>\r\n\r\n      </template>\r\n\r\n      <template slot-scope=\"{data}\">\r\n        <vs-tr :key=\"indextr\" v-for=\"(tr, indextr) in data\" >\r\n        \r\n          <vs-td :data=\"data[indextr].contrato\">\r\n            {{data[indextr].contrato}}\r\n          </vs-td>\r\n\r\n          <vs-td :data=\"data[indextr].year\">\r\n            {{data[indextr].year}}\r\n          </vs-td>\r\n\r\n          <vs-td :data=\"data[indextr].ciudad\">\r\n            {{data[indextr].ciudad}}\r\n          </vs-td>\r\n\r\n          <vs-td :data=\"data[indextr].temporada\">\r\n            {{data[indextr].temporada}}\r\n          </vs-td>\r\n\r\n         <vs-td :data=\"data[indextr].temporal_nombre_docente\">\r\n            {{data[indextr].temporal_nombre_docente}}\r\n          </vs-td>\r\n\r\n          <vs-td :data=\"data[indextr].nombre_asesor\">\r\n            {{data[indextr].nombre_asesor}}\r\n          </vs-td>\r\n\r\n          <vs-td :data=\"data[indextr].temporal_institucion\">\r\n            {{data[indextr].temporal_institucion}}\r\n          </vs-td>\r\n\r\n          <vs-td>\r\n              <vx-tooltip style=\"display: inline-block;\" text=\"Editar Institucion\" position=\"top\" color=\"primary\">\r\n                <vs-button class=\"modal-default-button\" color=\"success\" @click=\"update=true;openModalEditar(data[indextr])\" type=\"filled\" icon-pack=\"feather\" icon=\"icon-edit\"> </vs-button>\r\n              </vx-tooltip> &nbsp;\r\n\r\n          </vs-td>\r\n        </vs-tr>\r\n      </template>\r\n    </vs-table>\r\n  </div>  \r\n    <!-- Modal Editar-->\r\n      <div class=\"demo-alignment\">\r\n            <vs-popup classContent=\"popup-example\" title=\"Editar Institucion\" :active.sync=\"popupEditInstitucion\">\r\n        \r\n                Institucion:\r\n              \r\n                <v-select :options=\"instituciones\" :reduce=\"instituciones => instituciones\" label=\"label\" class=\"w-full\" v-model=\"asesor.institucion\" />\r\n                 <br><br>       \r\n                <vs-button color=\"success\" class=\"w-full mb-3\" @click=\"guardarInstitucion()\" type=\"gradient\" >Actualizar</vs-button>\r\n            </vs-popup>\r\n       </div>\r\n</div>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport moment from 'moment'\r\nimport vSelect from 'vue-select'\r\n\r\nexport default ({\r\n    data() {\r\n        return{\r\n            asesorarreglo:[],\r\n            cedula:'',\r\n            contratosarreglo:[],\r\n            //para la edicion\r\n            popupEditInstitucion:false,\r\n            \r\n            asesor:{\r\n              institucion:'',\r\n              cedula_asesor:'',\r\n              contrato:'',\r\n            \r\n            },\r\n            instituciones:[],\r\n\r\n        }\r\n        \r\n    },\r\n    components: {\r\n        'v-select': vSelect,\r\n            \r\n    },\r\n    methods:{\r\n        obtenerContratos(){\r\n        let me = this;\r\n        let formData = new FormData();\r\n\r\n        formData.append('cedula',this.cedula);\r\n    \r\n       \r\n        \r\n             \r\n            me.$vs.loading()\r\n            this.$http.post(this.$server_url+'temporadas/asesor/contratos', formData)\r\n            .then(res => {\r\n\r\n             console.log(res)\r\n\r\n         \r\n            this.contratosarreglo = res.data;\r\n          \r\n            me.$vs.loading.close()\r\n            me.$vs.notify({\r\n            text:'Listando contratos',\r\n            color:'success',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n        })  \r\n        },\r\n        //para realizar la edicion\r\n         //para guardar las areas\r\n\r\n         guardarInstitucion(){\r\n        \r\n            let me = this;\r\n\r\n            if( me.asesor.institucion.id === undefined ){\r\n                  me.$vs.notify({\r\n                      text:'Seleccione una Institucion',\r\n                      color:'warning',\r\n                      iconPack: 'feather',\r\n                      icon:'icon-check'})\r\n                  return;\r\n              }\r\n\r\n            let formData = new FormData();\r\n         \r\n                formData.append('idInstitucion', me.asesor.institucion.id);\r\n                formData.append('cedula_asesor', me.asesor.cedula_asesor);\r\n                formData.append('nombre_institucion', me.asesor.institucion.label);\r\n                formData.append('nombre_ciudad', me.asesor.institucion.nombre_ciudad);\r\n                formData.append('contrato', me.asesor.contrato);\r\n            this.$http.post(this.$server_url+'asesor-institucion', formData)\r\n                .then(function (res) {\r\n                    me.$vs.notify({\r\n                        text: res.data,\r\n                        color: 'primary',\r\n                        iconPack: 'feather',\r\n                        icon: 'icon-alert-triangle'\r\n                    })\r\n                    me.obtenerContratos()\r\n                    \r\n                    me.popupEditInstitucion=false,\r\n                 \r\n                    limpiar();\r\n                  \r\n                })\r\n                .catch(function (error) {})\r\n\r\n           \r\n\r\n        },\r\n        limpiar(){\r\n          let me = this;\r\n          me.asesor.institucion = \"\";\r\n\r\n        },\r\n        //para abrir el popup de edicion\r\n       \r\n        openModalEditar(data={}){\r\n            let me = this;\r\n           \r\n            me.popupEditInstitucion = true;\r\n            \r\n            //llenar la data en los campos\r\n            me.asesor.contrato = data.contrato;\r\n            me.asesor.cedula_asesor = data.cedula_asesor;\r\n            //  me.area.nombrearea = data.nombrearea;\r\n             me.asesor.institucion = {id:data.idInstitucion, label:data.temporal_institucion};\r\n \r\n        },\r\n    },\r\n\r\n    created() {\r\n       let transformaraParse = JSON.parse(localStorage.getItem('usuario')); \r\n       this.asesorarreglo = transformaraParse;\r\n       this.cedula = this.asesorarreglo.cedula;\r\n      //traer las instituciones\r\n      this.$http.get(this.$server_url+'institucionesResportes').then(res => {\r\n            this.instituciones = res.data;\r\n        })\r\n    },\r\n\r\n    mounted() {\r\n      \r\n    \r\n \r\n   this.obtenerContratos();\r\n\r\n   \t\r\n}\r\n})\r\n</script>\r\n"]}]}