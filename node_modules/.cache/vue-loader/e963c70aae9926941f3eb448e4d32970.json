{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\salle\\administrador\\periodos\\PeriodoEvaluacionSelect.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\salle\\administrador\\periodos\\PeriodoEvaluacionSelect.vue","mtime":1712682816529},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport vSelect from 'vue-select'\r\nexport default{\r\n  data(){\r\n    return{\r\n      usuario:[],\r\n      arregloPeriodos:[],\r\n      periodoSelect:'',\r\n      nombrePeriodoEvaluacion:'',\r\n      errorPeriodoEvaluacion:false,\r\n    }\r\n  },\r\n  components:{\r\n    vSelect,\r\n  },\r\n  props:{\r\n    mobil:{\r\n      type:Number,\r\n      default:0\r\n    },\r\n  },\r\n  mounted(){\r\n    let me = this\r\n    me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n    if(me.usuario.id_group == 12 || me.usuario.id_group == 13 || me.usuario.id_group == 6){\r\n      me.getPeriodosEvaluacion()\r\n    }\r\n  },\r\n  computed:{\r\n    windowWidth() {\r\n      return this.$store.state.windowWidth;\r\n    },\r\n  },\r\n  methods:{\r\n    getPeriodosEvaluacion() {\r\n      let me = this;\r\n      me.errorPeriodoEvaluacion = false;\r\n      this.$http.get(this.$server_url+'salle/periodos')\r\n        .then(function (response) {\r\n          me.arregloPeriodos = response.data;\r\n          //docentes\r\n          if(me.usuario.id_group == 13 || me.usuario.id_group == 6){\r\n            let datos  = response.data\r\n            if(datos.length > 0){\r\n              let searcEvaluacionActiva = datos.filter(p => p.estado == 1)\r\n              if(searcEvaluacionActiva.length > 0){\r\n                me.nombrePeriodoEvaluacion  = searcEvaluacionActiva[0].nombre\r\n                localStorage.setItem('EvaluacionSelectSalle',searcEvaluacionActiva[0].id)\r\n                me.periodoSelect = searcEvaluacionActiva[0].id\r\n              }else{\r\n                me.errorPeriodoEvaluacion = true\r\n              }\r\n            }else{\r\n              me.errorPeriodoEvaluacion = true\r\n            }\r\n            return\r\n          }\r\n          let getEvaluacionSelect = localStorage.EvaluacionSelectSalle\r\n          //si ya existe el periodo seleccionado lo asigno\r\n          if(getEvaluacionSelect){\r\n            me.periodoSelect = parseInt(getEvaluacionSelect)\r\n            return\r\n          }\r\n          //si no existe le pongo el ultimo periodo\r\n          if(me.arregloPeriodos.length > 0){\r\n            me.periodoSelect = me.arregloPeriodos[0].id\r\n            localStorage.setItem('EvaluacionSelectSalle',me.arregloPeriodos[0].id)\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n        })\r\n    },\r\n    changeEvaluacionPeriodo(){\r\n      let me = this;\r\n      console.log(\"rap\",me.periodoSelect)\r\n      if(me.periodoSelect == null || me.periodoSelect == \"\" || me.periodoSelect == undefined){\r\n        localStorage.removeItem('EvaluacionSelectSalle')\r\n        setInterval(() => {\r\n          location.reload()\r\n        }, 1000)\r\n        return\r\n      }\r\n      localStorage.setItem('EvaluacionSelectSalle',me.periodoSelect)\r\n      location.reload()\r\n    },\r\n  }\r\n}\r\n",{"version":3,"sources":["PeriodoEvaluacionSelect.vue"],"names":[],"mappings":";AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PeriodoEvaluacionSelect.vue","sourceRoot":"src/views/salle/administrador/periodos","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"windowWidth < 992 && usuario.id_group == 12\">\r\n      <vs-dropdown vs-custom-content vs-trigger-click>\r\n        <vs-button type=\"filled\" class=\"a-icon\">\r\n          <p v-for=\"(item,key) in arregloPeriodos\" :key=\"key\">\r\n            <span v-if=\"item.id == periodoSelect\"><span class=\"ml-1\">{{ item.nombre }}</span></span>\r\n          </p>\r\n          <vs-icon class=\"\" icon=\"expand_more\"></vs-icon>\r\n        </vs-button>\r\n        <vs-dropdown-menu class=\"loginx\">\r\n          <div v-for=\"(item,key) in arregloPeriodos\" :key=\"key\">\r\n            <vs-dropdown-item style=\"width:200px; margin-top: 5px;\" @click=\"periodoSelect = item.id;changeEvaluacionPeriodo();\">\r\n                <span class=\"feather icon icon-check\"></span> {{ item.nombre }}\r\n            </vs-dropdown-item>\r\n          </div>\r\n        </vs-dropdown-menu>\r\n      </vs-dropdown>\r\n    </div>\r\n    <div v-if=\"windowWidth < 992 && usuario.id_group == 13\">\r\n      <vs-dropdown vs-custom-content vs-trigger-click>\r\n        <vs-button type=\"filled\" class=\"a-icon\">\r\n          <p v-for=\"(item,key) in arregloPeriodos\" :key=\"key\">\r\n            <span v-if=\"item.id == periodoSelect\"><span class=\"ml-1\">{{ item.nombre }}</span></span>\r\n          </p>\r\n          <!-- <vs-icon class=\"\" icon=\"expand_more\"></vs-icon> -->\r\n        </vs-button>\r\n        <!-- <vs-dropdown-menu class=\"loginx\">\r\n          <div v-for=\"(item,key) in arregloPeriodos\" :key=\"key\">\r\n            <vs-dropdown-item style=\"width:200px; margin-top: 5px;\" @click=\"periodoSelect = item.id;changeEvaluacionPeriodo();\">\r\n                <span class=\"feather icon icon-check\"></span> {{ item.nombre }}\r\n            </vs-dropdown-item>\r\n          </div>\r\n        </vs-dropdown-menu> -->\r\n      </vs-dropdown>\r\n    </div>\r\n    <div v-if=\"windowWidth >= 992\">\r\n      <div v-if=\"usuario.id_group == 13\">\r\n          <vx-card v-if=\"errorPeriodoEvaluacion == false\">\r\n            <p class=\"text-success font-bold\"><ion-icon name=\"star-outline\" style=\"position: relative;top:1px;\"></ion-icon> Periodo Evaluacion: {{ nombrePeriodoEvaluacion }}</p>\r\n          </vx-card>\r\n          <vs-alert active=\"true\" color=\"warning\" v-else>\r\n            No hay un período activo configurado\r\n          </vs-alert>\r\n      </div>\r\n      <div v-if=\"usuario.id_group == 12\" class=\"flex mt-5 ml-3\" style=\"width: 500px;border-radius:10px;background: #f2f2f2;\">\r\n        <div style=\"width: 40%;\">\r\n          <p class=\"mt-2 ml-1 text-success\"> <ion-icon name=\"contract-outline\"></ion-icon> Período Evaluación </p>\r\n        </div>\r\n        <div style=\"width: 60%;\">\r\n          <v-select :options=\"arregloPeriodos\" :reduce=\"arregloPeriodos => arregloPeriodos.id\" @input=\"changeEvaluacionPeriodo()\" label=\"nombre\" class=\"w-full\" v-model=\"periodoSelect\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport vSelect from 'vue-select'\r\nexport default{\r\n  data(){\r\n    return{\r\n      usuario:[],\r\n      arregloPeriodos:[],\r\n      periodoSelect:'',\r\n      nombrePeriodoEvaluacion:'',\r\n      errorPeriodoEvaluacion:false,\r\n    }\r\n  },\r\n  components:{\r\n    vSelect,\r\n  },\r\n  props:{\r\n    mobil:{\r\n      type:Number,\r\n      default:0\r\n    },\r\n  },\r\n  mounted(){\r\n    let me = this\r\n    me.usuario = JSON.parse(localStorage.getItem(\"usuario\"))\r\n    if(me.usuario.id_group == 12 || me.usuario.id_group == 13 || me.usuario.id_group == 6){\r\n      me.getPeriodosEvaluacion()\r\n    }\r\n  },\r\n  computed:{\r\n    windowWidth() {\r\n      return this.$store.state.windowWidth;\r\n    },\r\n  },\r\n  methods:{\r\n    getPeriodosEvaluacion() {\r\n      let me = this;\r\n      me.errorPeriodoEvaluacion = false;\r\n      this.$http.get(this.$server_url+'salle/periodos')\r\n        .then(function (response) {\r\n          me.arregloPeriodos = response.data;\r\n          //docentes\r\n          if(me.usuario.id_group == 13 || me.usuario.id_group == 6){\r\n            let datos  = response.data\r\n            if(datos.length > 0){\r\n              let searcEvaluacionActiva = datos.filter(p => p.estado == 1)\r\n              if(searcEvaluacionActiva.length > 0){\r\n                me.nombrePeriodoEvaluacion  = searcEvaluacionActiva[0].nombre\r\n                localStorage.setItem('EvaluacionSelectSalle',searcEvaluacionActiva[0].id)\r\n                me.periodoSelect = searcEvaluacionActiva[0].id\r\n              }else{\r\n                me.errorPeriodoEvaluacion = true\r\n              }\r\n            }else{\r\n              me.errorPeriodoEvaluacion = true\r\n            }\r\n            return\r\n          }\r\n          let getEvaluacionSelect = localStorage.EvaluacionSelectSalle\r\n          //si ya existe el periodo seleccionado lo asigno\r\n          if(getEvaluacionSelect){\r\n            me.periodoSelect = parseInt(getEvaluacionSelect)\r\n            return\r\n          }\r\n          //si no existe le pongo el ultimo periodo\r\n          if(me.arregloPeriodos.length > 0){\r\n            me.periodoSelect = me.arregloPeriodos[0].id\r\n            localStorage.setItem('EvaluacionSelectSalle',me.arregloPeriodos[0].id)\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n        })\r\n    },\r\n    changeEvaluacionPeriodo(){\r\n      let me = this;\r\n      console.log(\"rap\",me.periodoSelect)\r\n      if(me.periodoSelect == null || me.periodoSelect == \"\" || me.periodoSelect == undefined){\r\n        localStorage.removeItem('EvaluacionSelectSalle')\r\n        setInterval(() => {\r\n          location.reload()\r\n        }, 1000)\r\n        return\r\n      }\r\n      localStorage.setItem('EvaluacionSelectSalle',me.periodoSelect)\r\n      location.reload()\r\n    },\r\n  }\r\n}\r\n</script>\r\n"]}]}