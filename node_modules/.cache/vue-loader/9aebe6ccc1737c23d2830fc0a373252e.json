{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos2\\pedidos\\anticipos\\pagos2\\ScreenPagos2.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\pedidos2\\pedidos\\anticipos\\pagos2\\ScreenPagos2.vue","mtime":1712682816397},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n  import {\r\n    mapState\r\n} from \"vuex\";\r\nimport PedidosRepository from \"../../../../../repositories/PedidosRepository\";\r\nimport PagosRepository from \"../../../../../repositories/PagoRepository\";\r\nconst Pagos2ListadoVue        = () => import('./Pagos2Listado')\r\nconst Pagos2CrearVue          = () => import('./Pagos2Crear')\r\nconst ScreenConvenioVue       = () => import('../../../../temporadas/components/Pedidos/Configuracion/Convenios/ScreenConvenio.vue')\r\nconst Pagos2BannerVue         = () => import('./components/Pagos2Banner')\r\nconst Loading1Vue             = () => import('../../../../configuracion/Reutilizable/Loading1.vue')\r\nconst ScreenRellenarPagosVue  = () => import('../../../../temporadas/components/Pedidos/Pagos/components/Verificacion/ScreenRellenarPagos.vue')\r\nexport default {\r\n  components:{\r\n    Pagos2ListadoVue,\r\n    Pagos2CrearVue,\r\n    ScreenConvenioVue,\r\n    Pagos2BannerVue,\r\n    Loading1Vue,\r\n    ScreenRellenarPagosVue,\r\n  },\r\n  data() {\r\n    return{\r\n      id:0,\r\n      menu:0,\r\n      ObjectSelect:'',\r\n      usuario:[],\r\n      popupAdd:false,\r\n      sendPedido:'',\r\n      arregloPagos:[],\r\n      datosInstitucion:'',\r\n      updatePagos:false,\r\n      arregloVerificaciones:[],\r\n    }\r\n  },\r\n  computed:{\r\n  ...mapState([\"auth\",'userRoot','susuario','ObjectPedido','groupFacturador','userAsesor']),\r\n  },\r\n  watch:{\r\n    ObjectPedido(results){\r\n      let me = this\r\n      me.sendPedido = me.ObjectPedido\r\n    },\r\n    arregloPagos(results){\r\n      let me = this\r\n      me.arregloPagos = results\r\n    },\r\n  },\r\n  mounted(){\r\n    let me = this\r\n    this.usuario  = JSON.parse(localStorage.getItem(\"usuario\"))\r\n    me.popupAdd   = false\r\n    me.sendPedido = me.ObjectPedido\r\n    me.getListadoPagos()\r\n    me.datosInstitucion         = {\r\n      idInstitucion           :me.sendPedido.id_institucion,\r\n      nombreInstitucion       :me.sendPedido.nombreInstitucion,\r\n      id_periodo              :me.sendPedido.id_periodo,\r\n    }\r\n    if(me.groupFacturador){ me.getVerificaciones() }\r\n    //EJECUTAR POPUP DE ACTUALIZAR VALORES\r\n    if(me.sendPedido.datos_verificacion_por_ingresar == 1){\r\n      me.updatePagos = true\r\n    }\r\n  },\r\n  methods:{\r\n    generateAnticipoDeuda(){\r\n      let me = this;\r\n      PagosRepository.generateAnticiposDeuda(me.ObjectPedido.id_pedido).then(r => {  })\r\n    },\r\n    getVerificaciones(){\r\n      let me = this\r\n      this.$http.get(this.$server_url+`n_verificacion?getVerificacionXcontrato=yes&contrato=${ me.sendPedido.contrato_generado }`)\r\n        .then(function (res) {\r\n          let datos = res.data.filter(p => p.estado == 0)\r\n          if(datos.length > 0){\r\n            me.arregloVerificaciones = datos.sort((a, b) => a.id - b.id);\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error + ' error');\r\n        })\r\n    },\r\n    changeHandleUpdatePayments(e){\r\n      let me = this\r\n      me.updatePagos = false\r\n      me.rechargePedido()\r\n      me.getListadoPagos()\r\n    },\r\n    rechargePedido(){\r\n      let me = this\r\n      PedidosRepository.getPedidoXID(me.sendPedido.id_pedido).then(r => { this.$store.dispatch('setPedido',r.data[0]); })\r\n    },\r\n    showCreate(e,values=''){\r\n      let me                = this\r\n      me.id                 = 0;\r\n      if(e == 1)            { me.popupAdd = true; }\r\n      if(e.tipo == 2)       { me.id       = e.setId ;}\r\n      me.ObjectSelect       = values\r\n      if(values.doc_codigo) { me.id = values.doc_codigo }\r\n      me.rechargePedido()\r\n    },\r\n    getListadoPagos(){\r\n      let me = this;\r\n      const { id_institucion, id_periodo, contrato_generado:contrato } = me.sendPedido\r\n      var url = \"\"\r\n      if(contrato == \"\" || contrato == null || contrato == undefined) {\r\n        url = this.$server_url + `pedigo_Pagos?ListadoListaPagosSinContrato=yes&institucion_id=${ id_institucion }&periodo_id=${ id_periodo }`\r\n      }else{\r\n        url = this.$server_url + `pedigo_Pagos?ListadoListaPagos=yes&contrato=${ contrato }`\r\n      }\r\n      me.$vs.loading()\r\n      this.$http.get(url)\r\n        .then(function (res) {\r\n          me.$vs.loading.close()\r\n          me.arregloPagos = res.data\r\n        })\r\n        .catch(function (error) {\r\n          me.$vs.loading.close()\r\n          console.log(error + ' error');\r\n        })\r\n    },\r\n  }\r\n}\r\n",{"version":3,"sources":["ScreenPagos2.vue"],"names":[],"mappings":";AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ScreenPagos2.vue","sourceRoot":"src/views/pedidos2/pedidos/anticipos/pagos2","sourcesContent":["<template>\r\n  <div>\r\n    <div v-if=\"sendPedido.id_pedido\">\r\n      <Pagos2BannerVue :sendPedido=\"sendPedido\" :userRoot=\"userRoot\" :usuario=\"usuario\" :arregloPagos=\"arregloPagos\"/>\r\n      <vs-tabs alignment=\"fixed\">\r\n        <vs-tab label=\"Listado de Pagos\" @click=\"generateAnticipoDeuda();menu = 0;getListadoPagos();\">\r\n          <div>\r\n\r\n          </div>\r\n        </vs-tab>\r\n        <vs-tab label=\"Configuración Convenio\" @click=\"menu = 1;\">\r\n          <div>\r\n\r\n          </div>\r\n        </vs-tab>\r\n      </vs-tabs>\r\n      <!-- <ul class=\"flex\">\r\n        <li>\r\n          <vs-radio v-model=\"menu\" @input=\"getListadoPagos();\" vs-name=\"radios1menu\" class=\"mr-3\" vs-value=\"0\">Listado de Pagos</vs-radio>\r\n        </li>\r\n        <li>\r\n          <vs-radio v-model=\"menu\" vs-name=\"radios1menu\" vs-value=\"1\">Configuración Convenio</vs-radio>\r\n        </li>\r\n      </ul> -->\r\n      <!--COMPONENTES-->\r\n      <div v-if=\"menu == 0\" class=\"mt-2\">\r\n        <div class=\"flex\">\r\n          <vs-button color=\"primary\" v-if=\"sendPedido.estado != 2\" class=\"p-2 mr-3\" type=\"filled\" icon=\"add\" @click=\"id = 0;popupAdd = true;\">Crear Pago</vs-button>\r\n          <vs-button color=\"primary\" v-if=\"sendPedido.contrato_generado && arregloVerificaciones.length > 0\" @click=\"updatePagos = true;\" icon-pack=\"feather\" icon=\"icon-loader\" class=\"ml-2 p-3\" type=\"border\">Actualizar Valores</vs-button>\r\n        </div>\r\n        <Pagos2ListadoVue  @showCreate=\"showCreate\" @rechargePedido=\"rechargePedido\" @rechargeValores=\"rechargePedido();getListadoPagos();\" :arregloPagos=\"arregloPagos\" :sendPedido=\"sendPedido\" :groupFacturador=\"groupFacturador\" :userRoot=\"userRoot\" :usuario=\"usuario\"/>\r\n      </div>\r\n      <div v-if=\"menu == 1\">\r\n        <ScreenConvenioVue :datosInstitucion=\"datosInstitucion\"/>\r\n      </div>\r\n      <vs-popup class=\"holamundo\" @close=\"getListadoPagos();\" fullscreen title=\"Mantenimiento Documentos\" :active.sync=\"popupAdd\">\r\n        <Pagos2CrearVue :sendPedido=\"sendPedido\" v-if=\"popupAdd\" @showCreate=\"showCreate\" :userRoot=\"userRoot\" :id=\"id\" :ObjectSelect=\"ObjectSelect\" :usuario=\"usuario\"/>\r\n      </vs-popup>\r\n      <div v-if=\"updatePagos\">\r\n        <div v-for=\"(item,key) in arregloVerificaciones\" :key=\"key\">\r\n          <ScreenRellenarPagosVue\r\n          :cantidadVerificaciones=\"arregloVerificaciones.length\"\r\n          :VerificacionSelect=\"item\"\r\n          :sendPedido=\"sendPedido\"\r\n          :datosInstitucion=\"datosInstitucion\"\r\n          :contrato=\"sendPedido.contrato_generado\"\r\n          @changeHandleUpdatePayments=\"changeHandleUpdatePayments\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <!--MODAL LOADING-->\r\n      <vs-popup :title=\"'Cargando....'\" :active.sync=\"updatePagos\">\r\n        <Loading1Vue :title=\"'Espere mientras se actualiza los valores.......'\"/>\r\n      </vs-popup>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import {\r\n    mapState\r\n} from \"vuex\";\r\nimport PedidosRepository from \"../../../../../repositories/PedidosRepository\";\r\nimport PagosRepository from \"../../../../../repositories/PagoRepository\";\r\nconst Pagos2ListadoVue        = () => import('./Pagos2Listado')\r\nconst Pagos2CrearVue          = () => import('./Pagos2Crear')\r\nconst ScreenConvenioVue       = () => import('../../../../temporadas/components/Pedidos/Configuracion/Convenios/ScreenConvenio.vue')\r\nconst Pagos2BannerVue         = () => import('./components/Pagos2Banner')\r\nconst Loading1Vue             = () => import('../../../../configuracion/Reutilizable/Loading1.vue')\r\nconst ScreenRellenarPagosVue  = () => import('../../../../temporadas/components/Pedidos/Pagos/components/Verificacion/ScreenRellenarPagos.vue')\r\nexport default {\r\n  components:{\r\n    Pagos2ListadoVue,\r\n    Pagos2CrearVue,\r\n    ScreenConvenioVue,\r\n    Pagos2BannerVue,\r\n    Loading1Vue,\r\n    ScreenRellenarPagosVue,\r\n  },\r\n  data() {\r\n    return{\r\n      id:0,\r\n      menu:0,\r\n      ObjectSelect:'',\r\n      usuario:[],\r\n      popupAdd:false,\r\n      sendPedido:'',\r\n      arregloPagos:[],\r\n      datosInstitucion:'',\r\n      updatePagos:false,\r\n      arregloVerificaciones:[],\r\n    }\r\n  },\r\n  computed:{\r\n  ...mapState([\"auth\",'userRoot','susuario','ObjectPedido','groupFacturador','userAsesor']),\r\n  },\r\n  watch:{\r\n    ObjectPedido(results){\r\n      let me = this\r\n      me.sendPedido = me.ObjectPedido\r\n    },\r\n    arregloPagos(results){\r\n      let me = this\r\n      me.arregloPagos = results\r\n    },\r\n  },\r\n  mounted(){\r\n    let me = this\r\n    this.usuario  = JSON.parse(localStorage.getItem(\"usuario\"))\r\n    me.popupAdd   = false\r\n    me.sendPedido = me.ObjectPedido\r\n    me.getListadoPagos()\r\n    me.datosInstitucion         = {\r\n      idInstitucion           :me.sendPedido.id_institucion,\r\n      nombreInstitucion       :me.sendPedido.nombreInstitucion,\r\n      id_periodo              :me.sendPedido.id_periodo,\r\n    }\r\n    if(me.groupFacturador){ me.getVerificaciones() }\r\n    //EJECUTAR POPUP DE ACTUALIZAR VALORES\r\n    if(me.sendPedido.datos_verificacion_por_ingresar == 1){\r\n      me.updatePagos = true\r\n    }\r\n  },\r\n  methods:{\r\n    generateAnticipoDeuda(){\r\n      let me = this;\r\n      PagosRepository.generateAnticiposDeuda(me.ObjectPedido.id_pedido).then(r => {  })\r\n    },\r\n    getVerificaciones(){\r\n      let me = this\r\n      this.$http.get(this.$server_url+`n_verificacion?getVerificacionXcontrato=yes&contrato=${ me.sendPedido.contrato_generado }`)\r\n        .then(function (res) {\r\n          let datos = res.data.filter(p => p.estado == 0)\r\n          if(datos.length > 0){\r\n            me.arregloVerificaciones = datos.sort((a, b) => a.id - b.id);\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error + ' error');\r\n        })\r\n    },\r\n    changeHandleUpdatePayments(e){\r\n      let me = this\r\n      me.updatePagos = false\r\n      me.rechargePedido()\r\n      me.getListadoPagos()\r\n    },\r\n    rechargePedido(){\r\n      let me = this\r\n      PedidosRepository.getPedidoXID(me.sendPedido.id_pedido).then(r => { this.$store.dispatch('setPedido',r.data[0]); })\r\n    },\r\n    showCreate(e,values=''){\r\n      let me                = this\r\n      me.id                 = 0;\r\n      if(e == 1)            { me.popupAdd = true; }\r\n      if(e.tipo == 2)       { me.id       = e.setId ;}\r\n      me.ObjectSelect       = values\r\n      if(values.doc_codigo) { me.id = values.doc_codigo }\r\n      me.rechargePedido()\r\n    },\r\n    getListadoPagos(){\r\n      let me = this;\r\n      const { id_institucion, id_periodo, contrato_generado:contrato } = me.sendPedido\r\n      var url = \"\"\r\n      if(contrato == \"\" || contrato == null || contrato == undefined) {\r\n        url = this.$server_url + `pedigo_Pagos?ListadoListaPagosSinContrato=yes&institucion_id=${ id_institucion }&periodo_id=${ id_periodo }`\r\n      }else{\r\n        url = this.$server_url + `pedigo_Pagos?ListadoListaPagos=yes&contrato=${ contrato }`\r\n      }\r\n      me.$vs.loading()\r\n      this.$http.get(url)\r\n        .then(function (res) {\r\n          me.$vs.loading.close()\r\n          me.arregloPagos = res.data\r\n        })\r\n        .catch(function (error) {\r\n          me.$vs.loading.close()\r\n          console.log(error + ' error');\r\n        })\r\n    },\r\n  }\r\n}\r\n</script>\r\n"]}]}