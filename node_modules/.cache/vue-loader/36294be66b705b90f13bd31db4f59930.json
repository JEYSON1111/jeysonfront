{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\codigos\\FacturadoresCodigos.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\codigos\\FacturadoresCodigos.vue","mtime":1712682815609},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\nimport seccionCodigos from './components/seccionCodigos.vue'\r\nimport gestionliquidacion from '../librosserie/gestionliquidacion.vue'\r\nimport vSelect from 'vue-select'\r\nexport default{\r\n    components:{\r\n        vSelect,\r\n        seccionCodigos,\r\n        gestionliquidacion,\r\n    },\r\n    data(){\r\n        return{\r\n            vSeccionCodigo:false,\r\n            liquidacion:{\r\n              institucion:'',\r\n              periodo:'',\r\n              condicion:'1',\r\n            },\r\n            arregloCiudad:[],\r\n            arregloTraeInstitucion:[],\r\n            arregloPeriodos:[],\r\n            ciudadSelect:'',\r\n            arregloLiquidacion:[],\r\n            arregloCodigosIndividuales:[],\r\n            region:1,\r\n        }\r\n    },\r\n    mounted(){\r\n      let me = this;\r\n      me.filtrarInstituciones()\r\n    },\r\n    methods:{\r\n      filtrarInstituciones(){\r\n        let me = this\r\n        me.arregloTraeInstitucion = []\r\n        me.liquidacion.institucion = \"\"\r\n        me.$vs.loading()\r\n        this.$http.get(this.$server_url+`institucion?listaInstitucionesActivaXRegion=yes&region=${ me.region }`)\r\n        .then(function (res) {\r\n          me.$vs.loading.close()\r\n          me.arregloTraeInstitucion = res.data;\r\n        })\r\n        .catch(function (error) {\r\n          me.$vs.loading.close()\r\n          console.log(error + ' error');\r\n        })\r\n      },\r\n      //para filtrar periodos por institucioin\r\n      filtrarPeriodos(){\r\n        let me = this;\r\n        me.arregloCodigosIndividuales = []\r\n        me.arregloLiquidacion         = []\r\n        if( me.liquidacion.institucion.region_idregion === undefined ){\r\n          me.$vs.notify({\r\n            text:'Seleccione una institucion antes de filtrar por Periodos',\r\n            color:'warning',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n          return;\r\n        }\r\n        me.arregloPeriodos = []\r\n        me.$vs.loading()\r\n        const formData = new FormData();\r\n        formData.append('condicion', me.liquidacion.condicion);\r\n        formData.append('region_idregion', me.liquidacion.institucion.region_idregion);\r\n        this.$http.post(this.$server_url+'traerperiodos', formData).then(res => {\r\n          me.arregloPeriodos = res.data;\r\n          me.$vs.loading.close()\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        })\r\n      },\r\n      filtrarCodigos(){\r\n        let me = this;\r\n        if(me.vSeccionCodigo == false){\r\n          me.buscarReportesLibrosAsesor()\r\n        }else{\r\n          me.filtrarLiquidacion()\r\n        }\r\n      },\r\n      //para filtrar la liquidacion\r\n      filtrarLiquidacion(){\r\n        let me = this;\r\n        me.arregloLiquidacion = []\r\n        if(me.liquidacion.periodo == null || me.liquidacion.periodo == undefined || me.liquidacion.periodo == \"\"){\r\n            this.$vs.notify({\r\n                text: 'No ha seleccionado un periodo',\r\n                color: 'danger',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n            })\r\n            return false\r\n        }\r\n        me.$vs.loading()\r\n        this.$http.get(this.$server_url+'liquidacionperiodo?id_periodo='+me.liquidacion.periodo.idperiodoescolar+'&idinstitucion='+me.liquidacion.institucion.idInstitucion)\r\n        .then(res => {\r\n            me.arregloLiquidacion = res.data;\r\n            me.$vs.loading.close()\r\n        })\r\n        .catch(function (error) {\r\n            me.$vs.loading.close()\r\n            console.log(error);\r\n        })\r\n      },\r\n      buscarReportesLibrosAsesor() {\r\n        let me  = this;\r\n        if(me.liquidacion.periodo == null || me.liquidacion.periodo == undefined || me.liquidacion.periodo == \"\"){\r\n            this.$vs.notify({\r\n                text: 'No ha seleccionado un periodo',\r\n                color: 'danger',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n            })\r\n            return false\r\n        }\r\n        this.arregloCodigosIndividuales = [];\r\n        this.openLoadingColor();\r\n        this.$http.get(this.$server_url+'reportesCodigoAsesor/' + me.liquidacion.institucion.idInstitucion+'/'+me.liquidacion.periodo.idperiodoescolar)\r\n        .then(res => {\r\n            this.$vs.loading.close()\r\n            if (res.data[0] === undefined) {\r\n                this.$vs.notify({\r\n                    text: 'No existen códigos asignados a esta institución',\r\n                    color: 'danger',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return false\r\n            }\r\n            this.arregloCodigosIndividuales = res.data\r\n\r\n        })\r\n        .catch(function(e){\r\n            this.$vs.loading.close()\r\n        })\r\n      },\r\n      openLoadingColor(libro) {\r\n        this.$vs.loading({\r\n            color: '#1A76F2'\r\n        })\r\n        /*setTimeout(() => {\r\n            this.$vs.loading.close()\r\n        }, 2000);*/\r\n      },\r\n    }\r\n}\r\n",{"version":3,"sources":["FacturadoresCodigos.vue"],"names":[],"mappings":";AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FacturadoresCodigos.vue","sourceRoot":"src/views/codigos","sourcesContent":["<template>\r\n    <div>\r\n        <vs-card class=\"flex\">\r\n            <vs-button color=\"primary\" @click=\"vSeccionCodigo = false\" type=\"border\">Códigos Individuales</vs-button>\r\n            <vs-button color=\"success\" @click=\"vSeccionCodigo = true\" class=\"ml-2\" type=\"border\">Códigos Agrupados</vs-button>\r\n       </vs-card>\r\n        <vs-card>\r\n            <div>\r\n                <div class=\"vx-col w-full mt-5\">\r\n                  <ul class=\"flex\">\r\n                    <li class=\"modelx mt-1 mr-2\">\r\n                      Región\r\n                    </li>\r\n                    <li class=\"mr-2\">\r\n                      <vs-radio v-model=\"region\" @input=\"filtrarInstituciones()\" vs-name=\"radios1region\" vs-value=\"1\">Sierra</vs-radio>\r\n                    </li>\r\n                    <li>\r\n                      <vs-radio v-model=\"region\" @input=\"filtrarInstituciones()\" vs-name=\"radios1region\" vs-value=\"2\">Costa</vs-radio>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n                <div class=\"vx-col w-full mt-5\">\r\n                  Institución:\r\n                    <v-select :options=\"arregloTraeInstitucion\" :reduce=\"arregloTraeInstitucion => arregloTraeInstitucion\" label=\"nombreInstitucion\" class=\"w-full\" v-model =\"liquidacion.institucion\" />\r\n                </div>\r\n                <br>\r\n                <ul class=\"leftx\">\r\n                    <li class=\"modelx\">\r\n                    Seleccione que tipo de periodos desea filtrar\r\n                    </li>\r\n                    <br>\r\n                    <li>\r\n                    <vs-radio v-model=\"liquidacion.condicion\"  @input=\"filtrarPeriodos()\"  vs-name=\"radios1\" vs-value=\"1\">Activos</vs-radio>\r\n                    </li>\r\n                    <li>\r\n                    <vs-radio v-model=\"liquidacion.condicion\" @input=\"filtrarPeriodos()\"  vs-name=\"radios1\" vs-value=\"0\">Inactivos</vs-radio>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"vx-col w-full mt-5\">\r\n                Periodo:\r\n                <v-select :options=\"arregloPeriodos\" :reduce=\"arregloPeriodos => arregloPeriodos\" label=\"periodo\" class=\"w-full\" v-model =\"liquidacion.periodo\" />\r\n            </div>\r\n            <br>\r\n            <vs-button color=\"primary\" size=\"small\" type=\"filled\" @click=\"filtrarCodigos();\">\r\n                Filtrar\r\n            </vs-button>\r\n        </vs-card>\r\n        <div v-if=\"vSeccionCodigo == false\">\r\n         <p>Se listan los códigos <span style=\"font-weight: bold;\">Individuales,</span> asociados al estudiante</p>\r\n            <seccionCodigos :arregloCodigosIndividuales = \"arregloCodigosIndividuales\" :lperiodo=\"liquidacion.periodo.idperiodoescolar\" :linstitucion=\"liquidacion.institucion.idInstitucion\" @recharge=\"buscarReportesLibrosAsesor\"/>\r\n         </div>\r\n        <div v-if=\"vSeccionCodigo == true\">\r\n            <p>Se listan los códigos <span style=\"font-weight: bold;\">Agrupados,</span> asociados al estudiante</p>\r\n            <gestionliquidacion  :arregloLiquidacion = \"arregloLiquidacion\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport seccionCodigos from './components/seccionCodigos.vue'\r\nimport gestionliquidacion from '../librosserie/gestionliquidacion.vue'\r\nimport vSelect from 'vue-select'\r\nexport default{\r\n    components:{\r\n        vSelect,\r\n        seccionCodigos,\r\n        gestionliquidacion,\r\n    },\r\n    data(){\r\n        return{\r\n            vSeccionCodigo:false,\r\n            liquidacion:{\r\n              institucion:'',\r\n              periodo:'',\r\n              condicion:'1',\r\n            },\r\n            arregloCiudad:[],\r\n            arregloTraeInstitucion:[],\r\n            arregloPeriodos:[],\r\n            ciudadSelect:'',\r\n            arregloLiquidacion:[],\r\n            arregloCodigosIndividuales:[],\r\n            region:1,\r\n        }\r\n    },\r\n    mounted(){\r\n      let me = this;\r\n      me.filtrarInstituciones()\r\n    },\r\n    methods:{\r\n      filtrarInstituciones(){\r\n        let me = this\r\n        me.arregloTraeInstitucion = []\r\n        me.liquidacion.institucion = \"\"\r\n        me.$vs.loading()\r\n        this.$http.get(this.$server_url+`institucion?listaInstitucionesActivaXRegion=yes&region=${ me.region }`)\r\n        .then(function (res) {\r\n          me.$vs.loading.close()\r\n          me.arregloTraeInstitucion = res.data;\r\n        })\r\n        .catch(function (error) {\r\n          me.$vs.loading.close()\r\n          console.log(error + ' error');\r\n        })\r\n      },\r\n      //para filtrar periodos por institucioin\r\n      filtrarPeriodos(){\r\n        let me = this;\r\n        me.arregloCodigosIndividuales = []\r\n        me.arregloLiquidacion         = []\r\n        if( me.liquidacion.institucion.region_idregion === undefined ){\r\n          me.$vs.notify({\r\n            text:'Seleccione una institucion antes de filtrar por Periodos',\r\n            color:'warning',\r\n            iconPack: 'feather',\r\n            icon:'icon-check'})\r\n          return;\r\n        }\r\n        me.arregloPeriodos = []\r\n        me.$vs.loading()\r\n        const formData = new FormData();\r\n        formData.append('condicion', me.liquidacion.condicion);\r\n        formData.append('region_idregion', me.liquidacion.institucion.region_idregion);\r\n        this.$http.post(this.$server_url+'traerperiodos', formData).then(res => {\r\n          me.arregloPeriodos = res.data;\r\n          me.$vs.loading.close()\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        })\r\n      },\r\n      filtrarCodigos(){\r\n        let me = this;\r\n        if(me.vSeccionCodigo == false){\r\n          me.buscarReportesLibrosAsesor()\r\n        }else{\r\n          me.filtrarLiquidacion()\r\n        }\r\n      },\r\n      //para filtrar la liquidacion\r\n      filtrarLiquidacion(){\r\n        let me = this;\r\n        me.arregloLiquidacion = []\r\n        if(me.liquidacion.periodo == null || me.liquidacion.periodo == undefined || me.liquidacion.periodo == \"\"){\r\n            this.$vs.notify({\r\n                text: 'No ha seleccionado un periodo',\r\n                color: 'danger',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n            })\r\n            return false\r\n        }\r\n        me.$vs.loading()\r\n        this.$http.get(this.$server_url+'liquidacionperiodo?id_periodo='+me.liquidacion.periodo.idperiodoescolar+'&idinstitucion='+me.liquidacion.institucion.idInstitucion)\r\n        .then(res => {\r\n            me.arregloLiquidacion = res.data;\r\n            me.$vs.loading.close()\r\n        })\r\n        .catch(function (error) {\r\n            me.$vs.loading.close()\r\n            console.log(error);\r\n        })\r\n      },\r\n      buscarReportesLibrosAsesor() {\r\n        let me  = this;\r\n        if(me.liquidacion.periodo == null || me.liquidacion.periodo == undefined || me.liquidacion.periodo == \"\"){\r\n            this.$vs.notify({\r\n                text: 'No ha seleccionado un periodo',\r\n                color: 'danger',\r\n                iconPack: 'feather',\r\n                icon: 'icon-alert-triangle'\r\n            })\r\n            return false\r\n        }\r\n        this.arregloCodigosIndividuales = [];\r\n        this.openLoadingColor();\r\n        this.$http.get(this.$server_url+'reportesCodigoAsesor/' + me.liquidacion.institucion.idInstitucion+'/'+me.liquidacion.periodo.idperiodoescolar)\r\n        .then(res => {\r\n            this.$vs.loading.close()\r\n            if (res.data[0] === undefined) {\r\n                this.$vs.notify({\r\n                    text: 'No existen códigos asignados a esta institución',\r\n                    color: 'danger',\r\n                    iconPack: 'feather',\r\n                    icon: 'icon-alert-triangle'\r\n                })\r\n                return false\r\n            }\r\n            this.arregloCodigosIndividuales = res.data\r\n\r\n        })\r\n        .catch(function(e){\r\n            this.$vs.loading.close()\r\n        })\r\n      },\r\n      openLoadingColor(libro) {\r\n        this.$vs.loading({\r\n            color: '#1A76F2'\r\n        })\r\n        /*setTimeout(() => {\r\n            this.$vs.loading.close()\r\n        }, 2000);*/\r\n      },\r\n    }\r\n}\r\n</script>\r\n"]}]}