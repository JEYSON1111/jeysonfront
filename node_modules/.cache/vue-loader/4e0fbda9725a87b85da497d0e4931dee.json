{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\empresas\\components\\EmpresaUpload.vue?vue&type=style&index=0&id=0a720c4c&scoped=true&lang=css","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\empresas\\components\\EmpresaUpload.vue","mtime":1712682815813},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n.box-input{\n}\n .upload-container{\n   position:relative}\n   .upload-container input{\n     border:1px solid #92b0b3;\n     background:#217bc5;\n     outline:2px dashed #92b0b3;\n     outline-offset:-10px;\n     padding:100px 0px 100px 130px;\n     width:100%;\n     color:white;\n }\n   .upload-container input:hover{\n     background:#2c78cf}\n   .upload-container:before{\n     position:absolute;\n     bottom:50px;\n     left:23%;\n     content:\" Seleccione un archivo o arrastre aqui \";\n     color:#f1f9fa;\n     font-weight:900\n }\n   .upload-btn{\n     margin-left:300px;\n     padding:7px 20px}\n",{"version":3,"sources":["EmpresaUpload.vue"],"names":[],"mappings":";AAiOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EmpresaUpload.vue","sourceRoot":"src/views/empresas/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"vx-row\">\r\n        <!--FIN TIPOS PAGOS FACTURACION-->\r\n        <!--FILE-->\r\n        <div class=\"vx-col w-full mb-6\">\r\n            <p class=\"ml-2\">Logo:</p>\r\n            <p class=\"mt-1\"></p>\r\n            <div class=\"box-input\" v-if=\"attachmentArray.length == 0 && ifSaveImagen == false\">\r\n                <div class=\" box upload-container\">\r\n                    <input type=\"file\" name=\"fileEmpresa\" id=\"fileEmpresa\" v-on:change=\"uploadFiles()\" />\r\n                </div>\r\n                <br>\r\n            </div>\r\n            <!--BASE-->\r\n            <div class=\"box-input\" v-if=\"attachmentArray.length == 0 && ifSaveImagen == true\">\r\n                <div class=\"flex\" style=\"justify-content: center;\">\r\n                    <div class=\"flex\" style=\"flex-direction: column;\">\r\n                        <img id=\"img1\" width=\"200\" class=\"img-responsive mb-2 ml-1\" :src=\"$data_url+'archivos/facturacion/empresa/'+imgOld\" style=\"border-radius: 5px;margin: 0 auto;\">\r\n                        <small class=\"mt-1 ml-2\">{{ imgOld }}</small>\r\n                    </div>\r\n                    <vs-button radius type=\"line\" @click=\"ifSaveImagen = false;\"  class=\"ml-2 mt-4\" color=\"danger\" icon=\"delete\"></vs-button>\r\n                </div>\r\n            </div>\r\n            <!--LOCAL-->\r\n            <div class=\"flex\" style=\"margin-top: -10px;\" v-if=\"attachmentArray.length > 0\">\r\n                <div class=\"flex\" v-for=\"(tr,key) in attachmentArray\" :key=\"key\" style=\"margin: 0 auto;\">\r\n                    <div class=\"flex\" style=\"flex-direction: column;\">\r\n                        <img id=\"img1\" v-if=\"tr.tipo == 'img'\" width=\"200\" class=\"img-responsive mb-2 ml-1\" v-bind:src=\"tr.img\" style=\"border-radius: 5px;margin: 0 auto;\">\r\n                        <img v-else style=\"width: 200px;\"  src=\"@/assets/images/file-icons/doc.png\"/>\r\n                        <small class=\"mt-1 ml-2\">{{ tr.name }}</small>\r\n                    </div>\r\n                    <vs-button radius type=\"line\"  @click=\"removeItemFromArr(attachmentArray,tr)\" class=\"ml-2 mt-4\" color=\"danger\" icon=\"delete\"></vs-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"flex\" style=\"justify-content: center;\">\r\n      <vs-button class=\"mr-3 mb-2\" style=\"color:white;!important\" color=\"success\" icon-pack=\"feather\" icon=\"icon-save\" @click=\"subirDocumento()\">Guardar</vs-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport vSelect from 'vue-select'\r\nimport axios from 'axios'\r\nexport default{\r\n  components:{\r\n    vSelect,\r\n  },\r\n  data(){\r\n    return{\r\n      //VARIABLES IMAGEN\r\n      attachmentArray:[],\r\n      tipoFile:'',\r\n      ifSaveImagen:false,\r\n      imgOld:'',\r\n      ifImagenBd:false,\r\n      //FIN VARIABLES IMAGEN\r\n    }\r\n  },\r\n  props:{\r\n    id:{\r\n      type:Number,\r\n      default:0\r\n    },\r\n    usuario:{\r\n      type:Object,\r\n      default:function(){\r\n        return {}\r\n      }\r\n    },\r\n    ObjectPadre:{\r\n      type:Object,\r\n      default:function(){\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  created(){\r\n    let me = this;\r\n  },\r\n  mounted(){\r\n    let me = this;\r\n    me.attachmentArray = []\r\n    if(me.id > 0){\r\n      me.imgOld         = me.ObjectPadre.url\r\n      if(me.imgOld){\r\n        me.ifSaveImagen = true\r\n        me.ifImagenBd   = true\r\n      }\r\n    }else{\r\n      me.ifSaveImagen = false\r\n    }\r\n  },\r\n  watch:{\r\n    ObjectPadre(results){\r\n      this.ObjectPadre = results\r\n    },\r\n  },\r\n  methods:{\r\n    removeItemFromArr (arr, item) {\r\n        let me = this;\r\n        const i = arr.indexOf(item)\r\n        arr.splice(i, 1)\r\n        document.getElementById(\"fileEmpresa\").value = ''\r\n    },\r\n    uploadFiles(){\r\n        let me = this;\r\n        me.attachmentArray = []\r\n        var archivo = document.getElementById(\"fileEmpresa\").files[0];\r\n        me.tipoFile  = \"\"\r\n        if(archivo.type == \"image/png\" || archivo.type == \"image/gif\" || archivo.type == \"image/jpeg\" || archivo.type == \"image/jpg\") me.tipoFile = \"img\"\r\n        else me.tipoFile = \"other\"\r\n        var reader = new FileReader();\r\n        if (me) {\r\n            reader.readAsDataURL(archivo );\r\n            reader.onloadend = function () {\r\n                var cal = new Object();\r\n                cal.file = archivo\r\n                cal.img  = reader.result\r\n                cal.tipo = me.tipoFile\r\n                cal.name = archivo.name\r\n                me.attachmentArray.push(cal)\r\n            }\r\n        }\r\n    },\r\n    subirDocumento(){\r\n      let me = this;\r\n      let formData = new FormData();\r\n      if(me.ifSaveImagen == false && me.attachmentArray.length == 0 && me.ifImagenBd){\r\n        formData.append('archivo',        'no')\r\n        formData.append('url',            'no')\r\n      }\r\n      formData.append('id',               me.id);\r\n      formData.append('tipo',             me.ObjectPadre.tipo);\r\n      formData.append('nombre',           me.ObjectPadre.nombre);\r\n      formData.append('descripcion_corta',me.ObjectPadre.descripcion_corta);\r\n      formData.append('representante',    me.ObjectPadre.representante);\r\n      formData.append('direccion',        me.ObjectPadre.direccion);\r\n      formData.append('ruc',              me.ObjectPadre.ruc);\r\n      formData.append('email',            me.ObjectPadre.email);\r\n      formData.append('telefono',         me.ObjectPadre.telefono);\r\n      formData.append('secuencial',       me.ObjectPadre.secuencial);\r\n      formData.append('estado',           me.ObjectPadre.estado);\r\n      this.$http.post(this.$server_url + 'empresa', formData)\r\n      .then(res => {\r\n        let getId = res.data.id\r\n        me.$vs.notify({\r\n        text:\"Se guardo correctamente\",\r\n        color:'success',\r\n        iconPack: 'feather',\r\n        icon:'icon-check'})\r\n        me.saveEvidencia(getId)\r\n          // this.$emit('f_creado', 1);\r\n      })\r\n      .catch(err => {\r\n          console.log(err);\r\n      })\r\n    },\r\n    saveEvidencia(getId){\r\n      let me = this\r\n      //files\r\n      let imgsEnviar = []\r\n      let formData = new FormData();\r\n      if(me.ifSaveImagen || me.attachmentArray.length == 0){\r\n        formData.append('noSendFiles','yes')\r\n        this.$emit('f_creado', 1);\r\n        return\r\n      }else{\r\n        me.attachmentArray.forEach(element => {\r\n        imgsEnviar.push(element.file)\r\n        });\r\n        for(let i=0; i<this.attachmentArray.length;i++){\r\n            formData.append('archivos[]',              imgsEnviar[i]);\r\n        }\r\n      }\r\n      formData.append('id',                   getId)\r\n      formData.append('saveArchivos',         'yes')\r\n      formData.append('imgOld',               me.imgOld)\r\n      formData.append('archivoEmpresa',       'yes')\r\n      const config = { headers: { 'Content-Type': 'multipart/form-data' } };\r\n      axios.post(this.$data_url + 'api/guardarDatosPedido', formData, config)\r\n      .then(function (res) {\r\n        me.regresar()\r\n      })\r\n      .catch(function (error) {\r\n      })\r\n    },\r\n    regresar(){\r\n      this.$emit('f_creado', 1);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n</script>\r\n<style scoped>\r\n .box-input{\r\n }\r\n  .upload-container{\r\n    position:relative}\r\n    .upload-container input{\r\n      border:1px solid #92b0b3;\r\n      background:#217bc5;\r\n      outline:2px dashed #92b0b3;\r\n      outline-offset:-10px;\r\n      padding:100px 0px 100px 130px;\r\n      width:100%;\r\n      color:white;\r\n  }\r\n    .upload-container input:hover{\r\n      background:#2c78cf}\r\n    .upload-container:before{\r\n      position:absolute;\r\n      bottom:50px;\r\n      left:23%;\r\n      content:\" Seleccione un archivo o arrastre aqui \";\r\n      color:#f1f9fa;\r\n      font-weight:900\r\n  }\r\n    .upload-btn{\r\n      margin-left:300px;\r\n      padding:7px 20px}\r\n</style>\r\n"]}]}