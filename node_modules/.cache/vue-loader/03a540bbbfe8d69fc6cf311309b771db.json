{"remainingRequest":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\salle\\docente\\evaluaciones\\EvaluacionComponent.vue?vue&type=style&index=0&id=3c430a6b&lang=css","dependencies":[{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\src\\views\\salle\\docente\\evaluaciones\\EvaluacionComponent.vue","mtime":1712682816537},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\PRY_NEW_JEYSON\\LOCAL\\plataformaprolipa_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\r\n/* width */\r\n#div_pregunta::-webkit-scrollbar {\r\n  width: 10px;\r\n}\r\n\r\n/* Track */\r\n#div_pregunta::-webkit-scrollbar-track {\r\n  box-shadow: inset 0 0 5px rgb(211, 207, 241);\r\n  border-radius: 10px;\r\n}\r\n\r\n/* Handle */\r\n#div_pregunta::-webkit-scrollbar-thumb {\r\n  background: #2e85e9;\r\n  border-radius: 10px;\r\n}\r\n\r\n/* Handle on hover */\r\n#div_pregunta::-webkit-scrollbar-thumb:hover {\r\n  background: #2e85e9;\r\n}\r\n/* CSS */\r\n.button-7 {\r\n  background-color: #0095ff;\r\n  border: 1px solid transparent;\r\n  border-radius: 3px;\r\n  box-shadow: rgba(255, 255, 255, .4) 0 1px 0 0 inset;\r\n  box-sizing: border-box;\r\n  color: #fff;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  font-family: -apple-system,system-ui,\"Segoe UI\",\"Liberation Sans\",sans-serif;\r\n  font-size: 13px;\r\n  font-weight: 400;\r\n  line-height: 1.15385;\r\n  margin: 0;\r\n  outline: none;\r\n  padding: 8px .8em;\r\n  position: relative;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  touch-action: manipulation;\r\n  vertical-align: baseline;\r\n  white-space: nowrap;\r\n}\r\n\r\n.button-7:hover,\r\n.button-7:focus {\r\n  background-color: #07c;\r\n}\r\n\r\n.button-7:focus {\r\n  box-shadow: 0 0 0 4px rgba(0, 149, 255, .15);\r\n}\r\n\r\n.button-7:active {\r\n  background-color: #0064bd;\r\n  box-shadow: none;\r\n}\r\n",{"version":3,"sources":["EvaluacionComponent.vue"],"names":[],"mappings":";AA4MA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"EvaluacionComponent.vue","sourceRoot":"src/views/salle/docente/evaluaciones","sourcesContent":["<template>\r\n    <div class=\"vx-row w-full p-3\">\r\n      <!-- {{ evaluacion.areas[0][0].asignaturas[0][0].preguntas[0].pregunta.created_at }} -->\r\n      <div class=\"vx-col sm:w-3/4 w-full\">\r\n      <!-- ENCABEZADO -->\r\n      <vx-card v-bind:title=\"evaluacion.nombreasignatura\" title-color=\"primary\">\r\n        <div class=\"vx-row w-full\">\r\n          <div class=\"vx-col sm:w-1/4 w-full\">\r\n              <img src=\"https://plataforma.prolipadigital.com.ec/img/prolipa.a3e6ff1b.png\" style=\"max-width: 200px; border-radius: 5px;\">\r\n          </div>\r\n          <div class=\"vx-col sm:w-3/4 w-full pt-3 text-right\">\r\n              <div v-if=\"revisa_admin_salle!=1\"><b>Estudiante:</b> {{usuario.nombres}} {{usuario.apellidos}} - {{usuario.cedula}}<br></div>\r\n              <div v-else>\r\n                  <b>Estudiante:</b> {{datos_docente_revisando}}\r\n              </div>\r\n              <b class=\"mt-1\">Inicia:</b> {{configuracion.fecha_inicio}} - <b class=\"ml-1\">Finaliza:</b> {{ configuracion.fecha_fin}} <br>\r\n              <b>Observaciones: </b> <span v-if=\"configuracion.observaciones !== null && configuracion.observaciones != 'null'\">{{configuracion.observaciones}}</span>\r\n              <div class=\"mt-1\">\r\n                <p v-for=\"(item,key) in arregloPeriodos\" :key=\"key\">\r\n                  <span v-if=\"item.id == configuracion.n_evaluacion\"><b>Evaluación Seleccionada:</b> <span class=\"ml-1\">{{ item.nombre }}</span></span>\r\n                </p>\r\n                <br>\r\n              </div>\r\n          </div>\r\n        </div>\r\n      </vx-card>\r\n      <!-- FIN ENCABEZADO -->\r\n      <!-- SECCION RESPONDER PREGUNTAS -->\r\n      <vx-card class=\"mt-5 mb-6 text-center\" v-if=\"evaluacion_activa==1\">\r\n        <div>\r\n          <vs-button type=\"line\" v-for=\"(itemR, indexR) in evaluacion.areas\" :key=\"indexR\" @click=\"ver_area(indexR)\" class=\"m-1\"> {{itemR.area.nombre_area}} </vs-button>\r\n        </div>\r\n        <div v-for=\"(item, index) in evaluacion.areas\" :key=\"index\">\r\n          <div v-bind:id=\"'area_activa'+index\" style=\"display: none;\" class=\"mt-6 text-left\">\r\n              <h5 class=\"ml-5\">Asignaturas área: {{item.area.nombre_area}}</h5>\r\n              <vs-collapse type=\"margin\">\r\n              <vs-collapse-item v-for=\"(itemA, indexA) in item[0].asignaturas\" :key=\"indexA\">\r\n                  <div slot=\"header\"> Preguntas - {{itemA.asignatura.nombre_asignatura}} </div>\r\n                  <div  style=\"overflow-y: scroll; height:600px;\" id=\"div_pregunta\">\r\n                  <div v-for=\"(itemP, indexP) in itemA[0].preguntas\" :key=\"indexP\" class=\"w-full mb-2\">\r\n                  <div :id=\"itemA.asignatura.id_asignatura+''+(indexP+1)\" class=\"w-full p-3\" style=\"display: none; min-height: 380px; vertical-align: top; background: rgb(64,105,213); background: radial-gradient(circle, rgba(64,105,213,0.073564459963673) 20%, rgba(0,101,228,0.16600143475358897) 87%);\">\r\n                      <div class=\"mt-2\" style=\"font-size: 17px; min-height: 50px;\" align=\"justify\"> <b><span v-html=\"itemP.pregunta.descripcion\"></span></b> </div>\r\n                      <div class=\"mb-base text-right\">\r\n                          Pregunta de {{itemP.pregunta.nombre_tipo}} sobre {{itemP.pregunta.puntaje_pregunta}} pts.\r\n                      </div>\r\n                      <img @click=\"dataPregunta = itemP;popupMostrarImagen=true;\"  v-if=\"itemP.pregunta.img_pregunta !== null && itemP.pregunta.img_pregunta !== 'null' && itemP.pregunta.img_pregunta !== ''\" :src=\"$data_url+'archivos/img/salle/img_preguntas/'+itemP.pregunta.img_pregunta\" style=\"max-width: 400px; border-radius: 5px; mix-blend-mode: multiply;\" class=\"mb-base\">\r\n\r\n                      <div v-if=\"itemP.pregunta.id_tipo_pregunta === 1\" class=\"m-3\" style=\"font-size: 15px;\">\r\n                          <div>\r\n                              <!-- se carga array de preguntas de seleccion multiple -->\r\n                              <div v-for=\"(itemRes, indexRes) in itemP.respuestas\" :key=\"indexRes\" style=\"display: none;\">\r\n                                  {{opciones_check[itemRes.respuesta] = itemRes.respuesta}}\r\n                              </div>\r\n                          </div>\r\n                          <div class=\"text-left mb-5\" v-for=\"(itemO, indexO) in itemP.opciones\" :key=\"indexO\">\r\n                              <div v-if=\"revision_activa===true\" style=\"width: 10%; display: inline-block;\" align=\"center\">\r\n                                  <span v-if=\"opciones_check[itemO.id_opcion_pregunta] && itemO.tipo == 1\" style=\"color: #3DE090; font-size: 18px;\">✔</span>\r\n                                  <span v-if=\"opciones_check[itemO.id_opcion_pregunta] && itemO.tipo == 0\" style=\"color: #E73A5A; font-size: 18px;\"><b>X</b></span>\r\n                              </div>\r\n\r\n                              <div style=\"width: 85%; display: inline-block; text-align: left;\" align=\"left\">\r\n                                  <vs-checkbox  :disabled=\"revision_activa\" v-model=\"opciones_check[itemO.id_opcion_pregunta]\" :vs-value=\"itemO.id_opcion_pregunta\" @input=\"guardarSeleccion(1, itemO, itemP.opciones, itemP.pregunta.puntaje_pregunta)\">\r\n                                      {{itemO.opcion}}\r\n                                      <img v-if=\"itemO.img_opcion !== null && itemO.itemO !== 'null' && itemO.itemO !== ''\" :src=\"$data_url+'archivos/img/salle/img_preguntas/'+itemO.img_opcion\" alt=\"\">\r\n                                  </vs-checkbox>\r\n                              </div>\r\n                          </div>\r\n                      </div>\r\n\r\n                      <div v-if=\"itemP.pregunta.id_tipo_pregunta === 3 || itemP.pregunta.id_tipo_pregunta === 5\"  class=\"m-3\" style=\"font-size: 15px;\">\r\n\r\n                          <div>\r\n                              <!-- se carga array de preguntas de opcion simple -->\r\n                              <div v-for=\"(itemRes, indexRes) in itemP.respuestas\" :key=\"indexRes\" style=\"display: none;\">\r\n                                  {{opciones[itemRes.id_pregunta] = itemRes.respuesta}}\r\n                              </div>\r\n                          </div>\r\n\r\n                          <ul class=\"justify\" v-for=\"(itemO, indexO) in itemP.opciones\" :key=\"indexO\">\r\n                              <li class=\"mb-5\">\r\n                              <div v-if=\"revision_activa===true\" style=\"width: 10%; display: inline-block;\" align=\"center\">\r\n                              <span v-if=\"itemO.tipo == 1\" style=\"color: #3DE090; font-size: 18px;\">✔</span>\r\n                              <span v-else style=\"color: #E73A5A; font-size: 18px;\"><b>X</b></span>\r\n                              </div>\r\n                              <div style=\"width: 85%; display: inline-block;\">\r\n                              <vs-radio :disabled=\"revision_activa\" v-model=\"opciones[itemO.id_pregunta]\" :vs-value=\"itemO.id_opcion_pregunta\" @input=\"guardarSeleccion(3, itemO, itemP.opciones, itemP.pregunta.puntaje_pregunta)\">\r\n                                  {{itemO.opcion}}\r\n                                  <img v-if=\"itemO.img_opcion !== null && itemO.itemO !== 'null' && itemO.itemO !== ''\" :src=\"$data_url+'archivos/img/salle/img_preguntas/'+itemO.img_opcion\" alt=\"\">\r\n                              </vs-radio>\r\n                              </div>\r\n                              </li>\r\n                          </ul>\r\n                      </div>\r\n\r\n                  </div>\r\n                  </div>\r\n                  <vs-pagination :total=\"itemA[0].preguntas.length\" v-model=\"current_preg[indexA]\" @input=\"paginacion(indexA, itemA[0].preguntas.length, itemA.asignatura.id_asignatura)\"></vs-pagination>\r\n                  </div>\r\n              </vs-collapse-item>\r\n              </vs-collapse>\r\n          </div>\r\n        </div>\r\n      </vx-card>\r\n      <vx-card class=\"mt-5 mb-6 text-center p-5\" v-else>\r\n        <br>\r\n        <h5> {{alerta_evaluacion}} </h5>\r\n        <br><br>\r\n        <vs-button color=\"success\" type=\"border\" class=\"m-2\" @click=\"$router.go(-1)\"><b>← Volver</b></vs-button>\r\n        <!-- <br><br>\r\n        <h5 v-if=\"tipo_revisar_activo!=1\">Si no visualiza su evaluación, recargue la página.</h5> -->\r\n      </vx-card>\r\n      <!-- FIN SECCION RESPONDER PREGUNTAS -->\r\n      </div>\r\n      <!-- SECCION TIEMPO, NAVEGACION -->\r\n      <div class=\"vx-col sm:w-1/4 w-full\">\r\n        <vx-card v-if=\"evaluacion_activa==1\">\r\n          <div align=\"center\">\r\n          <div v-if=\"revision_activa===true\" class=\"mb-6\">\r\n              <b style=\"font-size: 16px;\">Calificación</b> <br><br><br>\r\n              <span style=\"font-size: 45px; color: #2974FE; border: 1px solid #d5d5d5; border-radius: 5px; padding: 20px; 10px; 20px; 10px;\">\r\n                  {{ calificacion }} <span style=\"font-size: 25px;\">/ 100</span>\r\n              </span><br><br>\r\n          </div>\r\n          <div v-if=\"revision_activa===false\"> Tiempo para resolver esta evaluación: </div>\r\n          <!-- <div class=\"mt-3\" style=\"font-size: 35px; color: #2974FE;\">{{configuracion.tiempo_evaluacion}} minutos</div> -->\r\n          <div class=\"reloj mb-6 mt-4\" style=\"font-size: 40px; color: #2974FE;\"></div>\r\n          <div class=\"mb-6\">\r\n              <vs-button v-if=\"evaluacion_activa==1 && revision_activa===false\" color=\"dark\" type=\"gradient\" class=\"mb-6\" @click=\"openConfirmFinalizar()\">Finalizar evaluación</vs-button>\r\n              <vs-button v-if=\"revisa_admin_salle==1\" color=\"dark\" type=\"gradient\" class=\"mb-6\" @click=\"openConfirmFinalizar()\">Finalizar evaluación</vs-button>\r\n          </div>\r\n          <div class=\"mb-3\">\r\n              <vs-button color=\"success\" type=\"border\" class=\"m-1\" @click=\"$router.go(-1)\"><b>← Volver</b></vs-button>\r\n          </div>\r\n          </div>\r\n        </vx-card>\r\n      </div>\r\n      <!-- FIN SECCION TIEMPO, NAVEGACION -->\r\n      <!--MODALES-->\r\n      <!--MODAL PARA MOSTRAR UNA CONFIRMACION Y LAS REGLAS DE LA EVALUACION-->\r\n      <vs-popup classContent=\"popup-example\" title=\"Advertencia\" :active.sync=\"popupConfirmStart\" @close=\"handleClose\" :class=\"{ 'hide-close': !showCloseButton }\">\r\n        <!--COMENZAR EVALUACION-->\r\n        <div v-if=\"intentosEvaluacion == 0\">\r\n          <p class=\"font-bold text-success\" style=\"font-size:18px;text-align: center;\">Al aceptar empezará a correr el tiempo, buena suerte!</p>\r\n          <p class=\"mt-5 font-semibold\" style=\"opacity: 0.8;\">Advertencia:</p>\r\n          <div class=\"bg-warning text-white mt-1\" style=\"padding: 15px;border-radius: 10px;line-height: 22px;\">\r\n            <p><b><ion-icon name=\"warning-outline\"></ion-icon></b>  No puedes cambiar de pestaña o cerrar el navegador de lo contrario tu evaluación finalizará</p>\r\n          </div>\r\n          <div class=\"flex justify-center mt-3\">\r\n            <img src=\"https://cdn-icons-png.flaticon.com/512/3344/3344374.png\" width=\"150\"/>\r\n          </div>\r\n          <div class=\"flex justify-center mt-5\">\r\n            <vs-button class=\"mr-3 mb-2\" color=\"success\" @click=\"acceptAlert()\">Empezar</vs-button>\r\n            <vs-button color=\"warning\" type=\"border\" class=\"mb-2\" @click=\"volver()\">← Volver</vs-button>\r\n          </div>\r\n        </div>\r\n        <!--CUANDO YA INICIO LA EVALUACION-->\r\n        <div v-if=\"intentosEvaluacion == 1\">\r\n          <p class=\"font-bold text-danger text-center\" style=\"font-size:18px;\"> Usted ha abandonado la evaluación , la próxima vez su <b>evaluación finalizará</b></p>\r\n          <div class=\"flex justify-center\">\r\n            <img src=\"https://cdn-icons-png.flaticon.com/512/2797/2797387.png\" width=\"200\"/>\r\n          </div>\r\n          <div class=\"flex justify-center\">\r\n            <!-- HTML !-->\r\n            <button class=\"button-7\" role=\"button\" @click=\"acceptAlert()\">Continuar Evaluación</button>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"intentosEvaluacion > 1\">\r\n          <p class=\"font-bold text-danger\" style=\"font-size:18px;text-align: center;\"><b> Evaluación suspendida</b></p>\r\n          <div class=\"flex justify-center\">\r\n            <img src=\"https://cdn-icons-png.flaticon.com/512/3403/3403504.png\" width=\"200\"/>\r\n          </div>\r\n          <div class=\"flex justify-center\">\r\n            <!-- HTML !-->\r\n            <vs-button color=\"warning\" type=\"filled\" class=\"mb-2 mt-3\" @click=\"acceptAlert()\">Aceptar</vs-button>\r\n          </div>\r\n        </div>\r\n      </vs-popup>\r\n      <!--MODAL PARA MOSTRAR QUE SI CAMBIA DE PESTANA SE FINALIZARA LA PRUEBA-->\r\n      <vs-popup classContent=\"popup-example\" title=\"Advertencia\" :active.sync=\"popupIntentos\">\r\n        <p class=\"font-bold text-danger text-2xl\">A la proximá que salgas tu <b>Evaluación Finalizará</b></p>\r\n        <div class=\"flex justify-center\">\r\n          <img src=\"https://cdn-icons-png.flaticon.com/512/2797/2797387.png\" width=\"200\"/>\r\n        </div>\r\n        <div class=\"flex justify-center\">\r\n          <!-- HTML !-->\r\n          <button class=\"button-7\" role=\"button\" @click=\"popupIntentos = false;\">Entendido</button>\r\n        </div>\r\n      </vs-popup>\r\n      <!--MODAL PARA MOSTRAR LA IMAGEN DE LA PREGUNTA-->\r\n      <vs-popup class=\"holamundo\" fullscreen title=\"Mostrar imagen\" :active.sync=\"popupMostrarImagen\">\r\n        <div class=\"flex\" style=\"justify-content: center;\" v-if=\"popupMostrarImagen\">\r\n          <image-zoom\r\n              :regular=\"$data_url+'archivos/img/salle/img_preguntas/'+dataPregunta.pregunta.img_pregunta\"\r\n              :zoom-amount=\"3\"\r\n              :click-zoom=\"true\"\r\n              click-message=\"De click para aumentar\"\r\n              img-class=\"img-fluid\"\r\n              >\r\n          </image-zoom>\r\n        </div>\r\n      </vs-popup>\r\n    </div>\r\n</template>\r\n<style>\r\n/* width */\r\n#div_pregunta::-webkit-scrollbar {\r\n  width: 10px;\r\n}\r\n\r\n/* Track */\r\n#div_pregunta::-webkit-scrollbar-track {\r\n  box-shadow: inset 0 0 5px rgb(211, 207, 241);\r\n  border-radius: 10px;\r\n}\r\n\r\n/* Handle */\r\n#div_pregunta::-webkit-scrollbar-thumb {\r\n  background: #2e85e9;\r\n  border-radius: 10px;\r\n}\r\n\r\n/* Handle on hover */\r\n#div_pregunta::-webkit-scrollbar-thumb:hover {\r\n  background: #2e85e9;\r\n}\r\n/* CSS */\r\n.button-7 {\r\n  background-color: #0095ff;\r\n  border: 1px solid transparent;\r\n  border-radius: 3px;\r\n  box-shadow: rgba(255, 255, 255, .4) 0 1px 0 0 inset;\r\n  box-sizing: border-box;\r\n  color: #fff;\r\n  cursor: pointer;\r\n  display: inline-block;\r\n  font-family: -apple-system,system-ui,\"Segoe UI\",\"Liberation Sans\",sans-serif;\r\n  font-size: 13px;\r\n  font-weight: 400;\r\n  line-height: 1.15385;\r\n  margin: 0;\r\n  outline: none;\r\n  padding: 8px .8em;\r\n  position: relative;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  user-select: none;\r\n  -webkit-user-select: none;\r\n  touch-action: manipulation;\r\n  vertical-align: baseline;\r\n  white-space: nowrap;\r\n}\r\n\r\n.button-7:hover,\r\n.button-7:focus {\r\n  background-color: #07c;\r\n}\r\n\r\n.button-7:focus {\r\n  box-shadow: 0 0 0 4px rgba(0, 149, 255, .15);\r\n}\r\n\r\n.button-7:active {\r\n  background-color: #0064bd;\r\n  box-shadow: none;\r\n}\r\n</style>\r\n<script>\r\n    import imageZoom from 'vue-image-zoomer';\r\n    import vSelect from 'vue-select'\r\n    import $ from 'jquery'\r\n    var x = null;\r\n    export default {\r\n        data(){\r\n          return {\r\n            usuario: [],\r\n            evaluacion: [],\r\n            area_activa: 0,\r\n            opciones: [],\r\n            opciones_check: {},\r\n            id_evaluacion: '',\r\n            evaluacion_activa: 0,\r\n            alerta_evaluacion: '',\r\n            revision_activa: false,\r\n            configuracion: [],\r\n            color_overlay: '',\r\n            text_overlay: '',\r\n            tiempo_evaluacion: 0,\r\n            calificacion: 0,\r\n            dataaaa: [],\r\n            current_preg: [],\r\n            revisa_admin_salle: 0,\r\n            datos_docente_revisando: '',\r\n            arregloPeriodos:[],\r\n            //variables para intentos de evaluacion\r\n            intentosEvaluacion:0,\r\n            popupIntentos:false,\r\n            popupConfirmStart:false,\r\n            showCloseButton:false,\r\n            //fin variables para intentos de evaluacion\r\n            //variables para mostrar la imagen\r\n            dataPregunta:'',\r\n            popupMostrarImagen:false,\r\n            //SOLO UNA VEZ CORRERA EL TIEMPO\r\n            correrTiempo:true,\r\n          }\r\n        },\r\n        components: {\r\n          'v-select': vSelect,\r\n          imageZoom\r\n        },\r\n        created(){\r\n          let me = this\r\n          me.getPeriodosEvaluacion()\r\n          me.usuario = JSON.parse(localStorage.getItem('usuario'));\r\n          me.tipo_revisar_activo = localStorage.tipo_revisar\r\n          me.revisa_admin_salle = localStorage.revisa_admin_salle\r\n          me.datos_docente_revisando = localStorage.datos_docente_revisando\r\n          if( me.tipo_revisar_activo === '1' ){\r\n              me.id_evaluacion = localStorage.id_evaluacion_salle\r\n              me.obtener_evaluacion()\r\n          }else{\r\n              me.generarEvaluacion()\r\n          }\r\n          me.getConfiguracion()\r\n        },\r\n        mounted() {\r\n          document.addEventListener(\"visibilitychange\", this.handleVisibilityChange);\r\n        },\r\n        beforeDestroy() {\r\n          document.removeEventListener(\"visibilitychange\", this.handleVisibilityChange);\r\n        },\r\n        methods: {\r\n          handleClose() {\r\n            let me = this;\r\n            me.popupConfirmStart = true\r\n          },\r\n          volver(){\r\n            let me = this;\r\n            me.popupConfirmStart = false\r\n            me.$router.go(-1)\r\n          },\r\n          handleVisibilityChange() {\r\n            let me = this\r\n            if (document.visibilityState === \"hidden\") {\r\n              console.log(\"diconnect\")\r\n              // El usuario cambió de pestaña o minimizó el navegador\r\n            } else {\r\n              console.log(\"connect\")\r\n              if((me.intentosEvaluacion == 1 || me.intentosEvaluacion == 2 ) && (this.usuario.id_group == 13 || this.usuario.id_group == 6)){\r\n                me.popupConfirmStart = true;\r\n              }\r\n              // El usuario volvió a la pestaña o maximizó el navegador\r\n            }\r\n          },\r\n          getPeriodosEvaluacion() {\r\n            let me = this;\r\n            this.$http.get(this.$server_url+'salle/periodos')\r\n              .then(function (response) {\r\n                me.arregloPeriodos = response.data;\r\n              })\r\n              .catch(function (error) {\r\n              })\r\n          },\r\n          async generarEvaluacion(){\r\n            let me = this\r\n            me.color_overlay = '#22c16b'\r\n            me.text_overlay = 'Estamos preparando su evaluación, no tomará mucho tiempo'\r\n            me.$vs.loading({ background: me.color_overlay, color: 'rgb(255, 255, 255)',  type: 'sound', text: me.text_overlay })\r\n            await this.$http.get(this.$server_url+'generar_evaluacion_salle/' + me.usuario.idusuario+'/'+me.usuario.institucion_idInstitucion+'/'+localStorage.EvaluacionSelectSalle+'/0')\r\n            .then(res => {\r\n              if( res.data === 0 ){\r\n                me.evaluacion_activa = 0\r\n                me.revision_activa = true\r\n                me.alerta_evaluacion = 'Lo sentimos el tiempo para resolver esta evaluación ha terminado.'\r\n                me.$vs.loading.close()\r\n                return\r\n              }\r\n              if( res.data === 1 ){\r\n                me.evaluacion_activa = 0\r\n                me.revision_activa = true\r\n                me.alerta_evaluacion = 'La institución a la que pertenece necesita ser configurada, por favor comuníquese con el administrador del sistema.'\r\n                me.$vs.loading.close()\r\n                return\r\n              }\r\n              if( res.data === 2 ){\r\n                me.evaluacion_activa = 0\r\n                me.revision_activa = true\r\n                me.alerta_evaluacion = 'Su evaluación ha finalizado.'\r\n                me.$vs.loading.close()\r\n                return\r\n              }\r\n\r\n              me.evaluacion         = res.data\r\n              me.id_evaluacion      = res.data.areas[0].area.id_evaluacion\r\n              me.intentosEvaluacion = res.data.areas[0].evaluacion[0].intentos\r\n              if((me.intentosEvaluacion == 0 || me.intentosEvaluacion == 1 || me.intentosEvaluacion == 2) && (me.usuario.id_group == 13 || me.usuario.id_group == 6)){\r\n                me.openConfirm()\r\n              }\r\n              if(me.intentosEvaluacion > 2 && (me.usuario.id_group == 13 || me.usuario.id_group == 6)){\r\n                me.popupConfirmStart = false\r\n              }\r\n              me.evaluacion_activa  = 1\r\n              me.$vs.loading.close()\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n              me.$vs.loading.close()\r\n            })\r\n          },\r\n          getConfiguracion(){\r\n            let me = this\r\n            var InstitucionUser = \"\"\r\n            if( me.tipo_revisar_activo === '1' ){\r\n              if(me.usuario.id_group == 13 || me.usuario.id_group == 6){\r\n                InstitucionUser = me.usuario.institucion_idInstitucion\r\n              }else{\r\n                InstitucionUser = localStorage.idInstitucionDocente\r\n              }\r\n            }else{\r\n              InstitucionUser = me.usuario.institucion_idInstitucion\r\n            }\r\n            me.$http.get(this.$server_url+'salle_getConfiguracion/' + InstitucionUser+'/'+localStorage.EvaluacionSelectSalle)\r\n            .then(res => {\r\n              me.configuracion = res.data.configuracion[0]\r\n              // alert(me.configuracion.ver_respuestas +'  &&  '+ me.tipo_revisar_activo)\r\n              if( me.configuracion.ver_respuestas == 0 && me.tipo_revisar_activo == 1 ){\r\n                console.log('no puede ver las preguntas')\r\n                me.alerta_evaluacion = 'La revisión de sus evaluaciones está desactivada.'\r\n                if( me.revisa_admin_salle != 1 ){ // cuando revisa el admin no se bloquea\r\n                  me.evaluacion_activa = 0\r\n                }\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n          },\r\n          ver_area(index){\r\n            let me = this\r\n            for( var i=0; i<me.evaluacion.areas.length; i++ ){\r\n              document.getElementById(\"area_activa\"+i).style.display = \"none\";\r\n            }\r\n            document.getElementById(\"area_activa\"+index).style.display = \"block\";\r\n          },\r\n          async guardarSeleccion(tipo_pregunta, item, opciones, puntaje){\r\n            let me = this\r\n            if( me.tipo_revisar_activo === 1 ){ return } // no se guardan las respuestas en modo revision\r\n            // se obtiene la cantidad de opciones correctas de la pregunta respondida\r\n            let cant_correctas = 0\r\n            $.each(opciones, function(key, value){\r\n              if(value.tipo === 1){\r\n                  cant_correctas++\r\n              }\r\n            })\r\n            let opciones_seleccionadas = []\r\n            $.each(me.opciones_check, function(key, value){\r\n              for( var i=0; i<opciones.length; i++ ){\r\n                if( key == opciones[i].id_opcion_pregunta ){\r\n                  if(value !== false ){\r\n                      opciones_seleccionadas.push(key)\r\n                  }\r\n                }\r\n              }\r\n            })\r\n            let puntaje_seleccion = 0\r\n            // alert(opciones_seleccionadas.length +' <= '+ cant_correctas)\r\n            if( opciones_seleccionadas.length <= cant_correctas ){\r\n              if( item.tipo === 1 ){\r\n                //si la opcion seleccionada es de tipo correcta y no ha excedido la cantidad de opciones correctas\r\n                puntaje_seleccion = (parseFloat(puntaje)/cant_correctas).toFixed(2)\r\n                // alert('puntaje_seleccion bien: ' + puntaje_seleccion)\r\n              }\r\n            }else{\r\n              // se le resta el puntaje cuando selecciona mas opciones de las correctas\r\n              puntaje_seleccion = parseFloat(puntaje)*(-1)\r\n              // alert('puntaje_seleccion else: ' + puntaje_seleccion)\r\n            }\r\n            let dataSeleccion = {\r\n              id_evaluacion: me.id_evaluacion,\r\n              id_usuario: me.usuario.idusuario,\r\n              id_pregunta: item.id_pregunta,\r\n              id_opcion_pregunta: item.id_opcion_pregunta,\r\n              tipo_pregunta: tipo_pregunta,\r\n              puntaje_seleccion: puntaje_seleccion\r\n            }\r\n            await me.$http.post(this.$server_url+'salle_guardarSeleccion', dataSeleccion)\r\n            .then(res => {\r\n              console.log(res)\r\n            })\r\n            .catch(function (error) {\r\n              console.log(error);\r\n            })\r\n          },\r\n          openConfirm() {\r\n            let me = this;\r\n            me.popupConfirmStart = true\r\n            // this.$vs.dialog({\r\n            //   type: 'confirm',\r\n            //   color: 'success',\r\n            //   title: `¿Listo para empezar?`,\r\n            //   acceptText:'Empezar',\r\n            //   cancelText:'Cancelar',\r\n            //   text: 'Al aceptar empezará a correr el tiempo, buena suerte!',\r\n            //   accept: this.acceptAlert\r\n            // })\r\n          },\r\n          acceptAlert() {\r\n            let me = this\r\n             if(me.intentosEvaluacion > 1){\r\n              me.popupConfirmStart = false\r\n              this.saveIntento()\r\n              me.generarEvaluacion()\r\n              return\r\n            }\r\n            me.popupConfirmStart = false\r\n            this.saveIntento()\r\n            document.getElementById(\"area_activa0\").style.display = \"block\";\r\n            if(me.correrTiempo){\r\n              me.correrTiempo = false\r\n              this.f_tiempo()\r\n            }\r\n          },\r\n          saveIntento(){\r\n            let me = this;\r\n            //si es docentes cuantos los intentos\r\n            if(me.usuario.id_group == 13 || me.usuario.id_group == 6){\r\n              let formData = new FormData();\r\n              formData.append('id_evaluacion',me.id_evaluacion);\r\n              formData.append('id_usuario',   me.usuario.idusuario)\r\n              formData.append('intentosEval', me.intentosEvaluacion)\r\n              this.$http.post(this.$server_url+'save_finalizar_evalIntentos', formData)\r\n              .then(res => {\r\n                me.intentosEvaluacion = res.data.intentos\r\n              })\r\n            }\r\n          },\r\n          f_tiempo() {\r\n            let me = this\r\n            let cant_preguntas = 0\r\n            $.each(me.evaluacion.areas, function(key, value){\r\n              $.each(value[0].asignaturas, function(keyA, valueA){\r\n                  $.each(valueA[0].preguntas, function(keyP, valueP){\r\n                      cant_preguntas++\r\n                  })\r\n              })\r\n            })\r\n              // todas las preguntas tienen una duracion de 3 minutos\r\n              var n = (cant_preguntas * 3) * 60;\r\n              me.tiempo_evaluacion = n\r\n              x = setInterval(function() {\r\n                n--;\r\n                var now = n * 1000;\r\n                var distance = n + now;\r\n                var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\r\n                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));\r\n                var seconds = Math.floor((distance % (1000 * 60)) / 1000);\r\n                $(\".reloj\").html(hours + \" : \" + minutes + \" : \" + seconds + \"\");\r\n                if (distance < 60000) {\r\n                    $(\".reloj\").css('color', '#FB2452');\r\n                }\r\n                if (distance < 0) {\r\n                    $(\".reloj\").html(\"Fin del tiempo\");\r\n                    me.finalizarEvaluacion()\r\n                }\r\n              }, 1000);\r\n            },\r\n            openConfirmFinalizar() {\r\n              this.$vs.dialog({\r\n                type: 'confirm',\r\n                color: 'warning',\r\n                title: `¿Está seguro de finalizar esta evaluación?`,\r\n                text: 'Sus respuestas serán enviadas para calificar.',\r\n                accept: this.finalizarEvaluacion,\r\n                acceptText: 'Aceptar',\r\n                cancelText:'Cancelar'\r\n              })\r\n            },\r\n            finalizarEvaluacion(){\r\n              let me = this\r\n              let id_usuario_eval = me.usuario.idusuario\r\n              if( localStorage.idusuario_evaluacion_salle ){\r\n                id_usuario_eval = localStorage.idusuario_evaluacion_salle\r\n              }\r\n              let data_finalizar = {\r\n                id_evaluacion: me.id_evaluacion,\r\n                id_usuario: id_usuario_eval\r\n              }\r\n              me.$vs.loading()\r\n              me.$http.post(this.$server_url+'salle_finalizarEvaluacion', data_finalizar)\r\n              .then(res => {\r\n                me.color_overlay = '#90ABF3'\r\n                me.text_overlay = 'Estamos calificando su evaluación, pronto podrá ver sus resultados.'\r\n                location.reload()\r\n              })\r\n              .catch(function (error) {\r\n                me.$vs.loading.close()\r\n                console.log(error);\r\n              })\r\n            },\r\n            obtener_evaluacion(){\r\n              let me = this\r\n              me.revision_activa = true\r\n              me.evaluacion_activa = 1\r\n              me.color_overlay = '#22c16b'\r\n              me.text_overlay = 'Estamos cargando su evaluación resuelta ...'\r\n              me.$vs.loading({ background: me.color_overlay, color: 'rgb(255, 255, 255)',  type: 'sound', text: me.text_overlay })\r\n              let id_usuario_eval = me.usuario.idusuario\r\n              if( localStorage.idusuario_evaluacion_salle ){\r\n                id_usuario_eval = localStorage.idusuario_evaluacion_salle\r\n              }\r\n              me.$http.get(this.$server_url+'obtener_evaluacion_salle/'+ me.id_evaluacion + '/' + id_usuario_eval +'/'+localStorage.EvaluacionSelectSalle)\r\n              .then(res => {\r\n                  me.evaluacion = res.data\r\n                  let calificacion = 0\r\n                  let calificacion_preg = 0\r\n                  let cant_asignaturas = 0\r\n                  let cant_areas = 0\r\n                  let calificacion_pregunta = 0\r\n                  let cant_preguntas = 0\r\n                  let puntaje_preguntas = 0\r\n                  let calificacion_asignatura = 0\r\n                  let calificacion_areas = 0\r\n                  /// ERROR EN CALCULO AQUI XQ NO ESTA CONSIDERNADO LOS VALORES NEGATIVOS COMO EN EL CONTROLADOR DE LOS REPORTES\r\n                  $.each(me.evaluacion.areas, function(key, value){\r\n                    cant_areas++\r\n                    $.each(value[0].asignaturas, function(keyA, valueA){\r\n                      cant_asignaturas++\r\n                      $.each(valueA[0].preguntas, function(keyP, valueP){\r\n                        cant_preguntas++\r\n                        puntaje_preguntas += valueP.pregunta.puntaje_pregunta\r\n                        $.each(valueP.respuestas, function(keyRes, valueRes){\r\n                          calificacion_preg = calificacion_preg + valueRes.puntaje\r\n                        })\r\n                        if( calificacion_preg >= 0 && calificacion_preg <= valueP.pregunta.puntaje_pregunta ){\r\n                        }else{\r\n                          if( valueP.pregunta.id_tipo_pregunta != 1 ){\r\n                            calificacion_preg = valueP.pregunta.puntaje_pregunta\r\n                          }else{\r\n                            calificacion_preg = 0\r\n                          }\r\n                        }\r\n                        calificacion_pregunta += calificacion_preg\r\n                        calificacion_preg = 0\r\n                      })\r\n                    })\r\n                    calificacion_areas += ((calificacion_pregunta*100)/puntaje_preguntas)\r\n                    calificacion_pregunta = 0\r\n                    puntaje_preguntas = 0\r\n                    calificacion_asignatura = 0\r\n                    cant_asignaturas = 0\r\n                  })\r\n                  me.calificacion = (calificacion_areas/cant_areas).toFixed(2)\r\n                  me.$vs.loading.close()\r\n              })\r\n              .catch(function (error) {\r\n                  me.$vs.loading.close()\r\n                  console.log(error);\r\n              })\r\n            },\r\n            paginacion(index, tam, asign_content){\r\n              let me = this;\r\n              for( let i=1; i<=tam; i++ ){\r\n                  $('#'+asign_content+''+i).css('display', 'none')\r\n              }\r\n              $('#'+asign_content+''+me.current_preg[index]).css('display', 'block')\r\n            }\r\n        },\r\n    }\r\n</script>\r\n"]}]}